/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{0:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return use}));var r=function(template,style,script,t,e,n,r,o,c,l){"boolean"!=typeof r&&(c=o,o=r,r=!1);var h,d="function"==typeof script?script.options:script;if(template&&template.render&&(d.render=template.render,d.staticRenderFns=template.staticRenderFns,d._compiled=!0,e&&(d.functional=!0)),t&&(d._scopeId=t),n?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),style&&style.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(n)},d._ssrRegister=h):style&&(h=r?function(){style.call(this,l(this.$root.$options.shadowRoot))}:function(t){style.call(this,o(t))}),h)if(d.functional){var f=d.render;d.render=function(t,e){return h.call(e),f(t,e)}}else{var m=d.beforeCreate;d.beforeCreate=m?[].concat(m,h):[h]}return script},use=function(t){"undefined"!=typeof window&&window.Vue&&window.Vue.use(t)},o=function(t,component){t.component(component.name,component)},c=function(t,e,component){t.prototype.$buefy||(t.prototype.$buefy={}),t.prototype.$buefy[e]=component}},1:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return l}));var r,o={defaultContainerElement:null,defaultIconPack:"mdi",defaultIconComponent:null,defaultIconPrev:"chevron-left",defaultIconNext:"chevron-right",defaultDialogConfirmText:null,defaultDialogCancelText:null,defaultSnackbarDuration:3500,defaultSnackbarPosition:null,defaultToastDuration:2e3,defaultToastPosition:null,defaultNotificationDuration:2e3,defaultNotificationPosition:null,defaultTooltipType:"is-primary",defaultTooltipAnimated:!1,defaultTooltipDelay:0,defaultInputAutocomplete:"on",defaultDateFormatter:null,defaultDateParser:null,defaultDateCreator:null,defaultTimeCreator:null,defaultDayNames:null,defaultMonthNames:null,defaultFirstDayOfWeek:null,defaultUnselectableDaysOfWeek:null,defaultTimeFormatter:null,defaultTimeParser:null,defaultModalCanCancel:["escape","x","outside","button"],defaultModalScroll:null,defaultDatepickerMobileNative:!0,defaultTimepickerMobileNative:!0,defaultNoticeQueue:!0,defaultInputHasCounter:!0,defaultTaginputHasCounter:!0,defaultUseHtml5Validation:!0,defaultDropdownMobileModal:!0,defaultFieldLabelPosition:null,defaultDatepickerYearsRange:[-100,3],defaultDatepickerNearbyMonthDays:!0,defaultDatepickerNearbySelectableMonthDays:!1,defaultDatepickerShowWeekNumber:!1,defaultDatepickerMobileModal:!0,defaultTrapFocus:!1,defaultButtonRounded:!1,defaultCarouselInterval:3500,customIconPacks:null},c=function(t){o=t},l=function(t){r=t}},10:function(t,e,n){"use strict";n.r(e),n.d(e,"createDecorator",(function(){return h})),n.d(e,"mixins",(function(){return d}));var r=n(4),o="undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys;function c(t,e,n){(n?Reflect.getOwnMetadataKeys(e,n):Reflect.getOwnMetadataKeys(e)).forEach((function(r){var o=n?Reflect.getOwnMetadata(r,e,n):Reflect.getOwnMetadata(r,e);n?Reflect.defineMetadata(r,o,t,n):Reflect.defineMetadata(r,o,t)}))}var l={__proto__:[]}instanceof Array;function h(t){return function(e,n,r){var o="function"==typeof e?e:e.constructor;o.__decorators__||(o.__decorators__=[]),"number"!=typeof r&&(r=void 0),o.__decorators__.push((function(e){return t(e,n,r)}))}}function d(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.default.extend({mixins:t})}var f=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function m(t,e){void 0===e&&(e={}),e.name=e.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(t){if("constructor"!==t)if(f.indexOf(t)>-1)e[t]=n[t];else{var r=Object.getOwnPropertyDescriptor(n,t);void 0!==r.value?"function"==typeof r.value?(e.methods||(e.methods={}))[t]=r.value:(e.mixins||(e.mixins=[])).push({data:function(){var e;return(e={})[t]=r.value,e}}):(r.get||r.set)&&((e.computed||(e.computed={}))[t]={get:r.get,set:r.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return function(t,e){var n=e.prototype._init;e.prototype._init=function(){var e=this,n=Object.getOwnPropertyNames(t);if(t.$options.props)for(var r in t.$options.props)t.hasOwnProperty(r)||n.push(r);n.forEach((function(n){"_"!==n.charAt(0)&&Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0})}))};var data=new e;e.prototype._init=n;var r={};return Object.keys(data).forEach((function(t){void 0!==data[t]&&(r[t]=data[t])})),r}(this,t)}});var h=t.__decorators__;h&&(h.forEach((function(t){return t(e)})),delete t.__decorators__);var d,m,y=Object.getPrototypeOf(t.prototype),w=y instanceof r.default?y.constructor:r.default,S=w.extend(e);return function(t,e,n){Object.getOwnPropertyNames(e).forEach((function(r){if(!v[r]){var o=Object.getOwnPropertyDescriptor(t,r);if(!o||o.configurable){var c,h,d=Object.getOwnPropertyDescriptor(e,r);if(!l){if("cid"===r)return;var f=Object.getOwnPropertyDescriptor(n,r);if(c=d.value,h=typeof c,null!=c&&("object"===h||"function"===h)&&f&&f.value===d.value)return}0,Object.defineProperty(t,r,d)}}}))}(S,t,w),o&&(c(d=S,m=t),Object.getOwnPropertyNames(m.prototype).forEach((function(t){c(d.prototype,m.prototype,t)})),Object.getOwnPropertyNames(m).forEach((function(t){c(d,m,t)}))),S}var v={prototype:!0,arguments:!0,callee:!0,caller:!0};function y(t){return"function"==typeof t?m(t):function(e){return m(e,t)}}y.registerHooks=function(t){f.push.apply(f,t)},e.default=y},11:function(t,e,n){"use strict";function r(t,source){for(var e=function(e){Object.defineProperty(t,e,{get:function(){return source[e]}})},n=0,r=Object.keys(source||{});n<r.length;n++){e(r[n])}}function o(t){if(!t._vmdModuleName)throw new Error("ERR_GET_MODULE_NAME : Could not get module accessor.\n      Make sure your module has name, we can't make accessors for unnamed modules\n      i.e. @Module({ name: 'something' })");return"vuexModuleDecorators/"+t._vmdModuleName}n.d(e,"a",(function(){return S})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return T})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return l}));var c=function(t){this.actions=t.actions,this.mutations=t.mutations,this.state=t.state,this.getters=t.getters,this.namespaced=t.namespaced,this.modules=t.modules};function l(t,e){var n=o(t);if(e&&e.getters[n])return e.getters[n];if(t._statics)return t._statics;var r=t._genStatic;if(!r)throw new Error("ERR_GET_MODULE_NO_STATICS : Could not get module accessor.\n      Make sure your module has name, we can't make accessors for unnamed modules\n      i.e. @Module({ name: 'something' })");var c=r(e);return e?e.getters[n]=c:t._statics=c,c}var h=["actions","getters","mutations","modules","state","namespaced","commit"];function d(t,e,n,r){return new(n||(n=Promise))((function(o,c){function l(t){try{d(r.next(t))}catch(t){c(t)}}function h(t){try{d(r.throw(t))}catch(t){c(t)}}function d(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(l,h)}d((r=r.apply(t,e||[])).next())}))}function f(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}function m(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function v(t){return function(e){var n=e,o=function(){return function(t){var e=new t.prototype.constructor({}),s={};return Object.keys(e).forEach((function(t){if(-1===h.indexOf(t))e.hasOwnProperty(t)&&"function"!=typeof e[t]&&(s[t]=e[t]);else if(void 0!==e[t])throw new Error("ERR_RESERVED_STATE_KEY_USED: You cannot use the following\n        ['actions', 'getters', 'mutations', 'modules', 'state', 'namespaced', 'commit']\n        as fields in your module. These are reserved as they have special purpose in Vuex")})),s}(n)};n.state||(n.state=t&&t.stateFactory?o:o()),n.getters||(n.getters={}),n.namespaced||(n.namespaced=t&&t.namespaced),Object.getOwnPropertyNames(n.prototype).forEach((function(t){var e=Object.getOwnPropertyDescriptor(n.prototype,t);e.get&&n.getters&&(n.getters[t]=function(t,n,o,c){var l={context:{state:t,getters:n,rootState:o,rootGetters:c}};return r(l,t),r(l,n),e.get.call(l)})}));var c=t;return c.name&&(Object.defineProperty(e,"_genStatic",{value:function(t){var e={store:t||c.store};if(!e.store)throw new Error("ERR_STORE_NOT_PROVIDED: To use getModule(), either the module\n            should be decorated with store in decorator, i.e. @Module({store: store}) or\n            store should be passed when calling getModule(), i.e. getModule(MyModule, this.$store)");return function(t,e,n){var r=e.stateFactory?t.state():t.state;Object.keys(r).forEach((function(t){r.hasOwnProperty(t)&&-1===["undefined","function"].indexOf(typeof r[t])&&Object.defineProperty(n,t,{get:function(){return n.store.state[e.name][t]}})}))}(n,c,e),n.getters&&function(t,e,n){Object.keys(t.getters).forEach((function(r){t.namespaced?Object.defineProperty(n,r,{get:function(){return n.store.getters[e.name+"/"+r]}}):Object.defineProperty(n,r,{get:function(){return n.store.getters[r]}})}))}(n,c,e),n.mutations&&function(t,e,n){Object.keys(t.mutations).forEach((function(r){t.namespaced?n[r]=function(){for(var t,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];(t=n.store).commit.apply(t,m([e.name+"/"+r],o))}:n[r]=function(){for(var t,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];(t=n.store).commit.apply(t,m([r],e))}}))}(n,c,e),n.actions&&function(t,e,n){Object.keys(t.actions).forEach((function(r){t.namespaced?n[r]=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return d(this,void 0,void 0,(function(){var o;return f(this,(function(c){return[2,(o=n.store).dispatch.apply(o,m([e.name+"/"+r],t))]}))}))}:n[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return d(this,void 0,void 0,(function(){var e;return f(this,(function(o){return[2,(e=n.store).dispatch.apply(e,m([r],t))]}))}))}}))}(n,c,e),e}}),Object.defineProperty(e,"_vmdModuleName",{value:c.name})),c.dynamic&&function(t,e){if(!e.name)throw new Error("Name of module not provided in decorator options");if(!e.store)throw new Error("Store not provided in decorator options when using dynamic option");e.store.registerModule(e.name,t,{preserveState:e.preserveState||!1})}(n,c),e}}function y(t){if("function"!=typeof t)return v(t);v({})(t)}function w(t){var e=t||{},n=e.commit,c=void 0===n?void 0:n,h=e.rawError,m=void 0!==h&&h,v=e.root,y=void 0!==v&&v;return function(t,e,n){var h=t.constructor;h.hasOwnProperty("actions")||(h.actions=Object.assign({},h.actions));var v=n.value,w=function(t,n){return d(this,void 0,void 0,(function(){var d,y,w,S,T;return f(this,(function(f){switch(f.label){case 0:return f.trys.push([0,5,,6]),d=null,h._genStatic?(y=o(h),(w=t.rootGetters[y]?t.rootGetters[y]:l(h)).context=t,[4,v.call(w,n)]):[3,2];case 1:return d=f.sent(),[3,4];case 2:return r(S={context:t},t.state),r(S,t.getters),[4,v.call(S,n)];case 3:d=f.sent(),f.label=4;case 4:return c&&t.commit(c,d),[2,d];case 5:throw T=f.sent(),m?T:new Error('ERR_ACTION_ACCESS_UNDEFINED: Are you trying to access this.someMutation() or this.someGetter inside an @Action? \nThat works only in dynamic modules. \nIf not dynamic use this.context.commit("mutationName", payload) and this.context.getters["getterName"]\n'+new Error("Could not perform action "+e.toString()).stack+"\n"+T.stack);case 6:return[2]}}))}))};h.actions[e]=y?{root:y,handler:w}:w}}function S(t,e,n){if(!e&&!n)return w(t);w()(t,e,n)}function T(t,e,n){var r=t.constructor;r.hasOwnProperty("mutations")||(r.mutations=Object.assign({},r.mutations));var o=n.value;r.mutations[e]=function(t,e){o.call(t,e)}}},117:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(38),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},c=function(t,e){if(!t)throw l(e)},l=function(t){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},h=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):55296==(64512&n)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++i)),e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(input,t){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[],i=0;i<input.length;i+=3){var n=input[i],r=i+1<input.length,o=r?input[i+1]:0,c=i+2<input.length,l=c?input[i+2]:0,h=n>>2,d=(3&n)<<4|o>>4,f=(15&o)<<2|l>>6,m=63&l;c||(m=64,r||(f=64)),output.push(e[h],e[d],e[f],e[m])}return output.join("")},encodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(input):this.encodeByteArray(h(input),t)},decodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(input):function(t){for(var e=[],n=0,r=0;n<t.length;){var o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){var c=t[n++];e[r++]=String.fromCharCode((31&o)<<6|63&c)}else if(o>239&&o<365){var u=((7&o)<<18|(63&(c=t[n++]))<<12|(63&(l=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{c=t[n++];var l=t[n++];e[r++]=String.fromCharCode((15&o)<<12|(63&c)<<6|63&l)}}return e.join("")}(this.decodeStringToByteArray(input,t))},decodeStringToByteArray:function(input,t){this.init_();for(var e=t?this.charToByteMapWebSafe_:this.charToByteMap_,output=[],i=0;i<input.length;){var n=e[input.charAt(i++)],r=i<input.length?e[input.charAt(i)]:0,o=++i<input.length?e[input.charAt(i)]:64,c=++i<input.length?e[input.charAt(i)]:64;if(++i,null==n||null==r||null==o||null==c)throw Error();var l=n<<2|r>>4;if(output.push(l),64!==o){var h=r<<4&240|o>>2;if(output.push(h),64!==c){var d=o<<6&192|c;output.push(d)}}}return output},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},f=function(t){try{return d.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function m(t,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return source}for(var e in source)source.hasOwnProperty(e)&&(t[e]=m(t[e],source[e]));return t}var v=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var w="FirebaseError",S=function(t){function e(code,n){var r=t.call(this,n)||this;return r.code=code,r.name=w,Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,T.prototype.create),r}return r.__extends(e,t),e}(Error),T=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(code){for(var data=[],t=1;t<arguments.length;t++)data[t-1]=arguments[t];for(var e=data[0]||{},n=this.service+"/"+code,template=this.errors[code],r=template?_(template,e):"Error",o=this.serviceName+": "+r+" ("+n+").",c=new S(n,o),l=0,h=Object.keys(e);l<h.length;l++){var d=h[l];"_"!==d.slice(-1)&&(d in c&&console.warn('Overwriting FirebaseError base field "'+d+'" can cause unexpected behavior.'),c[d]=e[d])}return c},t}();function _(template,data){return template.replace(C,(function(t,e){var n=data[e];return null!=n?n.toString():"<"+e+"?>"}))}var C=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}var E=function(t){var header={},e={},data={},n="";try{var r=t.split(".");header=I(f(r[0])||""),e=I(f(r[1])||""),n=r[2],data=e.d||{},delete e.d}catch(t){}return{header:header,claims:e,data:data,signature:n}};var k=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,c,a=this.chain_[0],b=this.chain_[1],l=this.chain_[2],h=this.chain_[3],d=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=h^b&(l^h),c=1518500249):(o=b^l^h,c=1859775393):i<60?(o=b&l|h&(b|l),c=2400959708):(o=b^l^h,c=3395469782);r=(a<<5|a>>>27)+o+d+c+n[i]&4294967295;d=h,h=l,l=4294967295&(b<<30|b>>>2),b=a,a=r}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,o=this.buf_,c=this.inbuf_;r<e;){if(0===c)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(o[c]=t.charCodeAt(r),++r,++c===this.blockSize){this.compress_(o),c=0;break}}else for(;r<e;)if(o[c]=t[r],++r,++c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)t[n]=this.chain_[i]>>r&255,++n;return t},t}();var D=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o in t&&"function"==typeof t[o])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}})),this.observers.push(r),c},t.prototype.unsubscribeOne=function(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var i=0;i<this.observers.length;i++)this.sendOne(i,t)},t.prototype.sendOne=function(i,t){var e=this;this.task.then((function(){if(void 0!==e.observers&&void 0!==e.observers[i])try{t(e.observers[i])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function A(){}function N(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=t+" failed: ";return o+=r+" argument "}e.CONSTANTS=o,e.Deferred=v,e.ErrorFactory=T,e.FirebaseError=S,e.Sha1=k,e.assert=c,e.assertionError=l,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=d,e.base64Decode=f,e.base64Encode=function(t){var e=h(t);return d.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new D(t,e);return n.subscribe.bind(n)},e.decode=E,e.deepCopy=function(t){return m(void 0,t)},e.deepExtend=m,e.errorPrefix=N,e.getUA=y,e.isAdmin=function(t){var e=E(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return y().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=y();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return y().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=E(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=E(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,o=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),o=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!o&&n>=r&&n<=o},e.issuedAtTime=function(t){var e=E(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=I,e.map=function(t,e,n){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,o=Object.entries(t);r<o.length;r++){var c=o[r];n(c[0],c[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var p=0,i=0;i<t.length;i++){var e=t.charCodeAt(i);e<128?p++:e<2048?p+=2:e>=55296&&e<=56319?(p+=4,i++):p+=3}return p},e.stringToByteArray=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n>=55296&&n<=56319){var r=n-55296;i++,c(i<t.length,"Surrogate pair missing trail surrogate."),n=65536+(r<<10)+(t.charCodeAt(i)-56320)}n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):n<65536?(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},e.stringify=function(data){return JSON.stringify(data)},e.validateArgCount=function(t,e,n,r){var o;if(r<e?o="at least "+e:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(N(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(N(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(N(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(19))},118:function(t,e,n){"use strict";function r(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return d})),n.d(e,"setLogLevel",(function(){return f}));var o,c=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var l=o.INFO,h=function(t,e){for(var n=[],c=2;c<arguments.length;c++)n[c-2]=arguments[c];if(!(e<t.logLevel)){var l=(new Date).toISOString();switch(e){case o.DEBUG:case o.VERBOSE:console.log.apply(console,r(["["+l+"]  "+t.name+":"],n));break;case o.INFO:console.info.apply(console,r(["["+l+"]  "+t.name+":"],n));break;case o.WARN:console.warn.apply(console,r(["["+l+"]  "+t.name+":"],n));break;case o.ERROR:console.error.apply(console,r(["["+l+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},d=function(){function t(t){this.name=t,this._logLevel=l,this._logHandler=h,c.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){c.forEach((function(e){e.logLevel=t}))}},119:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(38),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},c=function(t,e){if(!t)throw l(e)},l=function(t){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},h=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):55296==(64512&n)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++i)),e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(input,t){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[],i=0;i<input.length;i+=3){var n=input[i],r=i+1<input.length,o=r?input[i+1]:0,c=i+2<input.length,l=c?input[i+2]:0,h=n>>2,d=(3&n)<<4|o>>4,f=(15&o)<<2|l>>6,m=63&l;c||(m=64,r||(f=64)),output.push(e[h],e[d],e[f],e[m])}return output.join("")},encodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(input):this.encodeByteArray(h(input),t)},decodeString:function(input,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(input):function(t){for(var e=[],n=0,r=0;n<t.length;){var o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){var c=t[n++];e[r++]=String.fromCharCode((31&o)<<6|63&c)}else if(o>239&&o<365){var u=((7&o)<<18|(63&(c=t[n++]))<<12|(63&(l=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{c=t[n++];var l=t[n++];e[r++]=String.fromCharCode((15&o)<<12|(63&c)<<6|63&l)}}return e.join("")}(this.decodeStringToByteArray(input,t))},decodeStringToByteArray:function(input,t){this.init_();for(var e=t?this.charToByteMapWebSafe_:this.charToByteMap_,output=[],i=0;i<input.length;){var n=e[input.charAt(i++)],r=i<input.length?e[input.charAt(i)]:0,o=++i<input.length?e[input.charAt(i)]:64,c=++i<input.length?e[input.charAt(i)]:64;if(++i,null==n||null==r||null==o||null==c)throw Error();var l=n<<2|r>>4;if(output.push(l),64!==o){var h=r<<4&240|o>>2;if(output.push(h),64!==c){var d=o<<6&192|c;output.push(d)}}}return output},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},f=function(t){try{return d.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function m(t,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return source}for(var e in source)source.hasOwnProperty(e)&&(t[e]=m(t[e],source[e]));return t}var v=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var w="FirebaseError",S=function(t){function e(code,n){var r=t.call(this,n)||this;return r.code=code,r.name=w,Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,T.prototype.create),r}return r.__extends(e,t),e}(Error),T=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(code){for(var data=[],t=1;t<arguments.length;t++)data[t-1]=arguments[t];for(var e=data[0]||{},n=this.service+"/"+code,template=this.errors[code],r=template?_(template,e):"Error",o=this.serviceName+": "+r+" ("+n+").",c=new S(n,o),l=0,h=Object.keys(e);l<h.length;l++){var d=h[l];"_"!==d.slice(-1)&&(d in c&&console.warn('Overwriting FirebaseError base field "'+d+'" can cause unexpected behavior.'),c[d]=e[d])}return c},t}();function _(template,data){return template.replace(C,(function(t,e){var n=data[e];return null!=n?n.toString():"<"+e+"?>"}))}var C=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}var E=function(t){var header={},e={},data={},n="";try{var r=t.split(".");header=I(f(r[0])||""),e=I(f(r[1])||""),n=r[2],data=e.d||{},delete e.d}catch(t){}return{header:header,claims:e,data:data,signature:n}};var k=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,c,a=this.chain_[0],b=this.chain_[1],l=this.chain_[2],h=this.chain_[3],d=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=h^b&(l^h),c=1518500249):(o=b^l^h,c=1859775393):i<60?(o=b&l|h&(b|l),c=2400959708):(o=b^l^h,c=3395469782);r=(a<<5|a>>>27)+o+d+c+n[i]&4294967295;d=h,h=l,l=4294967295&(b<<30|b>>>2),b=a,a=r}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,o=this.buf_,c=this.inbuf_;r<e;){if(0===c)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(o[c]=t.charCodeAt(r),++r,++c===this.blockSize){this.compress_(o),c=0;break}}else for(;r<e;)if(o[c]=t[r],++r,++c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&e,e/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)t[n]=this.chain_[i]>>r&255,++n;return t},t}();var D=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o in t&&"function"==typeof t[o])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}})),this.observers.push(r),c},t.prototype.unsubscribeOne=function(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var i=0;i<this.observers.length;i++)this.sendOne(i,t)},t.prototype.sendOne=function(i,t){var e=this;this.task.then((function(){if(void 0!==e.observers&&void 0!==e.observers[i])try{t(e.observers[i])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function A(){}function N(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=t+" failed: ";return o+=r+" argument "}e.CONSTANTS=o,e.Deferred=v,e.ErrorFactory=T,e.FirebaseError=S,e.Sha1=k,e.assert=c,e.assertionError=l,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=d,e.base64Decode=f,e.base64Encode=function(t){var e=h(t);return d.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new D(t,e);return n.subscribe.bind(n)},e.decode=E,e.deepCopy=function(t){return m(void 0,t)},e.deepExtend=m,e.errorPrefix=N,e.getUA=y,e.isAdmin=function(t){var e=E(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return y().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=y();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return y().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=E(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=E(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,o=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),o=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!o&&n>=r&&n<=o},e.issuedAtTime=function(t){var e=E(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=I,e.map=function(t,e,n){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,o=Object.entries(t);r<o.length;r++){var c=o[r];n(c[0],c[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var p=0,i=0;i<t.length;i++){var e=t.charCodeAt(i);e<128?p++:e<2048?p+=2:e>=55296&&e<=56319?(p+=4,i++):p+=3}return p},e.stringToByteArray=function(t){for(var e=[],p=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n>=55296&&n<=56319){var r=n-55296;i++,c(i<t.length,"Surrogate pair missing trail surrogate."),n=65536+(r<<10)+(t.charCodeAt(i)-56320)}n<128?e[p++]=n:n<2048?(e[p++]=n>>6|192,e[p++]=63&n|128):n<65536?(e[p++]=n>>12|224,e[p++]=n>>6&63|128,e[p++]=63&n|128):(e[p++]=n>>18|240,e[p++]=n>>12&63|128,e[p++]=n>>6&63|128,e[p++]=63&n|128)}return e},e.stringify=function(data){return JSON.stringify(data)},e.validateArgCount=function(t,e,n,r){var o;if(r<e?o="at least "+e:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(N(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(N(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(N(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(19))},121:function(t,e,n){"use strict";var r=n(3),o=n(1),c=n(0),l=n(2),h={props:{size:String,expanded:Boolean,loading:Boolean,rounded:Boolean,icon:String,iconPack:String,autocomplete:String,maxlength:[Number,String],useHtml5Validation:{type:Boolean,default:function(){return o.c.defaultUseHtml5Validation}},validationMessage:String},data:function(){return{isValid:!0,isFocused:!1,newIconPack:this.iconPack||o.c.defaultIconPack}},computed:{parentField:function(){for(var t=this.$parent,i=0;i<3;i++)t&&!t.$data._isField&&(t=t.$parent);return t},statusType:function(){if(this.parentField&&this.parentField.newType){if("string"==typeof this.parentField.newType)return this.parentField.newType;for(var t in this.parentField.newType)if(this.parentField.newType[t])return t}},statusMessage:function(){if(this.parentField)return this.parentField.newMessage},iconSize:function(){switch(this.size){case"is-small":return this.size;case"is-medium":return;case"is-large":return"mdi"===this.newIconPack?"is-medium":""}}},methods:{focus:function(){var t=this;void 0!==this.$data._elementRef&&this.$nextTick((function(){var e=t.$el.querySelector(t.$data._elementRef);e&&e.focus()}))},onBlur:function(t){this.isFocused=!1,this.$emit("blur",t),this.checkHtml5Validity()},onFocus:function(t){this.isFocused=!0,this.$emit("focus",t)},getElement:function(){return this.$el.querySelector(this.$data._elementRef)},setInvalid:function(){var t=this.validationMessage||this.getElement().validationMessage;this.setValidity("is-danger",t)},setValidity:function(t,e){var n=this;this.$nextTick((function(){n.parentField&&(n.parentField.type||(n.parentField.newType=t),n.parentField.message||(n.parentField.newMessage=e))}))},checkHtml5Validity:function(){if(this.useHtml5Validation&&void 0!==this.$refs[this.$data._elementRef])return this.getElement().checkValidity()?(this.setValidity(null,null),this.isValid=!0):(this.setInvalid(),this.isValid=!1),this.isValid}}},d={sizes:{default:"mdi-24px","is-small":null,"is-medium":"mdi-36px","is-large":"mdi-48px"},iconPrefix:"mdi-"},f=function(){var t=o.c&&o.c.defaultIconComponent?"":"fa-";return{sizes:{default:t+"lg","is-small":null,"is-medium":t+"2x","is-large":t+"3x"},iconPrefix:t,internalIcons:{information:"info-circle",alert:"exclamation-triangle","alert-circle":"exclamation-circle","chevron-right":"angle-right","chevron-left":"angle-left","chevron-down":"angle-down","eye-off":"eye-slash","menu-down":"caret-down","menu-up":"caret-up"}}};const m={name:"BIcon",props:{type:[String,Object],component:String,pack:String,icon:String,size:String,customSize:String,customClass:String,both:Boolean},computed:{iconConfig:function(){var t;return(t={mdi:d,fa:f(),fas:f(),far:f(),fad:f(),fab:f(),fal:f()},o.c&&o.c.customIconPacks&&(t=Object(r.d)(t,o.c.customIconPacks,!0)),t)[this.newPack]},iconPrefix:function(){return this.iconConfig&&this.iconConfig.iconPrefix?this.iconConfig.iconPrefix:""},newIcon:function(){return"".concat(this.iconPrefix).concat(this.getEquivalentIconOf(this.icon))},newPack:function(){return this.pack||o.c.defaultIconPack},newType:function(){if(this.type){var t=[];if("string"==typeof this.type)t=this.type.split("-");else for(var e in this.type)if(this.type[e]){t=e.split("-");break}if(!(t.length<=1))return"has-text-".concat(t[1])}},newCustomSize:function(){return this.customSize||this.customSizeByPack},customSizeByPack:function(){if(this.iconConfig&&this.iconConfig.sizes){if(this.size&&void 0!==this.iconConfig.sizes[this.size])return this.iconConfig.sizes[this.size];if(this.iconConfig.sizes.default)return this.iconConfig.sizes.default}return null},useIconComponent:function(){return this.component||o.c.defaultIconComponent}},methods:{getEquivalentIconOf:function(t){return this.both&&this.iconConfig&&this.iconConfig.internalIcons&&this.iconConfig.internalIcons[t]?this.iconConfig.internalIcons[t]:t}}};var v=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"icon",class:[t.newType,t.size]},[t.useIconComponent?n(t.useIconComponent,{tag:"component",class:[t.customClass],attrs:{icon:[t.newPack,t.newIcon],size:t.newCustomSize}}):n("i",{class:[t.newPack,t.newIcon,t.newCustomSize,t.customClass]})],1)},staticRenderFns:[]},void 0,m,void 0,!1,void 0,void 0,void 0);const y={name:"BInput",components:Object(l.a)({},v.name,v),mixins:[h],inheritAttrs:!1,props:{value:[Number,String],type:{type:String,default:"text"},passwordReveal:Boolean,iconClickable:Boolean,hasCounter:{type:Boolean,default:function(){return o.c.defaultInputHasCounter}},customClass:{type:String,default:""}},data:function(){return{newValue:this.value,newType:this.type,newAutocomplete:this.autocomplete||o.c.defaultInputAutocomplete,isPasswordVisible:!1,_elementRef:"textarea"===this.type?"textarea":"input"}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){this.newValue=t,this.$emit("input",t),!this.isValid&&this.checkHtml5Validity()}},rootClasses:function(){return[this.iconPosition,this.size,{"is-expanded":this.expanded,"is-loading":this.loading,"is-clearfix":!this.hasMessage}]},inputClasses:function(){return[this.statusType,this.size,{"is-rounded":this.rounded}]},hasIconRight:function(){return this.passwordReveal||this.loading||this.statusTypeIcon},iconPosition:function(){return this.icon&&this.hasIconRight?"has-icons-left has-icons-right":!this.icon&&this.hasIconRight?"has-icons-right":this.icon?"has-icons-left":void 0},statusTypeIcon:function(){switch(this.statusType){case"is-success":return"check";case"is-danger":return"alert-circle";case"is-info":return"information";case"is-warning":return"alert"}},hasMessage:function(){return!!this.statusMessage},passwordVisibleIcon:function(){return this.isPasswordVisible?"eye-off":"eye"},valueLength:function(){return"string"==typeof this.computedValue?this.computedValue.length:"number"==typeof this.computedValue?this.computedValue.toString().length:0}},watch:{value:function(t){this.newValue=t}},methods:{togglePasswordVisibility:function(){var t=this;this.isPasswordVisible=!this.isPasswordVisible,this.newType=this.isPasswordVisible?"text":"password",this.$nextTick((function(){t.$refs.input.focus()}))},onInput:function(t){var e=this;this.$nextTick((function(){t.target&&(e.computedValue=t.target.value)}))},iconClick:function(t){var e=this;this.$emit("icon-click",t),this.$nextTick((function(){e.$refs.input.focus()}))}}};var w=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control",class:t.rootClasses},["textarea"!==t.type?n("input",t._b({ref:"input",staticClass:"input",class:[t.inputClasses,t.customClass],attrs:{type:t.newType,autocomplete:t.newAutocomplete,maxlength:t.maxlength},domProps:{value:t.computedValue},on:{input:t.onInput,blur:t.onBlur,focus:t.onFocus}},"input",t.$attrs,!1)):n("textarea",t._b({ref:"textarea",staticClass:"textarea",class:[t.inputClasses,t.customClass],attrs:{maxlength:t.maxlength},domProps:{value:t.computedValue},on:{input:t.onInput,blur:t.onBlur,focus:t.onFocus}},"textarea",t.$attrs,!1)),t._v(" "),t.icon?n("b-icon",{staticClass:"is-left",class:{"is-clickable":t.iconClickable},attrs:{icon:t.icon,pack:t.iconPack,size:t.iconSize},nativeOn:{click:function(e){return t.iconClick(e)}}}):t._e(),t._v(" "),t.loading||!t.passwordReveal&&!t.statusTypeIcon?t._e():n("b-icon",{staticClass:"is-right",class:{"is-clickable":t.passwordReveal},attrs:{icon:t.passwordReveal?t.passwordVisibleIcon:t.statusTypeIcon,pack:t.iconPack,size:t.iconSize,type:t.passwordReveal?"is-primary":t.statusType,both:""},nativeOn:{click:function(e){return t.togglePasswordVisibility(e)}}}),t._v(" "),t.maxlength&&t.hasCounter&&"number"!==t.type?n("small",{staticClass:"help counter",class:{"is-invisible":!t.isFocused}},[t._v("\r\n            "+t._s(t.valueLength)+" / "+t._s(t.maxlength)+"\r\n        ")]):t._e()],1)},staticRenderFns:[]},void 0,y,void 0,!1,void 0,void 0,void 0);const S={name:"BAutocomplete",components:Object(l.a)({},w.name,w),mixins:[h],inheritAttrs:!1,props:{value:[Number,String],data:{type:Array,default:function(){return[]}},field:{type:String,default:"value"},keepFirst:Boolean,clearOnSelect:Boolean,openOnFocus:Boolean,customFormatter:Function,checkInfiniteScroll:Boolean,keepOpen:Boolean},data:function(){return{selected:null,hovered:null,isActive:!1,newValue:this.value,newAutocomplete:this.autocomplete||"off",isListInViewportVertically:!0,hasFocus:!1,_isAutocomplete:!0,_elementRef:"input"}},computed:{whiteList:function(){var t=[];if(t.push(this.$refs.input.$el.querySelector("input")),t.push(this.$refs.dropdown),void 0!==this.$refs.dropdown){var e=this.$refs.dropdown.querySelectorAll("*"),n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var h=c.value;t.push(h)}}catch(t){r=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}}if(this.$parent.$data._isTaginput){t.push(this.$parent.$el);var d=this.$parent.$el.querySelectorAll("*"),f=!0,m=!1,v=void 0;try{for(var y,w=d[Symbol.iterator]();!(f=(y=w.next()).done);f=!0){var S=y.value;t.push(S)}}catch(t){m=!0,v=t}finally{try{f||null==w.return||w.return()}finally{if(m)throw v}}}return t},hasDefaultSlot:function(){return!!this.$scopedSlots.default},hasEmptySlot:function(){return!!this.$slots.empty},hasHeaderSlot:function(){return!!this.$slots.header},hasFooterSlot:function(){return!!this.$slots.footer}},watch:{isActive:function(t){var e=this;t?this.calcDropdownInViewportVertical():(this.$nextTick((function(){return e.setHovered(null)})),setTimeout((function(){e.calcDropdownInViewportVertical()}),100))},newValue:function(t){this.$emit("input",t);var e=this.getValue(this.selected);e&&e!==t&&this.setSelected(null,!1),!this.hasFocus||this.openOnFocus&&!t||(this.isActive=!!t)},value:function(t){this.newValue=t,!this.isValid&&this.$refs.input.checkHtml5Validity()},data:function(t){this.keepFirst&&this.selectFirstOption(t)}},methods:{setHovered:function(option){void 0!==option&&(this.hovered=option)},setSelected:function(option){var t=this,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];void 0!==option&&(this.selected=option,this.$emit("select",this.selected),null!==this.selected&&(this.newValue=this.clearOnSelect?"":this.getValue(this.selected)),e&&this.$nextTick((function(){t.isActive=!1})))},selectFirstOption:function(t){var e=this;this.$nextTick((function(){t.length?(e.openOnFocus||""!==e.newValue&&e.hovered!==t[0])&&e.setHovered(t[0]):e.setHovered(null)}))},enterPressed:function(){null!==this.hovered&&this.setSelected(this.hovered,!this.keepOpen)},tabPressed:function(){null!==this.hovered?this.setSelected(this.hovered,!this.keepOpen):this.isActive=!1},clickedOutside:function(t){this.whiteList.indexOf(t.target)<0&&(this.isActive=!1)},getValue:function(option){if(null!==option)return void 0!==this.customFormatter?this.customFormatter(option):"object"===Object(l.c)(option)?Object(r.a)(option,this.field):option},checkIfReachedTheEndOfScroll:function(t){t.clientHeight!==t.scrollHeight&&t.scrollTop+t.clientHeight>=t.scrollHeight&&this.$emit("infinite-scroll")},calcDropdownInViewportVertical:function(){var t=this;this.$nextTick((function(){if(void 0!==t.$refs.dropdown){var rect=t.$refs.dropdown.getBoundingClientRect();t.isListInViewportVertically=rect.top>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)}}))},keyArrows:function(t){var e="down"===t?1:-1;if(this.isActive){var n=this.data.indexOf(this.hovered)+e;n=(n=n>this.data.length-1?this.data.length:n)<0?0:n,this.setHovered(this.data[n]);var r=this.$refs.dropdown.querySelector(".dropdown-content"),element=r.querySelectorAll("a.dropdown-item:not(.is-disabled)")[n];if(!element)return;var o=r.scrollTop,c=r.scrollTop+r.clientHeight-element.clientHeight;element.offsetTop<o?r.scrollTop=element.offsetTop:element.offsetTop>=c&&(r.scrollTop=element.offsetTop-r.clientHeight+element.clientHeight)}else this.isActive=!0},focused:function(t){this.getValue(this.selected)===this.newValue&&this.$el.querySelector("input").select(),this.openOnFocus&&(this.isActive=!0,this.keepFirst&&this.selectFirstOption(this.data)),this.hasFocus=!0,this.$emit("focus",t)},onBlur:function(t){this.hasFocus=!1,this.$emit("blur",t)},onInput:function(t){var e=this.getValue(this.selected);e&&e===this.newValue||this.$emit("typing",this.newValue)}},created:function(){"undefined"!=typeof window&&(document.addEventListener("click",this.clickedOutside),window.addEventListener("resize",this.calcDropdownInViewportVertical))},mounted:function(){var t=this;if(this.checkInfiniteScroll&&this.$refs.dropdown&&this.$refs.dropdown.querySelector(".dropdown-content")){var e=this.$refs.dropdown.querySelector(".dropdown-content");e.addEventListener("scroll",(function(){return t.checkIfReachedTheEndOfScroll(e)}))}},beforeDestroy:function(){("undefined"!=typeof window&&(document.removeEventListener("click",this.clickedOutside),window.removeEventListener("resize",this.calcDropdownInViewportVertical)),this.checkInfiniteScroll&&this.$refs.dropdown&&this.$refs.dropdown.querySelector(".dropdown-content"))&&this.$refs.dropdown.querySelector(".dropdown-content").removeEventListener("scroll",this.checkIfReachedTheEndOfScroll)}};var T=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"autocomplete control",class:{"is-expanded":t.expanded}},[n("b-input",t._b({ref:"input",attrs:{type:"text",size:t.size,loading:t.loading,rounded:t.rounded,icon:t.icon,"icon-pack":t.iconPack,maxlength:t.maxlength,autocomplete:t.newAutocomplete,"use-html5-validation":t.useHtml5Validation},on:{input:t.onInput,focus:t.focused,blur:t.onBlur},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;e.preventDefault(),t.isActive=!1},keydown:[function(e){return"button"in e||!t._k(e.keyCode,"tab",9,e.key,"Tab")?t.tabPressed(e):null},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.enterPressed(e)):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"]))return null;e.preventDefault(),t.keyArrows("up")},function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"]))return null;e.preventDefault(),t.keyArrows("down")}]},model:{value:t.newValue,callback:function(e){t.newValue=e},expression:"newValue"}},"b-input",t.$attrs,!1)),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive&&(t.data.length>0||t.hasEmptySlot||t.hasHeaderSlot),expression:"isActive && (data.length > 0 || hasEmptySlot || hasHeaderSlot)"}],ref:"dropdown",staticClass:"dropdown-menu",class:{"is-opened-top":!t.isListInViewportVertically}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"dropdown-content"},[t.hasHeaderSlot?n("div",{staticClass:"dropdown-item"},[t._t("header")],2):t._e(),t._v(" "),t._l(t.data,(function(option,e){return n("a",{key:e,staticClass:"dropdown-item",class:{"is-hovered":option===t.hovered},on:{click:function(e){t.setSelected(option)}}},[t.hasDefaultSlot?t._t("default",null,{option:option,index:e}):n("span",[t._v("\r\n                            "+t._s(t.getValue(option,!0))+"\r\n                        ")])],2)})),t._v(" "),0===t.data.length&&t.hasEmptySlot?n("div",{staticClass:"dropdown-item is-disabled"},[t._t("empty")],2):t._e(),t._v(" "),t.hasFooterSlot?n("div",{staticClass:"dropdown-item"},[t._t("footer")],2):t._e()],2)])])],1)},staticRenderFns:[]},void 0,S,void 0,!1,void 0,void 0,void 0),_={install:function(t){Object(c.c)(t,T)}};Object(c.d)(_);var C=_;const I={name:"BButton",components:Object(l.a)({},v.name,v),inheritAttrs:!1,props:{type:[String,Object],size:String,label:String,iconPack:String,iconLeft:String,iconRight:String,rounded:{type:Boolean,default:function(){return o.c.defaultButtonRounded}},loading:Boolean,outlined:Boolean,expanded:Boolean,inverted:Boolean,focused:Boolean,active:Boolean,hovered:Boolean,selected:Boolean,nativeType:{type:String,default:"button",validator:function(t){return["button","submit","reset"].indexOf(t)>=0}},tag:{type:String,default:"button",validator:function(t){return["button","a","input","router-link","nuxt-link","n-link","RouterLink","NuxtLink","NLink"].indexOf(t)>=0}}},computed:{computedTag:function(){return void 0!==this.$attrs.disabled&&!1!==this.$attrs.disabled?"button":this.tag},iconSize:function(){return this.size&&"is-medium"!==this.size?"is-large"===this.size?"is-medium":this.size:"is-small"}}};var E=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.computedTag,t._g(t._b({tag:"component",staticClass:"button",class:[t.size,t.type,{"is-rounded":t.rounded,"is-loading":t.loading,"is-outlined":t.outlined,"is-fullwidth":t.expanded,"is-inverted":t.inverted,"is-focused":t.focused,"is-active":t.active,"is-hovered":t.hovered,"is-selected":t.selected}],attrs:{type:t.nativeType}},"component",t.$attrs,!1),t.$listeners),[t.iconLeft?n("b-icon",{attrs:{pack:t.iconPack,icon:t.iconLeft,size:t.iconSize}}):t._e(),t._v(" "),t.label?n("span",[t._v(t._s(t.label))]):t.$slots.default?n("span",[t._t("default")],2):t._e(),t._v(" "),t.iconRight?n("b-icon",{attrs:{pack:t.iconPack,icon:t.iconRight,size:t.iconSize}}):t._e()],1)},staticRenderFns:[]},void 0,I,void 0,!1,void 0,void 0,void 0),k={install:function(t){Object(c.c)(t,E)}};Object(c.d)(k);var D=k;const A={name:"BCarousel",components:Object(l.a)({},v.name,v),props:{value:{type:Number,default:0},animated:{type:String,default:"slide"},interval:Number,hasDrag:{type:Boolean,default:!0},autoplay:{type:Boolean,default:!0},pauseHover:{type:Boolean,default:!0},pauseInfo:{type:Boolean,default:!0},pauseInfoType:{type:String,default:"is-white"},pauseText:{type:String,default:"Pause"},arrow:{type:Boolean,default:!0},arrowBoth:{type:Boolean,default:!0},arrowHover:{type:Boolean,default:!0},iconPack:String,iconSize:String,iconPrev:{type:String,default:o.c.defaultIconPrev},iconNext:{type:String,default:o.c.defaultIconNext},indicator:{type:Boolean,default:!0},indicatorBackground:Boolean,indicatorCustom:Boolean,indicatorCustomSize:{type:String,default:"is-small"},indicatorInside:{type:Boolean,default:!0},indicatorMode:{type:String,default:"click"},indicatorPosition:{type:String,default:"is-bottom"},indicatorStyle:{type:String,default:"is-dots"},overlay:Boolean,progress:Boolean,progressType:{type:String,default:"is-primary"},withCarouselList:Boolean},data:function(){return{_isCarousel:!0,activeItem:this.value,carouselItems:[],isPause:!1,dragX:0,timer:null}},computed:{indicatorClasses:function(){return[{"has-background":this.indicatorBackground,"has-custom":this.indicatorCustom,"is-inside":this.indicatorInside},this.indicatorCustom&&this.indicatorCustomSize,this.indicatorInside&&this.indicatorPosition]}},watch:{value:function(t){t<this.activeItem?this.changeItem(t):this.changeItem(t,!1)},carouselItems:function(){this.activeItem<this.carouselItems.length&&this.carouselItems[this.activeItem].status(!0,!1)},autoplay:function(t){t?this.startTimer():this.pauseTimer()}},methods:{startTimer:function(){var t=this;this.autoplay&&!this.timer&&(this.isPause=!1,this.timer=setInterval((function(){t.next()}),this.interval||o.c.defaultCarouselInterval))},pauseTimer:function(){!this.pauseHover&&this.autoplay||(this.isPause=!0,this.timer&&(clearInterval(this.timer),this.timer=null))},changeItem:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.activeItem!==t&&(this.carouselItems[this.activeItem].status(!1,e),this.carouselItems[t].status(!0,e),this.activeItem=t,this.$emit("change",t))},modeChange:function(t,e){if(this.indicatorMode===t)return this.$emit("input",e),e<this.activeItem?this.changeItem(e):this.changeItem(e,!1)},prev:function(){return 0===this.activeItem?this.changeItem(this.carouselItems.length-1):this.changeItem(this.activeItem-1)},next:function(){return this.activeItem===this.carouselItems.length-1?this.changeItem(0,!1):this.changeItem(this.activeItem+1,!1)},checkArrow:function(t){return!!this.arrowBoth||(this.activeItem!==t||void 0)},dragStart:function(t){this.hasDrag&&(this.dragx=t.touches?t.changedTouches[0].pageX:t.pageX,t.touches?this.pauseTimer():t.preventDefault())},dragEnd:function(t){if(this.hasDrag){var e=(t.touches?t.changedTouches[0].pageX:t.pageX)-this.dragx;Math.abs(e)>50&&(e<0?this.next():this.prev()),t.touches&&this.startTimer()}}},mounted:function(){this.activeItem<this.carouselItems.length&&this.carouselItems[this.activeItem].status(!0,!1),this.startTimer()},beforeDestroy:function(){this.pauseTimer()}};var N=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"carousel",class:{"is-overlay":t.overlay},on:{mouseenter:t.pauseTimer,mouseleave:t.startTimer}},[t.progress?n("progress",{staticClass:"progress",class:t.progressType,attrs:{max:t.carouselItems.length-1},domProps:{value:t.activeItem}},[t._v("\r\n            "+t._s(t.carouselItems.length-1)+"\r\n        ")]):t._e(),t._v(" "),n("div",{staticClass:"carousel-items",on:{mousedown:t.dragStart,mouseup:t.dragEnd,touchstart:function(e){return e.stopPropagation(),t.dragStart(e)},touchend:function(e){return e.stopPropagation(),t.dragEnd(e)}}},[t._t("default"),t._v(" "),t.arrow?n("div",{staticClass:"carousel-arrow",class:{"is-hovered":t.arrowHover}},[t.checkArrow(0)?n("b-icon",{staticClass:"has-icons-left",attrs:{pack:t.iconPack,icon:t.iconPrev,size:t.iconSize,both:""},nativeOn:{click:function(e){return e.preventDefault(),t.prev(e)}}}):t._e(),t._v(" "),t.checkArrow(t.carouselItems.length-1)?n("b-icon",{staticClass:"has-icons-right",attrs:{pack:t.iconPack,icon:t.iconNext,size:t.iconSize,both:""},nativeOn:{click:function(e){return e.preventDefault(),t.next(e)}}}):t._e()],1):t._e()],2),t._v(" "),t.autoplay&&t.pauseHover&&t.pauseInfo&&t.isPause?n("div",{staticClass:"carousel-pause"},[n("span",{staticClass:"tag",class:t.pauseInfoType},[t._v("\r\n                "+t._s(t.pauseText)+"\r\n            ")])]):t._e(),t._v(" "),t.withCarouselList&&!t.indicator?[t._t("list",null,{active:t.activeItem,switch:t.changeItem})]:t._e(),t._v(" "),t.indicator?n("div",{staticClass:"carousel-indicator",class:t.indicatorClasses},t._l(t.carouselItems,(function(e,r){return n("a",{key:r,staticClass:"indicator-item",class:{"is-active":r===t.activeItem},on:{mouseover:function(e){t.modeChange("hover",r)},click:function(e){t.modeChange("click",r)}}},[t._t("indicators",[n("span",{staticClass:"indicator-style",class:t.indicatorStyle})],{i:r})],2)}))):t._e(),t._v(" "),t.overlay?[t._t("overlay")]:t._e()],2)},staticRenderFns:[]},void 0,A,void 0,!1,void 0,void 0,void 0);const O={name:"BCarouselItem",data:function(){return{isActive:!1,transitionName:null}},computed:{transition:function(){return"fade"===this.$parent.animated?"fade":this.transitionName}},methods:{status:function(t,e){this.transitionName=e?"slide-next":"slide-prev",this.isActive=t}},created:function(){if(!this.$parent.$data._isCarousel)throw this.$destroy(),new Error("You should wrap bCarouselItem on a bCarousel");this.$parent.carouselItems.push(this)},beforeDestroy:function(){var t=this.$parent.carouselItems.indexOf(this);t>=0&&this.$parent.carouselItems.splice(t,1)}};var x=Object(c.a)({render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:this.transition}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.isActive,expression:"isActive"}],staticClass:"carousel-item"},[this._t("default")],2)])},staticRenderFns:[]},void 0,O,void 0,!1,void 0,void 0,void 0);const P={name:"BCarouselList",components:Object(l.a)({},v.name,v),props:{config:{type:Object,default:function(){return{}}},data:{type:Array,default:function(){return[]}},value:{type:Number,default:0},hasDrag:{type:Boolean,default:!0},hasGrayscale:Boolean,hasOpacity:Boolean,repeat:Boolean,itemsToShow:{type:Number,default:4},itemsToList:{type:Number,default:1},asIndicator:Boolean,arrow:{type:Boolean,default:!0},arrowHover:{type:Boolean,default:!0},iconPack:String,iconSize:String,iconPrev:{type:String,default:o.c.defaultIconPrev},iconNext:{type:String,default:o.c.defaultIconNext},refresh:Boolean},data:function(){return{activeItem:this.value,breakpoints:{},delta:0,dragging:!1,hold:0,itemWidth:0,total:0,settings:{}}},computed:{listClass:function(){return[{"has-grayscale":this.settings.hasGrayscale||this.hasGrayscale,"has-opacity":this.settings.hasOpacity||this.hasOpacity,"is-dragging":this.dragging}]},itemStyle:function(){return"width: ".concat(this.itemWidth,"px;")},transformStyle:function(){var t=this.delta+this.activeItem*this.itemWidth*1,e=this.dragging?-t:-Math.abs(t);return"transform: translateX(".concat(e,"px);")}},watch:{value:function(t){this.switchTo(t)},refresh:function(t){t&&this.asIndicator&&this.getWidth()}},methods:{initConfig:function(){this.breakpoints=this.config.breakpoints,this.settings=Object(r.d)(this.$props,this.config,!0)},getWidth:function(){var rect=this.$el.getBoundingClientRect();this.itemWidth=rect.width/this.settings.itemsToShow},update:function(){this.breakpoints&&this.updateConfig(),this.getWidth()},updateConfig:function(){var t,e=this;Object.keys(this.breakpoints).sort((function(a,b){return b-a})).some((function(n){if(t=window.matchMedia("(min-width: ".concat(n,"px)")).matches)return e.settings=e.config.breakpoints[n],!0})),t||(this.settings=this.config)},switchTo:function(t){if(!(t<0||this.activeItem===t||!this.repeat&&t>this.total)){var e=this.repeat&&t>this.total?0:t;this.activeItem=e,this.$emit("switch",e)}},next:function(){this.switchTo(this.activeItem+this.itemsToList)},prev:function(){this.switchTo(this.activeItem-this.itemsToList)},checkArrow:function(t){if(this.repeat||this.activeItem!==t)return!0},checkAsIndicator:function(t,e){if(this.asIndicator){var n=(new Date).getTime();!e.touches&&n-this.hold>200||this.switchTo(t)}},dragStart:function(t){!this.hasDrag||0!==t.button&&"touchstart"!==t.type||(this.hold=(new Date).getTime(),this.dragging=!0,this.dragStartX=t.touches?t.touches[0].clientX:t.clientX,window.addEventListener(t.touches?"touchmove":"mousemove",this.dragMove),window.addEventListener(t.touches?"touchend":"mouseup",this.dragEnd))},dragMove:function(t){this.dragEndX=t.touches?t.touches[0].clientX:t.clientX;var e=this.dragEndX-this.dragStartX;this.delta=e<0?Math.abs(e):-Math.abs(e),t.touches||t.preventDefault()},dragEnd:function(t){var e=1*Object(r.f)(this.delta),n=Math.round(Math.abs(this.delta/this.itemWidth)+.15);this.switchTo(this.activeItem+e*n),this.dragging=!1,this.delta=0,window.removeEventListener(t.touches?"touchmove":"mousemove",this.dragMove),window.removeEventListener(t.touches?"touchend":"mouseup",this.dragEnd)}},created:function(){this.initConfig(),"undefined"!=typeof window&&window.addEventListener("resize",this.update)},mounted:function(){var t=this;this.total=this.data.length-1,this.$nextTick((function(){t.update()}))},beforeDestroy:function(){window.removeEventListener("resize",this.update)}};var R=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"carousel-list",class:{"has-shadow":t.activeItem>0},on:{mousedown:function(e){return e.stopPropagation(),e.preventDefault(),t.dragStart(e)},touchstart:t.dragStart}},[n("div",{staticClass:"carousel-slides",class:t.listClass,style:t.transformStyle},t._l(t.data,(function(e,r){return n("div",{key:r,staticClass:"carousel-slide",class:{"is-active":t.activeItem===r},style:t.itemStyle,on:{click:function(e){e.preventDefault(),t.checkAsIndicator(r,e)}}},[t._t("item",[n("figure",{staticClass:"image"},[n("img",{attrs:{src:e.image,title:e.title}})])],{list:e,index:r,active:t.activeItem})],2)}))),t._v(" "),t.arrow?n("div",{staticClass:"carousel-arrow",class:{"is-hovered":t.arrowHover}},[n("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.activeItem>0,expression:"activeItem > 0"}],staticClass:"has-icons-left",attrs:{pack:t.iconPack,icon:t.iconPrev,size:t.iconSize,both:""},nativeOn:{click:function(e){return e.preventDefault(),t.prev(e)}}}),t._v(" "),n("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.checkArrow(t.total),expression:"checkArrow(total)"}],staticClass:"has-icons-right",attrs:{pack:t.iconPack,icon:t.iconNext,size:t.iconSize,both:""},nativeOn:{click:function(e){return e.preventDefault(),t.next(e)}}})],1):t._e()])},staticRenderFns:[]},void 0,P,void 0,!1,void 0,void 0,void 0),M={install:function(t){Object(c.c)(t,N),Object(c.c)(t,x),Object(c.c)(t,R)}};Object(c.d)(M);var L=M,V={props:{value:[String,Number,Boolean,Function,Object,Array],nativeValue:[String,Number,Boolean,Function,Object,Array],type:String,disabled:Boolean,required:Boolean,name:String,size:String},data:function(){return{newValue:this.value}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){this.newValue=t,this.$emit("input",t)}}},watch:{value:function(t){this.newValue=t}},methods:{focus:function(){this.$refs.input.focus()}}};const B={name:"BCheckbox",mixins:[V],props:{indeterminate:Boolean,trueValue:{type:[String,Number,Boolean,Function,Object,Array],default:!0},falseValue:{type:[String,Number,Boolean,Function,Object,Array],default:!1}}};var F=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{ref:"label",staticClass:"b-checkbox checkbox",class:[t.size,{"is-disabled":t.disabled}],attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.$refs.label.click()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"checkbox",disabled:t.disabled,required:t.required,name:t.name,"true-value":t.trueValue,"false-value":t.falseValue},domProps:{indeterminate:t.indeterminate,value:t.nativeValue,checked:Array.isArray(t.computedValue)?t._i(t.computedValue,t.nativeValue)>-1:t._q(t.computedValue,t.trueValue)},on:{click:function(t){t.stopPropagation()},change:function(e){var n=t.computedValue,r=e.target,o=r.checked?t.trueValue:t.falseValue;if(Array.isArray(n)){var c=t.nativeValue,l=t._i(n,c);r.checked?l<0&&(t.computedValue=n.concat([c])):l>-1&&(t.computedValue=n.slice(0,l).concat(n.slice(l+1)))}else t.computedValue=o}}}),t._v(" "),n("span",{staticClass:"check",class:t.type}),t._v(" "),n("span",{staticClass:"control-label"},[t._t("default")],2)])},staticRenderFns:[]},void 0,B,void 0,!1,void 0,void 0,void 0);const j={name:"BCheckboxButton",mixins:[V],props:{type:{type:String,default:"is-primary"},expanded:Boolean},data:function(){return{isFocused:!1}},computed:{checked:function(){return Array.isArray(this.newValue)?this.newValue.indexOf(this.nativeValue)>=0:this.newValue===this.nativeValue}}};var U=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control",class:{"is-expanded":t.expanded}},[n("label",{ref:"label",staticClass:"b-checkbox checkbox button",class:[t.checked?t.type:null,t.size,{"is-disabled":t.disabled,"is-focused":t.isFocused}],attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.$refs.label.click()}}},[t._t("default"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"checkbox",disabled:t.disabled,required:t.required,name:t.name},domProps:{value:t.nativeValue,checked:Array.isArray(t.computedValue)?t._i(t.computedValue,t.nativeValue)>-1:t.computedValue},on:{click:function(t){t.stopPropagation()},focus:function(e){t.isFocused=!0},blur:function(e){t.isFocused=!1},change:function(e){var n=t.computedValue,r=e.target,o=!!r.checked;if(Array.isArray(n)){var c=t.nativeValue,l=t._i(n,c);r.checked?l<0&&(t.computedValue=n.concat([c])):l>-1&&(t.computedValue=n.slice(0,l).concat(n.slice(l+1)))}else t.computedValue=o}}})],2)])},staticRenderFns:[]},void 0,j,void 0,!1,void 0,void 0,void 0),z={install:function(t){Object(c.c)(t,F),Object(c.c)(t,U)}};Object(c.d)(z);var $=z;const H={name:"BCollapse",props:{open:{type:Boolean,default:!0},animation:{type:String,default:"fade"},ariaId:{type:String,default:""},position:{type:String,default:"is-top",validator:function(t){return["is-top","is-bottom"].indexOf(t)>-1}}},data:function(){return{isOpen:this.open}},watch:{open:function(t){this.isOpen=t}},methods:{toggle:function(){this.isOpen=!this.isOpen,this.$emit("update:open",this.isOpen),this.$emit(this.isOpen?"open":"close")}},render:function(t){var e=t("div",{staticClass:"collapse-trigger",on:{click:this.toggle}},this.$scopedSlots.trigger?[this.$scopedSlots.trigger({open:this.isOpen})]:[this.$slots.trigger]),content=t("transition",{props:{name:this.animation}},[t("div",{staticClass:"collapse-content",attrs:{id:this.ariaId,"aria-expanded":this.isOpen},directives:[{name:"show",value:this.isOpen}]},this.$slots.default)]);return t("div",{staticClass:"collapse"},"is-top"===this.position?[e,content]:[content,e])}};var W=Object(c.a)({},void 0,H,void 0,void 0,void 0,void 0,void 0),K={install:function(t){Object(c.c)(t,W)}};Object(c.d)(K);var G,Q=K,Y="AM",X="PM",J={mixins:[h],inheritAttrs:!1,props:{value:Date,inline:Boolean,minTime:Date,maxTime:Date,placeholder:String,editable:Boolean,disabled:Boolean,hourFormat:{type:String,default:"24",validator:function(t){return"24"===t||"12"===t}},incrementHours:{type:Number,default:1},incrementMinutes:{type:Number,default:1},incrementSeconds:{type:Number,default:1},timeFormatter:{type:Function,default:function(t,e){return"function"==typeof o.c.defaultTimeFormatter?o.c.defaultTimeFormatter(t):function(t,e){var n=t.getHours(),r=t.getMinutes(),o=t.getSeconds(),c="";return"12"===e.hourFormat&&(c=" "+(n<12?Y:X),n>12?n-=12:0===n&&(n=12)),e.pad(n)+":"+e.pad(r)+(e.enableSeconds?":"+e.pad(o):"")+c}(t,e)}},timeParser:{type:Function,default:function(t,e){return"function"==typeof o.c.defaultTimeParser?o.c.defaultTimeParser(t):function(t,e){if(t){var n=!1;if("12"===e.hourFormat){var r=t.split(" ");t=r[0],n=r[1]===Y}var time=t.split(":"),o=parseInt(time[0],10),c=parseInt(time[1],10),l=e.enableSeconds?parseInt(time[2],10):0;if(isNaN(o)||o<0||o>23||"12"===e.hourFormat&&(o<1||o>12)||isNaN(c)||c<0||c>59)return null;var h=null;return e.computedValue&&!isNaN(e.computedValue)?h=new Date(e.computedValue):(h=e.timeCreator()).setMilliseconds(0),h.setSeconds(l),h.setMinutes(c),"12"===e.hourFormat&&(n&&12===o?o=0:n||12===o||(o+=12)),h.setHours(o),new Date(h.getTime())}return null}(t,e)}},mobileNative:{type:Boolean,default:function(){return o.c.defaultTimepickerMobileNative}},timeCreator:{type:Function,default:function(){return"function"==typeof o.c.defaultTimeCreator?o.c.defaultTimeCreator():new Date}},position:String,unselectableTimes:Array,openOnFocus:Boolean,enableSeconds:Boolean,defaultMinutes:Number,defaultSeconds:Number,focusable:{type:Boolean,default:!0}},data:function(){return{dateSelected:this.value,hoursSelected:null,minutesSelected:null,secondsSelected:null,meridienSelected:null,_elementRef:"input",AM:Y,PM:X,HOUR_FORMAT_24:"24",HOUR_FORMAT_12:"12"}},computed:{computedValue:{get:function(){return this.dateSelected},set:function(t){this.dateSelected=t,this.$emit("input",t)}},hours:function(){if(!this.incrementHours||this.incrementHours<1)throw new Error("Hour increment cannot be null or less than 1.");for(var t=[],e=this.isHourFormat24?24:12,i=0;i<e;i+=this.incrementHours){var n=i,label=n;this.isHourFormat24||(label=n=i+1,this.meridienSelected===this.AM?12===n&&(n=0):this.meridienSelected===this.PM&&12!==n&&(n+=12)),t.push({label:this.formatNumber(label),value:n})}return t},minutes:function(){if(!this.incrementMinutes||this.incrementMinutes<1)throw new Error("Minute increment cannot be null or less than 1.");for(var t=[],i=0;i<60;i+=this.incrementMinutes)t.push({label:this.formatNumber(i,!0),value:i});return t},seconds:function(){if(!this.incrementSeconds||this.incrementSeconds<1)throw new Error("Second increment cannot be null or less than 1.");for(var t=[],i=0;i<60;i+=this.incrementSeconds)t.push({label:this.formatNumber(i,!0),value:i});return t},meridiens:function(){return[Y,X]},isMobile:function(){return this.mobileNative&&r.c.any()},isHourFormat24:function(){return"24"===this.hourFormat}},watch:{hourFormat:function(){null!==this.hoursSelected&&(this.meridienSelected=this.hoursSelected>=12?X:Y)},value:{handler:function(t){this.updateInternalState(t),!this.isValid&&this.$refs.input.checkHtml5Validity()},immediate:!0}},methods:{onMeridienChange:function(t){null!==this.hoursSelected&&(t===X?this.hoursSelected+=12:t===Y&&(this.hoursSelected-=12)),this.updateDateSelected(this.hoursSelected,this.minutesSelected,this.enableSeconds?this.secondsSelected:0,t)},onHoursChange:function(t){this.minutesSelected||void 0===this.defaultMinutes||(this.minutesSelected=this.defaultMinutes),this.secondsSelected||void 0===this.defaultSeconds||(this.secondsSelected=this.defaultSeconds),this.updateDateSelected(parseInt(t,10),this.minutesSelected,this.enableSeconds?this.secondsSelected:0,this.meridienSelected)},onMinutesChange:function(t){!this.secondsSelected&&this.defaultSeconds&&(this.secondsSelected=this.defaultSeconds),this.updateDateSelected(this.hoursSelected,parseInt(t,10),this.enableSeconds?this.secondsSelected:0,this.meridienSelected)},onSecondsChange:function(t){this.updateDateSelected(this.hoursSelected,this.minutesSelected,parseInt(t,10),this.meridienSelected)},updateDateSelected:function(t,e,n,r){if(null!=t&&null!=e&&(!this.isHourFormat24&&null!==r||this.isHourFormat24)){var time=null;this.computedValue&&!isNaN(this.computedValue)?time=new Date(this.computedValue):(time=this.timeCreator()).setMilliseconds(0),time.setHours(t),time.setMinutes(e),time.setSeconds(n),this.computedValue=new Date(time.getTime())}},updateInternalState:function(t){t?(this.hoursSelected=t.getHours(),this.minutesSelected=t.getMinutes(),this.secondsSelected=t.getSeconds(),this.meridienSelected=t.getHours()>=12?X:Y):(this.hoursSelected=null,this.minutesSelected=null,this.secondsSelected=null,this.meridienSelected=Y),this.dateSelected=t},isHourDisabled:function(t){var e=this,n=!1;if(this.minTime){var r=this.minTime.getHours(),o=this.minutes.every((function(n){return e.isMinuteDisabledForHour(t,n.value)}));n=t<r||o}if(this.maxTime&&!n){var c=this.maxTime.getHours();n=t>c}this.unselectableTimes&&(n||(n=this.unselectableTimes.filter((function(time){return e.enableSeconds&&null!==e.secondsSelected?time.getHours()===t&&time.getMinutes()===e.minutesSelected&&time.getSeconds()===e.secondsSelected:null!==e.minutesSelected?time.getHours()===t&&time.getMinutes()===e.minutesSelected:time.getHours()===t})).length>0));return n},isMinuteDisabledForHour:function(t,e){var n=!1;if(this.minTime){var r=this.minTime.getHours(),o=this.minTime.getMinutes();n=t===r&&e<o}if(this.maxTime&&!n){var c=this.maxTime.getHours(),l=this.maxTime.getMinutes();n=t===c&&e>l}return n},isMinuteDisabled:function(t){var e=this,n=!1;null!==this.hoursSelected&&(n=!!this.isHourDisabled(this.hoursSelected)||this.isMinuteDisabledForHour(this.hoursSelected,t),this.unselectableTimes&&(n||(n=this.unselectableTimes.filter((function(time){return e.enableSeconds&&null!==e.secondsSelected?time.getHours()===e.hoursSelected&&time.getMinutes()===t&&time.getSeconds()===e.secondsSelected:time.getHours()===e.hoursSelected&&time.getMinutes()===t})).length>0)));return n},isSecondDisabled:function(t){var e=this,n=!1;if(null!==this.minutesSelected){if(this.isMinuteDisabled(this.minutesSelected))n=!0;else{if(this.minTime){var r=this.minTime.getHours(),o=this.minTime.getMinutes(),c=this.minTime.getSeconds();n=this.hoursSelected===r&&this.minutesSelected===o&&t<c}if(this.maxTime&&!n){var l=this.maxTime.getHours(),h=this.maxTime.getMinutes(),d=this.maxTime.getSeconds();n=this.hoursSelected===l&&this.minutesSelected===h&&t>d}}if(this.unselectableTimes)if(!n)n=this.unselectableTimes.filter((function(time){return time.getHours()===e.hoursSelected&&time.getMinutes()===e.minutesSelected&&time.getSeconds()===t})).length>0}return n},onChange:function(t){var e=this.timeParser(t,this);this.updateInternalState(e),e&&!isNaN(e)?this.computedValue=e:(this.computedValue=null,this.$refs.input.newValue=this.computedValue)},toggle:function(t){this.$refs.dropdown&&(this.$refs.dropdown.isActive="boolean"==typeof t?t:!this.$refs.dropdown.isActive)},close:function(){this.toggle(!1)},handleOnFocus:function(){this.onFocus(),this.openOnFocus&&this.toggle(!0)},formatHHMMSS:function(t){var e=new Date(t);if(t&&!isNaN(e)){var n=e.getHours(),r=e.getMinutes(),o=e.getSeconds();return this.formatNumber(n,!0)+":"+this.formatNumber(r,!0)+":"+this.formatNumber(o,!0)}return""},onChangeNativePicker:function(t){var e=t.target.value;if(e){var time=null;this.computedValue&&!isNaN(this.computedValue)?time=new Date(this.computedValue):(time=new Date).setMilliseconds(0);var n=e.split(":");time.setHours(parseInt(n[0],10)),time.setMinutes(parseInt(n[1],10)),time.setSeconds(n[2]?parseInt(n[2],10):0),this.computedValue=new Date(time.getTime())}else this.computedValue=null},formatNumber:function(t,e){return this.isHourFormat24||e?this.pad(t):t},pad:function(t){return(t<10?"0":"")+t},formatValue:function(t){return t&&!isNaN(t)?this.timeFormatter(t,this):null},keyPress:function(t){this.$refs.dropdown&&this.$refs.dropdown.isActive&&27===t.keyCode&&this.toggle(!1)},onActiveChange:function(t){t||this.onBlur()}},created:function(){"undefined"!=typeof window&&document.addEventListener("keyup",this.keyPress)},beforeDestroy:function(){"undefined"!=typeof window&&document.removeEventListener("keyup",this.keyPress)}},Z={bind:function(t,e){var element,n=e.value;if(void 0===n||n){var r=(element=t)?element.querySelectorAll("a[href],\n                                     area[href],\n                                     input:not([disabled]),\n                                     select:not([disabled]),\n                                     textarea:not([disabled]),\n                                     button:not([disabled]),\n                                     iframe,\n                                     object,\n                                     embed,\n                                     *[tabindex],\n                                     *[contenteditable]"):null;if(r&&r.length>0){var o=r[0],c=r[r.length-1];G=function(t){t.target===o&&t.shiftKey&&"Tab"===t.key?(t.preventDefault(),c.focus()):t.target!==c||t.shiftKey||"Tab"!==t.key||(t.preventDefault(),o.focus())},t.addEventListener("keydown",G)}}},unbind:function(t){t.removeEventListener("keydown",G)}},tt=["escape","outside"];const et={name:"BDropdown",directives:{trapFocus:Z},props:{value:{type:[String,Number,Boolean,Object,Array,Function],default:null},disabled:Boolean,hoverable:Boolean,inline:Boolean,position:{type:String,validator:function(t){return["is-top-right","is-top-left","is-bottom-left"].indexOf(t)>-1}},mobileModal:{type:Boolean,default:function(){return o.c.defaultDropdownMobileModal}},ariaRole:{type:String,default:""},animation:{type:String,default:"fade"},multiple:Boolean,trapFocus:{type:Boolean,default:o.c.defaultTrapFocus},closeOnClick:{type:Boolean,default:!0},canClose:{type:[Array,Boolean],default:!0},expanded:Boolean},data:function(){return{selected:this.value,isActive:!1,isHoverable:this.hoverable,_isDropdown:!0}},computed:{rootClasses:function(){return[this.position,{"is-disabled":this.disabled,"is-hoverable":this.hoverable,"is-inline":this.inline,"is-active":this.isActive||this.inline,"is-mobile-modal":this.isMobileModal,"is-expanded":this.expanded}]},isMobileModal:function(){return this.mobileModal&&!this.inline&&!this.hoverable},cancelOptions:function(){return"boolean"==typeof this.canClose?this.canClose?tt:[]:this.canClose},ariaRoleMenu:function(){return"menu"===this.ariaRole||"list"===this.ariaRole?this.ariaRole:null}},watch:{value:function(t){this.selected=t},isActive:function(t){this.$emit("active-change",t)}},methods:{selectItem:function(t){if(this.multiple){if(this.selected){var e=this.selected.indexOf(t);-1===e?this.selected.push(t):this.selected.splice(e,1)}else this.selected=[t];this.$emit("change",this.selected)}else this.selected!==t&&(this.selected=t,this.$emit("change",this.selected));this.$emit("input",this.selected),this.multiple||(this.isActive=!this.closeOnClick,this.hoverable&&this.closeOnClick&&(this.isHoverable=!1))},isInWhiteList:function(t){if(t===this.$refs.dropdownMenu)return!0;if(t===this.$refs.trigger)return!0;if(void 0!==this.$refs.dropdownMenu){var e=this.$refs.dropdownMenu.querySelectorAll("*"),n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){if(t===c.value)return!0}}catch(t){r=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}}if(void 0!==this.$refs.trigger){var h=this.$refs.trigger.querySelectorAll("*"),d=!0,f=!1,m=void 0;try{for(var v,y=h[Symbol.iterator]();!(d=(v=y.next()).done);d=!0){if(t===v.value)return!0}}catch(t){f=!0,m=t}finally{try{d||null==y.return||y.return()}finally{if(f)throw m}}}return!1},clickedOutside:function(t){this.cancelOptions.indexOf("outside")<0||this.inline||this.isInWhiteList(t.target)||(this.isActive=!1)},keyPress:function(t){if(this.isActive&&27===t.keyCode){if(this.cancelOptions.indexOf("escape")<0)return;this.isActive=!1}},toggle:function(){var t=this;this.disabled||(this.isActive?this.isActive=!this.isActive:this.$nextTick((function(){var e=!t.isActive;t.isActive=e,setTimeout((function(){return t.isActive=e}))})))},checkHoverable:function(){this.hoverable&&(this.isHoverable=!0)}},created:function(){"undefined"!=typeof window&&(document.addEventListener("click",this.clickedOutside),document.addEventListener("keyup",this.keyPress))},beforeDestroy:function(){"undefined"!=typeof window&&(document.removeEventListener("click",this.clickedOutside),document.removeEventListener("keyup",this.keyPress))}};var nt=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown",class:t.rootClasses},[t.inline?t._e():n("div",{ref:"trigger",staticClass:"dropdown-trigger",attrs:{role:"button","aria-haspopup":"true"},on:{click:t.toggle,mouseenter:t.checkHoverable}},[t._t("trigger")],2),t._v(" "),n("transition",{attrs:{name:t.animation}},[t.isMobileModal?n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"background",attrs:{"aria-hidden":!t.isActive}}):t._e()]),t._v(" "),n("transition",{attrs:{name:t.animation}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.disabled&&(t.isActive||t.isHoverable)||t.inline,expression:"(!disabled && (isActive || isHoverable)) || inline"},{name:"trap-focus",rawName:"v-trap-focus",value:t.trapFocus,expression:"trapFocus"}],ref:"dropdownMenu",staticClass:"dropdown-menu",attrs:{"aria-hidden":!t.isActive}},[n("div",{staticClass:"dropdown-content",attrs:{role:t.ariaRoleMenu}},[t._t("default")],2)])])],1)},staticRenderFns:[]},void 0,et,void 0,!1,void 0,void 0,void 0);const it={name:"BDropdownItem",props:{value:{type:[String,Number,Boolean,Object,Array,Function],default:null},separator:Boolean,disabled:Boolean,custom:Boolean,focusable:{type:Boolean,default:!0},paddingless:Boolean,hasLink:Boolean,ariaRole:{type:String,default:""}},computed:{anchorClasses:function(){return{"is-disabled":this.$parent.disabled||this.disabled,"is-paddingless":this.paddingless,"is-active":this.isActive}},itemClasses:function(){return{"dropdown-item":!this.hasLink,"is-disabled":this.disabled,"is-paddingless":this.paddingless,"is-active":this.isActive,"has-link":this.hasLink}},ariaRoleItem:function(){return"menuitem"===this.ariaRole||"listitem"===this.ariaRole?this.ariaRole:null},isClickable:function(){return!(this.$parent.disabled||this.separator||this.disabled||this.custom)},isActive:function(){return null!==this.$parent.selected&&(this.$parent.multiple?this.$parent.selected.indexOf(this.value)>=0:this.value===this.$parent.selected)}},methods:{selectItem:function(){this.isClickable&&(this.$parent.selectItem(this.value),this.$emit("click"))}},created:function(){if(!this.$parent.$data._isDropdown)throw this.$destroy(),new Error("You should wrap bDropdownItem on a bDropdown")}};var ot=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.separator?n("hr",{staticClass:"dropdown-divider"}):t.custom||t.hasLink?n("div",{class:t.itemClasses,attrs:{role:t.ariaRoleItem,tabindex:t.focusable?0:null},on:{click:t.selectItem}},[t._t("default")],2):n("a",{staticClass:"dropdown-item",class:t.anchorClasses,attrs:{role:t.ariaRoleItem,tabindex:t.focusable?0:null},on:{click:t.selectItem}},[t._t("default")],2)},staticRenderFns:[]},void 0,it,void 0,!1,void 0,void 0,void 0);const at={name:"BFieldBody",props:{message:{type:String},type:{type:[String,Object]}},render:function(t){var e=this;return t("div",{attrs:{class:"field-body"}},this.$slots.default.map((function(element){return element.tag?e.message?t("b-field",{attrs:{message:e.message,type:e.type}},[element]):t("b-field",{attrs:{type:e.type}},[element]):element})))}};var st=Object(c.a)({},void 0,at,void 0,void 0,void 0,void 0,void 0);const ut={name:"BField",components:Object(l.a)({},st.name,st),props:{type:[String,Object],label:String,labelFor:String,message:[String,Array,Object],grouped:Boolean,groupMultiline:Boolean,position:String,expanded:Boolean,horizontal:Boolean,addons:{type:Boolean,default:!0},customClass:String,labelPosition:{type:String,default:function(){return o.c.defaultFieldLabelPosition}}},data:function(){return{newType:this.type,newMessage:this.message,fieldLabelSize:null,_isField:!0}},computed:{rootClasses:function(){return[this.newPosition,{"is-expanded":this.expanded,"is-grouped-multiline":this.groupMultiline,"is-horizontal":this.horizontal,"is-floating-in-label":this.hasLabel&&!this.horizontal&&"inside"===this.labelPosition,"is-floating-label":this.hasLabel&&!this.horizontal&&"on-border"===this.labelPosition},this.numberInputClasses]},newPosition:function(){if(void 0!==this.position){var t=this.position.split("-");if(!(t.length<1)){var e=this.grouped?"is-grouped-":"has-addons-";return this.position?e+t[1]:void 0}}},formattedMessage:function(){if("string"==typeof this.newMessage)return this.newMessage;var t=[];if(Array.isArray(this.newMessage))this.newMessage.forEach((function(e){if("string"==typeof e)t.push(e);else for(var n in e)e[n]&&t.push(n)}));else for(var e in this.newMessage)this.newMessage[e]&&t.push(e);return t.filter((function(t){if(t)return t})).join(" <br> ")},hasLabel:function(){return this.label||this.$slots.label},numberInputClasses:function(){if(this.$slots.default){var t=this.$slots.default.filter((function(t){return t.tag&&t.tag.toLowerCase().indexOf("numberinput")>=0}))[0];if(t){var e=["has-numberinput"],n=t.componentOptions.propsData.controlsPosition,r=t.componentOptions.propsData.size;return n&&e.push("has-numberinput-".concat(n)),r&&e.push("has-numberinput-".concat(r)),e}}return null}},watch:{type:function(t){this.newType=t},message:function(t){this.newMessage=t}},methods:{fieldType:function(){if(this.grouped)return"is-grouped";var t=0;return this.$slots.default&&(t=this.$slots.default.reduce((function(i,t){return t.tag?i+1:i}),0)),t>1&&this.addons&&!this.horizontal?"has-addons":void 0}},mounted:function(){this.horizontal&&(this.$el.querySelectorAll(".input, .select, .button, .textarea, .b-slider").length>0&&(this.fieldLabelSize="is-normal"))}};var ct=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field",class:[t.rootClasses,t.fieldType()]},[t.horizontal?n("div",{staticClass:"field-label",class:[t.customClass,t.fieldLabelSize]},[t.hasLabel?n("label",{staticClass:"label",class:t.customClass,attrs:{for:t.labelFor}},[t.$slots.label?t._t("label"):[t._v(t._s(t.label))]],2):t._e()]):[t.hasLabel?n("label",{staticClass:"label",class:t.customClass,attrs:{for:t.labelFor}},[t.$slots.label?t._t("label"):[t._v(t._s(t.label))]],2):t._e()],t._v(" "),t.horizontal?n("b-field-body",{attrs:{message:t.newMessage?t.formattedMessage:"",type:t.newType}},[t._t("default")],2):[t._t("default")],t._v(" "),t.newMessage&&!t.horizontal?n("p",{staticClass:"help",class:t.newType,domProps:{innerHTML:t._s(t.formattedMessage)}}):t._e()],2)},staticRenderFns:[]},void 0,ut,void 0,!1,void 0,void 0,void 0);const lt={name:"BClockpickerFace",props:{pickerSize:Number,min:Number,max:Number,double:Boolean,value:Number,faceNumbers:Array,disabledValues:Function},data:function(){return{isDragging:!1,inputValue:this.value,prevAngle:720}},computed:{count:function(){return this.max-this.min+1},countPerRing:function(){return this.double?this.count/2:this.count},radius:function(){return this.pickerSize/2},outerRadius:function(){return this.radius-5-20},innerRadius:function(){return Math.max(.6*this.outerRadius,this.outerRadius-5-40)},degreesPerUnit:function(){return 360/this.countPerRing},degrees:function(){return this.degreesPerUnit*Math.PI/180},handRotateAngle:function(){for(var t=this.prevAngle;t<0;)t+=360;var e=this.calcHandAngle(this.displayedValue),n=this.shortestDistanceDegrees(t,e);return this.prevAngle+n},handScale:function(){return this.calcHandScale(this.displayedValue)},handStyle:function(){return{transform:"rotate(".concat(this.handRotateAngle,"deg) scaleY(").concat(this.handScale,")"),transition:".3s cubic-bezier(.25,.8,.50,1)"}},displayedValue:function(){return null==this.inputValue?this.min:this.inputValue}},watch:{value:function(t){t!==this.inputValue&&(this.prevAngle=this.handRotateAngle),this.inputValue=t}},methods:{isDisabled:function(t){return this.disabledValues&&this.disabledValues(t)},euclidean:function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},shortestDistanceDegrees:function(t,e){var n=(e-t)%360,r=180-Math.abs(Math.abs(n)-180);return(n+360)%360<180?1*r:-1*r},coordToAngle:function(t,e){var n=2*Math.atan2(e.y-t.y-this.euclidean(t,e),e.x-t.x);return Math.abs(180*n/Math.PI)},getNumberTranslate:function(t){var e=this.getNumberCoords(t),n=e.x,r=e.y;return"translate(".concat(n,"px, ").concat(r,"px)")},getNumberCoords:function(t){var e=this.isInnerRing(t)?this.innerRadius:this.outerRadius;return{x:Math.round(e*Math.sin((t-this.min)*this.degrees)),y:Math.round(-e*Math.cos((t-this.min)*this.degrees))}},getFaceNumberClasses:function(t){return{active:t.value===this.displayedValue,disabled:this.isDisabled(t.value)}},isInnerRing:function(t){return this.double&&t-this.min>=this.countPerRing},calcHandAngle:function(t){var e=this.degreesPerUnit*(t-this.min);return this.isInnerRing(t)&&(e-=360),e},calcHandScale:function(t){return this.isInnerRing(t)?this.innerRadius/this.outerRadius:1},onMouseDown:function(t){t.preventDefault(),this.isDragging=!0,this.onDragMove(t)},onMouseUp:function(){this.isDragging=!1,this.isDisabled(this.inputValue)||this.$emit("change",this.inputValue)},onDragMove:function(t){if(t.preventDefault(),this.isDragging||"click"===t.type){var e=this.$refs.clock.getBoundingClientRect(),n=e.width,r=e.top,o=e.left,c="touches"in t?t.touches[0]:t,l={x:n/2,y:-n/2},h={x:c.clientX-o,y:r-c.clientY},d=Math.round(this.coordToAngle(l,h)+360)%360,f=this.double&&this.euclidean(l,h)<(this.outerRadius+this.innerRadius)/2-16,m=Math.round(d/this.degreesPerUnit)+this.min+(f?this.countPerRing:0);d>=360-this.degreesPerUnit/2&&(m=f?this.max:this.min),this.update(m)}},update:function(t){this.inputValue===t||this.isDisabled(t)||(this.prevAngle=this.handRotateAngle,this.inputValue=t,this.$emit("input",t))}}};var ht,ft=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-clockpicker-face",on:{mousedown:t.onMouseDown,mouseup:t.onMouseUp,mousemove:t.onDragMove,touchstart:t.onMouseDown,touchend:t.onMouseUp,touchmove:t.onDragMove}},[n("div",{ref:"clock",staticClass:"b-clockpicker-face-outer-ring"},[n("div",{staticClass:"b-clockpicker-face-hand",style:t.handStyle}),t._v(" "),t._l(t.faceNumbers,(function(e,r){return n("span",{key:r,staticClass:"b-clockpicker-face-number",class:t.getFaceNumberClasses(e),style:{transform:t.getNumberTranslate(e.value)}},[n("span",[t._v(t._s(e.label))])])}))],2)])},staticRenderFns:[]},void 0,lt,void 0,!1,void 0,void 0,void 0);const pt={name:"BClockpicker",components:(ht={},Object(l.a)(ht,ft.name,ft),Object(l.a)(ht,w.name,w),Object(l.a)(ht,ct.name,ct),Object(l.a)(ht,v.name,v),Object(l.a)(ht,nt.name,nt),Object(l.a)(ht,ot.name,ot),ht),mixins:[J],props:{pickerSize:{type:Number,default:290},hourFormat:{type:String,default:"12",validator:function(t){return"24"===t||"12"===t}},incrementMinutes:{type:Number,default:5},autoSwitch:{type:Boolean,default:!0},type:{type:String,default:"is-primary"},hoursLabel:{type:String,default:function(){return o.c.defaultClockpickerHoursLabel||"Hours"}},minutesLabel:{type:String,default:function(){return o.c.defaultClockpickerMinutesLabel||"Min"}}},data:function(){return{isSelectingHour:!0,isDragging:!1,_isClockpicker:!0}},computed:{hoursDisplay:function(){if(null==this.hoursSelected)return"--";if(this.isHourFormat24)return this.pad(this.hoursSelected);var t=this.hoursSelected;return this.meridienSelected===this.PM&&(t-=12),0===t&&(t=12),t},minutesDisplay:function(){return null==this.minutesSelected?"--":this.pad(this.minutesSelected)},minFaceValue:function(){return this.isSelectingHour&&!this.isHourFormat24&&this.meridienSelected===this.PM?12:0},maxFaceValue:function(){return this.isSelectingHour?this.isHourFormat24||this.meridienSelected!==this.AM?23:11:59},faceSize:function(){return this.pickerSize-24},faceDisabledValues:function(){return this.isSelectingHour?this.isHourDisabled:this.isMinuteDisabled}},methods:{onClockInput:function(t){this.isSelectingHour?(this.hoursSelected=t,this.onHoursChange(t)):(this.minutesSelected=t,this.onMinutesChange(t))},onClockChange:function(t){this.autoSwitch&&this.isSelectingHour&&(this.isSelectingHour=!this.isSelectingHour)},onMeridienClick:function(t){this.meridienSelected!==t&&(this.meridienSelected=t,this.onMeridienChange(t))}}};var mt=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-clockpicker control",class:[t.size,t.type,{"is-expanded":t.expanded}]},[!t.isMobile||t.inline?n("b-dropdown",{ref:"dropdown",attrs:{position:t.position,disabled:t.disabled,inline:t.inline},on:{"active-change":t.onActiveChange}},[t.inline?t._e():n("b-input",t._b({ref:"input",attrs:{slot:"trigger",autocomplete:"off",value:t.formatValue(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,disabled:t.disabled,readonly:!t.editable,rounded:t.rounded,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus,blur:function(e){t.onBlur()&&t.checkHtml5Validity()}},nativeOn:{click:function(e){e.stopPropagation(),t.toggle(!0)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.toggle(!0)},change:function(e){return t.onChangeNativePicker(e)}},slot:"trigger"},"b-input",t.$attrs,!1)),t._v(" "),n("div",{staticClass:"card",attrs:{disabled:t.disabled,custom:""}},[t.inline?n("header",{staticClass:"card-header"},[n("div",{staticClass:"b-clockpicker-header card-header-title"},[n("div",{staticClass:"b-clockpicker-time"},[n("span",{staticClass:"b-clockpicker-btn",class:{active:t.isSelectingHour},on:{click:function(e){t.isSelectingHour=!0}}},[t._v(t._s(t.hoursDisplay))]),t._v(" "),n("span",[t._v(":")]),t._v(" "),n("span",{staticClass:"b-clockpicker-btn",class:{active:!t.isSelectingHour},on:{click:function(e){t.isSelectingHour=!1}}},[t._v(t._s(t.minutesDisplay))])]),t._v(" "),t.isHourFormat24?t._e():n("div",{staticClass:"b-clockpicker-period"},[n("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected==t.AM},on:{click:function(e){t.onMeridienClick(t.AM)}}},[t._v("am")]),t._v(" "),n("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected==t.PM},on:{click:function(e){t.onMeridienClick(t.PM)}}},[t._v("pm")])])])]):t._e(),t._v(" "),n("div",{staticClass:"card-content"},[n("div",{staticClass:"b-clockpicker-body",style:{width:t.faceSize+"px",height:t.faceSize+"px"}},[t.inline?t._e():n("div",{staticClass:"b-clockpicker-time"},[n("div",{staticClass:"b-clockpicker-btn",class:{active:t.isSelectingHour},on:{click:function(e){t.isSelectingHour=!0}}},[t._v(t._s(t.hoursLabel))]),t._v(" "),n("span",{staticClass:"b-clockpicker-btn",class:{active:!t.isSelectingHour},on:{click:function(e){t.isSelectingHour=!1}}},[t._v(t._s(t.minutesLabel))])]),t._v(" "),t.isHourFormat24||t.inline?t._e():n("div",{staticClass:"b-clockpicker-period"},[n("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected==t.AM},on:{click:function(e){t.onMeridienClick(t.AM)}}},[t._v(t._s(t.AM))]),t._v(" "),n("div",{staticClass:"b-clockpicker-btn",class:{active:t.meridienSelected==t.PM},on:{click:function(e){t.onMeridienClick(t.PM)}}},[t._v(t._s(t.PM))])]),t._v(" "),n("b-clockpicker-face",{attrs:{"picker-size":t.faceSize,min:t.minFaceValue,max:t.maxFaceValue,"face-numbers":t.isSelectingHour?t.hours:t.minutes,"disabled-values":t.faceDisabledValues,double:t.isSelectingHour&&t.isHourFormat24,value:t.isSelectingHour?t.hoursSelected:t.minutesSelected},on:{input:t.onClockInput,change:t.onClockChange}})],1)]),t._v(" "),void 0!==t.$slots.default&&t.$slots.default.length?n("footer",{staticClass:"b-clockpicker-footer card-footer"},[t._t("default")],2):t._e()])],1):n("b-input",t._b({ref:"input",attrs:{type:"time",autocomplete:"off",value:t.formatHHMMSS(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,max:t.formatHHMMSS(t.maxTime),min:t.formatHHMMSS(t.minTime),disabled:t.disabled,readonly:!1,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus,blur:function(e){t.onBlur()&&t.checkHtml5Validity()}},nativeOn:{click:function(e){e.stopPropagation(),t.toggle(!0)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.toggle(!0)},change:function(e){return t.onChangeNativePicker(e)}}},"b-input",t.$attrs,!1))],1)},staticRenderFns:[]},void 0,pt,void 0,!1,void 0,void 0,void 0),vt={install:function(t){Object(c.c)(t,mt)}};Object(c.d)(vt);var gt=vt;const yt={name:"BSelect",components:Object(l.a)({},v.name,v),mixins:[h],inheritAttrs:!1,props:{value:{type:[String,Number,Boolean,Object,Array,Function],default:null},placeholder:String,multiple:Boolean,nativeSize:[String,Number]},data:function(){return{selected:this.value,_elementRef:"select"}},computed:{computedValue:{get:function(){return this.selected},set:function(t){this.selected=t,this.$emit("input",t),!this.isValid&&this.checkHtml5Validity()}},spanClasses:function(){return[this.size,this.statusType,{"is-fullwidth":this.expanded,"is-loading":this.loading,"is-multiple":this.multiple,"is-rounded":this.rounded,"is-empty":null===this.selected}]}},watch:{value:function(t){this.selected=t,!this.isValid&&this.checkHtml5Validity()}}};var bt=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control",class:{"is-expanded":t.expanded,"has-icons-left":t.icon}},[n("span",{staticClass:"select",class:t.spanClasses},[n("select",t._b({directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"select",attrs:{multiple:t.multiple,size:t.nativeSize},on:{blur:function(e){t.$emit("blur",e)&&t.checkHtml5Validity()},focus:function(e){t.$emit("focus",e)},change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.computedValue=e.target.multiple?n:n[0]}}},"select",t.$attrs,!1),[t.placeholder?[null==t.computedValue?n("option",{attrs:{disabled:"",hidden:""},domProps:{value:null}},[t._v("\r\n                        "+t._s(t.placeholder)+"\r\n                    ")]):t._e()]:t._e(),t._v(" "),t._t("default")],2)]),t._v(" "),t.icon?n("b-icon",{staticClass:"is-left",attrs:{icon:t.icon,pack:t.iconPack,size:t.iconSize}}):t._e()],1)},staticRenderFns:[]},void 0,yt,void 0,!1,void 0,void 0,void 0);const wt={name:"BDatepickerTableRow",props:{selectedDate:{type:[Date,Array]},hoveredDateRange:Array,week:{type:Array,required:!0},month:{type:Number,required:!0},minDate:Date,maxDate:Date,disabled:Boolean,unselectableDates:Array,unselectableDaysOfWeek:Array,selectableDates:Array,events:Array,indicators:String,dateCreator:Function,nearbyMonthDays:Boolean,nearbySelectableMonthDays:Boolean,showWeekNumber:{type:Boolean,default:function(){return!1}},range:Boolean,multiple:Boolean,rulesForFirstWeek:{type:Number,default:function(){return 4}},firstDayOfWeek:Number},methods:{firstWeekOffset:function(t,e,n){var r=7+e-n;return-((7+new Date(t,0,r).getDay()-e)%7)+r-1},daysInYear:function(t){return this.isLeapYear(t)?366:365},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getSetDayOfYear:function(input){return Math.round((input-new Date(input.getFullYear(),0,1))/864e5)+1},weeksInYear:function(t,e,n){var r=this.firstWeekOffset(t,e,n),o=this.firstWeekOffset(t+1,e,n);return(this.daysInYear(t)-r+o)/7},getWeekNumber:function(t){var e,n,r=this.firstDayOfWeek,o=this.rulesForFirstWeek,c=this.firstWeekOffset(t.getFullYear(),r,o),l=Math.floor((this.getSetDayOfYear(t)-c-1)/7)+1;return l<1?(n=t.getFullYear()-1,e=l+this.weeksInYear(n,r,o)):l>this.weeksInYear(t.getFullYear(),r,o)?(e=l-this.weeksInYear(t.getFullYear(),r,o),n=t.getFullYear()+1):(n=t.getFullYear(),e=l),e},selectableDate:function(t){var e=[];if(this.minDate&&e.push(t>=this.minDate),this.maxDate&&e.push(t<=this.maxDate),this.nearbyMonthDays&&!this.nearbySelectableMonthDays&&e.push(t.getMonth()===this.month),this.selectableDates)for(var i=0;i<this.selectableDates.length;i++){var n=this.selectableDates[i];if(t.getDate()===n.getDate()&&t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth())return!0;e.push(!1)}if(this.unselectableDates)for(var r=0;r<this.unselectableDates.length;r++){var o=this.unselectableDates[r];e.push(t.getDate()!==o.getDate()||t.getFullYear()!==o.getFullYear()||t.getMonth()!==o.getMonth())}if(this.unselectableDaysOfWeek)for(var c=0;c<this.unselectableDaysOfWeek.length;c++){var l=this.unselectableDaysOfWeek[c];e.push(t.getDay()!==l)}return e.indexOf(!1)<0},emitChosenDate:function(t){this.disabled||this.selectableDate(t)&&this.$emit("select",t)},eventsDateMatch:function(t){if(!this.events||!this.events.length)return!1;for(var e=[],i=0;i<this.events.length;i++)this.events[i].date.getDay()===t.getDay()&&e.push(this.events[i]);return!!e.length&&e},classObject:function(t){function e(t,e,n){return!(!t||!e||n)&&(Array.isArray(e)?e.some((function(e){return t.getDate()===e.getDate()&&t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()})):t.getDate()===e.getDate()&&t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth())}function n(t,e,n){return!(!Array.isArray(e)||n)&&(t>e[0]&&t<e[1])}return{"is-selected":e(t,this.selectedDate)||n(t,this.selectedDate,this.multiple),"is-first-selected":e(t,Array.isArray(this.selectedDate)&&this.selectedDate[0],this.multiple),"is-within-selected":n(t,this.selectedDate,this.multiple),"is-last-selected":e(t,Array.isArray(this.selectedDate)&&this.selectedDate[1],this.multiple),"is-within-hovered-range":this.hoveredDateRange&&2===this.hoveredDateRange.length&&(e(t,this.hoveredDateRange)||n(t,this.hoveredDateRange)),"is-first-hovered":e(t,Array.isArray(this.hoveredDateRange)&&this.hoveredDateRange[0]),"is-within-hovered":n(t,this.hoveredDateRange),"is-last-hovered":e(t,Array.isArray(this.hoveredDateRange)&&this.hoveredDateRange[1]),"is-today":e(t,this.dateCreator()),"is-selectable":this.selectableDate(t)&&!this.disabled,"is-unselectable":!this.selectableDate(t)||this.disabled,"is-invisible":!this.nearbyMonthDays&&t.getMonth()!==this.month,"is-nearby":this.nearbySelectableMonthDays&&t.getMonth()!==this.month}},setRangeHoverEndDate:function(t){this.range&&this.$emit("rangeHoverEndDate",t)}}};var St=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datepicker-row"},[t.showWeekNumber?n("a",{staticClass:"datepicker-cell is-week-number"},[t._v("\r\n            "+t._s(t.getWeekNumber(t.week[6]))+"\r\n        ")]):t._e(),t._v(" "),t._l(t.week,(function(e,r){return[t.selectableDate(e)&&!t.disabled?n("a",{key:r,staticClass:"datepicker-cell",class:[t.classObject(e),{"has-event":t.eventsDateMatch(e)},t.indicators],attrs:{role:"button",href:"#",disabled:t.disabled},on:{click:function(n){n.preventDefault(),t.emitChosenDate(e)},keydown:[function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key,"Enter"))return null;n.preventDefault(),t.emitChosenDate(e)},function(n){if(!("button"in n)&&t._k(n.keyCode,"space",32,n.key,[" ","Spacebar"]))return null;n.preventDefault(),t.emitChosenDate(e)}],mouseenter:function(n){t.setRangeHoverEndDate(e)}}},[t._v("\r\n                "+t._s(e.getDate())+"\r\n                "),t.eventsDateMatch(e)?n("div",{staticClass:"events"},t._l(t.eventsDateMatch(e),(function(t,e){return n("div",{key:e,staticClass:"event",class:t.type})}))):t._e()]):n("div",{key:r,staticClass:"datepicker-cell",class:t.classObject(e)},[t._v("\r\n                "+t._s(e.getDate())+"\r\n            ")])]}))],2)},staticRenderFns:[]},void 0,wt,void 0,!1,void 0,void 0,void 0),Tt=function(t){return void 0!==t};const _t={name:"BDatepickerTable",components:Object(l.a)({},St.name,St),props:{value:{type:[Date,Array]},dayNames:Array,monthNames:Array,firstDayOfWeek:Number,events:Array,indicators:String,minDate:Date,maxDate:Date,focused:Object,disabled:Boolean,dateCreator:Function,unselectableDates:Array,unselectableDaysOfWeek:Array,selectableDates:Array,nearbyMonthDays:Boolean,nearbySelectableMonthDays:Boolean,showWeekNumber:{type:Boolean,default:function(){return!1}},rulesForFirstWeek:{type:Number,default:function(){return 4}},range:Boolean,multiple:Boolean},data:function(){return{selectedBeginDate:void 0,selectedEndDate:void 0,hoveredEndDate:void 0,multipleSelectedDates:[]}},computed:{visibleDayNames:function(){for(var t=[],e=this.firstDayOfWeek;t.length<this.dayNames.length;){var n=this.dayNames[e%this.dayNames.length];t.push(n),e++}return this.showWeekNumber&&t.unshift(""),t},hasEvents:function(){return this.events&&this.events.length},eventsInThisMonth:function(){if(!this.events)return[];for(var t=[],i=0;i<this.events.length;i++){var e=this.events[i];e.hasOwnProperty("date")||(e={date:e}),e.hasOwnProperty("type")||(e.type="is-primary"),e.date.getMonth()===this.focused.month&&e.date.getFullYear()===this.focused.year&&t.push(e)}return t},weeksInThisMonth:function(){for(var t=this.focused.month,e=this.focused.year,n=[],r=1;n.length<6;){var o=this.weekBuilder(r,t,e);n.push(o),r+=7}return n},hoveredDateRange:function(){return this.range&&isNaN(this.selectedEndDate)?this.hoveredEndDate<this.selectedBeginDate?[this.hoveredEndDate,this.selectedBeginDate].filter(Tt):[this.selectedBeginDate,this.hoveredEndDate].filter(Tt):[]}},methods:{updateSelectedDate:function(t){this.range||this.multiple?this.range?this.handleSelectRangeDate(t):this.multiple&&this.handleSelectMultipleDates(t):this.$emit("input",t)},handleSelectRangeDate:function(t){this.selectedBeginDate&&this.selectedEndDate?(this.selectedBeginDate=t,this.selectedEndDate=void 0,this.$emit("range-start",t)):this.selectedBeginDate&&!this.selectedEndDate?(this.selectedBeginDate>t?(this.selectedEndDate=this.selectedBeginDate,this.selectedBeginDate=t):this.selectedEndDate=t,this.$emit("range-end",t),this.$emit("input",[this.selectedBeginDate,this.selectedEndDate])):(this.selectedBeginDate=t,this.$emit("range-start",t))},handleSelectMultipleDates:function(t){this.multipleSelectedDates.filter((function(e){return e.getTime()===t.getTime()})).length?this.multipleSelectedDates=this.multipleSelectedDates.filter((function(e){return e.getTime()!==t.getTime()})):this.multipleSelectedDates.push(t),this.$emit("input",this.multipleSelectedDates)},weekBuilder:function(t,e,n){for(var r=new Date(n,e),o=[],c=new Date(n,e,t).getDay(),l=c>=this.firstDayOfWeek?c-this.firstDayOfWeek:7-this.firstDayOfWeek+c,h=1,i=0;i<l;i++)o.unshift(new Date(r.getFullYear(),r.getMonth(),t-h)),h++;o.push(new Date(n,e,t));for(var d=1;o.length<7;)o.push(new Date(n,e,t+d)),d++;return o},eventsInThisWeek:function(t){return this.eventsInThisMonth.filter((function(e){var n=new Date(Date.parse(e.date));n.setHours(0,0,0,0);var r=n.getTime();return t.some((function(t){return t.getTime()===r}))}))},setRangeHoverEndDate:function(t){this.hoveredEndDate=t}}};var Ct=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"datepicker-table"},[n("header",{staticClass:"datepicker-header"},t._l(t.visibleDayNames,(function(e,r){return n("div",{key:r,staticClass:"datepicker-cell"},[t._v("\r\n                "+t._s(e)+"\r\n            ")])}))),t._v(" "),n("div",{staticClass:"datepicker-body",class:{"has-events":t.hasEvents}},t._l(t.weeksInThisMonth,(function(e,r){return n("b-datepicker-table-row",{key:r,attrs:{"selected-date":t.value,week:e,month:t.focused.month,"min-date":t.minDate,"max-date":t.maxDate,disabled:t.disabled,"unselectable-dates":t.unselectableDates,"unselectable-days-of-week":t.unselectableDaysOfWeek,"selectable-dates":t.selectableDates,events:t.eventsInThisWeek(e),indicators:t.indicators,"date-creator":t.dateCreator,"nearby-month-days":t.nearbyMonthDays,"nearby-selectable-month-days":t.nearbySelectableMonthDays,"show-week-number":t.showWeekNumber,"first-day-of-week":t.firstDayOfWeek,"rules-for-first-week":t.rulesForFirstWeek,range:t.range,"hovered-date-range":t.hoveredDateRange,multiple:t.multiple},on:{select:t.updateSelectedDate,rangeHoverEndDate:t.setRangeHoverEndDate}})})),1)])},staticRenderFns:[]},void 0,_t,void 0,!1,void 0,void 0,void 0);const It={name:"BDatepickerMonth",props:{value:{type:[Date,Array]},monthNames:Array,events:Array,indicators:String,minDate:Date,maxDate:Date,focused:Object,disabled:Boolean,dateCreator:Function,unselectableDates:Array,unselectableDaysOfWeek:Array,selectableDates:Array,multiple:Boolean},data:function(){return{multipleSelectedDates:[]}},computed:{hasEvents:function(){return this.events&&this.events.length},eventsInThisYear:function(){if(!this.events)return[];for(var t=[],i=0;i<this.events.length;i++){var e=this.events[i];e.hasOwnProperty("date")||(e={date:e}),e.hasOwnProperty("type")||(e.type="is-primary"),e.date.getFullYear()===this.focused.year&&t.push(e)}return t},monthDates:function(){for(var t=this.focused.year,e=[],i=0;i<12;i++){var n=new Date(t,i,1);n.setHours(0,0,0,0),e.push(n)}return e}},methods:{selectMultipleDates:function(t){this.multipleSelectedDates.find((function(e){return e.getTime()===t.getTime()}))?this.multipleSelectedDates=this.multipleSelectedDates.filter((function(e){return e.getTime()!==t.getTime()})):this.multipleSelectedDates.push(t),this.$emit("input",this.multipleSelectedDates)},selectableDate:function(t){var e=[];if(this.minDate&&e.push(t>=this.minDate),this.maxDate&&e.push(t<=this.maxDate),e.push(t.getFullYear()===this.focused.year),this.selectableDates)for(var i=0;i<this.selectableDates.length;i++){var n=this.selectableDates[i];if(t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth())return!0;e.push(!1)}if(this.unselectableDates)for(var r=0;r<this.unselectableDates.length;r++){var o=this.unselectableDates[r];e.push(t.getFullYear()!==o.getFullYear()||t.getMonth()!==o.getMonth())}if(this.unselectableDaysOfWeek)for(var c=0;c<this.unselectableDaysOfWeek.length;c++){var l=this.unselectableDaysOfWeek[c];e.push(t.getDay()!==l)}return e.indexOf(!1)<0},eventsDateMatch:function(t){if(!this.eventsInThisYear.length)return!1;for(var e=[],i=0;i<this.eventsInThisYear.length;i++)this.eventsInThisYear[i].date.getMonth()===t.getMonth()&&e.push(this.events[i]);return!!e.length&&e},classObject:function(t){function e(t,e,n){return!(!t||!e||n)&&(t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth())}return{"is-selected":e(t,this.value,this.multiple)||(n=t,r=this.multipleSelectedDates,o=this.multiple,!(!Array.isArray(r)||!o)&&r.some((function(t){return n.getDate()===t.getDate()&&n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()}))),"is-today":e(t,this.dateCreator()),"is-selectable":this.selectableDate(t)&&!this.disabled,"is-unselectable":!this.selectableDate(t)||this.disabled};var n,r,o},emitChosenDate:function(t){this.disabled||(this.multiple?this.selectMultipleDates(t):this.selectableDate(t)&&this.$emit("input",t))}}};var Et,kt=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"datepicker-table"},[n("div",{staticClass:"datepicker-body",class:{"has-events":t.hasEvents}},[n("div",{staticClass:"datepicker-months"},[t._l(t.monthDates,(function(e,r){return[t.selectableDate(e)&&!t.disabled?n("a",{key:r,staticClass:"datepicker-cell",class:[t.classObject(e),{"has-event":t.eventsDateMatch(e)},t.indicators],attrs:{role:"button",href:"#",disabled:t.disabled},on:{click:function(n){n.preventDefault(),t.emitChosenDate(e)},keydown:[function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key,"Enter"))return null;n.preventDefault(),t.emitChosenDate(e)},function(n){if(!("button"in n)&&t._k(n.keyCode,"space",32,n.key,[" ","Spacebar"]))return null;n.preventDefault(),t.emitChosenDate(e)}]}},[t._v("\r\n                        "+t._s(t.monthNames[e.getMonth()])+"\r\n                        "),t.eventsDateMatch(e)?n("div",{staticClass:"events"},t._l(t.eventsDateMatch(e),(function(t,e){return n("div",{key:e,staticClass:"event",class:t.type})}))):t._e()]):n("div",{key:r,staticClass:"datepicker-cell",class:t.classObject(e)},[t._v("\r\n                        "+t._s(t.monthNames[e.getMonth()])+"\r\n                    ")])]}))],2)])])},staticRenderFns:[]},void 0,It,void 0,!1,void 0,void 0,void 0);const Dt={name:"BDatepicker",components:(Et={},Object(l.a)(Et,Ct.name,Ct),Object(l.a)(Et,kt.name,kt),Object(l.a)(Et,w.name,w),Object(l.a)(Et,ct.name,ct),Object(l.a)(Et,bt.name,bt),Object(l.a)(Et,v.name,v),Object(l.a)(Et,nt.name,nt),Object(l.a)(Et,ot.name,ot),Et),mixins:[h],inheritAttrs:!1,props:{value:{type:[Date,Array]},dayNames:{type:Array,default:function(){return Array.isArray(o.c.defaultDayNames)?o.c.defaultDayNames:["Su","M","Tu","W","Th","F","S"]}},monthNames:{type:Array,default:function(){return Array.isArray(o.c.defaultMonthNames)?o.c.defaultMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]}},firstDayOfWeek:{type:Number,default:function(){return"number"==typeof o.c.defaultFirstDayOfWeek?o.c.defaultFirstDayOfWeek:0}},inline:Boolean,minDate:Date,maxDate:Date,focusedDate:Date,placeholder:String,editable:Boolean,disabled:Boolean,unselectableDates:Array,unselectableDaysOfWeek:{type:Array,default:function(){return o.c.defaultUnselectableDaysOfWeek}},selectableDates:Array,dateFormatter:{type:Function,default:function(t,e){return"function"==typeof o.c.defaultDateFormatter?o.c.defaultDateFormatter(t):function(t,e){var n=(Array.isArray(t)?t:[t]).map((function(t){var n=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate(),r=new Date(n);return e.isTypeMonth?r.toLocaleDateString(void 0,{year:"numeric",month:"2-digit"}):r.toLocaleDateString()}));return e.multiple?n.join(", "):n.join(" - ")}(t,e)}},dateParser:{type:Function,default:function(t,e){return"function"==typeof o.c.defaultDateParser?o.c.defaultDateParser(t):function(t,e){if(!e.isTypeMonth)return new Date(Date.parse(t));if(t){var s=t.split("/"),n=4===s[0].length?s[0]:s[1],r=2===s[0].length?s[0]:s[1];if(n&&r)return new Date(parseInt(n,10),parseInt(r-1,10),1,0,0,0,0)}return null}(t,e)}},dateCreator:{type:Function,default:function(){return"function"==typeof o.c.defaultDateCreator?o.c.defaultDateCreator():new Date}},mobileNative:{type:Boolean,default:function(){return o.c.defaultDatepickerMobileNative}},position:String,events:Array,indicators:{type:String,default:"dots"},openOnFocus:Boolean,iconPrev:{type:String,default:o.c.defaultIconPrev},iconNext:{type:String,default:o.c.defaultIconNext},yearsRange:{type:Array,default:function(){return o.c.defaultDatepickerYearsRange}},type:{type:String,validator:function(t){return["month"].indexOf(t)>=0}},nearbyMonthDays:{type:Boolean,default:function(){return o.c.defaultDatepickerNearbyMonthDays}},nearbySelectableMonthDays:{type:Boolean,default:function(){return o.c.defaultDatepickerNearbySelectableMonthDays}},showWeekNumber:{type:Boolean,default:function(){return o.c.defaultDatepickerShowWeekNumber}},rulesForFirstWeek:{type:Number,default:function(){return 4}},range:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},mobileModal:{type:Boolean,default:function(){return o.c.defaultDatepickerMobileModal}},focusable:{type:Boolean,default:!0},trapFocus:{type:Boolean,default:o.c.defaultTrapFocus}},data:function(){var t=(Array.isArray(this.value)?this.value[0]:this.value)||this.focusedDate||this.dateCreator();return{dateSelected:this.value,focusedDateData:{month:t.getMonth(),year:t.getFullYear()},_elementRef:"input",_isDatepicker:!0}},computed:{computedValue:{get:function(){return this.dateSelected},set:function(t){this.updateInternalState(t),this.multiple||this.togglePicker(!1),this.$emit("input",t)}},listOfMonths:function(){var t=0,e=12;return this.minDate&&this.focusedDateData.year===this.minDate.getFullYear()&&(t=this.minDate.getMonth()),this.maxDate&&this.focusedDateData.year===this.maxDate.getFullYear()&&(e=this.maxDate.getMonth()),this.monthNames.map((function(n,r){return{name:n,index:r,disabled:r<t||r>e}}))},listOfYears:function(){var t=this.focusedDateData.year+this.yearsRange[1];this.maxDate&&this.maxDate.getFullYear()<t&&(t=Math.max(this.maxDate.getFullYear(),this.focusedDateData.year));var e=this.focusedDateData.year+this.yearsRange[0];this.minDate&&this.minDate.getFullYear()>e&&(e=Math.min(this.minDate.getFullYear(),this.focusedDateData.year));for(var n=[],i=e;i<=t;i++)n.push(i);return n.reverse()},showPrev:function(){return!!this.minDate&&(this.isTypeMonth?this.focusedDateData.year<=this.minDate.getFullYear():new Date(this.focusedDateData.year,this.focusedDateData.month)<=new Date(this.minDate.getFullYear(),this.minDate.getMonth()))},showNext:function(){return!!this.maxDate&&(this.isTypeMonth?this.focusedDateData.year>=this.maxDate.getFullYear():new Date(this.focusedDateData.year,this.focusedDateData.month)>=new Date(this.maxDate.getFullYear(),this.maxDate.getMonth()))},isMobile:function(){return this.mobileNative&&r.c.any()},isTypeMonth:function(){return"month"===this.type}},watch:{value:function(t){this.updateInternalState(t),this.multiple||this.togglePicker(!1),!this.isValid&&this.$refs.input.checkHtml5Validity()},focusedDate:function(t){t&&(this.focusedDateData={month:t.getMonth(),year:t.getFullYear()})},"focusedDateData.month":function(t){this.$emit("change-month",t)},"focusedDateData.year":function(t){this.$emit("change-year",t)}},methods:{onChange:function(t){var e=this.dateParser(t,this);!e||isNaN(e)&&(!Array.isArray(e)||2!==e.length||isNaN(e[0])||isNaN(e[1]))?(this.computedValue=null,this.$refs.input.newValue=this.computedValue):this.computedValue=e},formatValue:function(t){return Array.isArray(t)?Array.isArray(t)&&t.every((function(t){return!isNaN(t)}))?this.dateFormatter(t,this):null:t&&!isNaN(t)?this.dateFormatter(t,this):null},prev:function(){this.disabled||(this.isTypeMonth?this.focusedDateData.year-=1:this.focusedDateData.month>0?this.focusedDateData.month-=1:(this.focusedDateData.month=11,this.focusedDateData.year-=1))},next:function(){this.disabled||(this.isTypeMonth?this.focusedDateData.year+=1:this.focusedDateData.month<11?this.focusedDateData.month+=1:(this.focusedDateData.month=0,this.focusedDateData.year+=1))},formatNative:function(t){return this.isTypeMonth?this.formatYYYYMM(t):this.formatYYYYMMDD(t)},formatYYYYMMDD:function(t){var e=new Date(t);if(t&&!isNaN(e)){var n=e.getFullYear(),r=e.getMonth()+1,o=e.getDate();return n+"-"+(r<10?"0":"")+r+"-"+(o<10?"0":"")+o}return""},formatYYYYMM:function(t){var e=new Date(t);if(t&&!isNaN(e)){var n=e.getFullYear(),r=e.getMonth()+1;return n+"-"+(r<10?"0":"")+r}return""},onChangeNativePicker:function(t){var e=t.target.value;this.computedValue=e?new Date(e+"T00:00:00"):null},updateInternalState:function(t){var e=Array.isArray(t)?t.length?t[0]:this.dateCreator():t||this.dateCreator();this.focusedDateData={month:e.getMonth(),year:e.getFullYear()},this.dateSelected=t},togglePicker:function(t){this.$refs.dropdown&&this.closeOnClick&&(this.$refs.dropdown.isActive="boolean"==typeof t?t:!this.$refs.dropdown.isActive)},handleOnFocus:function(t){this.onFocus(t),this.openOnFocus&&this.togglePicker(!0)},toggle:function(){if(this.mobileNative&&this.isMobile){var input=this.$refs.input.$refs.input;return input.focus(),void input.click()}this.$refs.dropdown.toggle()},onInputClick:function(t){this.$refs.dropdown.isActive&&t.stopPropagation()},keyPress:function(t){this.$refs.dropdown&&this.$refs.dropdown.isActive&&27===t.keyCode&&this.togglePicker(!1)},onActiveChange:function(t){t||this.onBlur()}},created:function(){"undefined"!=typeof window&&document.addEventListener("keyup",this.keyPress)},beforeDestroy:function(){"undefined"!=typeof window&&document.removeEventListener("keyup",this.keyPress)}};var At=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datepicker control",class:[t.size,{"is-expanded":t.expanded}]},[!t.isMobile||t.inline?n("b-dropdown",{ref:"dropdown",attrs:{position:t.position,disabled:t.disabled,inline:t.inline,"mobile-modal":t.mobileModal,"trap-focus":t.trapFocus},on:{"active-change":t.onActiveChange}},[t.inline?t._e():n("b-input",t._b({ref:"input",attrs:{slot:"trigger",autocomplete:"off",value:t.formatValue(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,rounded:t.rounded,loading:t.loading,disabled:t.disabled,readonly:!t.editable,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus,blur:t.onBlur},nativeOn:{click:function(e){return t.onInputClick(e)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.togglePicker(!0)},change:function(e){t.onChange(e.target.value)}},slot:"trigger"},"b-input",t.$attrs,!1)),t._v(" "),n("b-dropdown-item",{attrs:{disabled:t.disabled,focusable:t.focusable,custom:""}},[n("header",{staticClass:"datepicker-header"},[void 0!==t.$slots.header&&t.$slots.header.length?[t._t("header")]:n("div",{staticClass:"pagination field is-centered",class:t.size},[n("a",{directives:[{name:"show",rawName:"v-show",value:!t.showPrev&&!t.disabled,expression:"!showPrev && !disabled"}],staticClass:"pagination-previous",attrs:{role:"button",href:"#",disabled:t.disabled},on:{click:function(e){return e.preventDefault(),t.prev(e)},keydown:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.prev(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?(e.preventDefault(),t.prev(e)):null}]}},[n("b-icon",{attrs:{icon:t.iconPrev,pack:t.iconPack,both:"",type:"is-primary is-clickable"}})],1),t._v(" "),n("a",{directives:[{name:"show",rawName:"v-show",value:!t.showNext&&!t.disabled,expression:"!showNext && !disabled"}],staticClass:"pagination-next",attrs:{role:"button",href:"#",disabled:t.disabled},on:{click:function(e){return e.preventDefault(),t.next(e)},keydown:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.next(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?(e.preventDefault(),t.next(e)):null}]}},[n("b-icon",{attrs:{icon:t.iconNext,pack:t.iconPack,both:"",type:"is-primary is-clickable"}})],1),t._v(" "),n("div",{staticClass:"pagination-list"},[n("b-field",[t.isTypeMonth?t._e():n("b-select",{attrs:{disabled:t.disabled,size:t.size},model:{value:t.focusedDateData.month,callback:function(e){t.$set(t.focusedDateData,"month",e)},expression:"focusedDateData.month"}},t._l(t.listOfMonths,(function(e){return n("option",{key:e.name,attrs:{disabled:e.disabled},domProps:{value:e.index}},[t._v("\r\n                                        "+t._s(e.name)+"\r\n                                    ")])}))),t._v(" "),n("b-select",{attrs:{disabled:t.disabled,size:t.size},model:{value:t.focusedDateData.year,callback:function(e){t.$set(t.focusedDateData,"year",e)},expression:"focusedDateData.year"}},t._l(t.listOfYears,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\r\n                                        "+t._s(e)+"\r\n                                    ")])})))],1)],1)])],2),t._v(" "),t.isTypeMonth?n("div",[n("b-datepicker-month",{attrs:{"month-names":t.monthNames,"min-date":t.minDate,"max-date":t.maxDate,focused:t.focusedDateData,disabled:t.disabled,"unselectable-dates":t.unselectableDates,"unselectable-days-of-week":t.unselectableDaysOfWeek,"selectable-dates":t.selectableDates,events:t.events,indicators:t.indicators,"date-creator":t.dateCreator,multiple:t.multiple},on:{close:function(e){t.togglePicker(!1)}},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}})],1):n("div",{staticClass:"datepicker-content"},[n("b-datepicker-table",{attrs:{"day-names":t.dayNames,"month-names":t.monthNames,"first-day-of-week":t.firstDayOfWeek,"rules-for-first-week":t.rulesForFirstWeek,"min-date":t.minDate,"max-date":t.maxDate,focused:t.focusedDateData,disabled:t.disabled,"unselectable-dates":t.unselectableDates,"unselectable-days-of-week":t.unselectableDaysOfWeek,"selectable-dates":t.selectableDates,events:t.events,indicators:t.indicators,"date-creator":t.dateCreator,"type-month":t.isTypeMonth,"nearby-month-days":t.nearbyMonthDays,"nearby-selectable-month-days":t.nearbySelectableMonthDays,"show-week-number":t.showWeekNumber,range:t.range,multiple:t.multiple},on:{"range-start":function(e){return t.$emit("range-start",e)},"range-end":function(e){return t.$emit("range-end",e)},close:function(e){t.togglePicker(!1)}},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}})],1),t._v(" "),void 0!==t.$slots.default&&t.$slots.default.length?n("footer",{staticClass:"datepicker-footer"},[t._t("default")],2):t._e()])],1):n("b-input",t._b({ref:"input",attrs:{type:t.isTypeMonth?"month":"date",autocomplete:"off",value:t.formatNative(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,max:t.formatNative(t.maxDate),min:t.formatNative(t.minDate),disabled:t.disabled,readonly:!1,"use-html5-validation":t.useHtml5Validation},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{change:function(e){return t.onChangeNativePicker(e)}}},"b-input",t.$attrs,!1))],1)},staticRenderFns:[]},void 0,Dt,void 0,!1,void 0,void 0,void 0),Nt={install:function(t){Object(c.c)(t,At)}};Object(c.d)(Nt);var Ot,xt=Nt;const Pt={name:"BTimepicker",components:(Ot={},Object(l.a)(Ot,w.name,w),Object(l.a)(Ot,ct.name,ct),Object(l.a)(Ot,bt.name,bt),Object(l.a)(Ot,v.name,v),Object(l.a)(Ot,nt.name,nt),Object(l.a)(Ot,ot.name,ot),Ot),mixins:[J],inheritAttrs:!1,data:function(){return{_isTimepicker:!0}},computed:{nativeStep:function(){if(this.enableSeconds)return"1"}}};var Rt,Mt=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"timepicker control",class:[t.size,{"is-expanded":t.expanded}]},[!t.isMobile||t.inline?n("b-dropdown",{ref:"dropdown",attrs:{position:t.position,disabled:t.disabled,inline:t.inline},on:{"active-change":t.onActiveChange}},[t.inline?t._e():n("b-input",t._b({ref:"input",attrs:{slot:"trigger",autocomplete:"off",value:t.formatValue(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,disabled:t.disabled,readonly:!t.editable,rounded:t.rounded,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus,blur:function(e){t.onBlur()&&t.checkHtml5Validity()}},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.toggle(!0)},change:function(e){t.onChange(e.target.value)}},slot:"trigger"},"b-input",t.$attrs,!1)),t._v(" "),n("b-dropdown-item",{attrs:{disabled:t.disabled,focusable:t.focusable,custom:""}},[n("b-field",{attrs:{grouped:"",position:"is-centered"}},[n("b-select",{attrs:{disabled:t.disabled,placeholder:"00"},nativeOn:{change:function(e){t.onHoursChange(e.target.value)}},model:{value:t.hoursSelected,callback:function(e){t.hoursSelected=e},expression:"hoursSelected"}},t._l(t.hours,(function(e){return n("option",{key:e.value,attrs:{disabled:t.isHourDisabled(e.value)},domProps:{value:e.value}},[t._v("\r\n                            "+t._s(e.label)+"\r\n                        ")])}))),t._v(" "),n("span",{staticClass:"control is-colon"},[t._v(":")]),t._v(" "),n("b-select",{attrs:{disabled:t.disabled,placeholder:"00"},nativeOn:{change:function(e){t.onMinutesChange(e.target.value)}},model:{value:t.minutesSelected,callback:function(e){t.minutesSelected=e},expression:"minutesSelected"}},t._l(t.minutes,(function(e){return n("option",{key:e.value,attrs:{disabled:t.isMinuteDisabled(e.value)},domProps:{value:e.value}},[t._v("\r\n                            "+t._s(e.label)+"\r\n                        ")])}))),t._v(" "),t.enableSeconds?[n("span",{staticClass:"control is-colon"},[t._v(":")]),t._v(" "),n("b-select",{attrs:{disabled:t.disabled,placeholder:"00"},nativeOn:{change:function(e){t.onSecondsChange(e.target.value)}},model:{value:t.secondsSelected,callback:function(e){t.secondsSelected=e},expression:"secondsSelected"}},t._l(t.seconds,(function(e){return n("option",{key:e.value,attrs:{disabled:t.isSecondDisabled(e.value)},domProps:{value:e.value}},[t._v("\r\n                                "+t._s(e.label)+"\r\n                            ")])})))]:t._e(),t._v(" "),t.isHourFormat24?t._e():n("b-select",{attrs:{disabled:t.disabled},nativeOn:{change:function(e){t.onMeridienChange(e.target.value)}},model:{value:t.meridienSelected,callback:function(e){t.meridienSelected=e},expression:"meridienSelected"}},t._l(t.meridiens,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\r\n                            "+t._s(e)+"\r\n                        ")])})))],2),t._v(" "),void 0!==t.$slots.default&&t.$slots.default.length?n("footer",{staticClass:"timepicker-footer"},[t._t("default")],2):t._e()],1)],1):n("b-input",t._b({ref:"input",attrs:{type:"time",step:t.nativeStep,autocomplete:"off",value:t.formatHHMMSS(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,max:t.formatHHMMSS(t.maxTime),min:t.formatHHMMSS(t.minTime),disabled:t.disabled,readonly:!1,"use-html5-validation":t.useHtml5Validation},on:{focus:t.handleOnFocus,blur:function(e){t.onBlur()&&t.checkHtml5Validity()}},nativeOn:{change:function(e){t.onChange(e.target.value)}}},"b-input",t.$attrs,!1))],1)},staticRenderFns:[]},void 0,Pt,void 0,!1,void 0,void 0,void 0);const Lt={name:"BDatetimepicker",components:(Rt={},Object(l.a)(Rt,At.name,At),Object(l.a)(Rt,Mt.name,Mt),Rt),mixins:[h],inheritAttrs:!1,props:{value:{type:Date},editable:{type:Boolean,default:!1},placeholder:String,disabled:Boolean,icon:String,iconPack:String,inline:Boolean,openOnFocus:Boolean,position:String,mobileNative:{type:Boolean,default:!0},minDatetime:Date,maxDatetime:Date,datetimeFormatter:{type:Function},datetimeParser:{type:Function},datetimeCreator:{type:Function,default:function(t){return"function"==typeof o.c.defaultDatetimeCreator?o.c.defaultDatetimeCreator(t):t}},datepicker:Object,timepicker:Object,focusable:{type:Boolean,default:!0}},data:function(){return{newValue:this.value}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){if(t){var e=new Date(t.getTime());this.newValue?t.getDate()===this.newValue.getDate()&&t.getMonth()===this.newValue.getMonth()&&t.getFullYear()===this.newValue.getFullYear()||0!==t.getHours()||0!==t.getMinutes()||0!==t.getSeconds()||e.setHours(this.newValue.getHours(),this.newValue.getMinutes(),this.newValue.getSeconds(),0):e=this.datetimeCreator(t),this.minDatetime&&e<this.minDatetime?e=this.minDatetime:this.maxDatetime&&e>this.maxDatetime&&(e=this.maxDatetime),this.newValue=new Date(e.getTime())}else this.newValue=t;this.$emit("input",this.newValue)}},isMobile:function(){return this.mobileNative&&r.c.any()},minDate:function(){return this.minDatetime?new Date(this.minDatetime.getFullYear(),this.minDatetime.getMonth(),this.minDatetime.getDate(),0,0,0,0):this.datepicker?this.datepicker.minDate:null},maxDate:function(){return this.maxDatetime?new Date(this.maxDatetime.getFullYear(),this.maxDatetime.getMonth(),this.maxDatetime.getDate(),0,0,0,0):this.datepicker?this.datepicker.maxDate:null},minTime:function(){return this.minDatetime&&null!==this.newValue&&void 0!==this.newValue?this.minDatetime.getFullYear()===this.newValue.getFullYear()&&this.minDatetime.getMonth()===this.newValue.getMonth()&&this.minDatetime.getDate()===this.newValue.getDate()?this.minDatetime:void 0:this.timepicker?this.timepicker.minTime:null},maxTime:function(){return this.maxDatetime&&null!==this.newValue&&void 0!==this.newValue?this.maxDatetime.getFullYear()===this.newValue.getFullYear()&&this.maxDatetime.getMonth()===this.newValue.getMonth()&&this.maxDatetime.getDate()===this.newValue.getDate()?this.maxDatetime:void 0:this.timepicker?this.timepicker.maxTime:null},datepickerSize:function(){return this.datepicker&&this.datepicker.size?this.datepicker.size:this.size},timepickerSize:function(){return this.timepicker&&this.timepicker.size?this.timepicker.size:this.size},timepickerDisabled:function(){return this.timepicker&&this.timepicker.disabled?this.timepicker.disabled:this.disabled}},watch:{value:function(t){this.newValue=t}},methods:{defaultDatetimeParser:function(t){return"function"==typeof this.datetimeParser?this.datetimeParser(t):"function"==typeof o.c.defaultDatetimeParser?o.c.defaultDatetimeParser(t):new Date(Date.parse(t))},defaultDatetimeFormatter:function(t){if("function"==typeof this.datetimeFormatter)return this.datetimeFormatter(t);if("function"==typeof o.c.defaultDatetimeParser)return o.c.defaultDatetimeParser(t);if(this.$refs.timepicker){var e=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();return new Date(e).toLocaleDateString()+" "+this.$refs.timepicker.timeFormatter(t,this.$refs.timepicker)}return null},onChangeNativePicker:function(t){var e=t.target.value;this.computedValue=e?new Date(e):null},formatNative:function(t){var e=new Date(t);if(t&&!isNaN(e)){var n=e.getFullYear(),r=e.getMonth()+1,o=e.getDate(),c=e.getHours(),l=e.getMinutes(),h=e.getSeconds();return n+"-"+(r<10?"0":"")+r+"-"+(o<10?"0":"")+o+"T"+(c<10?"0":"")+c+":"+(l<10?"0":"")+l+":"+(h<10?"0":"")+h}return""},toggle:function(){this.$refs.datepicker.toggle()}},mounted:function(){this.newValue&&this.$refs.datepicker.$forceUpdate()}};var Vt=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return!t.isMobile||t.inline?n("b-datepicker",t._b({ref:"datepicker",attrs:{"open-on-focus":t.openOnFocus,position:t.position,loading:t.loading,inline:t.inline,editable:t.editable,expanded:t.expanded,"close-on-click":!1,"date-formatter":t.defaultDatetimeFormatter,"date-parser":t.defaultDatetimeParser,"min-date":t.minDate,"max-date":t.maxDate,icon:t.icon,"icon-pack":t.iconPack,size:t.datepickerSize,placeholder:t.placeholder,range:!1,disabled:t.disabled,"mobile-native":t.mobileNative,focusable:t.focusable},on:{focus:t.onFocus,blur:t.onBlur,"change-month":function(e){t.$emit("change-month",e)},"change-year":function(e){t.$emit("change-year",e)}},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}},"b-datepicker",t.datepicker,!1),[n("nav",{staticClass:"level is-mobile"},[void 0!==t.$slots.left?n("div",{staticClass:"level-item has-text-centered"},[t._t("left")],2):t._e(),t._v(" "),n("div",{staticClass:"level-item has-text-centered"},[n("b-timepicker",t._b({ref:"timepicker",attrs:{inline:"",editable:t.editable,"min-time":t.minTime,"max-time":t.maxTime,size:t.timepickerSize,disabled:t.timepickerDisabled,focusable:t.focusable},model:{value:t.computedValue,callback:function(e){t.computedValue=e},expression:"computedValue"}},"b-timepicker",t.timepicker,!1))],1),t._v(" "),void 0!==t.$slots.right?n("div",{staticClass:"level-item has-text-centered"},[t._t("right")],2):t._e()])]):n("b-input",t._b({ref:"input",attrs:{type:"datetime-local",autocomplete:"off",value:t.formatNative(t.computedValue),placeholder:t.placeholder,size:t.size,icon:t.icon,"icon-pack":t.iconPack,loading:t.loading,max:t.formatNative(t.maxDate),min:t.formatNative(t.minDate),disabled:t.disabled,readonly:!1,"use-html5-validation":t.useHtml5Validation},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{change:function(e){return t.onChangeNativePicker(e)}}},"b-input",t.$attrs,!1))},staticRenderFns:[]},void 0,Lt,void 0,!1,void 0,void 0,void 0),Bt={install:function(t){Object(c.c)(t,Vt)}};Object(c.d)(Bt);var Ft=Bt;const jt={name:"BModal",directives:{trapFocus:Z},props:{active:Boolean,component:[Object,Function],content:String,programmatic:Boolean,props:Object,events:Object,width:{type:[String,Number],default:960},hasModalCard:Boolean,animation:{type:String,default:"zoom-out"},canCancel:{type:[Array,Boolean],default:function(){return o.c.defaultModalCanCancel}},onCancel:{type:Function,default:function(){}},scroll:{type:String,default:function(){return o.c.defaultModalScroll?o.c.defaultModalScroll:"clip"},validator:function(t){return["clip","keep"].indexOf(t)>=0}},fullScreen:Boolean,trapFocus:{type:Boolean,default:o.c.defaultTrapFocus},customClass:String,ariaRole:{type:String,validator:function(t){return["dialog","alertdialog"].indexOf(t)>=0}},ariaModal:Boolean},data:function(){return{isActive:this.active||!1,savedScrollTop:null,newWidth:"number"==typeof this.width?this.width+"px":this.width,animating:!0}},computed:{cancelOptions:function(){return"boolean"==typeof this.canCancel?this.canCancel?o.c.defaultModalCanCancel:[]:this.canCancel},showX:function(){return this.cancelOptions.indexOf("x")>=0},customStyle:function(){return this.fullScreen?null:{maxWidth:this.newWidth}}},watch:{active:function(t){this.isActive=t},isActive:function(t){var e=this;this.handleScroll(),this.$nextTick((function(){t&&e.$el&&e.$el.focus&&e.$el.focus()}))}},methods:{handleScroll:function(){"undefined"!=typeof window&&("clip"!==this.scroll?(this.savedScrollTop=this.savedScrollTop?this.savedScrollTop:document.documentElement.scrollTop,this.isActive?document.body.classList.add("is-noscroll"):document.body.classList.remove("is-noscroll"),this.isActive?document.body.style.top="-".concat(this.savedScrollTop,"px"):(document.documentElement.scrollTop=this.savedScrollTop,document.body.style.top=null,this.savedScrollTop=null)):this.isActive?document.documentElement.classList.add("is-clipped"):document.documentElement.classList.remove("is-clipped"))},cancel:function(t){this.cancelOptions.indexOf(t)<0||(this.onCancel.apply(null,arguments),this.close())},close:function(){var t=this;this.$emit("close"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout((function(){t.$destroy(),Object(r.e)(t.$el)}),150))},keyPress:function(t){this.isActive&&27===t.keyCode&&this.cancel("escape")},afterEnter:function(){this.animating=!1},beforeLeave:function(){this.animating=!0}},created:function(){"undefined"!=typeof window&&document.addEventListener("keyup",this.keyPress)},beforeMount:function(){this.programmatic&&document.body.appendChild(this.$el)},mounted:function(){this.programmatic?this.isActive=!0:this.isActive&&this.handleScroll()},beforeDestroy:function(){if("undefined"!=typeof window){document.removeEventListener("keyup",this.keyPress),document.documentElement.classList.remove("is-clipped");var t=this.savedScrollTop?this.savedScrollTop:document.documentElement.scrollTop;document.body.classList.remove("is-noscroll"),document.documentElement.scrollTop=t,document.body.style.top=null}}};var Ut=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.animation},on:{"after-enter":t.afterEnter,"before-leave":t.beforeLeave}},[t.isActive?n("div",{directives:[{name:"trap-focus",rawName:"v-trap-focus",value:t.trapFocus,expression:"trapFocus"}],staticClass:"modal is-active",class:[{"is-full-screen":t.fullScreen},t.customClass],attrs:{tabindex:"-1",role:t.ariaRole,"aria-modal":t.ariaModal}},[n("div",{staticClass:"modal-background",on:{click:function(e){t.cancel("outside")}}}),t._v(" "),n("div",{staticClass:"animation-content",class:{"modal-content":!t.hasModalCard},style:t.customStyle},[t.component?n(t.component,t._g(t._b({tag:"component",on:{close:t.close}},"component",t.props,!1),t.events)):t.content?n("div",{domProps:{innerHTML:t._s(t.content)}}):t._t("default"),t._v(" "),t.showX?n("button",{directives:[{name:"show",rawName:"v-show",value:!t.animating,expression:"!animating"}],staticClass:"modal-close is-large",attrs:{type:"button"},on:{click:function(e){t.cancel("x")}}}):t._e()],2)]):t._e()])},staticRenderFns:[]},void 0,jt,void 0,!1,void 0,void 0,void 0);const qt={name:"BDialog",components:Object(l.a)({},v.name,v),directives:{trapFocus:Z},extends:Ut,props:{title:String,message:String,icon:String,iconPack:String,hasIcon:Boolean,type:{type:String,default:"is-primary"},size:String,confirmText:{type:String,default:function(){return o.c.defaultDialogConfirmText?o.c.defaultDialogConfirmText:"OK"}},cancelText:{type:String,default:function(){return o.c.defaultDialogCancelText?o.c.defaultDialogCancelText:"Cancel"}},hasInput:Boolean,inputAttrs:{type:Object,default:function(){return{}}},onConfirm:{type:Function,default:function(){}},container:{type:String,default:o.c.defaultContainerElement},focusOn:{type:String,default:"confirm"},trapFocus:{type:Boolean,default:o.c.defaultTrapFocus},ariaRole:{type:String,validator:function(t){return["dialog","alertdialog"].indexOf(t)>=0}},ariaModal:Boolean},data:function(){return{prompt:this.hasInput&&this.inputAttrs.value||"",isActive:!1,validationMessage:""}},computed:{dialogClass:function(){return[this.size,{"has-custom-container":null!==this.container}]},iconByType:function(){switch(this.type){case"is-info":return"information";case"is-success":return"check-circle";case"is-warning":return"alert";case"is-danger":return"alert-circle";default:return null}},showCancel:function(){return this.cancelOptions.indexOf("button")>=0}},methods:{confirm:function(){var t=this;if(void 0!==this.$refs.input&&!this.$refs.input.checkValidity())return this.validationMessage=this.$refs.input.validationMessage,void this.$nextTick((function(){return t.$refs.input.select()}));this.onConfirm(this.prompt),this.close()},close:function(){var t=this;this.isActive=!1,setTimeout((function(){t.$destroy(),Object(r.e)(t.$el)}),150)}},beforeMount:function(){var t=this;"undefined"!=typeof window&&this.$nextTick((function(){(document.querySelector(t.container)||document.body).appendChild(t.$el)}))},mounted:function(){var t=this;this.isActive=!0,void 0===this.inputAttrs.required&&this.$set(this.inputAttrs,"required",!0),this.$nextTick((function(){t.hasInput?t.$refs.input.focus():"cancel"===t.focusOn&&t.showCancel?t.$refs.cancelButton.focus():t.$refs.confirmButton.focus()}))}};var zt,$t=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.animation}},[t.isActive?n("div",{directives:[{name:"trap-focus",rawName:"v-trap-focus",value:t.trapFocus,expression:"trapFocus"}],staticClass:"dialog modal is-active",class:t.dialogClass,attrs:{role:t.ariaRole,"aria-modal":t.ariaModal}},[n("div",{staticClass:"modal-background",on:{click:function(e){t.cancel("outside")}}}),t._v(" "),n("div",{staticClass:"modal-card animation-content"},[t.title?n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),n("section",{staticClass:"modal-card-body",class:{"is-titleless":!t.title,"is-flex":t.hasIcon}},[n("div",{staticClass:"media"},[t.hasIcon&&(t.icon||t.iconByType)?n("div",{staticClass:"media-left"},[n("b-icon",{attrs:{icon:t.icon?t.icon:t.iconByType,pack:t.iconPack,type:t.type,both:!t.icon,size:"is-large"}})],1):t._e(),t._v(" "),n("div",{staticClass:"media-content"},[n("p",{domProps:{innerHTML:t._s(t.message)}}),t._v(" "),t.hasInput?n("div",{staticClass:"field"},[n("div",{staticClass:"control"},["checkbox"===t.inputAttrs.type?n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":t.validationMessage},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.prompt)?t._i(t.prompt,null)>-1:t.prompt},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.confirm(e):null},change:function(e){var n=t.prompt,r=e.target,o=!!r.checked;if(Array.isArray(n)){var c=t._i(n,null);r.checked?c<0&&(t.prompt=n.concat([null])):c>-1&&(t.prompt=n.slice(0,c).concat(n.slice(c+1)))}else t.prompt=o}}},"input",t.inputAttrs,!1)):"radio"===t.inputAttrs.type?n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":t.validationMessage},attrs:{type:"radio"},domProps:{checked:t._q(t.prompt,null)},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.confirm(e):null},change:function(e){t.prompt=null}}},"input",t.inputAttrs,!1)):n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.prompt,expression:"prompt"}],ref:"input",staticClass:"input",class:{"is-danger":t.validationMessage},attrs:{type:t.inputAttrs.type},domProps:{value:t.prompt},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.confirm(e):null},input:function(e){e.target.composing||(t.prompt=e.target.value)}}},"input",t.inputAttrs,!1))]),t._v(" "),n("p",{staticClass:"help is-danger"},[t._v(t._s(t.validationMessage))])]):t._e()])])]),t._v(" "),n("footer",{staticClass:"modal-card-foot"},[t.showCancel?n("button",{ref:"cancelButton",staticClass:"button",on:{click:function(e){t.cancel("button")}}},[t._v("\r\n                        "+t._s(t.cancelText)+"\r\n                    ")]):t._e(),t._v(" "),n("button",{ref:"confirmButton",staticClass:"button",class:t.type,on:{click:t.confirm}},[t._v("\r\n                        "+t._s(t.confirmText)+"\r\n                    ")])])])]):t._e()])},staticRenderFns:[]},void 0,qt,void 0,!1,void 0,void 0,void 0);function Ht(t){return new(("undefined"!=typeof window&&window.Vue?window.Vue:zt||o.a).extend($t))({el:document.createElement("div"),propsData:t})}var Wt={alert:function(t){"string"==typeof t&&(t={message:t});return Ht(Object(r.d)({canCancel:!1},t))},confirm:function(t){return Ht(Object(r.d)({},t))},prompt:function(t){return Ht(Object(r.d)({hasInput:!0,confirmText:"Done"},t))}},Kt={install:function(t){zt=t,Object(c.c)(t,$t),Object(c.b)(t,"dialog",Wt)}};Object(c.d)(Kt);var dialog=Kt,Gt={install:function(t){Object(c.c)(t,nt),Object(c.c)(t,ot)}};Object(c.d)(Gt);var Qt=Gt,Yt={install:function(t){Object(c.c)(t,ct)}};Object(c.d)(Yt);var Xt=Yt,Jt={install:function(t){Object(c.c)(t,v)}};Object(c.d)(Jt);var Zt=Jt,te={install:function(t){Object(c.c)(t,w)}};Object(c.d)(te);var input=te,ee="undefined"==typeof window,ne=ee?Object:window.HTMLElement,ie=ee?Object:window.File;const re={name:"BLoading",props:{active:Boolean,programmatic:Boolean,container:[Object,Function,ne],isFullPage:{type:Boolean,default:!0},animation:{type:String,default:"fade"},canCancel:{type:Boolean,default:!1},onCancel:{type:Function,default:function(){}}},data:function(){return{isActive:this.active||!1}},watch:{active:function(t){this.isActive=t}},methods:{cancel:function(){this.canCancel&&this.isActive&&this.close()},close:function(){var t=this;this.onCancel.apply(null,arguments),this.$emit("close"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout((function(){t.$destroy(),Object(r.e)(t.$el)}),150))},keyPress:function(t){27===t.keyCode&&this.cancel()}},created:function(){"undefined"!=typeof window&&document.addEventListener("keyup",this.keyPress)},beforeMount:function(){this.programmatic&&(this.container?(this.isFullPage=!1,this.container.appendChild(this.$el)):document.body.appendChild(this.$el))},mounted:function(){this.programmatic&&(this.isActive=!0)},beforeDestroy:function(){"undefined"!=typeof window&&document.removeEventListener("keyup",this.keyPress)}};var oe,ae=Object(c.a)({render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:this.animation}},[this.isActive?e("div",{staticClass:"loading-overlay is-active",class:{"is-full-page":this.isFullPage}},[e("div",{staticClass:"loading-background",on:{click:this.cancel}}),this._v(" "),this._t("default",[e("div",{staticClass:"loading-icon"})])],2):this._e()])},staticRenderFns:[]},void 0,re,void 0,!1,void 0,void 0,void 0),se={open:function(t){var e=Object(r.d)({programmatic:!0},t);return new(("undefined"!=typeof window&&window.Vue?window.Vue:oe||o.a).extend(ae))({el:document.createElement("div"),propsData:e})}},ue={install:function(t){oe=t,Object(c.c)(t,ae),Object(c.b)(t,"loading",se)}};Object(c.d)(ue);var ce=ue;const le={name:"BMenu",props:{accordion:{type:Boolean,default:!0}},data:function(){return{_isMenu:!0}}};var he=Object(c.a)({render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"menu"},[this._t("default")],2)},staticRenderFns:[]},void 0,le,void 0,!1,void 0,void 0,void 0);const de={name:"BMenuList",functional:!0,props:{label:String,icon:String,iconPack:String,ariaRole:{type:String,default:""}},render:function(t,e){var n=null,r=e.slots();(e.props.label||r.label)&&(n=t("p",{attrs:{class:"menu-label"}},e.props.label?e.props.icon?[t("b-icon",{props:{icon:e.props.icon,pack:e.props.iconPack,size:"is-small"}}),t("span",{},e.props.label)]:e.props.label:r.label));var o=t("ul",{attrs:{class:"menu-list",role:"menu"===e.props.ariaRole?e.props.ariaRole:null}},r.default);return n?[n,o]:o}};var fe=Object(c.a)({},void 0,de,void 0,void 0,void 0,void 0,void 0);const pe={name:"BMenuItem",components:Object(l.a)({},v.name,v),inheritAttrs:!1,props:{label:String,active:Boolean,expanded:Boolean,disabled:Boolean,iconPack:String,icon:String,animation:{type:String,default:"fade"},tag:{type:String,default:"a",validator:function(t){return["a","router-link","nuxt-link","n-link","RouterLink","NuxtLink","NLink"].indexOf(t)>=0}},ariaRole:{type:String,default:""}},data:function(){return{newActive:this.active,newExpanded:this.expanded}},computed:{ariaRoleMenu:function(){return"menuitem"===this.ariaRole?this.ariaRole:null}},watch:{active:function(t){this.newActive=t},expanded:function(t){this.newExpanded=t}},methods:{onClick:function(t){this.disabled||(this.reset(this.$parent),this.newExpanded=!0,this.$emit("update:expanded",this.newActive),this.newActive=!0,this.$emit("update:active",this.newActive),this.$emit("click",t))},reset:function(t){var e=this;t.$children.filter((function(t){return t.name===e.name})).forEach((function(n){n!==e&&(e.reset(n),(!t.$data._isMenu||t.$data._isMenu&&t.accordion)&&(n.newExpanded=!1,n.$emit("update:expanded",n.newActive)),n.newActive=!1,n.$emit("update:active",n.newActive))}))}}};var me=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{attrs:{role:t.ariaRoleMenu}},[n(t.tag,t._b({tag:"component",class:{"is-active":t.newActive,"is-disabled":t.disabled},on:{click:function(e){t.onClick(e)}},nativeOn:{click:function(e){t.onClick(e)}}},"component",t.$attrs,!1),[t.icon?n("b-icon",{attrs:{icon:t.icon,pack:t.iconPack,size:"is-small"}}):t._e(),t._v(" "),t.label?n("span",[t._v(t._s(t.label))]):t._t("label",null,{expanded:t.newExpanded,active:t.newActive})],2),t._v(" "),t.$slots.default?[n("transition",{attrs:{name:t.animation}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:t.newExpanded,expression:"newExpanded"}]},[t._t("default")],2)])]:t._e()],2)},staticRenderFns:[]},void 0,pe,void 0,!1,void 0,void 0,void 0),ve={install:function(t){Object(c.c)(t,he),Object(c.c)(t,fe),Object(c.c)(t,me)}};Object(c.d)(ve);var menu=ve,ge={components:Object(l.a)({},v.name,v),props:{active:{type:Boolean,default:!0},title:String,closable:{type:Boolean,default:!0},message:String,type:String,hasIcon:Boolean,size:String,iconPack:String,iconSize:String,autoClose:{type:Boolean,default:!1},duration:{type:Number,default:2e3}},data:function(){return{isActive:this.active}},watch:{active:function(t){this.isActive=t},isActive:function(t){t?this.setAutoClose():this.timer&&clearTimeout(this.timer)}},computed:{icon:function(){switch(this.type){case"is-info":return"information";case"is-success":return"check-circle";case"is-warning":return"alert";case"is-danger":return"alert-circle";default:return null}}},methods:{close:function(){this.isActive=!1,this.$emit("close"),this.$emit("update:active",!1)},setAutoClose:function(){var t=this;this.autoClose&&(this.timer=setTimeout((function(){t.isActive&&t.close()}),this.duration))}},mounted:function(){this.setAutoClose()}};const ye={name:"BMessage",mixins:[ge],props:{ariaCloseLabel:String},data:function(){return{newIconSize:this.iconSize||this.size||"is-large"}}};var be=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[t.isActive?n("article",{staticClass:"message",class:[t.type,t.size]},[t.title?n("header",{staticClass:"message-header"},[n("p",[t._v(t._s(t.title))]),t._v(" "),t.closable?n("button",{staticClass:"delete",attrs:{type:"button","aria-label":t.ariaCloseLabel},on:{click:t.close}}):t._e()]):t._e(),t._v(" "),n("section",{staticClass:"message-body"},[n("div",{staticClass:"media"},[t.icon&&t.hasIcon?n("div",{staticClass:"media-left"},[n("b-icon",{class:t.type,attrs:{icon:t.icon,pack:t.iconPack,both:"",size:t.newIconSize}})],1):t._e(),t._v(" "),n("div",{staticClass:"media-content"},[t._t("default")],2)])])]):t._e()])},staticRenderFns:[]},void 0,ye,void 0,!1,void 0,void 0,void 0),we={install:function(t){Object(c.c)(t,be)}};Object(c.d)(we);var Se,Te=we,_e={open:function(t){var e;"string"==typeof t&&(t={content:t});t.parent&&(e=t.parent,delete t.parent);var n=Object(r.d)({programmatic:!0},t);return new(("undefined"!=typeof window&&window.Vue?window.Vue:Se||o.a).extend(Ut))({parent:e,el:document.createElement("div"),propsData:n})}},Ce={install:function(t){Se=t,Object(c.c)(t,Ut),Object(c.b)(t,"modal",_e)}};Object(c.d)(Ce);var Ie=Ce,Ee=n(33);const ke={name:"BNotification",mixins:[ge],props:{position:String,ariaCloseLabel:String,animation:{type:String,default:"fade"}}};var De=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.animation}},[n("article",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"notification",class:[t.type,t.position]},[t.closable?n("button",{staticClass:"delete",attrs:{type:"button","aria-label":t.ariaCloseLabel},on:{click:t.close}}):t._e(),t._v(" "),n("div",{staticClass:"media"},[t.icon&&t.hasIcon?n("div",{staticClass:"media-left"},[n("b-icon",{attrs:{icon:t.icon,pack:t.iconPack,both:"",size:"is-large","aria-hidden":""}})],1):t._e(),t._v(" "),n("div",{staticClass:"media-content"},[t.message?n("p",{staticClass:"text",domProps:{innerHTML:t._s(t.message)}}):t._t("default")],2)])])])},staticRenderFns:[]},void 0,ke,void 0,!1,void 0,void 0,void 0);const Ae={name:"BNotificationNotice",mixins:[Ee.a],props:{indefinite:{type:Boolean,default:!1}},data:function(){return{newDuration:this.duration||o.c.defaultNotificationDuration}}};var Ne,Oe=Object(c.a)({render:function(){var t=this.$createElement;return(this._self._c||t)("b-notification",this._b({on:{close:this.close}},"b-notification",this.$options.propsData,!1))},staticRenderFns:[]},void 0,Ae,void 0,!1,void 0,void 0,void 0),xe={open:function(t){var e;"string"==typeof t&&(t={message:t});var n={position:o.c.defaultNotificationPosition||"is-top-right"};t.parent&&(e=t.parent,delete t.parent);var c=Object(r.d)(n,t);return new(("undefined"!=typeof window&&window.Vue?window.Vue:Ne||o.a).extend(Oe))({parent:e,el:document.createElement("div"),propsData:c})}},Pe={install:function(t){Ne=t,Object(c.c)(t,De),Object(c.b)(t,"notification",xe)}};Object(c.d)(Pe);var Re=Pe;const Me={name:"NavbarBurger",props:{isOpened:{type:Boolean,default:!1}}};var Le=Object(c.a)({render:function(){var t=this.$createElement,e=this._self._c||t;return e("a",this._g({staticClass:"navbar-burger burger",class:{"is-active":this.isOpened},attrs:{role:"button","aria-label":"menu","aria-expanded":this.isOpened}},this.$listeners),[e("span",{attrs:{"aria-hidden":"true"}}),this._v(" "),e("span",{attrs:{"aria-hidden":"true"}}),this._v(" "),e("span",{attrs:{"aria-hidden":"true"}})])},staticRenderFns:[]},void 0,Me,void 0,!1,void 0,void 0,void 0),Ve="undefined"!=typeof window&&("ontouchstart"in window||navigator.msMaxTouchPoints>0)?["touchstart","click"]:["click"],Be=[];function Fe(t){var e="function"==typeof t;if(!e&&"object"!==Object(l.c)(t))throw new Error("v-click-outside: Binding value should be a function or an object, typeof ".concat(t," given"));return{handler:e?t:t.handler,middleware:t.middleware||function(t){return t},events:t.events||Ve}}function je(t){var e=t.el,n=t.event,r=t.handler,o=t.middleware;n.target!==e&&!e.contains(n.target)&&o(n,e)&&r(n,e)}var Ue={bind:function(t,e){var n=Fe(e.value),r=n.handler,o=n.middleware,c=n.events,l={el:t,eventHandlers:c.map((function(e){return{event:e,handler:function(e){return je({event:e,el:t,handler:r,middleware:o})}}}))};l.eventHandlers.forEach((function(t){var e=t.event,n=t.handler;return document.addEventListener(e,n)})),Be.push(l)},update:function(t,e){var n=Fe(e.value),r=n.handler,o=n.middleware,c=n.events,l=Be.find((function(e){return e.el===t}));l.eventHandlers.forEach((function(t){var e=t.event,n=t.handler;return document.removeEventListener(e,n)})),l.eventHandlers=c.map((function(e){return{event:e,handler:function(e){return je({event:e,el:t,handler:r,middleware:o})}}})),l.eventHandlers.forEach((function(t){var e=t.event,n=t.handler;return document.addEventListener(e,n)}))},unbind:function(t){Be.find((function(e){return e.el===t})).eventHandlers.forEach((function(t){var e=t.event,n=t.handler;return document.removeEventListener(e,n)}))},instances:Be};const qe={name:"BNavbar",components:{NavbarBurger:Le},directives:{clickOutside:Ue},props:{type:[String,Object],transparent:{type:Boolean,default:!1},fixedTop:{type:Boolean,default:!1},fixedBottom:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},wrapperClass:{type:String},closeOnClick:{type:Boolean,default:!0},mobileBurger:{type:Boolean,default:!0},spaced:Boolean,shadow:Boolean},data:function(){return{internalIsActive:this.isActive}},computed:{isOpened:function(){return this.internalIsActive},computedClasses:function(){var t;return[this.type,(t={},Object(l.a)(t,"is-fixed-top",this.fixedTop),Object(l.a)(t,"is-fixed-bottom",this.fixedBottom),Object(l.a)(t,"is-spaced",this.spaced),Object(l.a)(t,"has-shadow",this.shadow),Object(l.a)(t,"is-transparent",this.transparent),t)]}},watch:{isActive:{handler:function(t){this.internalIsActive=t},immediate:!0},fixedTop:{handler:function(t){this.checkIfFixedPropertiesAreColliding(),t?(this.setBodyClass("has-navbar-fixed-top"),this.spaced&&this.setBodyClass("has-spaced-navbar-fixed-top")):(this.removeBodyClass("has-navbar-fixed-top"),this.removeBodyClass("has-spaced-navbar-fixed-top"))},immediate:!0},fixedBottom:{handler:function(t){this.checkIfFixedPropertiesAreColliding(),t?(this.setBodyClass("has-navbar-fixed-bottom"),this.spaced&&this.setBodyClass("has-spaced-navbar-fixed-bottom")):(this.removeBodyClass("has-navbar-fixed-bottom"),this.removeBodyClass("has-spaced-navbar-fixed-bottom"))},immediate:!0}},methods:{toggleActive:function(){this.internalIsActive=!this.internalIsActive,this.emitUpdateParentEvent()},closeMenu:function(){this.closeOnClick&&(this.internalIsActive=!1,this.emitUpdateParentEvent())},emitUpdateParentEvent:function(){this.$emit("update:isActive",this.internalIsActive)},setBodyClass:function(t){"undefined"!=typeof window&&document.body.classList.add(t)},removeBodyClass:function(t){"undefined"!=typeof window&&document.body.classList.remove(t)},checkIfFixedPropertiesAreColliding:function(){if(this.fixedTop&&this.fixedBottom)throw new Error("You should choose if the BNavbar is fixed bottom or fixed top, but not both")},genNavbar:function(t){var e=[this.genNavbarBrandNode(t),this.genNavbarSlotsNode(t)];if(!this.wrapperClass)return this.genNavbarSlots(t,e);var n=t("div",{class:this.wrapperClass},e);return this.genNavbarSlots(t,[n])},genNavbarSlots:function(t,e){return t("nav",{staticClass:"navbar",class:this.computedClasses,attrs:{role:"navigation","aria-label":"main navigation"},directives:[{name:"click-outside",value:this.closeMenu}]},e)},genNavbarBrandNode:function(t){return t("div",{class:"navbar-brand"},[this.$slots.brand,this.genBurgerNode(t)])},genBurgerNode:function(t){if(this.mobileBurger){var e=t("navbar-burger",{props:{isOpened:this.isOpened},on:{click:this.toggleActive}});return!!this.$scopedSlots.burger?this.$scopedSlots.burger({isOpened:this.isOpened,toggleActive:this.toggleActive}):e}},genNavbarSlotsNode:function(t){return t("div",{staticClass:"navbar-menu",class:{"is-active":this.isOpened}},[this.genMenuPosition(t,"start"),this.genMenuPosition(t,"end")])},genMenuPosition:function(t,e){return t("div",{staticClass:"navbar-".concat(e)},this.$slots[e])}},beforeDestroy:function(){var t="";this.fixedTop?t=this.spaced?"has-spaced-navbar-fixed-top":"has-navbar-fixed-top":this.fixedBottom&&(t=this.spaced?"has-spaced-navbar-fixed-bottom":"has-navbar-fixed-bottom"),this.removeBodyClass(t)},render:function(t,e){return this.genNavbar(t)}};var ze=Object(c.a)({},void 0,qe,void 0,void 0,void 0,void 0,void 0),$e=["div","span"];const He={name:"BNavbarItem",inheritAttrs:!1,props:{tag:{type:String,default:"a"},active:Boolean},methods:{keyPress:function(t){27===t.keyCode&&this.$parent.closeMenu()},handleClickEvent:function(t){$e.some((function(e){return e===t.target.localName}))||(this.$parent.$data._isNavDropdown?(this.$parent.closeMenu(),this.$parent.$parent.closeMenu()):this.$parent.closeMenu())}},mounted:function(){"undefined"!=typeof window&&(this.$el.addEventListener("click",this.handleClickEvent),document.addEventListener("keyup",this.keyPress))},beforeDestroy:function(){"undefined"!=typeof window&&(this.$el.removeEventListener("click",this.handleClickEvent),document.removeEventListener("keyup",this.keyPress))}};var We=Object(c.a)({render:function(){var t=this.$createElement;return(this._self._c||t)(this.tag,this._g(this._b({tag:"component",staticClass:"navbar-item",class:{"is-active":this.active}},"component",this.$attrs,!1),this.$listeners),[this._t("default")],2)},staticRenderFns:[]},void 0,He,void 0,!1,void 0,void 0,void 0);const Ke={name:"BNavbarDropdown",directives:{clickOutside:Ue},props:{label:String,hoverable:Boolean,active:Boolean,right:Boolean,arrowless:Boolean,boxed:Boolean},data:function(){return{newActive:this.active,_isNavDropdown:!0}},watch:{active:function(t){this.newActive=t}},methods:{showMenu:function(){this.newActive=!0},closeMenu:function(){this.newActive=!1}}};var Ge=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeMenu,expression:"closeMenu"}],staticClass:"navbar-item has-dropdown",class:{"is-hoverable":t.hoverable,"is-active":t.newActive}},[n("a",{staticClass:"navbar-link",class:{"is-arrowless":t.arrowless},on:{click:function(e){t.newActive=!t.newActive}}},[t.label?[t._v(t._s(t.label))]:t._t("label")],2),t._v(" "),n("div",{staticClass:"navbar-dropdown",class:{"is-right":t.right,"is-boxed":t.boxed}},[t._t("default")],2)])},staticRenderFns:[]},void 0,Ke,void 0,!1,void 0,void 0,void 0),Qe={install:function(t){Object(c.c)(t,ze),Object(c.c)(t,We),Object(c.c)(t,Ge)}};Object(c.d)(Qe);var Ye,Xe=Qe;const Je={name:"BNumberinput",components:(Ye={},Object(l.a)(Ye,v.name,v),Object(l.a)(Ye,w.name,w),Ye),mixins:[h],inheritAttrs:!1,props:{value:Number,min:[Number,String],max:[Number,String],step:[Number,String],disabled:Boolean,type:{type:String,default:"is-primary"},editable:{type:Boolean,default:!0},controls:{type:Boolean,default:!0},controlsRounded:{type:Boolean,default:!1},controlsPosition:String},data:function(){return{newValue:isNaN(this.value)?parseFloat(this.min)||0:this.value,newStep:this.step||1,_elementRef:"input"}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){var e=t;""===t&&(e=parseFloat(this.min)||null),this.newValue=e,this.$emit("input",e),!this.isValid&&this.$refs.input.checkHtml5Validity()}},fieldClasses:function(){return[{"has-addons":"compact"===this.controlsPosition},{"is-grouped":"compact"!==this.controlsPosition},{"is-expanded":this.expanded}]},buttonClasses:function(){return[this.type,this.size,{"is-rounded":this.controlsRounded}]},minNumber:function(){return"string"==typeof this.min?parseFloat(this.min):this.min},maxNumber:function(){return"string"==typeof this.max?parseFloat(this.max):this.max},stepNumber:function(){return"string"==typeof this.newStep?parseFloat(this.newStep):this.newStep},disabledMin:function(){return this.computedValue-this.stepNumber<this.minNumber},disabledMax:function(){return this.computedValue+this.stepNumber>this.maxNumber},stepDecimals:function(){var t=this.stepNumber.toString(),e=t.indexOf(".");return e>=0?t.substring(e+1).length:0}},watch:{value:function(t){this.newValue=t}},methods:{decrement:function(){if(void 0===this.minNumber||this.computedValue-this.stepNumber>=this.minNumber){var t=this.computedValue-this.stepNumber;this.computedValue=parseFloat(t.toFixed(this.stepDecimals))}},increment:function(){if(void 0===this.maxNumber||this.computedValue+this.stepNumber<=this.maxNumber){var t=this.computedValue+this.stepNumber;this.computedValue=parseFloat(t.toFixed(this.stepDecimals))}},onControlClick:function(t,e){0===t.detail&&"click"!==t.type&&(e?this.increment():this.decrement())},onStartLongPress:function(t,e){var n=this;0!==t.button&&"touchstart"!==t.type||(this._$intervalTime=new Date,clearInterval(this._$intervalRef),this._$intervalRef=setInterval((function(){e?n.increment():n.decrement()}),250))},onStopLongPress:function(t){this._$intervalRef&&(new Date-this._$intervalTime<250&&(t?this.increment():this.decrement()),clearInterval(this._$intervalRef),this._$intervalRef=null)}}};var Ze=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-numberinput field",class:t.fieldClasses},[t.controls?n("p",{staticClass:"control",on:{mouseup:function(e){t.onStopLongPress(!1)},mouseleave:function(e){t.onStopLongPress(!1)},touchend:function(e){t.onStopLongPress(!1)},touchcancel:function(e){t.onStopLongPress(!1)}}},[n("button",{staticClass:"button",class:t.buttonClasses,attrs:{type:"button",disabled:t.disabled||t.disabledMin},on:{mousedown:function(e){t.onStartLongPress(e,!1)},touchstart:function(e){e.preventDefault(),t.onStartLongPress(e,!1)},click:function(e){t.onControlClick(e,!1)}}},[n("b-icon",{attrs:{icon:"minus",pack:t.iconPack,size:t.iconSize}})],1)]):t._e(),t._v(" "),n("b-input",t._b({ref:"input",attrs:{type:"number",step:t.newStep,max:t.max,min:t.min,size:t.size,disabled:t.disabled,readonly:!t.editable,loading:t.loading,rounded:t.rounded,icon:t.icon,"icon-pack":t.iconPack,autocomplete:t.autocomplete,expanded:t.expanded,"use-html5-validation":t.useHtml5Validation},on:{focus:function(e){t.$emit("focus",e)},blur:function(e){t.$emit("blur",e)}},model:{value:t.computedValue,callback:function(e){t.computedValue=t._n(e)},expression:"computedValue"}},"b-input",t.$attrs,!1)),t._v(" "),t.controls?n("p",{staticClass:"control",on:{mouseup:function(e){t.onStopLongPress(!0)},mouseleave:function(e){t.onStopLongPress(!0)},touchend:function(e){t.onStopLongPress(!0)},touchcancel:function(e){t.onStopLongPress(!0)}}},[n("button",{staticClass:"button",class:t.buttonClasses,attrs:{type:"button",disabled:t.disabled||t.disabledMax},on:{mousedown:function(e){t.onStartLongPress(e,!0)},touchstart:function(e){e.preventDefault(),t.onStartLongPress(e,!0)},click:function(e){t.onControlClick(e,!0)}}},[n("b-icon",{attrs:{icon:"plus",pack:t.iconPack,size:t.iconSize}})],1)]):t._e()],1)},staticRenderFns:[]},void 0,Je,void 0,!1,void 0,void 0,void 0),tn={install:function(t){Object(c.c)(t,Ze)}};Object(c.d)(tn);var en=tn;const nn={name:"BPaginationButton",props:{page:{type:Object,required:!0},tag:{type:String,default:"a",validator:function(t){return["a","button","input","router-link","nuxt-link","n-link","RouterLink","NuxtLink","NLink"].indexOf(t)>=0}},disabled:{type:Boolean,default:!1}},computed:{href:function(){if("a"===this.tag)return"#"},isDisabled:function(){return this.disabled||this.page.disabled}}};var rn,on=Object(c.a)({render:function(){var t,e=this,n=e.$createElement;return(e._self._c||n)(e.tag,e._b({tag:"component",staticClass:"pagination-link",class:(t={"is-current":e.page.isCurrent},t[e.page.class]=!0,t),attrs:{role:"button",href:e.href,disabled:e.isDisabled,"aria-label":e.page["aria-label"],"aria-current":e.page.isCurrent},on:{click:function(t){return t.preventDefault(),e.page.click(t)}}},"component",e.$attrs,!1),[e._t("default",[e._v(e._s(e.page.number))])],2)},staticRenderFns:[]},void 0,nn,void 0,!1,void 0,void 0,void 0);const an={name:"BPagination",components:(rn={},Object(l.a)(rn,v.name,v),Object(l.a)(rn,on.name,on),rn),props:{total:[Number,String],perPage:{type:[Number,String],default:20},current:{type:[Number,String],default:1},rangeBefore:{type:[Number,String],default:1},rangeAfter:{type:[Number,String],default:1},size:String,simple:Boolean,rounded:Boolean,order:String,iconPack:String,iconPrev:{type:String,default:o.c.defaultIconPrev},iconNext:{type:String,default:o.c.defaultIconNext},ariaNextLabel:String,ariaPreviousLabel:String,ariaPageLabel:String,ariaCurrentLabel:String},computed:{rootClasses:function(){return[this.order,this.size,{"is-simple":this.simple,"is-rounded":this.rounded}]},beforeCurrent:function(){return parseInt(this.rangeBefore)},afterCurrent:function(){return parseInt(this.rangeAfter)},pageCount:function(){return Math.ceil(this.total/this.perPage)},firstItem:function(){var t=this.current*this.perPage-this.perPage+1;return t>=0?t:0},hasPrev:function(){return this.current>1},hasFirst:function(){return this.current>=2+this.beforeCurrent},hasFirstEllipsis:function(){return this.current>=this.beforeCurrent+4},hasLast:function(){return this.current<=this.pageCount-(1+this.afterCurrent)},hasLastEllipsis:function(){return this.current<this.pageCount-(2+this.afterCurrent)},hasNext:function(){return this.current<this.pageCount},pagesInRange:function(){if(!this.simple){var t=Math.max(1,this.current-this.beforeCurrent);t-1==2&&t--;var e=Math.min(this.current+this.afterCurrent,this.pageCount);this.pageCount-e==2&&e++;for(var n=[],i=t;i<=e;i++)n.push(this.getPage(i));return n}}},watch:{pageCount:function(t){this.current>t&&this.last()}},methods:{prev:function(t){this.changePage(this.current-1,t)},next:function(t){this.changePage(this.current+1,t)},first:function(t){this.changePage(1,t)},last:function(t){this.changePage(this.pageCount,t)},changePage:function(t,e){this.current===t||t<1||t>this.pageCount||(this.$emit("change",t),this.$emit("update:current",t),e&&e.target&&this.$nextTick((function(){return e.target.focus()})))},getPage:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{number:t,isCurrent:this.current===t,click:function(n){return e.changePage(t,n)},disabled:n.disabled||!1,class:n.class||"","aria-label":n["aria-label"]||this.getAriaPageLabel(t,this.current===t)}},getAriaPageLabel:function(t,e){return!this.ariaPageLabel||e&&this.ariaCurrentLabel?this.ariaPageLabel&&e&&this.ariaCurrentLabel?this.ariaCurrentLabel+", "+this.ariaPageLabel+" "+t+".":null:this.ariaPageLabel+" "+t+"."}}};var sn=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"pagination",class:t.rootClasses},[t.$scopedSlots.previous?t._t("previous",[n("b-icon",{attrs:{icon:t.iconPrev,pack:t.iconPack,both:"","aria-hidden":"true"}})],{page:t.getPage(t.current-1,{disabled:!t.hasPrev,class:"pagination-previous","aria-label":t.ariaPreviousLabel})}):n("BPaginationButton",{staticClass:"pagination-previous",attrs:{disabled:!t.hasPrev,page:t.getPage(t.current-1)}},[n("b-icon",{attrs:{icon:t.iconPrev,pack:t.iconPack,both:"","aria-hidden":"true"}})],1),t._v(" "),t.$scopedSlots.next?t._t("next",[n("b-icon",{attrs:{icon:t.iconNext,pack:t.iconPack,both:"","aria-hidden":"true"}})],{page:t.getPage(t.current+1,{disabled:!t.hasNext,class:"pagination-next","aria-label":t.ariaNextLabel})}):n("BPaginationButton",{staticClass:"pagination-next",attrs:{disabled:!t.hasNext,page:t.getPage(t.current+1)}},[n("b-icon",{attrs:{icon:t.iconNext,pack:t.iconPack,both:"","aria-hidden":"true"}})],1),t._v(" "),t.simple?n("small",{staticClass:"info"},[1==t.perPage?[t._v("\r\n                "+t._s(t.firstItem)+" / "+t._s(t.total)+"\r\n            ")]:[t._v("\r\n                "+t._s(t.firstItem)+"-"+t._s(Math.min(t.current*t.perPage,t.total))+" / "+t._s(t.total)+"\r\n            ")]],2):n("ul",{staticClass:"pagination-list"},[t.hasFirst?n("li",[t.$scopedSlots.default?t._t("default",null,{page:t.getPage(1)}):n("BPaginationButton",{attrs:{page:t.getPage(1)}})],2):t._e(),t._v(" "),t.hasFirstEllipsis?n("li",[n("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):t._e(),t._v(" "),t._l(t.pagesInRange,(function(e){return n("li",{key:e.number},[t.$scopedSlots.default?t._t("default",null,{page:e}):n("BPaginationButton",{attrs:{page:e}})],2)})),t._v(" "),t.hasLastEllipsis?n("li",[n("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):t._e(),t._v(" "),t.hasLast?n("li",[t.$scopedSlots.default?t._t("default",null,{page:t.getPage(t.pageCount)}):n("BPaginationButton",{attrs:{page:t.getPage(t.pageCount)}})],2):t._e()],2)],2)},staticRenderFns:[]},void 0,an,void 0,!1,void 0,void 0,void 0),un={install:function(t){Object(c.c)(t,sn),Object(c.c)(t,on)}};Object(c.d)(un);var cn=un;const ln={name:"BProgress",props:{type:{type:[String,Object],default:"is-darkgrey"},size:String,value:{type:Number,default:void 0},max:{type:Number,default:100},showValue:{type:Boolean,default:!1},format:{type:String,default:"raw",validator:function(t){return["raw","percent"].indexOf(t)>=0}},precision:{type:Number,default:2},keepTrailingZeroes:{type:Boolean,default:!1}},computed:{isIndeterminate:function(){return void 0===this.value||null===this.value},newType:function(){return[this.size,this.type]},newValue:function(){if(void 0!==this.value&&null!==this.value&&!isNaN(this.value)){if("percent"===this.format){var t=this.toFixed(this.value*this.max/100);return"".concat(t,"%")}return this.toFixed(this.value)}}},watch:{value:function(t){this.setValue(t)}},methods:{setValue:function(t){this.isIndeterminate?this.$refs.progress.removeAttribute("value"):this.$refs.progress.setAttribute("value",t)},toFixed:function(t){var e=(+"".concat(Math.round(+"".concat(t,"e").concat(this.precision)),"e").concat(-this.precision)).toFixed(this.precision);return this.keepTrailingZeroes||(e=e.replace(/\.?0+$/,"")),e}},mounted:function(){this.setValue(this.value)}};var hn=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"progress-wrapper"},[n("progress",{ref:"progress",staticClass:"progress",class:t.newType,attrs:{max:t.max}},[t._v(t._s(t.newValue))]),t._v(" "),t.showValue?n("p",{staticClass:"progress-value"},[t._t("default",[t._v(t._s(t.newValue))])],2):t._e()])},staticRenderFns:[]},void 0,ln,void 0,!1,void 0,void 0,void 0),dn={install:function(t){Object(c.c)(t,hn)}};Object(c.d)(dn);var progress=dn;const fn={name:"BRadio",mixins:[V]};var pn=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{ref:"label",staticClass:"b-radio radio",class:[t.size,{"is-disabled":t.disabled}],attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.$refs.label.click()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"radio",disabled:t.disabled,required:t.required,name:t.name},domProps:{value:t.nativeValue,checked:t._q(t.computedValue,t.nativeValue)},on:{click:function(t){t.stopPropagation()},change:function(e){t.computedValue=t.nativeValue}}}),t._v(" "),n("span",{staticClass:"check",class:t.type}),t._v(" "),n("span",{staticClass:"control-label"},[t._t("default")],2)])},staticRenderFns:[]},void 0,fn,void 0,!1,void 0,void 0,void 0);const mn={name:"BRadioButton",mixins:[V],props:{type:{type:String,default:"is-primary"},expanded:Boolean},data:function(){return{isFocused:!1}}};var vn=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control",class:{"is-expanded":t.expanded}},[n("label",{ref:"label",staticClass:"b-radio radio button",class:[t.newValue===t.nativeValue?t.type:null,t.size,{"is-disabled":t.disabled,"is-focused":t.isFocused}],attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.$refs.label.click()}}},[t._t("default"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"radio",disabled:t.disabled,required:t.required,name:t.name},domProps:{value:t.nativeValue,checked:t._q(t.computedValue,t.nativeValue)},on:{click:function(t){t.stopPropagation()},focus:function(e){t.isFocused=!0},blur:function(e){t.isFocused=!1},change:function(e){t.computedValue=t.nativeValue}}})],2)])},staticRenderFns:[]},void 0,mn,void 0,!1,void 0,void 0,void 0),gn={install:function(t){Object(c.c)(t,pn),Object(c.c)(t,vn)}};Object(c.d)(gn);var yn=gn;const bn={name:"BRate",components:Object(l.a)({},v.name,v),props:{value:{type:Number,default:0},max:{type:Number,default:5},icon:{type:String,default:"star"},iconPack:String,size:String,spaced:Boolean,rtl:Boolean,disabled:Boolean,showScore:Boolean,showText:Boolean,customText:String,texts:Array},data:function(){return{newValue:this.value,hoverValue:0}},computed:{halfStyle:function(){return"width:".concat(this.valueDecimal,"%")},showMe:function(){var t="";return this.showScore?0===(t=this.disabled?this.value:this.newValue)&&(t=""):this.showText&&(t=this.texts[Math.ceil(this.newValue)-1]),t},valueDecimal:function(){return 100*this.value-100*Math.floor(this.value)}},watch:{value:function(t){this.newValue=t}},methods:{resetNewValue:function(){this.disabled||(this.hoverValue=0)},previewRate:function(t,e){this.disabled||(this.hoverValue=t,e.stopPropagation())},confirmValue:function(t){this.disabled||(this.newValue=t,this.$emit("change",this.newValue),this.$emit("input",this.newValue))},checkHalf:function(t){return this.disabled&&this.valueDecimal>0&&t-1<this.value&&t>this.value},rateClass:function(t){var output="";return t<=(0!==this.hoverValue?this.hoverValue:this.newValue)?output="set-on":this.disabled&&Math.ceil(this.value)===t&&(output="set-half"),output}}};var wn=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rate",class:{"is-disabled":t.disabled,"is-spaced":t.spaced,"is-rtl":t.rtl}},[t._l(t.max,(function(e,r){return n("div",{key:r,staticClass:"rate-item",class:t.rateClass(e),on:{mousemove:function(n){t.previewRate(e,n)},mouseleave:t.resetNewValue,click:function(n){n.preventDefault(),t.confirmValue(e)}}},[n("b-icon",{attrs:{pack:t.iconPack,icon:t.icon,size:t.size}}),t._v(" "),t.checkHalf(e)?n("b-icon",{staticClass:"is-half",style:t.halfStyle,attrs:{pack:t.iconPack,icon:t.icon,size:t.size}}):t._e()],1)})),t._v(" "),t.showText||t.showScore||t.customText?n("div",{staticClass:"rate-text",class:t.size},[n("span",[t._v(t._s(t.showMe))]),t._v(" "),t.customText&&!t.showText?n("span",[t._v(t._s(t.customText))]):t._e()]):t._e()],2)},staticRenderFns:[]},void 0,bn,void 0,!1,void 0,void 0,void 0),Sn={install:function(t){Object(c.c)(t,wn)}};Object(c.d)(Sn);var Tn=Sn,_n={install:function(t){Object(c.c)(t,bt)}};Object(c.d)(_n);var Cn=_n;const In={name:"BTooltip",props:{active:{type:Boolean,default:!0},type:String,label:String,position:{type:String,default:"is-top",validator:function(t){return["is-top","is-bottom","is-left","is-right"].indexOf(t)>-1}},always:Boolean,animated:Boolean,square:Boolean,dashed:Boolean,multilined:Boolean,size:{type:String,default:"is-medium"},delay:Number},computed:{newType:function(){return this.type||o.c.defaultTooltipType},newAnimated:function(){return this.animated||o.c.defaultTooltipAnimated},newDelay:function(){return this.delay||o.c.defaultTooltipDelay}}};var En=Object(c.a)({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{class:[t.newType,t.position,t.size,{"b-tooltip":t.active,"is-square":t.square,"is-animated":t.newAnimated,"is-always":t.always,"is-multiline":t.multilined,"is-dashed":t.dashed}],style:{"transition-delay":t.newDelay+"ms"},attrs:{"data-label":t.label}},[t._t("default")],2)},staticRenderFns:[]},void 0,In,void 0,!1,void 0,void 0,void 0);const kn={name:"BSliderThumb",components:Object(l.a)({},En.name,En),inheritAttrs:!1,props:{value:{type:Number,default:0},type:{type:String,default:""},tooltip:{type:Boolean,default:!0},customFormatter:Function},data:function(){return{isFocused:!1,dragging:!1,startX:0,startPosition:0,newPosition:null,oldValue:this.value}},computed:{disabled:function(){return this.$parent.disabled},max:function(){return this.$parent.max},min:function(){return this.$parent.min},step:function(){return this.$parent.step},precision:function(){return this.$parent.precision},currentPosition:function(){return"".concat((this.value-this.min)/(this.max-this.min)*100,"%")},wrapperStyle:function(){return{left:this.currentPosition}},tooltipLabel:function(){return void 0!==this.customFormatter?this.customFormatter(this.value):this.value.toString()}},methods:{onFocus:function(){this.isFocused=!0},onBlur:function(){this.isFocused=!1},onButtonDown:function(t){this.disabled||(t.preventDefault(),this.onDragStart(t),"undefined"!=typeof window&&(document.addEventListener("mousemove",this.onDragging),document.addEventListener("touchmove",this.onDragging),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("touchend",this.onDragEnd),document.addEventListener("contextmenu",this.onDragEnd)))},onLeftKeyDown:function(){this.disabled||this.value===this.min||(this.newPosition=parseFloat(this.currentPosition)-this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onRightKeyDown:function(){this.disabled||this.value===this.max||(this.newPosition=parseFloat(this.currentPosition)+this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onHomeKeyDown:function(){this.disabled||this.value===this.min||(this.newPosition=0,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onEndKeyDown:function(){this.disabled||this.value===this.max||(this.newPosition=100,this.setPosition(this.newPosition),this.$parent.emitValue("change"))},onDragStart:function(t){this.dragging=!0,this.$emit("dragstart"),"touchstart"===t.type&&(t.clientX=t.touches[0].clientX),this.startX=t.clientX,this.startPosition=parseFloat(this.currentPosition),this.newPosition=this.startPosition},onDragging:function(t){if(this.dragging){"touchmove"===t.type&&(t.clientX=t.touches[0].clientX);var e=(t.clientX-this.startX)/this.$parent.sliderSize*100;this.newPosition=this.startPosition+e,this.setPosition(this.newPosition)}},onDragEnd:function(){this.dragging=!1,this.$emit("dragend"),this.value!==this.oldValue&&this.$parent.emitValue("change"),this.setPosition(this.newPosition),"undefined"!=typeof window&&(document.removeEventListener("mousemove",this.onDragging),document.removeEventListener("touchmove",this.onDragging),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("touchend",this.onDragEnd),document.removeEventListener("contextmenu",this.onDragEnd))},setPosition:function(t){if(null!==t&&!isNaN(t)){t<0?t=0:t>100&&(t=100);var e=100/((this.max-this.min)/this.step),n=Math.round(t/e)*e/100*(this.max-this.min)+this.min;n=parseFloat(n.toFixed(this.precision)),this.$emit("input",n),this.dragging||n===this.oldValue||(this.oldValue=n)}}}};var Dn=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-slider-thumb-wrapper",class:{"is-dragging":t.dragging},style:t.wrapperStyle},[n("b-tooltip",{attrs:{label:t.tooltipLabel,type:t.type,always:t.dragging||t.isFocused,active:!t.disabled&&t.tooltip}},[n("div",t._b({staticClass:"b-slider-thumb",attrs:{tabindex:!t.disabled&&0},on:{mousedown:t.onButtonDown,touchstart:t.onButtonDown,focus:t.onFocus,blur:t.onBlur,keydown:[function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:(e.preventDefault(),t.onLeftKeyDown(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?"button"in e&&2!==e.button?null:(e.preventDefault(),t.onRightKeyDown(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?(e.preventDefault(),t.onLeftKeyDown(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?(e.preventDefault(),t.onRightKeyDown(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"home",void 0,e.key,void 0)?(e.preventDefault(),t.onHomeKeyDown(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"end",void 0,e.key,void 0)?(e.preventDefault(),t.onEndKeyDown(e)):null}]}},"div",t.$attrs,!1))])],1)},staticRenderFns:[]},void 0,kn,void 0,!1,void 0,void 0,void 0);const An={name:"BSliderTick",props:{value:{type:Number,default:0}},computed:{position:function(){var t=(this.value-this.$parent.min)/(this.$parent.max-this.$parent.min)*100;return t>=0&&t<=100?t:0},hidden:function(){return this.value===this.$parent.min||this.value===this.$parent.max}},methods:{getTickStyle:function(t){return{left:t+"%"}}},created:function(){if(!this.$parent.$data._isSlider)throw this.$destroy(),new Error("You should wrap bSliderTick on a bSlider")}};var Nn,On=Object(c.a)({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"b-slider-tick",class:{"is-tick-hidden":this.hidden},style:this.getTickStyle(this.position)},[this.$slots.default?e("span",{staticClass:"b-slider-tick-label"},[this._t("default")],2):this._e()])},staticRenderFns:[]},void 0,An,void 0,!1,void 0,void 0,void 0);const xn={name:"BSlider",components:(Nn={},Object(l.a)(Nn,Dn.name,Dn),Object(l.a)(Nn,On.name,On),Nn),props:{value:{type:[Number,Array],default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},type:{type:String,default:"is-primary"},size:String,ticks:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!0},tooltipType:String,rounded:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},customFormatter:Function,ariaLabel:[String,Array]},data:function(){return{value1:null,value2:null,dragging:!1,isRange:!1,_isSlider:!0}},computed:{newTooltipType:function(){return this.tooltipType?this.tooltipType:this.type},tickValues:function(){if(!this.ticks||this.min>this.max||0===this.step)return[];for(var t=[],i=this.min+this.step;i<this.max;i+=this.step)t.push(i);return t},minValue:function(){return Math.min(this.value1,this.value2)},maxValue:function(){return Math.max(this.value1,this.value2)},barSize:function(){return this.isRange?"".concat(100*(this.maxValue-this.minValue)/(this.max-this.min),"%"):"".concat(100*(this.value1-this.min)/(this.max-this.min),"%")},barStart:function(){return this.isRange?"".concat(100*(this.minValue-this.min)/(this.max-this.min),"%"):"0%"},precision:function(){var t=[this.min,this.max,this.step].map((function(t){var e=(""+t).split(".")[1];return e?e.length:0}));return Math.max.apply(Math,Object(l.d)(t))},barStyle:function(){return{width:this.barSize,left:this.barStart}},sliderSize:function(){return this.$refs.slider.clientWidth},rootClasses:function(){return{"is-rounded":this.rounded,"is-dragging":this.dragging,"is-disabled":this.disabled}}},watch:{value:function(t){this.setValues(t)},value1:function(){this.onInternalValueUpdate()},value2:function(){this.onInternalValueUpdate()},min:function(){this.setValues(this.value)},max:function(){this.setValues(this.value)}},methods:{setValues:function(t){if(!(this.min>this.max))if(Array.isArray(t)){this.isRange=!0;var e="number"!=typeof t[0]||isNaN(t[0])?this.min:Math.min(Math.max(this.min,t[0]),this.max),n="number"!=typeof t[1]||isNaN(t[1])?this.max:Math.max(Math.min(this.max,t[1]),this.min);this.value1=this.isThumbReversed?n:e,this.value2=this.isThumbReversed?e:n}else this.isRange=!1,this.value1=isNaN(t)?this.min:Math.min(this.max,Math.max(this.min,t)),this.value2=null},onInternalValueUpdate:function(){this.isRange&&(this.isThumbReversed=this.value1>this.value2),this.lazy&&this.dragging||this.emitValue("input"),this.dragging&&this.emitValue("dragging")},onSliderClick:function(t){if(!this.disabled&&!this.isTrackClickDisabled){var e=this.$refs.slider.getBoundingClientRect().left,n=(t.clientX-e)/this.sliderSize*100,r=this.min+n*(this.max-this.min)/100,o=Math.abs(r-this.value1);if(this.isRange){var c=Math.abs(r-this.value2);if(o<=c){if(o<this.step/2)return;this.$refs.button1.setPosition(n)}else{if(c<this.step/2)return;this.$refs.button2.setPosition(n)}}else{if(o<this.step/2)return;this.$refs.button1.setPosition(n)}this.emitValue("change")}},onDragStart:function(){this.dragging=!0,this.$emit("dragstart")},onDragEnd:function(){var t=this;this.isTrackClickDisabled=!0,setTimeout((function(){t.isTrackClickDisabled=!1}),0),this.dragging=!1,this.$emit("dragend"),this.lazy&&this.emitValue("input")},emitValue:function(t){this.$emit(t,this.isRange?[this.minValue,this.maxValue]:this.value1)}},created:function(){this.isThumbReversed=!1,this.isTrackClickDisabled=!1,this.setValues(this.value)}};var Pn=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-slider",class:[t.size,t.type,t.rootClasses]},[n("div",{ref:"slider",staticClass:"b-slider-track",on:{click:t.onSliderClick}},[n("div",{staticClass:"b-slider-fill",style:t.barStyle}),t._v(" "),t.ticks?t._l(t.tickValues,(function(t,e){return n("b-slider-tick",{key:e,attrs:{value:t}})})):t._e(),t._v(" "),t._t("default"),t._v(" "),n("b-slider-thumb",{ref:"button1",attrs:{type:t.newTooltipType,tooltip:t.tooltip,"custom-formatter":t.customFormatter,role:"slider","aria-valuenow":t.value1,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-orientation":"horizontal","aria-label":Array.isArray(t.ariaLabel)?t.ariaLabel[0]:t.ariaLabel,"aria-disabled":t.disabled},on:{dragstart:t.onDragStart,dragend:t.onDragEnd},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v(" "),t.isRange?n("b-slider-thumb",{ref:"button2",attrs:{type:t.newTooltipType,tooltip:t.tooltip,"custom-formatter":t.customFormatter,role:"slider","aria-valuenow":t.value2,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-orientation":"horizontal","aria-label":Array.isArray(t.ariaLabel)?t.ariaLabel[1]:"","aria-disabled":t.disabled},on:{dragstart:t.onDragStart,dragend:t.onDragEnd},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}}):t._e()],2)])},staticRenderFns:[]},void 0,xn,void 0,!1,void 0,void 0,void 0),Rn={install:function(t){Object(c.c)(t,Pn),Object(c.c)(t,On)}};Object(c.d)(Rn);var Mn=Rn;const Ln={name:"BSnackbar",mixins:[Ee.a],props:{actionText:{type:String,default:"OK"},onAction:{type:Function,default:function(){}},indefinite:{type:Boolean,default:!1}},data:function(){return{newDuration:this.duration||o.c.defaultSnackbarDuration}},methods:{action:function(){this.onAction(),this.close()}}};var Vn,Bn=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{"enter-active-class":t.transition.enter,"leave-active-class":t.transition.leave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"snackbar",class:[t.type,t.position],attrs:{role:t.actionText?"alertdialog":"alert"}},[n("div",{staticClass:"text",domProps:{innerHTML:t._s(t.message)}}),t._v(" "),t.actionText?n("div",{staticClass:"action",class:t.type,on:{click:t.action}},[n("button",{staticClass:"button"},[t._v(t._s(t.actionText))])]):t._e()])])},staticRenderFns:[]},void 0,Ln,void 0,!1,void 0,void 0,void 0),Fn={open:function(t){var e;"string"==typeof t&&(t={message:t});var n={type:"is-success",position:o.c.defaultSnackbarPosition||"is-bottom-right"};t.parent&&(e=t.parent,delete t.parent);var c=Object(r.d)(n,t);return new(("undefined"!=typeof window&&window.Vue?window.Vue:Vn||o.a).extend(Bn))({parent:e,el:document.createElement("div"),propsData:c})}},jn={install:function(t){Vn=t,Object(c.b)(t,"snackbar",Fn)}};Object(c.d)(jn);var Un,qn=jn,zn={name:"BSlotComponent",props:{component:{type:Object,required:!0},name:{type:String,default:"default"},scoped:{type:Boolean},props:{type:Object},tag:{type:String,default:"div"},event:{type:String,default:"hook:updated"}},methods:{refresh:function(){this.$forceUpdate()},isVueComponent:function(){return this.component&&this.component._isVue}},created:function(){this.isVueComponent()&&this.component.$on(this.event,this.refresh)},beforeDestroy:function(){this.isVueComponent()&&this.component.$off(this.event,this.refresh)},render:function(t){if(this.isVueComponent())return t(this.tag,{},this.scoped?this.component.$scopedSlots[this.name](this.props):this.component.$slots[this.name])}};const $n={name:"BSteps",components:(Un={},Object(l.a)(Un,v.name,v),Object(l.a)(Un,zn.name,zn),Un),props:{value:Number,type:[String,Object],size:String,animated:{type:Boolean,default:!0},destroyOnHide:{type:Boolean,default:!1},iconPack:String,iconPrev:{type:String,default:o.c.defaultIconPrev},iconNext:{type:String,default:o.c.defaultIconNext},hasNavigation:{type:Boolean,default:!0},ariaNextLabel:String,ariaPreviousLabel:String},data:function(){return{activeStep:this.value||0,defaultSlots:[],contentHeight:0,isTransitioning:!1,_isSteps:!0}},computed:{mainClasses:function(){return[this.type,this.size]},stepItems:function(){return this.defaultSlots.filter((function(t){return t.componentInstance&&t.componentInstance.$data&&t.componentInstance.$data._isStepItem})).map((function(t){return t.componentInstance}))},reversedStepItems:function(){return this.stepItems.slice().reverse()},firstVisibleStepIndex:function(){return this.stepItems.map((function(t,e){return t.visible})).indexOf(!0)},hasPrev:function(){return this.firstVisibleStepIndex>=0&&this.activeStep>this.firstVisibleStepIndex},lastVisibleStepIndex:function(){var t=this.reversedStepItems.map((function(t,e){return t.visible})).indexOf(!0);return t>=0?this.stepItems.length-1-t:t},hasNext:function(){return this.lastVisibleStepIndex>=0&&this.activeStep<this.lastVisibleStepIndex},navigationProps:function(){return{previous:{disabled:!this.hasPrev,action:this.prev},next:{disabled:!this.hasNext,action:this.next}}}},watch:{value:function(t){this.changeStep(t)},stepItems:function(){this.activeStep<this.stepItems.length&&(this.stepItems[this.activeStep].isActive=!0)}},methods:{refreshSlots:function(){this.defaultSlots=this.$slots.default||[]},changeStep:function(t){if(this.activeStep!==t){if(t>this.stepItems.length)throw new Error("The index you trying to set is bigger than the steps length");this.activeStep<this.stepItems.length&&this.stepItems[this.activeStep].deactivate(this.activeStep,t),this.stepItems[t].activate(this.activeStep,t),this.activeStep=t,this.$emit("change",t)}},isItemClickable:function(t,e){return void 0===t.clickable?this.activeStep>e:t.clickable},stepClick:function(t){this.$emit("input",t),this.changeStep(t)},prev:function(){var t=this;if(this.hasPrev){var e=this.reversedStepItems.map((function(e,n){return t.stepItems.length-1-n<t.activeStep&&e.visible})).indexOf(!0);e>=0&&(e=this.stepItems.length-1-e),this.$emit("input",e),this.changeStep(e)}},next:function(){var t=this;if(this.hasNext){var e=this.stepItems.map((function(e,n){return n>t.activeStep&&e.visible})).indexOf(!0);this.$emit("input",e),this.changeStep(e)}}},mounted:function(){this.activeStep<this.stepItems.length&&(this.stepItems[this.activeStep].isActive=!0),this.refreshSlots()}};var Hn=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-steps"},[n("nav",{staticClass:"steps",class:t.mainClasses},[n("ul",{staticClass:"step-items"},t._l(t.stepItems,(function(e,r){return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"stepItem.visible"}],key:r,staticClass:"step-item",class:[e.type||t.type,{"is-active":t.activeStep===r,"is-previous":t.activeStep>r}]},[n("a",{staticClass:"step-link",class:{"is-clickable":t.isItemClickable(e,r)},on:{click:function(n){t.isItemClickable(e,r)&&t.stepClick(r)}}},[n("div",{staticClass:"step-marker"},[e.icon?n("b-icon",{attrs:{icon:e.icon,pack:e.iconPack,size:t.size}}):t._e()],1),t._v(" "),n("div",{staticClass:"step-details"},[n("span",{staticClass:"step-title"},[t._v(t._s(e.label))])])])])})))]),t._v(" "),n("section",{staticClass:"step-content",class:{"is-transitioning":t.isTransitioning}},[t._t("default")],2),t._v(" "),t._t("navigation",[t.hasNavigation?n("nav",{staticClass:"step-navigation"},[n("a",{staticClass:"pagination-previous",attrs:{role:"button",disabled:t.navigationProps.previous.disabled,"aria-label":t.ariaPreviousLabel},on:{click:function(e){return e.preventDefault(),t.navigationProps.previous.action(e)}}},[n("b-icon",{attrs:{icon:t.iconPrev,pack:t.iconPack,both:"","aria-hidden":"true"}})],1),t._v(" "),n("a",{staticClass:"pagination-next",attrs:{role:"button",disabled:t.navigationProps.next.disabled,"aria-label":t.ariaNextLabel},on:{click:function(e){return e.preventDefault(),t.navigationProps.next.action(e)}}},[n("b-icon",{attrs:{icon:t.iconNext,pack:t.iconPack,both:"","aria-hidden":"true"}})],1)]):t._e()],{previous:t.navigationProps.previous,next:t.navigationProps.next})],2)},staticRenderFns:[]},void 0,$n,void 0,!1,void 0,void 0,void 0);const Wn={name:"BStepItem",props:{label:String,type:String|Object,icon:String,iconPack:String,clickable:{type:Boolean,default:void 0},visible:{type:Boolean,default:!0}},data:function(){return{isActive:!1,transitionName:null,_isStepItem:!0}},methods:{activate:function(t,e){this.transitionName=e<t?"slide-next":"slide-prev",this.isActive=!0},deactivate:function(t,e){this.transitionName=e<t?"slide-next":"slide-prev",this.isActive=!1}},created:function(){if(!this.$parent.$data._isSteps)throw this.$destroy(),new Error("You should wrap bStepItem on a bSteps");this.$parent.refreshSlots()},beforeDestroy:function(){this.$parent.refreshSlots()},render:function(t){var e=this;if(!this.$parent.destroyOnHide||this.isActive&&this.visible){var n=t("div",{directives:[{name:"show",value:this.isActive&&this.visible}],attrs:{class:"step-item"}},this.$slots.default);return this.$parent.animated?t("transition",{props:{name:this.transitionName},on:{"before-enter":function(){e.$parent.isTransitioning=!0},"after-enter":function(){e.$parent.isTransitioning=!1}}},[n]):n}}};var Kn=Object(c.a)({},void 0,Wn,void 0,void 0,void 0,void 0,void 0),Gn={install:function(t){Object(c.c)(t,Hn),Object(c.c)(t,Kn)}};Object(c.d)(Gn);var Qn=Gn;const Yn={name:"BSwitch",props:{value:[String,Number,Boolean,Function,Object,Array,Date],nativeValue:[String,Number,Boolean,Function,Object,Array,Date],disabled:Boolean,type:String,name:String,required:Boolean,size:String,trueValue:{type:[String,Number,Boolean,Function,Object,Array,Date],default:!0},falseValue:{type:[String,Number,Boolean,Function,Object,Array,Date],default:!1},rounded:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1}},data:function(){return{newValue:this.value,isMouseDown:!1}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){this.newValue=t,this.$emit("input",t)}},newClass:function(){return[this.size,{"is-disabled":this.disabled},{"is-rounded":this.rounded},{"is-outlined":this.outlined}]}},watch:{value:function(t){this.newValue=t}},methods:{focus:function(){this.$refs.input.focus()}}};var Xn=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{ref:"label",staticClass:"switch",class:t.newClass,attrs:{disabled:t.disabled},on:{click:t.focus,keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.$refs.label.click()},mousedown:function(e){t.isMouseDown=!0},mouseup:function(e){t.isMouseDown=!1},mouseout:function(e){t.isMouseDown=!1},blur:function(e){t.isMouseDown=!1}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.computedValue,expression:"computedValue"}],ref:"input",attrs:{type:"checkbox",disabled:t.disabled,name:t.name,required:t.required,"true-value":t.trueValue,"false-value":t.falseValue},domProps:{value:t.nativeValue,checked:Array.isArray(t.computedValue)?t._i(t.computedValue,t.nativeValue)>-1:t._q(t.computedValue,t.trueValue)},on:{click:function(t){t.stopPropagation()},change:function(e){var n=t.computedValue,r=e.target,o=r.checked?t.trueValue:t.falseValue;if(Array.isArray(n)){var c=t.nativeValue,l=t._i(n,c);r.checked?l<0&&(t.computedValue=n.concat([c])):l>-1&&(t.computedValue=n.slice(0,l).concat(n.slice(l+1)))}else t.computedValue=o}}}),t._v(" "),n("span",{staticClass:"check",class:[{"is-elastic":t.isMouseDown&&!t.disabled},t.type]}),t._v(" "),n("span",{staticClass:"control-label"},[t._t("default")],2)])},staticRenderFns:[]},void 0,Yn,void 0,!1,void 0,void 0,void 0),Jn={install:function(t){Object(c.c)(t,Xn)}};Object(c.d)(Jn);var Zn,ti=Jn;const ei={name:"BTableMobileSort",components:(Zn={},Object(l.a)(Zn,bt.name,bt),Object(l.a)(Zn,v.name,v),Zn),props:{currentSortColumn:Object,isAsc:Boolean,columns:Array,placeholder:String,iconPack:String,sortIcon:{type:String,default:"arrow-up"},sortIconSize:{type:String,default:"is-small"}},data:function(){return{mobileSort:this.currentSortColumn}},computed:{showPlaceholder:function(){var t=this;return!this.columns||!this.columns.some((function(e){return e===t.mobileSort}))}},watch:{mobileSort:function(t){this.currentSortColumn!==t&&this.$emit("sort",t)},currentSortColumn:function(t){this.mobileSort=t}},methods:{sort:function(){this.$emit("sort",this.mobileSort)}}};var ni=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field table-mobile-sort"},[n("div",{staticClass:"field has-addons"},[n("b-select",{attrs:{expanded:""},model:{value:t.mobileSort,callback:function(e){t.mobileSort=e},expression:"mobileSort"}},[t.placeholder?[n("option",{directives:[{name:"show",rawName:"v-show",value:t.showPlaceholder,expression:"showPlaceholder"}],attrs:{selected:"",disabled:"",hidden:""},domProps:{value:{}}},[t._v("\r\n                        "+t._s(t.placeholder)+"\r\n                    ")])]:t._e(),t._v(" "),t._l(t.columns,(function(e,r){return e.sortable?n("option",{key:r,domProps:{value:e}},[t._v("\r\n                    "+t._s(e.label)+"\r\n                ")]):t._e()}))],2),t._v(" "),n("div",{staticClass:"control"},[n("button",{staticClass:"button is-primary",on:{click:t.sort}},[n("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.currentSortColumn===t.mobileSort,expression:"currentSortColumn === mobileSort"}],class:{"is-desc":!t.isAsc},attrs:{icon:t.sortIcon,pack:t.iconPack,size:t.sortIconSize,both:""}})],1)])],1)])},staticRenderFns:[]},void 0,ei,void 0,!1,void 0,void 0,void 0);const ii={name:"BTableColumn",props:{label:String,customKey:[String,Number],field:String,meta:[String,Number,Boolean,Function,Object,Array],width:[Number,String],numeric:Boolean,centered:Boolean,searchable:Boolean,sortable:Boolean,visible:{type:Boolean,default:!0},subheading:[String,Number],customSort:Function,internal:Boolean},data:function(){return{newKey:this.customKey||this.label,_isTableColumn:!0}},computed:{rootClasses:function(){return{"has-text-right":this.numeric&&!this.centered,"has-text-centered":this.centered}}},beforeMount:function(){var t=this;if(!this.$parent.$data._isTable)throw this.$destroy(),new Error("You should wrap bTableColumn on a bTable");this.internal||!this.$parent.newColumns.some((function(e){return e.newKey===t.newKey}))&&this.$parent.newColumns.push(this)},beforeDestroy:function(){var t=this;if(this.$parent.visibleData.length&&1===this.$parent.$children.filter((function(e){return e.$data._isTableColumn&&e.$data.newKey===t.newKey})).length){var e=this.$parent.newColumns.map((function(t){return t.newKey})).indexOf(this.newKey);e>=0&&this.$parent.newColumns.splice(e,1)}}};var ri,oi=Object(c.a)({render:function(){var t=this.$createElement,e=this._self._c||t;return this.visible?e("td",{class:this.rootClasses,attrs:{"data-label":this.label}},[this._t("default")],2):this._e()},staticRenderFns:[]},void 0,ii,void 0,!1,void 0,void 0,void 0);const ai={name:"BTable",components:(ri={},Object(l.a)(ri,F.name,F),Object(l.a)(ri,v.name,v),Object(l.a)(ri,w.name,w),Object(l.a)(ri,sn.name,sn),Object(l.a)(ri,zn.name,zn),Object(l.a)(ri,ni.name,ni),Object(l.a)(ri,oi.name,oi),ri),props:{data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},bordered:Boolean,striped:Boolean,narrowed:Boolean,hoverable:Boolean,loading:Boolean,detailed:Boolean,checkable:Boolean,headerCheckable:{type:Boolean,default:!0},checkboxPosition:{type:String,default:"left",validator:function(t){return["left","right"].indexOf(t)>=0}},selected:Object,focusable:Boolean,customIsChecked:Function,isRowCheckable:{type:Function,default:function(){return!0}},checkedRows:{type:Array,default:function(){return[]}},mobileCards:{type:Boolean,default:!0},defaultSort:[String,Array],defaultSortDirection:{type:String,default:"asc"},sortIcon:{type:String,default:"arrow-up"},sortIconSize:{type:String,default:"is-small"},paginated:Boolean,currentPage:{type:Number,default:1},perPage:{type:[Number,String],default:20},showDetailIcon:{type:Boolean,default:!0},paginationSimple:Boolean,paginationSize:String,paginationPosition:{type:String,default:"bottom",validator:function(t){return["bottom","top","both"].indexOf(t)>=0}},backendSorting:Boolean,backendFiltering:Boolean,rowClass:{type:Function,default:function(){return""}},openedDetailed:{type:Array,default:function(){return[]}},hasDetailedVisible:{type:Function,default:function(){return!0}},detailKey:{type:String,default:""},customDetailRow:{type:Boolean,default:!1},backendPagination:Boolean,total:{type:[Number,String],default:0},iconPack:String,mobileSortPlaceholder:String,customRowKey:String,draggable:{type:Boolean,default:!1},ariaNextLabel:String,ariaPreviousLabel:String,ariaPageLabel:String,ariaCurrentLabel:String},data:function(){return{getValueByPath:r.a,newColumns:Object(l.d)(this.columns),visibleDetailRows:this.openedDetailed,newData:this.data,newDataTotal:this.backendPagination?this.total:this.data.length,newCheckedRows:Object(l.d)(this.checkedRows),lastCheckedRowIndex:null,newCurrentPage:this.currentPage,currentSortColumn:{},isAsc:!0,filters:{},firstTimeSort:!0,_isTable:!0}},computed:{tableClasses:function(){return{"is-bordered":this.bordered,"is-striped":this.striped,"is-narrow":this.narrowed,"has-mobile-cards":this.mobileCards,"is-hoverable":(this.hoverable||this.focusable)&&this.visibleData.length}},visibleData:function(){if(!this.paginated)return this.newData;var t=this.newCurrentPage,e=this.perPage;if(this.newData.length<=e)return this.newData;var n=(t-1)*e,r=parseInt(n,10)+parseInt(e,10);return this.newData.slice(n,r)},visibleColumns:function(){return this.newColumns?this.newColumns.filter((function(t){return t.visible||void 0===t.visible})):this.newColumns},isAllChecked:function(){var t=this,e=this.visibleData.filter((function(e){return t.isRowCheckable(e)}));if(0===e.length)return!1;var n=e.some((function(e){return Object(r.b)(t.newCheckedRows,e,t.customIsChecked)<0}));return!n},isAllUncheckable:function(){var t=this;return 0===this.visibleData.filter((function(e){return t.isRowCheckable(e)})).length},hasSortablenewColumns:function(){return this.newColumns.some((function(t){return t.sortable}))},hasSearchablenewColumns:function(){return this.newColumns.some((function(t){return t.searchable}))},hasCustomSubheadings:function(){return!(!this.$scopedSlots||!this.$scopedSlots.subheading)||this.newColumns.some((function(t){return t.subheading||t.$scopedSlots&&t.$scopedSlots.subheading}))},columnCount:function(){var t=this.newColumns.length;return t+=this.checkable?1:0,t+=this.detailed&&this.showDetailIcon?1:0},showDetailRowIcon:function(){return this.detailed&&this.showDetailIcon}},watch:{data:function(t){this.newData=t,this.backendSorting||this.sort(this.currentSortColumn,!0),this.backendPagination||(this.newDataTotal=t.length)},total:function(t){this.backendPagination&&(this.newDataTotal=t)},checkedRows:function(t){this.newCheckedRows=Object(l.d)(t)},columns:function(t){this.newColumns=Object(l.d)(t)},newColumns:function(t){this.checkSort()},filters:{handler:function(t){var e=this;this.backendFiltering?this.$emit("filters-change",t):(this.newData=this.data.filter((function(t){return e.isRowFiltered(t)})),this.backendPagination||(this.newDataTotal=this.newData.length))},deep:!0},openedDetailed:function(t){this.visibleDetailRows=t},currentPage:function(t){this.newCurrentPage=t}},methods:{sortBy:function(t,e,n,o){return n&&"function"==typeof n?Object(l.d)(t).sort((function(a,b){return n(a,b,o)})):Object(l.d)(t).sort((function(a,b){var t=Object(r.a)(a,e),n=Object(r.a)(b,e);return"boolean"==typeof t&&"boolean"==typeof n?o?t-n:n-t:t||0===t?n||0===n?t===n?0:(t="string"==typeof t?t.toUpperCase():t,n="string"==typeof n?n.toUpperCase():n,o?t>n?1:-1:t>n?-1:1):-1:1}))},sort:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&t.sortable&&(e||(this.isAsc=t===this.currentSortColumn?!this.isAsc:"desc"!==this.defaultSortDirection.toLowerCase()),this.firstTimeSort||this.$emit("sort",t.field,this.isAsc?"asc":"desc"),this.backendSorting||(this.newData=this.sortBy(this.newData,t.field,t.customSort,this.isAsc)),this.currentSortColumn=t)},isRowChecked:function(t){return Object(r.b)(this.newCheckedRows,t,this.customIsChecked)>=0},removeCheckedRow:function(t){var e=Object(r.b)(this.newCheckedRows,t,this.customIsChecked);e>=0&&this.newCheckedRows.splice(e,1)},checkAll:function(){var t=this,e=this.isAllChecked;this.visibleData.forEach((function(n){t.removeCheckedRow(n),e||t.isRowCheckable(n)&&t.newCheckedRows.push(n)})),this.$emit("check",this.newCheckedRows),this.$emit("check-all",this.newCheckedRows),this.$emit("update:checkedRows",this.newCheckedRows)},checkRow:function(t,e,n){if(this.isRowCheckable(t)){var r=this.lastCheckedRowIndex;this.lastCheckedRowIndex=e,n.shiftKey&&null!==r&&e!==r?this.shiftCheckRow(t,e,r):this.isRowChecked(t)?this.removeCheckedRow(t):this.newCheckedRows.push(t),this.$emit("check",this.newCheckedRows,t),this.$emit("update:checkedRows",this.newCheckedRows)}},shiftCheckRow:function(t,e,n){var r=this,o=this.visibleData.slice(Math.min(e,n),Math.max(e,n)+1),c=!this.isRowChecked(t);o.forEach((function(t){r.removeCheckedRow(t),c&&r.isRowCheckable(t)&&r.newCheckedRows.push(t)}))},selectRow:function(t,e){this.$emit("click",t),this.selected!==t&&(this.$emit("select",t,this.selected),this.$emit("update:selected",t))},pageChanged:function(t){this.newCurrentPage=t>0?t:1,this.$emit("page-change",this.newCurrentPage),this.$emit("update:currentPage",this.newCurrentPage)},toggleDetails:function(t){this.isVisibleDetailRow(t)?(this.closeDetailRow(t),this.$emit("details-close",t)):(this.openDetailRow(t),this.$emit("details-open",t)),this.$emit("update:openedDetailed",this.visibleDetailRows)},openDetailRow:function(t){var e=this.handleDetailKey(t);this.visibleDetailRows.push(e)},closeDetailRow:function(t){var e=this.handleDetailKey(t),i=this.visibleDetailRows.indexOf(e);this.visibleDetailRows.splice(i,1)},isVisibleDetailRow:function(t){var e=this.handleDetailKey(t);return this.visibleDetailRows.indexOf(e)>=0},isActiveDetailRow:function(t){return this.detailed&&!this.customDetailRow&&this.isVisibleDetailRow(t)},isActiveCustomDetailRow:function(t){return this.detailed&&this.customDetailRow&&this.isVisibleDetailRow(t)},isRowFiltered:function(t){for(var e in this.filters){if(!this.filters[e])return delete this.filters[e],!0;var n=this.getValueByPath(t,e);if(null==n)return!1;if(Number.isInteger(n)){if(n!==Number(this.filters[e]))return!1}else{var r=new RegExp(this.filters[e],"i");if("boolean"==typeof n&&(n="".concat(n)),!n.match(r))return!1}}return!0},handleDetailKey:function(t){var e=this.detailKey;return e.length&&t?t[e]:t},checkPredefinedDetailedRows:function(){if(this.openedDetailed.length>0&&!this.detailKey.length)throw new Error('If you set a predefined opened-detailed, you must provide a unique key using the prop "detail-key"')},checkSort:function(){if(this.newColumns.length&&this.firstTimeSort)this.initSort(),this.firstTimeSort=!1;else if(this.newColumns.length&&this.currentSortColumn.field)for(var i=0;i<this.newColumns.length;i++)if(this.newColumns[i].field===this.currentSortColumn.field){this.currentSortColumn=this.newColumns[i];break}},hasCustomFooterSlot:function(){if(this.$slots.footer.length>1)return!0;var t=this.$slots.footer[0].tag;return"th"===t||"td"===t},hasBottomLeftSlot:function(){return void 0!==this.$slots["bottom-left"]},pressedArrow:function(t){if(this.visibleData.length){var e=this.visibleData.indexOf(this.selected)+t;e=e<0?0:e>this.visibleData.length-1?this.visibleData.length-1:e,this.selectRow(this.visibleData[e])}},focus:function(){this.focusable&&this.$el.querySelector("table").focus()},initSort:function(){var t=this;if(this.defaultSort){var e="",n=this.defaultSortDirection;Array.isArray(this.defaultSort)?(e=this.defaultSort[0],this.defaultSort[1]&&(n=this.defaultSort[1])):e=this.defaultSort,this.newColumns.forEach((function(r){r.field===e&&(t.isAsc="desc"!==n.toLowerCase(),t.sort(r,!0))}))}},handleDragStart:function(t,e,n){this.$emit("dragstart",{event:t,row:e,index:n})},handleDragEnd:function(t,e,n){this.$emit("dragend",{event:t,row:e,index:n})},handleDrop:function(t,e,n){this.$emit("drop",{event:t,row:e,index:n})},handleDragOver:function(t,e,n){this.$emit("dragover",{event:t,row:e,index:n})},handleDragLeave:function(t,e,n){this.$emit("dragleave",{event:t,row:e,index:n})}},mounted:function(){this.checkPredefinedDetailedRows(),this.checkSort()}};var si=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-table",class:{"is-loading":t.loading}},[t.mobileCards&&t.hasSortablenewColumns?n("b-table-mobile-sort",{attrs:{"current-sort-column":t.currentSortColumn,"is-asc":t.isAsc,columns:t.newColumns,placeholder:t.mobileSortPlaceholder,"icon-pack":t.iconPack,"sort-icon":t.sortIcon,"sort-icon-size":t.sortIconSize},on:{sort:function(e){return t.sort(e)}}}):t._e(),t._v(" "),!t.paginated||"top"!==t.paginationPosition&&"both"!==t.paginationPosition?t._e():n("div",{staticClass:"top level"},[n("div",{staticClass:"level-left"},[t._t("top-left")],2),t._v(" "),n("div",{staticClass:"level-right"},[t.paginated?n("div",{staticClass:"level-item"},[n("b-pagination",{attrs:{"icon-pack":t.iconPack,total:t.newDataTotal,"per-page":t.perPage,simple:t.paginationSimple,size:t.paginationSize,current:t.newCurrentPage,"aria-next-label":t.ariaNextLabel,"aria-previous-label":t.ariaPreviousLabel,"aria-page-label":t.ariaPageLabel,"aria-current-label":t.ariaCurrentLabel},on:{change:t.pageChanged}})],1):t._e()])]),t._v(" "),n("div",{staticClass:"table-wrapper"},[n("table",{staticClass:"table",class:t.tableClasses,attrs:{tabindex:!!t.focusable&&0},on:{keydown:[function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?e.target!==e.currentTarget?null:(e.preventDefault(),void t.pressedArrow(-1)):null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?e.target!==e.currentTarget?null:(e.preventDefault(),void t.pressedArrow(1)):null}]}},[t.newColumns.length?n("thead",[n("tr",[t.showDetailRowIcon?n("th",{attrs:{width:"40px"}}):t._e(),t._v(" "),t.checkable&&"left"===t.checkboxPosition?n("th",{staticClass:"checkbox-cell"},[t.headerCheckable?[n("b-checkbox",{attrs:{value:t.isAllChecked,disabled:t.isAllUncheckable},nativeOn:{change:function(e){return t.checkAll(e)}}})]:t._e()],2):t._e(),t._v(" "),t._l(t.visibleColumns,(function(e,r){return n("th",{key:r,class:{"is-current-sort":t.currentSortColumn===e,"is-sortable":e.sortable},style:{width:void 0===e.width?null:isNaN(e.width)?e.width:e.width+"px"},on:{click:function(n){n.stopPropagation(),t.sort(e)}}},[n("div",{staticClass:"th-wrap",class:{"is-numeric":e.numeric,"is-centered":e.centered}},[e.$scopedSlots&&e.$scopedSlots.header?[n("b-slot-component",{attrs:{component:e,scoped:!0,name:"header",tag:"span",props:{column:e,index:r}}})]:t.$scopedSlots.header?[t._t("header",null,{column:e,index:r})]:[t._v(t._s(e.label))],t._v(" "),n("b-icon",{directives:[{name:"show",rawName:"v-show",value:t.currentSortColumn===e,expression:"currentSortColumn === column"}],class:{"is-desc":!t.isAsc},attrs:{icon:t.sortIcon,pack:t.iconPack,both:"",size:t.sortIconSize}})],2)])})),t._v(" "),t.checkable&&"right"===t.checkboxPosition?n("th",{staticClass:"checkbox-cell"},[t.headerCheckable?[n("b-checkbox",{attrs:{value:t.isAllChecked,disabled:t.isAllUncheckable},nativeOn:{change:function(e){return t.checkAll(e)}}})]:t._e()],2):t._e()],2),t._v(" "),t.hasCustomSubheadings?n("tr",{staticClass:"is-subheading"},[t.showDetailRowIcon?n("th",{attrs:{width:"40px"}}):t._e(),t._v(" "),t.checkable&&"left"===t.checkboxPosition?n("th"):t._e(),t._v(" "),t._l(t.visibleColumns,(function(e,r){return n("th",{key:r,style:{width:void 0===e.width?null:isNaN(e.width)?e.width:e.width+"px"}},[n("div",{staticClass:"th-wrap",class:{"is-numeric":e.numeric,"is-centered":e.centered}},[e.$scopedSlots&&e.$scopedSlots.subheading?[n("b-slot-component",{attrs:{component:e,scoped:!0,name:"subheading",tag:"span",props:{column:e,index:r}}})]:t.$scopedSlots.subheading?[t._t("subheading",null,{column:e,index:r})]:[t._v(t._s(e.subheading))]],2)])})),t._v(" "),t.checkable&&"right"===t.checkboxPosition?n("th"):t._e()],2):t._e(),t._v(" "),t.hasSearchablenewColumns?n("tr",[t.showDetailRowIcon?n("th",{attrs:{width:"40px"}}):t._e(),t._v(" "),t.checkable&&"left"===t.checkboxPosition?n("th"):t._e(),t._v(" "),t._l(t.visibleColumns,(function(e,r){return n("th",{key:r,style:{width:void 0===e.width?null:isNaN(e.width)?e.width:e.width+"px"}},[n("div",{staticClass:"th-wrap"},[e.searchable?[n("b-input",{attrs:{type:e.numeric?"number":"text"},model:{value:t.filters[e.field],callback:function(n){t.$set(t.filters,e.field,n)},expression:"filters[column.field]"}})]:t._e()],2)])})),t._v(" "),t.checkable&&"right"===t.checkboxPosition?n("th"):t._e()],2):t._e()]):t._e(),t._v(" "),t.visibleData.length?n("tbody",[t._l(t.visibleData,(function(e,r){return[n("tr",{key:t.customRowKey?e[t.customRowKey]:r,class:[t.rowClass(e,r),{"is-selected":e===t.selected,"is-checked":t.isRowChecked(e)}],attrs:{draggable:t.draggable},on:{click:function(n){t.selectRow(e)},dblclick:function(n){t.$emit("dblclick",e)},mouseenter:function(n){t.$listeners.mouseenter&&t.$emit("mouseenter",e)},mouseleave:function(n){t.$listeners.mouseleave&&t.$emit("mouseleave",e)},contextmenu:function(n){t.$emit("contextmenu",e,n)},dragstart:function(n){t.handleDragStart(n,e,r)},dragend:function(n){t.handleDragEnd(n,e,r)},drop:function(n){t.handleDrop(n,e,r)},dragover:function(n){t.handleDragOver(n,e,r)},dragleave:function(n){t.handleDragLeave(n,e,r)}}},[t.showDetailRowIcon?n("td",{staticClass:"chevron-cell"},[t.hasDetailedVisible(e)?n("a",{attrs:{role:"button"},on:{click:function(n){n.stopPropagation(),t.toggleDetails(e)}}},[n("b-icon",{class:{"is-expanded":t.isVisibleDetailRow(e)},attrs:{icon:"chevron-right",pack:t.iconPack,both:""}})],1):t._e()]):t._e(),t._v(" "),t.checkable&&"left"===t.checkboxPosition?n("td",{staticClass:"checkbox-cell"},[n("b-checkbox",{attrs:{disabled:!t.isRowCheckable(e),value:t.isRowChecked(e)},nativeOn:{click:function(n){n.preventDefault(),n.stopPropagation(),t.checkRow(e,r,n)}}})],1):t._e(),t._v(" "),t.$scopedSlots.default?t._t("default",null,{row:e,index:r}):t._l(t.newColumns,(function(r){return n("BTableColumn",t._b({key:r.field,attrs:{internal:""}},"BTableColumn",r,!1),[r.renderHtml?n("span",{domProps:{innerHTML:t._s(t.getValueByPath(e,r.field))}}):[t._v("\r\n                                        "+t._s(t.getValueByPath(e,r.field))+"\r\n                                    ")]],2)})),t._v(" "),t.checkable&&"right"===t.checkboxPosition?n("td",{staticClass:"checkbox-cell"},[n("b-checkbox",{attrs:{disabled:!t.isRowCheckable(e),value:t.isRowChecked(e)},nativeOn:{click:function(n){n.preventDefault(),n.stopPropagation(),t.checkRow(e,r,n)}}})],1):t._e()],2),t._v(" "),t.isActiveDetailRow(e)?n("tr",{staticClass:"detail"},[n("td",{attrs:{colspan:t.columnCount}},[n("div",{staticClass:"detail-container"},[t._t("detail",null,{row:e,index:r})],2)])]):t._e(),t._v(" "),t.isActiveCustomDetailRow(e)?t._t("detail",null,{row:e,index:r}):t._e()]}))],2):n("tbody",[n("tr",{staticClass:"is-empty"},[n("td",{attrs:{colspan:t.columnCount}},[t._t("empty")],2)])]),t._v(" "),void 0!==t.$slots.footer?n("tfoot",[n("tr",{staticClass:"table-footer"},[t.hasCustomFooterSlot()?t._t("footer"):n("th",{attrs:{colspan:t.columnCount}},[t._t("footer")],2)],2)]):t._e()])]),t._v(" "),t.checkable&&t.hasBottomLeftSlot()||t.paginated&&("bottom"===t.paginationPosition||"both"===t.paginationPosition)?n("div",{staticClass:"level"},[n("div",{staticClass:"level-left"},[t._t("bottom-left")],2),t._v(" "),n("div",{staticClass:"level-right"},[t.paginated?n("div",{staticClass:"level-item"},[n("b-pagination",{attrs:{"icon-pack":t.iconPack,total:t.newDataTotal,"per-page":t.perPage,simple:t.paginationSimple,size:t.paginationSize,current:t.newCurrentPage,"aria-next-label":t.ariaNextLabel,"aria-previous-label":t.ariaPreviousLabel,"aria-page-label":t.ariaPageLabel,"aria-current-label":t.ariaCurrentLabel},on:{change:t.pageChanged}})],1):t._e()])]):t._e()],1)},staticRenderFns:[]},void 0,ai,void 0,!1,void 0,void 0,void 0),ui={install:function(t){Object(c.c)(t,si),Object(c.c)(t,oi)}};Object(c.d)(ui);var ci,table=ui;const hi={name:"BTabs",components:(ci={},Object(l.a)(ci,v.name,v),Object(l.a)(ci,zn.name,zn),ci),props:{value:Number,expanded:Boolean,type:String,size:String,position:String,animated:{type:Boolean,default:!0},destroyOnHide:{type:Boolean,default:!1},vertical:Boolean},data:function(){return{activeTab:this.value||0,defaultSlots:[],contentHeight:0,isTransitioning:!1,_isTabs:!0}},computed:{mainClasses:function(){return Object(l.a)({"is-fullwidth":this.expanded,"is-vertical":this.vertical},this.position,this.position&&this.vertical)},navClasses:function(){var t;return[this.type,this.size,(t={},Object(l.a)(t,this.position,this.position&&!this.vertical),Object(l.a)(t,"is-fullwidth",this.expanded),Object(l.a)(t,"is-toggle-rounded is-toggle","is-toggle-rounded"===this.type),t)]},tabItems:function(){return this.defaultSlots.filter((function(t){return t.componentInstance&&t.componentInstance.$data&&t.componentInstance.$data._isTabItem})).map((function(t){return t.componentInstance}))}},watch:{value:function(t){this.changeTab(t)},tabItems:function(){this.activeTab<this.tabItems.length&&(this.tabItems[this.activeTab].isActive=!0)}},methods:{refreshSlots:function(){this.defaultSlots=this.$slots.default||[]},changeTab:function(t){this.activeTab!==t&&void 0!==this.tabItems[t]&&(this.activeTab<this.tabItems.length&&this.tabItems[this.activeTab].deactivate(this.activeTab,t),this.tabItems[t].activate(this.activeTab,t),this.activeTab=t,this.$emit("change",t))},tabClick:function(t){this.activeTab!==t&&(this.$emit("input",t),this.changeTab(t))}},mounted:function(){this.activeTab<this.tabItems.length&&(this.tabItems[this.activeTab].isActive=!0),this.refreshSlots()}};var di=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"b-tabs",class:t.mainClasses},[n("nav",{staticClass:"tabs",class:t.navClasses},[n("ul",t._l(t.tabItems,(function(e,r){return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"tabItem.visible"}],key:r,class:{"is-active":t.activeTab===r,"is-disabled":e.disabled}},[n("a",{on:{click:function(e){t.tabClick(r)}}},[e.$slots.header?[n("b-slot-component",{attrs:{component:e,name:"header",tag:"span"}})]:[e.icon?n("b-icon",{attrs:{icon:e.icon,pack:e.iconPack,size:t.size}}):t._e(),t._v(" "),n("span",[t._v(t._s(e.label))])]],2)])})))]),t._v(" "),n("section",{staticClass:"tab-content",class:{"is-transitioning":t.isTransitioning}},[t._t("default")],2)])},staticRenderFns:[]},void 0,hi,void 0,!1,void 0,void 0,void 0);const fi={name:"BTabItem",props:{label:String,icon:String,iconPack:String,disabled:Boolean,visible:{type:Boolean,default:!0}},data:function(){return{isActive:!1,transitionName:null,_isTabItem:!0}},methods:{activate:function(t,e){this.transitionName=e<t?"slide-next":"slide-prev",this.isActive=!0},deactivate:function(t,e){this.transitionName=e<t?"slide-next":"slide-prev",this.isActive=!1}},created:function(){if(!this.$parent.$data._isTabs)throw this.$destroy(),new Error("You should wrap bTabItem on a bTabs");this.$parent.refreshSlots()},beforeDestroy:function(){this.$parent.refreshSlots()},render:function(t){var e=this;if(!this.$parent.destroyOnHide||this.isActive&&this.visible){var n=t("div",{directives:[{name:"show",value:this.isActive&&this.visible}],class:"tab-item"},this.$slots.default);return this.$parent.animated?t("transition",{props:{name:this.transitionName},on:{"before-enter":function(){e.$parent.isTransitioning=!0},"after-enter":function(){e.$parent.isTransitioning=!1}}},[n]):n}}};var pi=Object(c.a)({},void 0,fi,void 0,void 0,void 0,void 0,void 0),mi={install:function(t){Object(c.c)(t,di),Object(c.c)(t,pi)}};Object(c.d)(mi);var vi=mi;const gi={name:"BTag",props:{attached:Boolean,closable:Boolean,type:String,size:String,rounded:Boolean,disabled:Boolean,ellipsis:Boolean,tabstop:{type:Boolean,default:!0},ariaCloseLabel:String},methods:{close:function(){this.disabled||this.$emit("close")}}};var yi=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.attached&&t.closable?n("div",{staticClass:"tags has-addons"},[n("span",{staticClass:"tag",class:[t.type,t.size,{"is-rounded":t.rounded}]},[n("span",{class:{"has-ellipsis":t.ellipsis}},[t._t("default")],2)]),t._v(" "),n("a",{staticClass:"tag is-delete",class:[t.size,{"is-rounded":t.rounded}],attrs:{role:"button","aria-label":t.ariaCloseLabel,tabindex:!!t.tabstop&&0,disabled:t.disabled},on:{click:function(e){t.close()},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"]))return null;e.preventDefault(),t.close()}}})]):n("span",{staticClass:"tag",class:[t.type,t.size,{"is-rounded":t.rounded}]},[n("span",{class:{"has-ellipsis":t.ellipsis}},[t._t("default")],2),t._v(" "),t.closable?n("a",{staticClass:"delete is-small",attrs:{role:"button","aria-label":t.ariaCloseLabel,disabled:t.disabled,tabindex:!!t.tabstop&&0},on:{click:function(e){t.close()},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"]))return null;e.preventDefault(),t.close()}}}):t._e()])},staticRenderFns:[]},void 0,gi,void 0,!1,void 0,void 0,void 0);const bi={name:"BTaglist",props:{attached:Boolean}};var wi=Object(c.a)({render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"tags",class:{"has-addons":this.attached}},[this._t("default")],2)},staticRenderFns:[]},void 0,bi,void 0,!1,void 0,void 0,void 0),Si={install:function(t){Object(c.c)(t,yi),Object(c.c)(t,wi)}};Object(c.d)(Si);var Ti,_i=Si;const Ci={name:"BTaginput",components:(Ti={},Object(l.a)(Ti,T.name,T),Object(l.a)(Ti,yi.name,yi),Ti),mixins:[h],inheritAttrs:!1,props:{value:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},type:String,rounded:{type:Boolean,default:!1},attached:{type:Boolean,default:!1},maxtags:{type:[Number,String],required:!1},hasCounter:{type:Boolean,default:function(){return o.c.defaultTaginputHasCounter}},field:{type:String,default:"value"},autocomplete:Boolean,nativeAutocomplete:String,openOnFocus:Boolean,disabled:Boolean,ellipsis:Boolean,closable:{type:Boolean,default:!0},confirmKeyCodes:{type:Array,default:function(){return[13,188]}},removeOnKeys:{type:Array,default:function(){return[8]}},allowNew:Boolean,onPasteSeparators:{type:Array,default:function(){return[","]}},beforeAdding:{type:Function,default:function(){return!0}},allowDuplicates:{type:Boolean,default:!1},checkInfiniteScroll:{type:Boolean,default:!1}},data:function(){return{tags:Array.isArray(this.value)?this.value.slice(0):this.value||[],newTag:"",_elementRef:"input",_isTaginput:!0}},computed:{rootClasses:function(){return{"is-expanded":this.expanded}},containerClasses:function(){return{"is-focused":this.isFocused,"is-focusable":this.hasInput}},valueLength:function(){return this.newTag.trim().length},defaultSlotName:function(){return this.hasDefaultSlot?"default":"dontrender"},emptySlotName:function(){return this.hasEmptySlot?"empty":"dontrender"},headerSlotName:function(){return this.hasHeaderSlot?"header":"dontrender"},footerSlotName:function(){return this.hasFooterSlot?"footer":"dontrender"},hasDefaultSlot:function(){return!!this.$scopedSlots.default},hasEmptySlot:function(){return!!this.$slots.empty},hasHeaderSlot:function(){return!!this.$slots.header},hasFooterSlot:function(){return!!this.$slots.footer},hasInput:function(){return null==this.maxtags||this.tagsLength<this.maxtags},tagsLength:function(){return this.tags.length},separatorsAsRegExp:function(){var t=this.onPasteSeparators;return t.length?new RegExp(t.map((function(s){return s?s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):null})).join("|"),"g"):null}},watch:{value:function(t){this.tags=t},hasInput:function(){this.hasInput||this.onBlur()}},methods:{addTag:function(t){var e=t||this.newTag.trim();if(e){if(!this.autocomplete){var n=this.separatorsAsRegExp;if(n&&e.match(n))return void e.split(n).map((function(t){return t.trim()})).filter((function(t){return 0!==t.length})).map(this.addTag)}(!!this.allowDuplicates||-1===this.tags.indexOf(e))&&this.beforeAdding(e)&&(this.tags.push(e),this.$emit("input",this.tags),this.$emit("add",e))}this.newTag=""},getNormalizedTagText:function(t){return"object"===Object(l.c)(t)?Object(r.a)(t,this.field):t},customOnBlur:function(t){this.autocomplete||this.addTag(),this.onBlur(t)},onSelect:function(option){var t=this;option&&(this.addTag(option),this.$nextTick((function(){t.newTag=""})))},removeTag:function(t){var e=this.tags.splice(t,1)[0];return this.$emit("input",this.tags),this.$emit("remove",e),e},removeLastTag:function(){var t=this;this.tagsLength>0&&(this.removeTag(this.tagsLength-1),this.$nextTick((function(){t.isFocused&&t.openOnFocus&&(t.$refs.autocomplete.isActive=!0)})))},keydown:function(t){-1===this.removeOnKeys.indexOf(t.keyCode)||this.newTag.length||this.removeLastTag(),this.autocomplete&&!this.allowNew||this.confirmKeyCodes.indexOf(t.keyCode)>=0&&(t.preventDefault(),this.addTag())},onTyping:function(t){this.$emit("typing",t.trim())},emitInfiniteScroll:function(){this.$emit("infinite-scroll")}}};var Ii=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"taginput control",class:t.rootClasses},[n("div",{staticClass:"taginput-container",class:[t.statusType,t.size,t.containerClasses],attrs:{disabled:t.disabled},on:{click:function(e){t.hasInput&&t.focus(e)}}},[t._l(t.tags,(function(e,r){return n("b-tag",{key:t.getNormalizedTagText(e)+r,attrs:{type:t.type,size:t.size,rounded:t.rounded,attached:t.attached,tabstop:!1,disabled:t.disabled,ellipsis:t.ellipsis,closable:t.closable,title:t.ellipsis&&t.getNormalizedTagText(e)},on:{close:function(e){t.removeTag(r)}}},[t._v("\r\n                "+t._s(t.getNormalizedTagText(e))+"\r\n            ")])})),t._v(" "),t.hasInput?n("b-autocomplete",t._b({ref:"autocomplete",attrs:{data:t.data,field:t.field,icon:t.icon,"icon-pack":t.iconPack,maxlength:t.maxlength,"has-counter":!1,size:t.size,disabled:t.disabled,loading:t.loading,autocomplete:t.nativeAutocomplete,"open-on-focus":t.openOnFocus,"keep-open":t.openOnFocus,"keep-first":!t.allowNew,"use-html5-validation":t.useHtml5Validation,"check-infinite-scroll":t.checkInfiniteScroll},on:{typing:t.onTyping,focus:t.onFocus,blur:t.customOnBlur,select:t.onSelect,"infinite-scroll":t.emitInfiniteScroll},nativeOn:{keydown:function(e){return t.keydown(e)}},scopedSlots:t._u([{key:t.defaultSlotName,fn:function(e){return[t._t("default",null,{option:e.option,index:e.index})]}}]),model:{value:t.newTag,callback:function(e){t.newTag=e},expression:"newTag"}},"b-autocomplete",t.$attrs,!1),[n("template",{slot:t.headerSlotName},[t._t("header")],2),t._v(" "),n("template",{slot:t.emptySlotName},[t._t("empty")],2),t._v(" "),n("template",{slot:t.footerSlotName},[t._t("footer")],2)],2):t._e()],2),t._v(" "),t.hasCounter&&(t.maxtags||t.maxlength)?n("small",{staticClass:"help counter"},[t.maxlength&&t.valueLength>0?[t._v("\r\n                "+t._s(t.valueLength)+" / "+t._s(t.maxlength)+"\r\n            ")]:t.maxtags?[t._v("\r\n                "+t._s(t.tagsLength)+" / "+t._s(t.maxtags)+"\r\n            ")]:t._e()],2):t._e()])},staticRenderFns:[]},void 0,Ci,void 0,!1,void 0,void 0,void 0),Ei={install:function(t){Object(c.c)(t,Ii)}};Object(c.d)(Ei);var ki=Ei,Di={install:function(t){Object(c.c)(t,Mt)}};Object(c.d)(Di);var Ai=Di,Ni=n(50),Oi={install:function(t){Object(c.c)(t,En)}};Object(c.d)(Oi);var xi=Oi;const Pi={name:"BUpload",mixins:[h],inheritAttrs:!1,props:{value:{type:[Object,Function,ie,Array]},multiple:Boolean,disabled:Boolean,accept:String,dragDrop:Boolean,type:{type:String,default:"is-primary"},native:{type:Boolean,default:!1}},data:function(){return{newValue:this.value,dragDropFocus:!1,_elementRef:"input"}},watch:{value:function(t){var e=this.$refs.input.files;this.newValue=t,(!this.newValue||Array.isArray(this.newValue)&&0===this.newValue.length||!e[0]||Array.isArray(this.newValue)&&!this.newValue.some((function(a){return a.name===e[0].name})))&&(this.$refs.input.value=null),!this.isValid&&!this.dragDrop&&this.checkHtml5Validity()}},methods:{onFileChange:function(t){if(!this.disabled&&!this.loading){this.dragDrop&&this.updateDragDropFocus(!1);var e=t.target.files||t.dataTransfer.files;if(0===e.length){if(!this.newValue)return;this.native&&(this.newValue=null)}else if(this.multiple){var n=!1;!this.native&&this.newValue||(this.newValue=[],n=!0);for(var i=0;i<e.length;i++){var r=e[i];this.checkType(r)&&(this.newValue.push(r),n=!0)}if(!n)return}else{if(this.dragDrop&&1!==e.length)return;var o=e[0];if(this.checkType(o))this.newValue=o;else{if(!this.newValue)return;this.newValue=null}}this.$emit("input",this.newValue),!this.dragDrop&&this.checkHtml5Validity()}},updateDragDropFocus:function(t){this.disabled||this.loading||(this.dragDropFocus=t)},checkType:function(t){if(!this.accept)return!0;var e=this.accept.split(",");if(0===e.length)return!0;for(var n=!1,i=0;i<e.length&&!n;i++){var r=e[i].trim();if(r)if("."===r.substring(0,1)){var o=t.name.lastIndexOf(".");(o>=0?t.name.substring(o):"").toLowerCase()===r.toLowerCase()&&(n=!0)}else t.type.match(r)&&(n=!0)}return n}}};var Ri=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"upload control"},[t.dragDrop?n("div",{staticClass:"upload-draggable",class:[t.type,{"is-loading":t.loading,"is-disabled":t.disabled,"is-hovered":t.dragDropFocus}],on:{dragover:function(e){e.preventDefault(),t.updateDragDropFocus(!0)},dragleave:function(e){e.preventDefault(),t.updateDragDropFocus(!1)},dragenter:function(e){e.preventDefault(),t.updateDragDropFocus(!0)},drop:function(e){return e.preventDefault(),t.onFileChange(e)}}},[t._t("default")],2):[t._t("default")],t._v(" "),n("input",t._b({ref:"input",attrs:{type:"file",multiple:t.multiple,accept:t.accept,disabled:t.disabled},on:{change:t.onFileChange}},"input",t.$attrs,!1))],2)},staticRenderFns:[]},void 0,Pi,void 0,!1,void 0,void 0,void 0),Mi={install:function(t){Object(c.c)(t,Ri)}};Object(c.d)(Mi);var Li=Mi,Vi=Object.freeze({Autocomplete:C,Button:D,Carousel:L,Checkbox:$,Clockpicker:gt,Collapse:Q,Datepicker:xt,Datetimepicker:Ft,Dialog:dialog,Dropdown:Qt,Field:Xt,Icon:Zt,Input:input,Loading:ce,Menu:menu,Message:Te,Modal:Ie,Navbar:Xe,Notification:Re,Numberinput:en,Pagination:cn,Progress:progress,Radio:yn,Rate:Tn,Select:Cn,Slider:Mn,Snackbar:qn,Steps:Qn,Switch:ti,Table:table,Tabs:vi,Tag:_i,Taginput:ki,Timepicker:Ai,Toast:Ni.b,Tooltip:xi,Upload:Li}),Bi={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in Object(o.d)(t),Object(o.b)(Object(r.d)(o.c,e,!0)),Vi)t.use(Vi[n]);var l={getOptions:function(){return o.c},setOptions:function(t){Object(o.b)(Object(r.d)(o.c,t,!0))}};Object(c.b)(t,"config",l)}};Object(c.d)(Bi);e.a=Bi},122:function(t,e,n){"use strict";e.a=function(t,e){return e=e||{},new Promise((function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return i[t.toLowerCase()]},has:function(t){return t.toLowerCase()in i}}}};for(var c in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),u.push([e,n]),i[e]=i[e]?i[e]+","+n:n})),n(a())},s.onerror=r,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(c,e.headers[c]);s.send(e.body||null)}))}},124:function(t,e,n){"use strict";var r=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===o}(t)}(t)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function c(t,e){return!1!==e.clone&&e.isMergeableObject(t)?m((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function l(t,source,e){return t.concat(source).map((function(element){return c(element,e)}))}function h(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(symbol){return t.propertyIsEnumerable(symbol)})):[]}(t))}function d(object,t){try{return t in object}catch(t){return!1}}function f(t,source,e){var n={};return e.isMergeableObject(t)&&h(t).forEach((function(r){n[r]=c(t[r],e)})),h(source).forEach((function(r){(function(t,e){return d(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,r)||(d(t,r)&&e.isMergeableObject(source[r])?n[r]=function(t,e){if(!e.customMerge)return m;var n=e.customMerge(t);return"function"==typeof n?n:m}(r,e)(t[r],source[r],e):n[r]=c(source[r],e))})),n}function m(t,source,e){(e=e||{}).arrayMerge=e.arrayMerge||l,e.isMergeableObject=e.isMergeableObject||r,e.cloneUnlessOtherwiseSpecified=c;var n=Array.isArray(source);return n===Array.isArray(t)?n?e.arrayMerge(t,source,e):f(t,source,e):c(source,e)}m.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return m(t,n,e)}),{})};var v=m;t.exports=v},131:function(t,e,n){"use strict";n.r(e),n.d(e,"Inject",(function(){return l})),n.d(e,"InjectReactive",(function(){return h})),n.d(e,"Provide",(function(){return d})),n.d(e,"ProvideReactive",(function(){return f})),n.d(e,"Model",(function(){return y})),n.d(e,"Prop",(function(){return w})),n.d(e,"PropSync",(function(){return S})),n.d(e,"Watch",(function(){return T})),n.d(e,"Emit",(function(){return I})),n.d(e,"Ref",(function(){return E}));var r=n(4);n.d(e,"Vue",(function(){return r.default}));var o=n(10);n.d(e,"Component",(function(){return o.default})),n.d(e,"Mixins",(function(){return o.mixins}));var c="__reactiveInject__";function l(t){return Object(o.createDecorator)((function(e,n){void 0===e.inject&&(e.inject={}),Array.isArray(e.inject)||(e.inject[n]=t||n)}))}function h(t){return Object(o.createDecorator)((function(e,n){if(void 0===e.inject&&(e.inject={}),!Array.isArray(e.inject)){var r=t?t.from||t:n,o=!!t&&t.default||void 0;e.computed||(e.computed={}),e.computed[n]=function(){var t=this[c];return t?t[r]:o},e.inject[c]=c}}))}function d(t){return Object(o.createDecorator)((function(e,n){var r=e.provide;if("function"!=typeof r||!r.managed){var o=e.provide;(r=e.provide=function(){var t=Object.create(("function"==typeof o?o.call(this):o)||null);for(var i in r.managed)t[r.managed[i]]=this[i];return t}).managed={}}r.managed[n]=t||n}))}function f(t){return Object(o.createDecorator)((function(e,n){var r=e.provide;if(Array.isArray(e.inject)||(e.inject=e.inject||{},e.inject[c]={from:c,default:{}}),"function"!=typeof r||!r.managedReactive){var o=e.provide;(r=e.provide=function(){var t=this,e="function"==typeof o?o.call(this):o;(e=Object.create(e||null))[c]=this[c]||{};var n=function(i){e[r.managedReactive[i]]=l[i],Object.defineProperty(e[c],r.managedReactive[i],{enumerable:!0,get:function(){return t[i]}})},l=this;for(var i in r.managedReactive)n(i);return e}).managedReactive={}}r.managedReactive[n]=t||n}))}var m="undefined"!=typeof Reflect&&void 0!==Reflect.getMetadata;function v(t,e,n){m&&(Array.isArray(t)||"function"==typeof t||void 0!==t.type||(t.type=Reflect.getMetadata("design:type",e,n)))}function y(t,e){return void 0===e&&(e={}),function(n,r){v(e,n,r),Object(o.createDecorator)((function(n,r){(n.props||(n.props={}))[r]=e,n.model={prop:r,event:t||r}}))(n,r)}}function w(t){return void 0===t&&(t={}),function(e,n){v(t,e,n),Object(o.createDecorator)((function(e,n){(e.props||(e.props={}))[n]=t}))(e,n)}}function S(t,e){return void 0===e&&(e={}),function(n,r){v(e,n,r),Object(o.createDecorator)((function(n,r){(n.props||(n.props={}))[t]=e,(n.computed||(n.computed={}))[r]={get:function(){return this[t]},set:function(e){this.$emit("update:"+t,e)}}}))(n,r)}}function T(path,t){void 0===t&&(t={});var e=t.deep,n=void 0!==e&&e,r=t.immediate,c=void 0!==r&&r;return Object(o.createDecorator)((function(t,e){"object"!=typeof t.watch&&(t.watch=Object.create(null));var r=t.watch;"object"!=typeof r[path]||Array.isArray(r[path])?void 0===r[path]&&(r[path]=[]):r[path]=[r[path]],r[path].push({handler:e,deep:n,immediate:c})}))}var _=/\B([A-Z])/g,C=function(t){return t.replace(_,"-$1").toLowerCase()};function I(t){return function(e,n,r){n=C(n);var o=r.value;r.value=function(){for(var e=this,r=[],c=0;c<arguments.length;c++)r[c]=arguments[c];var l=function(o){void 0!==o&&r.unshift(o),e.$emit.apply(e,[t||n].concat(r))},h=o.apply(this,r);return k(h)?h.then((function(t){l(t)})):l(h),h}}}function E(t){return Object(o.createDecorator)((function(e,n){e.computed=e.computed||{},e.computed[n]={cache:!1,get:function(){return this.$refs[t||n]}}}))}function k(t){return t instanceof Promise||t&&"function"==typeof t.then}},180:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(38),o=n(117),c=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),l="[DEFAULT]",h=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=l);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new o.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:l,optional:!1},t),n=e.identifier,o=e.optional,c=this.normalizeInstanceIdentifier(n);try{var h=this.getOrInitializeService(c);if(!h){if(o)return null;throw Error("Service "+this.name+" is not available")}return h}catch(t){if(o)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(component){var t,e;if(component.name!==this.name)throw Error("Mismatching Component "+component.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=component,function(component){return"EAGER"===component.instantiationMode}(component))try{this.getOrInitializeService(l)}catch(t){}try{for(var n=r.__values(this.instancesDeferred.entries()),o=n.next();!o.done;o=n.next()){var c=r.__read(o.value,2),h=c[0],d=c[1],f=this.normalizeInstanceIdentifier(h);try{var m=this.getOrInitializeService(f);d.resolve(m)}catch(t){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=l),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===l?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:l:t},t}();var d=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(component){var t=this.getProvider(component.name);if(t.isComponentSet())throw new Error("Component "+component.name+" has already been registered with "+this.name);t.setComponent(component)},t.prototype.addOrOverwriteComponent=function(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new h(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=c,e.ComponentContainer=d,e.Provider=h},181:function(t,e,n){"use strict";n(182)},182:function(t,e,n){"use strict";(function(t){var e=n(6),r=n.n(e);(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,t){a!=Array.prototype&&a!=Object.prototype&&(a[b]=t.value)},o="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this;function c(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function l(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:c(a)}}!function(a,b){if(b){var t=o;a=a.split(".");for(var e=0;e<a.length-1;e++){var r=a[e];r in t||(t[r]={}),t=t[r]}(b=b(e=t[a=a[a.length-1]]))!=e&&null!=b&&n(t,a,{configurable:!0,writable:!0,value:b})}}("Promise",(function(a){function b(g){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{g(t.resolve,t.reject)}catch(e){t.reject(e)}}function t(){this.a=null}function e(g){return g instanceof b?g:new b((function(t){t(g)}))}if(a)return a;t.prototype.b=function(g){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(g)};var n=o.setTimeout;t.prototype.c=function(g){n(g,0)},t.prototype.g=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var t=0;t<g.length;++t){var e=g[t];g[t]=null;try{e()}catch(t){this.f(t)}}}this.a=null},t.prototype.f=function(g){this.c((function(){throw g}))},b.prototype.f=function(){function g(p){return function(u){e||(e=!0,p.call(t,u))}}var t=this,e=!1;return{resolve:g(this.m),reject:g(this.g)}},b.prototype.m=function(g){if(g===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.o(g);else{t:switch(typeof g){case"object":var t=null!=g;break t;case"function":t=!0;break t;default:t=!1}t?this.u(g):this.h(g)}},b.prototype.u=function(g){var t=void 0;try{t=g.then}catch(t){return void this.g(t)}"function"==typeof t?this.v(t,g):this.h(g)},b.prototype.g=function(g){this.i(2,g)},b.prototype.h=function(g){this.i(1,g)},b.prototype.i=function(g,t){if(0!=this.b)throw Error("Cannot settle("+g+", "+t+"): Promise already settled in state"+this.b);this.b=g,this.c=t,this.l()},b.prototype.l=function(){if(null!=this.a){for(var g=0;g<this.a.length;++g)r.b(this.a[g]);this.a=null}};var r=new t;return b.prototype.o=function(g){var t=this.f();g.La(t.resolve,t.reject)},b.prototype.v=function(g,t){var e=this.f();try{g.call(t,e.resolve,e.reject)}catch(t){e.reject(t)}},b.prototype.then=function(g,t){function e(t,e){return"function"==typeof t?function(e){try{p(t(e))}catch(t){u(t)}}:e}var p,u,n=new b((function(t,e){p=t,u=e}));return this.La(e(g,p),e(t,u)),n},b.prototype.catch=function(g){return this.then(void 0,g)},b.prototype.La=function(g,t){function e(){switch(p.b){case 1:g(p.c);break;case 2:t(p.c);break;default:throw Error("Unexpected state: "+p.b)}}var p=this;null==this.a?r.b(e):this.a.push(e)},b.resolve=e,b.reject=function(g){return new b((function(t,e){e(g)}))},b.race=function(g){return new b((function(t,n){for(var p=l(g),u=p.next();!u.done;u=p.next())e(u.value).La(t,n)}))},b.all=function(g){var t=l(g),n=t.next();return n.done?e([]):new b((function(p,u){function r(t){return function(e){o[t]=e,0==--c&&p(o)}}var o=[],c=0;do{o.push(void 0),c++,e(n.value).La(r(o.length-1),u),n=t.next()}while(!n.done)}))},b}));var h=h||{},d=this||self;function f(a){return"string"==typeof a}function m(a){return"boolean"==typeof a}var v=/^[\w+/_-]+[=]{0,2}$/,y=null;function w(){}function S(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var t=Object.prototype.toString.call(a);if("[object Window]"==t)return"object";if("[object Array]"==t||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==t||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&void 0===a.call)return"object";return b}function T(a){return null===a}function _(a){return"array"==S(a)}function C(a){var b=S(a);return"array"==b||"object"==b&&"number"==typeof a.length}function q(a){return"function"==S(a)}function I(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var E="closure_uid_"+(1e9*Math.random()>>>0),k=0;function D(a,b,t){return a.call.apply(a.bind,arguments)}function A(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function N(a,b,t){return(N=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?D:A).apply(null,arguments)}function O(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var x=Date.now||function(){return+new Date};function P(a,b){function t(){}t.prototype=b.prototype,a.qb=b.prototype,a.prototype=new t,a.prototype.constructor=a,a.gd=function(t,e,n){for(var g=Array(arguments.length-2),r=2;r<arguments.length;r++)g[r-2]=arguments[r];return b.prototype[e].apply(t,g)}}function R(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(t){return!1}}function M(a){if(Error.captureStackTrace)Error.captureStackTrace(this,M);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}function L(a,b){for(var t="",e=(a=a.split("%s")).length-1,n=0;n<e;n++)t+=a[n]+(n<b.length?b[n]:"%s");M.call(this,t+a[e])}function V(a,b){throw new L("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))}function B(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function F(a,b){a.f(b),100>a.b&&(a.b++,b.next=a.a,a.a=b)}function j(){this.b=this.a=null}P(M,Error),M.prototype.name="CustomError",P(L,M),L.prototype.name="AssertionError",B.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var U=new B((function(){return new $}),(function(a){a.reset()}));function z(){var a=Zt,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function $(){this.next=this.b=this.a=null}function H(a,b){t:{try{var t=a&&a.ownerDocument,e=t&&(t.defaultView||t.parentWindow);if((e=e||d).Element&&e.Location){var n=e;break t}}catch(t){}n=null}if(n&&void 0!==n[b]&&(!a||!(a instanceof n[b])&&(a instanceof n.Location||a instanceof n.Element))){if(I(a))try{var r=a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}catch(t){r="<object could not be stringified>"}else r=void 0===a?"undefined":null===a?"null":typeof a;V("Argument is not a %s (or a non-Element, non-Location mock); got: %s",b,r)}}j.prototype.add=function(a,b){var t=U.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},$.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},$.prototype.reset=function(){this.next=this.b=this.a=null};var W=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(f(a))return f(b)&&1==b.length?a.indexOf(b,0):-1;for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},K=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n=f(a)?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};var G=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=Array(t),n=f(a)?a.split(""):a,r=0;r<t;r++)r in n&&(e[r]=b.call(void 0,n[r],r,a));return e},Q=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var t=a.length,e=f(a)?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a))return!0;return!1};function Y(a,b){return 0<=W(a,b)}function X(a,b){var t;return(t=0<=(b=W(a,b)))&&Array.prototype.splice.call(a,b,1),t}function J(a,b){!function(a,b){for(var t=f(a)?a.split(""):a,e=a.length-1;0<=e;--e)e in t&&b.call(void 0,t[e],e,a)}(a,(function(t,e){b.call(void 0,t,e,a)&&1==Array.prototype.splice.call(a,e,1).length&&0}))}function Z(a){return Array.prototype.concat.apply([],arguments)}function tt(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}function et(a,b){for(var t in a)b.call(void 0,a[t],t,a)}function nt(a){for(var b in a)return!1;return!0}function it(a){var t,b={};for(t in a)b[t]=a[t];return b}var ot="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function at(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<ot.length;r++)t=ot[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function st(a,b){this.a=a===lt&&b||"",this.b=ct}function ut(a){return a instanceof st&&a.constructor===st&&a.b===ct?a.a:(V("expected object of type Const, got '"+a+"'"),"type_error:Const")}st.prototype.qa=!0,st.prototype.pa=function(){return this.a},st.prototype.toString=function(){return"Const{"+this.a+"}"};var ct={},lt={},ht=new st(lt,"");function ft(){this.a="",this.b=yt}function pt(a){return a instanceof ft&&a.constructor===ft&&a.b===yt?a.a:(V("expected object of type TrustedResourceUrl, got '"+a+"' of type "+S(a)),"type_error:TrustedResourceUrl")}function mt(a,b){var t=ut(a);if(!gt.test(t))throw Error("Invalid TrustedResourceUrl format: "+t);return bt(a=t.replace(vt,(function(e,n){if(!Object.prototype.hasOwnProperty.call(b,n))throw Error('Found marker, "'+n+'", in format string, "'+t+'", but no valid label mapping found in args: '+JSON.stringify(b));return(e=b[n])instanceof st?ut(e):encodeURIComponent(String(e))})))}ft.prototype.qa=!0,ft.prototype.pa=function(){return this.a.toString()},ft.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var vt=/%{(\w+)}/g,gt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,yt={};function bt(a){var b=new ft;return b.a=a,b}var wt=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},St=/&/g,Tt=/</g,_t=/>/g,Ct=/"/g,It=/'/g,Et=/\x00/g,kt=/[\x00&<>"']/;function Dt(a,b){return-1!=a.indexOf(b)}function At(a,b){return a<b?-1:a>b?1:0}function Nt(){this.a="",this.b=Mt}function Ot(a){return a instanceof Nt&&a.constructor===Nt&&a.b===Mt?a.a:(V("expected object of type SafeUrl, got '"+a+"' of type "+S(a)),"type_error:SafeUrl")}Nt.prototype.qa=!0,Nt.prototype.pa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pt(a){return a instanceof Nt?a:(a="object"==typeof a&&a.qa?a.pa():String(a),xt.test(a)||(a="about:invalid#zClosurez"),Lt(a))}var Rt,Mt={};function Lt(a){var b=new Nt;return b.a=a,b}Lt("about:blank");t:{var Vt=d.navigator;if(Vt){var Bt=Vt.userAgent;if(Bt){Rt=Bt;break t}}Rt=""}function Ft(a){return Dt(Rt,a)}function jt(){this.a="",this.b=qt}function Ut(a){return a instanceof jt&&a.constructor===jt&&a.b===qt?a.a:(V("expected object of type SafeHtml, got '"+a+"' of type "+S(a)),"type_error:SafeHtml")}jt.prototype.qa=!0,jt.prototype.pa=function(){return this.a.toString()},jt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function zt(a){var b=new jt;return b.a=a,b}zt("<!DOCTYPE html>");var $t,Ht,Wt=zt("");function Kt(a,b){for(var t=a.split("%s"),e="",n=Array.prototype.slice.call(arguments,1);n.length&&1<t.length;)e+=t.shift()+n.shift();return e+t.join("%s")}function Gt(a){return kt.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(St,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(Tt,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(_t,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(Ct,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(It,"&#39;")),-1!=a.indexOf("\0")&&(a=a.replace(Et,"&#0;"))),a}function Qt(a){d.setTimeout((function(){throw a}),0)}function Yt(){var a=d.MessageChannel;if(void 0===a&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Ft("Presto")&&(a=function(){var t=document.createElement("IFRAME");t.style.display="none",function(a){var b=bt(ut(ht));H(a,"HTMLIFrameElement"),a.src=pt(b).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Ut(Wt)),t.close();var g="callImmediate"+Math.random(),n="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=N((function(t){"*"!=n&&t.origin!=n||t.data!=g||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(g,n)}}}),void 0!==a&&!Ft("Trident")&&!Ft("MSIE")){var b=new a,t={},e=t;return b.port1.onmessage=function(){if(void 0!==t.next){var e=(t=t.next).yb;t.yb=null,e()}},function(t){e.next={yb:t},e=e.next,b.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){d.setTimeout(t,0)}}function Xt(a,b){Ht||function(){if(d.Promise&&d.Promise.resolve){var a=d.Promise.resolve(void 0);Ht=function(){a.then(te)}}else Ht=function(){var b=te;!q(d.setImmediate)||d.Window&&d.Window.prototype&&!Ft("Edge")&&d.Window.prototype.setImmediate==d.setImmediate?($t||($t=Yt()),$t(b)):d.setImmediate(b)}}(),Jt||(Ht(),Jt=!0),Zt.add(a,b)}zt("<br>");var Jt=!1,Zt=new j;function te(){for(var a;a=z();){try{a.a.call(a.b)}catch(t){Qt(t)}F(U,a)}Jt=!1}function ee(a,b){if(this.a=ne,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,a!=w)try{var t=this;a.call(b,(function(e){pe(t,ie,e)}),(function(e){if(!(e instanceof Se))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}pe(t,re,e)}))}catch(t){pe(this,re,t)}}var ne=0,ie=2,re=3;function oe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}oe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ae=new B((function(){return new oe}),(function(a){a.reset()}));function se(a,b,t){var e=ae.get();return e.g=a,e.b=b,e.f=t,e}function ue(a){if(a instanceof ee)return a;var b=new ee(w);return pe(b,ie,a),b}function ce(a){return new ee((function(b,t){t(a)}))}function le(a,b,t){me(a,b,t,null)||Xt(O(b,a))}function he(a){return new ee((function(b){var t=a.length,e=[];if(t)for(var n=function(n,r,p){t--,e[n]=r?{Gb:!0,value:p}:{Gb:!1,reason:p},0==t&&b(e)},r=0;r<a.length;r++)le(a[r],O(n,r,!0),O(n,r,!1));else b(e)}))}function de(a,b){a.b||a.a!=ie&&a.a!=re||ve(a),a.f?a.f.next=b:a.b=b,a.f=b}function fe(a,b,t,e){var n=se(null,null,null);return n.a=new ee((function(r,g){n.g=b?function(t){try{var n=b.call(e,t);r(n)}catch(t){g(t)}}:r,n.b=t?function(n){try{var o=t.call(e,n);void 0===o&&n instanceof Se?g(n):r(o)}catch(t){g(t)}}:g})),n.a.c=a,de(a,n),n.a}function pe(a,b,t){a.a==ne&&(a===t&&(b=re,t=new TypeError("Promise cannot resolve to itself")),a.a=1,me(t,a.Oc,a.Pc,a)||(a.i=t,a.a=b,a.c=null,ve(a),b!=re||t instanceof Se||function(a,b){a.g=!0,Xt((function(){a.g&&we.call(null,b)}))}(a,t)))}function me(a,b,t,e){if(a instanceof ee)return de(a,se(b||w,t||null,e)),!0;if(R(a))return a.then(b,t,e),!0;if(I(a))try{var n=a.then;if(q(n))return function(a,b,t,e,n){function r(t){o||(o=!0,e.call(n,t))}var o=!1;try{b.call(a,(function(e){o||(o=!0,t.call(n,e))}),r)}catch(t){r(t)}}(a,n,b,t,e),!0}catch(n){return t.call(e,n),!0}return!1}function ve(a){a.h||(a.h=!0,Xt(a.Zb,a))}function ge(a){var b=null;return a.b&&(b=a.b,a.b=b.next,b.next=null),a.b||(a.f=null),b}function ye(a,b,t,e){if(t==re&&b.b&&!b.c)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,be(b,t,e);else try{b.c?b.g.call(b.f):be(b,t,e)}catch(t){we.call(null,t)}F(ae,b)}function be(a,b,t){b==ie?a.g.call(a.f,t):a.b&&a.b.call(a.f,t)}ee.prototype.then=function(a,b,t){return fe(this,q(a)?a:null,q(b)?b:null,t)},ee.prototype.$goog_Thenable=!0,(e=ee.prototype).ka=function(a,b){return(a=se(a,a,b)).c=!0,de(this,a),this},e.s=function(a,b){return fe(this,null,a,b)},e.cancel=function(a){this.a==ne&&Xt((function(){!function t(a,b){if(a.a==ne)if(a.c){var e=a.c;if(e.b){for(var n=0,r=null,o=null,g=e.b;g&&(g.c||(n++,g.a==a&&(r=g),!(r&&1<n)));g=g.next)r||(o=g);r&&(e.a==ne&&1==n?t(e,b):(o?((n=o).next==e.f&&(e.f=n),n.next=n.next.next):ge(e),ye(e,r,re,b)))}a.c=null}else pe(a,re,b)}(this,new Se(a))}),this)},e.Oc=function(a){this.a=ne,pe(this,ie,a)},e.Pc=function(a){this.a=ne,pe(this,re,a)},e.Zb=function(){for(var a;a=ge(this);)ye(this,a,this.a,this.i);this.h=!1};var we=Qt;function Se(a){M.call(this,a)}function Te(){0!=_e&&(Ce[this[E]||(this[E]=++k)]=this),this.va=this.va,this.la=this.la}P(Se,M),Se.prototype.name="cancel";var _e=0,Ce={};function Ie(a){if(!a.va&&(a.va=!0,a.za(),0!=_e)){var b=a[E]||(a[E]=++k);if(0!=_e&&a.la&&0<a.la.length)throw Error(a+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ce[b]}}function Ee(a){return Ee[" "](a),a}Te.prototype.va=!1,Te.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},Ee[" "]=w;var ke,a,De=Ft("Opera"),Ae=Ft("Trident")||Ft("MSIE"),Ne=Ft("Edge"),Oe=Ne||Ae,xe=Ft("Gecko")&&!(Dt(Rt.toLowerCase(),"webkit")&&!Ft("Edge"))&&!(Ft("Trident")||Ft("MSIE"))&&!Ft("Edge"),Pe=Dt(Rt.toLowerCase(),"webkit")&&!Ft("Edge");function Re(){var a=d.document;return a?a.documentMode:void 0}t:{var Me="",Le=(a=Rt,xe?/rv:([^\);]+)(\)|;)/.exec(a):Ne?/Edge\/([\d\.]+)/.exec(a):Ae?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Pe?/WebKit\/(\S+)/.exec(a):De?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Le&&(Me=Le?Le[1]:""),Ae){var Ve=Re();if(null!=Ve&&Ve>parseFloat(Me)){ke=String(Ve);break t}}ke=Me}var Be,Fe={};function je(a){return function(a,b){var t=Fe;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=wt(String(ke)).split("."),e=wt(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var g=t[r]||"",o=e[r]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==g[0].length&&0==o[0].length)break;b=At(0==g[1].length?0:parseInt(g[1],10),0==o[1].length?0:parseInt(o[1],10))||At(0==g[2].length,0==o[2].length)||At(g[2],o[2]),g=g[3],o=o[3]}while(0==b)}return 0<=b}))}Be=d.document&&Ae?Re():void 0;var Ue=Object.freeze||function(a){return a},qe=!Ae||9<=Number(Be),ze=Ae&&!je("9"),$e=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{d.addEventListener("test",w,b),d.removeEventListener("test",w,b)}catch(t){}return a}();function He(a,b){this.type=a,this.b=this.target=b,this.Mb=!0}function We(a,b){if(He.call(this,a?a.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.b=b,b=a.relatedTarget){if(xe){t:{try{Ee(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=f(a.pointerType)?a.pointerType:Ke[a.pointerType]||"",this.a=a,a.defaultPrevented&&this.preventDefault()}}He.prototype.preventDefault=function(){this.Mb=!1},P(We,He);var Ke=Ue({2:"touch",3:"pen",4:"mouse"});We.prototype.preventDefault=function(){We.qb.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ze)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}},We.prototype.f=function(){return this.a};var Ge="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function Ye(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.Pa=n,this.key=++Qe,this.ta=this.Ka=!1}function Xe(a){a.ta=!0,a.listener=null,a.proxy=null,a.src=null,a.Pa=null}function Je(a){this.src=a,this.a={},this.b=0}function Ze(a,b){var t=b.type;t in a.a&&X(a.a[t],b)&&(Xe(b),0==a.a[t].length&&(delete a.a[t],a.b--))}function tn(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.ta&&r.listener==b&&r.capture==!!t&&r.Pa==e)return n}return-1}Je.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var g=tn(a,b,e,n);return-1<g?(b=a[g],t||(b.Ka=!1)):((b=new Ye(b,this.src,r,!!e,n)).Ka=t,a.push(b)),b};var en="closure_lm_"+(1e6*Math.random()|0),nn={};function rn(a,b,t,e,n){if(e&&e.once)an(a,b,t,e,n);else if(_(b))for(var r=0;r<b.length;r++)rn(a,b[r],t,e,n);else t=pn(t),a&&a[Ge]?vn(a,b,t,I(e)?!!e.capture:!!e,n):on(a,b,t,!1,e,n)}function on(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var g=I(n)?!!n.capture:!!n,o=dn(a);if(o||(a[en]=o=new Je(a)),!(t=o.add(b,t,e,g,r)).proxy){if(e=function(){var a=dd,b=qe?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)$e||(n=g),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(cn(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}0}}function an(a,b,t,e,n){if(_(b))for(var r=0;r<b.length;r++)an(a,b[r],t,e,n);else t=pn(t),a&&a[Ge]?gn(a,b,t,I(e)?!!e.capture:!!e,n):on(a,b,t,!0,e,n)}function sn(a,b,t,e,n){if(_(b))for(var r=0;r<b.length;r++)sn(a,b[r],t,e,n);else e=I(e)?!!e.capture:!!e,t=pn(t),a&&a[Ge]?(a=a.u,(b=String(b).toString())in a.a&&(-1<(t=tn(r=a.a[b],t,e,n))&&(Xe(r[t]),Array.prototype.splice.call(r,t,1),0==r.length&&(delete a.a[b],a.b--)))):a&&(a=dn(a))&&(b=a.a[b.toString()],a=-1,b&&(a=tn(b,t,e,n)),(t=-1<a?b[a]:null)&&un(t))}function un(a){if("number"!=typeof a&&a&&!a.ta){var b=a.src;if(b&&b[Ge])Ze(b.u,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(cn(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=dn(b))?(Ze(t,a),0==t.b&&(t.src=null,b[en]=null)):Xe(a)}}}function cn(a){return a in nn?nn[a]:nn[a]="on"+a}function ln(a,b,t,e){var n=!0;if((a=dn(a))&&(b=a.a[b.toString()]))for(b=b.concat(),a=0;a<b.length;a++){var r=b[a];r&&r.capture==t&&!r.ta&&(r=hn(r,e),n=n&&!1!==r)}return n}function hn(a,b){var t=a.listener,e=a.Pa||a.src;return a.Ka&&un(a),t.call(e,b)}function dd(a,b){if(a.ta)return!0;if(!qe){if(!b)t:{b=["window","event"];for(var t=d,e=0;e<b.length;e++)if(null==(t=t[b[e]])){b=null;break t}b=t}if(b=new We(e=b,this),t=!0,!(0>e.keyCode||null!=e.returnValue)){t:{var n=!1;if(0==e.keyCode)try{e.keyCode=-1;break t}catch(t){n=!0}(n||null==e.returnValue)&&(e.returnValue=!0)}for(e=[],n=b.b;n;n=n.parentNode)e.push(n);for(a=a.type,n=e.length-1;0<=n;n--){b.b=e[n];var r=ln(e[n],a,!0,b);t=t&&r}for(n=0;n<e.length;n++)b.b=e[n],r=ln(e[n],a,!1,b),t=t&&r}return t}return hn(a,new We(b,this))}function dn(a){return(a=a[en])instanceof Je?a:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function pn(a){return q(a)?a:(a[fn]||(a[fn]=function(b){return a.handleEvent(b)}),a[fn])}function mn(){Te.call(this),this.u=new Je(this),this.Sb=this,this.Xa=null}function vn(a,b,t,e,n){a.u.add(String(b),t,!1,e,n)}function gn(a,b,t,e,n){a.u.add(String(b),t,!0,e,n)}function yn(a,b,t,e){if(!(b=a.u.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var g=b[r];if(g&&!g.ta&&g.capture==t){var o=g.listener,c=g.Pa||g.src;g.Ka&&Ze(a.u,g),n=!1!==o.call(c,e)&&n}}return n&&0!=e.Mb}function bn(a,b,t){if(q(a))t&&(a=N(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=N(a.handleEvent,a)}return 2147483647<Number(b)?-1:d.setTimeout(a,b||0)}function wn(a){var b=null;return new ee((function(t,e){-1==(b=bn((function(){t(void 0)}),a))&&e(Error("Failed to schedule timer."))})).s((function(t){throw d.clearTimeout(b),t}))}function Sn(a){if(a.U&&"function"==typeof a.U)return a.U();if(f(a))return a.split("");if(C(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}function Tn(a){if(a.X&&"function"==typeof a.X)return a.X();if(!a.U||"function"!=typeof a.U){if(C(a)||f(a)){var b=[];a=a.length;for(var t=0;t<a;t++)b.push(t);return b}for(var e in b=[],t=0,a)b[t++]=e;return b}}function _n(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof _n)for(t=a.X(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function Cn(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];td(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)td(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function td(a,b){return Object.prototype.hasOwnProperty.call(a,b)}P(mn,Te),mn.prototype[Ge]=!0,mn.prototype.addEventListener=function(a,b,t,e){rn(this,a,b,t,e)},mn.prototype.removeEventListener=function(a,b,t,e){sn(this,a,b,t,e)},mn.prototype.dispatchEvent=function(a){var b,t=this.Xa;if(t)for(b=[];t;t=t.Xa)b.push(t);t=this.Sb;var e=a.type||a;if(f(a))a=new He(a,t);else if(a instanceof He)a.target=a.target||t;else{var n=a;at(a=new He(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var g=a.b=b[r];n=yn(g,e,!0,a)&&n}if(n=yn(g=a.b=t,e,!0,a)&&n,n=yn(g,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=yn(g=a.b=b[r],e,!1,a)&&n;return n},mn.prototype.za=function(){if(mn.qb.za.call(this),this.u){var t,a=this.u;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)Xe(e[n]);delete a.a[t],a.b--}}this.Xa=null},(e=_n.prototype).U=function(){Cn(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},e.X=function(){return Cn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(a,b){return td(this.b,a)?this.b[a]:b},e.set=function(a,b){td(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},e.forEach=function(a,b){for(var t=this.X(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var In=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function En(a,b){var t;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,a instanceof En?(this.h=void 0!==b?b:a.h,kn(this,a.f),this.i=a.i,this.b=a.b,Dn(this,a.l),this.c=a.c,An(this,Gn(a.a)),this.g=a.g):a&&(t=String(a).match(In))?(this.h=!!b,kn(this,t[1]||"",!0),this.i=Rn(t[2]||""),this.b=Rn(t[3]||"",!0),Dn(this,t[4]),this.c=Rn(t[5]||"",!0),An(this,t[6]||"",!0),this.g=Rn(t[7]||"")):(this.h=!!b,this.a=new qn(null,this.h))}function kn(a,b,t){a.f=t?Rn(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function Dn(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.l=b}else a.l=null}function An(a,b,t){b instanceof qn?(a.a=b,function(a,b){b&&!a.f&&(zn(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Hn(this,e),Kn(this,n,t))}),a)),a.f=b}(a.a,a.h)):(t||(b=Mn(b,jn)),a.a=new qn(b,a.h))}function Nn(a,b,t){a.a.set(b,t)}function On(a,b){return a.a.get(b)}function xn(a){return a instanceof En?new En(a):new En(a,void 0)}function Pn(a,b){var t=new En(null,void 0);return kn(t,"https"),a&&(t.b=a),b&&(t.c=b),t}function Rn(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Mn(a,b,t){return f(a)?(a=encodeURI(a).replace(b,Ln),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ln(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}En.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Mn(b,Vn,!0),":");var t=this.b;return(t||"file"==b)&&(a.push("//"),(b=this.i)&&a.push(Mn(b,Vn,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.l)&&a.push(":",String(t))),(t=this.c)&&(this.b&&"/"!=t.charAt(0)&&a.push("/"),a.push(Mn(t,"/"==t.charAt(0)?Fn:Bn,!0))),(t=this.a.toString())&&a.push("?",t),(t=this.g)&&a.push("#",Mn(t,Un)),a.join("")},En.prototype.resolve=function(a){var b=new En(this),t=!!a.f;t?kn(b,a.f):t=!!a.i,t?b.i=a.i:t=!!a.b,t?b.b=a.b:t=null!=a.l;var e=a.c;if(t)Dn(b,a.l);else if(t=!!a.c){if("/"!=e.charAt(0))if(this.b&&!this.c)e="/"+e;else{var n=b.c.lastIndexOf("/");-1!=n&&(e=b.c.substr(0,n+1)+e)}if(".."==(n=e)||"."==n)e="";else if(Dt(n,"./")||Dt(n,"/.")){e=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],g=0;g<n.length;){var o=n[g++];"."==o?e&&g==n.length&&r.push(""):".."==o?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),e&&g==n.length&&r.push("")):(r.push(o),e=!0)}e=r.join("/")}else e=n}return t?b.c=e:t=""!==a.a.toString(),t?An(b,Gn(a.a)):t=!!a.g,t&&(b.g=a.g),b};var Vn=/[#\/\?@]/g,Bn=/[#\?:]/g,Fn=/[#\?]/g,jn=/[#\?@]/g,Un=/#/g;function qn(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function zn(a){a.a||(a.a=new _n,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function $n(a){var b=Tn(a);if(void 0===b)throw Error("Keys are undefined");var t=new qn(null,void 0);a=Sn(a);for(var e=0;e<b.length;e++){var n=b[e],r=a[e];_(r)?Kn(t,n,r):t.add(n,r)}return t}function Hn(a,b){zn(a),b=Qn(a,b),td(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,td((a=a.a).b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Cn(a)))}function Wn(a,b){return zn(a),b=Qn(a,b),td(a.a.b,b)}function Kn(a,b,t){Hn(a,b),0<t.length&&(a.c=null,a.a.set(Qn(a,b),tt(t)),a.b+=t.length)}function Gn(a){var b=new qn;return b.c=a.c,a.a&&(b.a=new _n(a.a),b.b=a.b),b}function Qn(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}(e=qn.prototype).add=function(a,b){zn(this),this.c=null,a=Qn(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(a,b){zn(this),this.a.forEach((function(t,e){K(t,(function(t){a.call(b,t,e,this)}),this)}),this)},e.X=function(){zn(this);for(var a=this.a.U(),b=this.a.X(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},e.U=function(a){zn(this);var b=[];if(f(a))Wn(this,a)&&(b=Z(b,this.a.get(Qn(this,a))));else{a=this.a.U();for(var t=0;t<a.length;t++)b=Z(b,a[t])}return b},e.set=function(a,b){return zn(this),this.c=null,Wn(this,a=Qn(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},e.get=function(a,b){return a&&0<(a=this.U(a)).length?String(a[0]):b},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.X(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.U(e);for(var r=0;r<e.length;r++){var g=n;""!==e[r]&&(g+="="+encodeURIComponent(String(e[r]))),a.push(g)}}return this.c=a.join("&")};var Yn=!Ae||9<=Number(Be);function Xn(a){var b=document;return f(a)?b.getElementById(a):a}function Jn(a,b){et(b,(function(t,e){t&&"object"==typeof t&&t.qa&&(t=t.pa()),"style"==e?a.style.cssText=t:"class"==e?a.className=t:"for"==e?a.htmlFor=t:Zn.hasOwnProperty(e)?a.setAttribute(Zn[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?a.setAttribute(e,t):a[e]=t}))}var Zn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ti(a,b,t){var e=arguments,n=document,r=String(e[0]),g=e[1];if(!Yn&&g&&(g.name||g.type)){if(r=["<",r],g.name&&r.push(' name="',Gt(g.name),'"'),g.type){r.push(' type="',Gt(g.type),'"');var o={};at(o,g),delete o.type,g=o}r.push(">"),r=r.join("")}return r=n.createElement(r),g&&(f(g)?r.className=g:_(g)?r.className=g.join(" "):Jn(r,g)),2<e.length&&function(a,b,t){function e(g){g&&b.appendChild(f(g)?a.createTextNode(g):g)}for(var n=2;n<t.length;n++){var r=t[n];!C(r)||I(r)&&0<r.nodeType?e(r):K(ei(r)?tt(r):r,e)}}(n,r,e),r}function ei(a){if(a&&"number"==typeof a.length){if(I(a))return"function"==typeof a.item||"string"==typeof a.item;if(q(a))return"function"==typeof a.item}return!1}function ni(a){var b=[];return function t(a,b,e){if(null==b)e.push("null");else{if("object"==typeof b){if(_(b)){var n=b;b=n.length,e.push("[");for(var r="",o=0;o<b;o++)e.push(r),t(a,n[o],e),r=",";return void e.push("]")}if(!(b instanceof String||b instanceof Number||b instanceof Boolean)){for(n in e.push("{"),r="",b)Object.prototype.hasOwnProperty.call(b,n)&&("function"!=typeof(o=b[n])&&(e.push(r),ai(n,e),e.push(":"),t(a,o,e),r=","));return void e.push("}")}b=b.valueOf()}switch(typeof b){case"string":ai(b,e);break;case"number":e.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case"boolean":e.push(String(b));break;case"function":e.push("null");break;default:throw Error("Unknown type: "+typeof b)}}}(new ii,a,b),b.join("")}function ii(){}var ri={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},oi=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ai(a,b){b.push('"',a.replace(oi,(function(t){var e=ri[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ri[t]=e),e})),'"')}function si(){var a=ki();return Ae&&!!Be&&11==Be||/Edge\/\d+/.test(a)}function ui(){return d.window&&d.window.location.href||self&&self.location&&self.location.href||""}function ci(a,b){b=b||d.window;var t="about:blank";a&&(t=Ot(Pt(a)).toString()),b.location.href=t}function hi(a){return!!((a=(a||ki()).toLowerCase()).match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/))}function di(a){a=a||d.window;try{a.close()}catch(t){}}function fi(a,b,t){var e=Math.floor(1e9*Math.random()).toString();b=b||500,t=t||600;var n=(window.screen.availHeight-t)/2,r=(window.screen.availWidth-b)/2;for(g in b={width:b,height:t,top:0<n?n:0,left:0<r?r:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},t=ki().toLowerCase(),e&&(b.target=e,Dt(t,"crios/")&&(b.target="_blank")),Ci(ki())==Ti&&(a=a||"http://localhost",b.scrollbars=!0),t=a||"",(a=b)||(a={}),e=window,b=t instanceof Nt?t:Pt(void 0!==t.href?t.href:String(t)),t=a.target||t.target,n=[],a)switch(g){case"width":case"height":case"top":case"left":n.push(g+"="+a[g]);break;case"target":case"noopener":case"noreferrer":break;default:n.push(g+"="+(a[g]?1:0))}var g=n.join(",");if((Ft("iPhone")&&!Ft("iPod")&&!Ft("iPad")||Ft("iPad")||Ft("iPod"))&&e.navigator&&e.navigator.standalone&&t&&"_self"!=t?(H(g=e.document.createElement("A"),"HTMLAnchorElement"),b instanceof Nt||b instanceof Nt||(b="object"==typeof b&&b.qa?b.pa():String(b),xt.test(b)||(b="about:invalid#zClosurez"),b=Lt(b)),g.href=Ot(b),g.setAttribute("target",t),a.noreferrer&&g.setAttribute("rel","noreferrer"),(a=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,e,1),g.dispatchEvent(a),g={}):a.noreferrer?(g=e.open("",t,g),a=Ot(b).toString(),g&&(Oe&&Dt(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),g.opener=null,a=zt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Gt(a)+'">'),g.document.write(Ut(a)),g.document.close())):(g=e.open(Ot(b).toString(),t,g))&&a.noopener&&(g.opener=null),g)try{g.focus()}catch(t){}return g}var pi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mi=/^[^@]+@[^@]+$/;function vi(){var a=null;return new ee((function(b){"complete"==d.document.readyState?b():(a=function(){b()},an(window,"load",a))})).s((function(b){throw sn(window,"load",a),b}))}function gi(a){return a=a||ki(),!("file:"!==xi()&&"ionic:"!==xi()||!a.toLowerCase().match(/iphone|ipad|ipod|android/))}function yi(){var a=d.window;try{return!(!a||a==a.top)}catch(t){return!1}}function bi(){return void 0!==d.WorkerGlobalScope&&"function"==typeof d.importScripts}function wi(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":bi()?"Worker":"Browser"}function Si(){var a=wi();return"ReactNative"===a||"Node"===a}var Ti="Firefox",_i="Chrome";function Ci(a){var b=a.toLowerCase();return Dt(b,"opera/")||Dt(b,"opr/")||Dt(b,"opios/")?"Opera":Dt(b,"iemobile")?"IEMobile":Dt(b,"msie")||Dt(b,"trident/")?"IE":Dt(b,"edge/")?"Edge":Dt(b,"firefox/")?Ti:Dt(b,"silk/")?"Silk":Dt(b,"blackberry")?"Blackberry":Dt(b,"webos")?"Webos":!Dt(b,"safari/")||Dt(b,"chrome/")||Dt(b,"crios/")||Dt(b,"android")?!Dt(b,"chrome/")&&!Dt(b,"crios/")||Dt(b,"edge/")?Dt(b,"android")?"Android":(a=a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==a.length?a[1]:"Other":_i:"Safari"}var Ii={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function Ei(a,b){b=b||[];var t,e=[],n={};for(t in Ii)n[Ii[t]]=!0;for(t=0;t<b.length;t++)void 0!==n[b[t]]&&(delete n[b[t]],e.push(b[t]));return e.sort(),(b=e).length||(b=["FirebaseCore-web"]),"Browser"===(e=wi())?e=Ci(n=ki()):"Worker"===e&&(e=Ci(n=ki())+"-"+e),e+"/JsCore/"+a+"/"+b.join(",")}function ki(){return d.navigator&&d.navigator.userAgent||""}function Di(a,b){a=a.split("."),b=b||d;for(var t=0;t<a.length&&"object"==typeof b&&null!=b;t++)b=b[a[t]];return t!=a.length&&(b=void 0),b}function Ai(){try{var a=d.localStorage,b=Vi();if(a)return a.setItem(b,"1"),a.removeItem(b),!si()||!!d.indexedDB}catch(t){return bi()&&!!d.indexedDB}return!1}function Ni(){return(Oi()||"chrome-extension:"===xi()||gi())&&!Si()&&Ai()&&!bi()}function Oi(){return"http:"===xi()||"https:"===xi()}function xi(){return d.location&&d.location.protocol||null}function Pi(a){return!hi(a=a||ki())&&Ci(a)!=Ti}function Ri(a){return void 0===a?null:ni(a)}function Mi(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&null!==a[t]&&void 0!==a[t]&&(b[t]=a[t]);return b}function Li(a){if(null!==a)return JSON.parse(a)}function Vi(a){return a||Math.floor(1e9*Math.random()).toString()}function Bi(a){return"Safari"!=Ci(a=a||ki())&&!a.toLowerCase().match(/iphone|ipad|ipod/)}function Fi(){var a=d.___jsl;if(a&&a.H)for(var b in a.H)if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=a.H[b].L.concat(),a.CP)for(var t=0;t<a.CP.length;t++)a.CP[t]=null}function ji(a,b){if(a>b)throw Error("Short delay should be less than long delay!");this.a=a,this.c=b,a=ki(),b=wi(),this.b=hi(a)||"ReactNative"===b}function Ui(){var a=d.document;return!a||void 0===a.visibilityState||"visible"==a.visibilityState}function qi(a){try{var b=new Date(parseInt(a,10));if(!isNaN(b.getTime())&&!/[^0-9]/.test(a))return b.toUTCString()}catch(t){}return null}function zi(){return!(!Di("fireauth.oauthhelper",d)&&!Di("fireauth.iframe",d))}ji.prototype.get=function(){var a=d.navigator;return!a||"boolean"!=typeof a.onLine||!Oi()&&"chrome-extension:"!==xi()&&void 0===a.connection||a.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var $i,Hi={};function Wi(a){Hi[a]||(Hi[a]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(a))}try{var Ki={};Object.defineProperty(Ki,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ki,"abcd",{configurable:!0,enumerable:!0,value:2}),$i=2==Ki.abcd}catch(a){$i=!1}function Gi(a,b,t){$i?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,value:t}):a[b]=t}function Qi(a,b){if(b)for(var t in b)b.hasOwnProperty(t)&&Gi(a,t,b[t])}function Yi(a){var b={};return Qi(b,a),b}function Xi(a){var b=a;if("object"==typeof a&&null!=a)for(var t in b="length"in a?[]:{},a)Gi(b,t,Xi(a[t]));return b}function Ji(a){var b={},t=a[er],e=a[nr];if(!(a=a[ir])||a!=Zi&&!t)throw Error("Invalid provider user info!");b[or]=e||null,b[rr]=t||null,Gi(this,sr,a),Gi(this,ar,Xi(b))}var Zi="EMAIL_SIGNIN",er="email",nr="newEmail",ir="requestType",rr="email",or="fromEmail",ar="data",sr="operation";function ur(a,b){this.code=lr+a,this.message=b||dr[a]||""}function cr(a){var b=a&&a.code;return b?new ur(b.substring(lr.length),a.message):null}P(ur,Error),ur.prototype.A=function(){return{code:this.code,message:this.message}},ur.prototype.toJSON=function(){return this.A()};var lr="auth/",dr={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function fr(a){var b=On(a=xn(a),pr)||null,t=On(a,mr)||null,e=On(a,yr)||null;if(e=e&&Sr[e]||null,!b||!t||!e)throw new ur("argument-error",pr+", "+mr+"and "+yr+" are required in a valid action code URL.");Qi(this,{apiKey:b,operation:e,code:t,continueUrl:On(a,vr)||null,languageCode:On(a,gr)||null,tenantId:On(a,wr)||null})}var pr="apiKey",mr="oobCode",vr="continueUrl",gr="languageCode",yr="mode",wr="tenantId",Sr={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Zi,verifyEmail:"VERIFY_EMAIL"};function Tr(a){try{return new fr(a)}catch(t){return null}}function _r(a){var b=a[Dr];if(void 0===b)throw new ur("missing-continue-uri");if("string"!=typeof b||"string"==typeof b&&!b.length)throw new ur("invalid-continue-uri");this.h=b,this.b=this.a=null,this.g=!1;var t=a[Cr];if(t&&"object"==typeof t){b=t[Or];var e=t[Ar];if(t=t[Nr],"string"==typeof b&&b.length){if(this.a=b,void 0!==e&&"boolean"!=typeof e)throw new ur("argument-error",Ar+" property must be a boolean when specified.");if(this.g=!!e,void 0!==t&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new ur("argument-error",Nr+" property must be a non empty string when specified.");this.b=t||null}else{if(void 0!==b)throw new ur("argument-error",Or+" property must be a non empty string when specified.");if(void 0!==e||void 0!==t)throw new ur("missing-android-pkg-name")}}else if(void 0!==t)throw new ur("argument-error",Cr+" property must be a non null object when specified.");if(this.f=null,(b=a[kr])&&"object"==typeof b){if("string"==typeof(b=b[xr])&&b.length)this.f=b;else if(void 0!==b)throw new ur("argument-error",xr+" property must be a non empty string when specified.")}else if(void 0!==b)throw new ur("argument-error",kr+" property must be a non null object when specified.");if(void 0!==(b=a[Er])&&"boolean"!=typeof b)throw new ur("argument-error",Er+" property must be a boolean when specified.");if(this.c=!!b,void 0!==(a=a[Ir])&&("string"!=typeof a||"string"==typeof a&&!a.length))throw new ur("argument-error",Ir+" property must be a non empty string when specified.");this.i=a||null}var Cr="android",Ir="dynamicLinkDomain",Er="handleCodeInApp",kr="iOS",Dr="url",Ar="installApp",Nr="minimumVersion",Or="packageName",xr="bundleId";function Pr(a){var b={};for(var t in b.continueUrl=a.h,b.canHandleCodeInApp=a.c,(b.androidPackageName=a.a)&&(b.androidMinimumVersion=a.b,b.androidInstallApp=a.g),b.iOSBundleId=a.f,b.dynamicLinkDomain=a.i,b)null===b[t]&&delete b[t];return b}var Rr=null,Mr=null;function Lr(a){var b="";return function(a,b){function t(t){for(;e<a.length;){var p=a.charAt(e++),u=Mr[p];if(null!=u)return u;if(!/^[\s\xa0]*$/.test(p))throw Error("Unknown base64 encoding at char: "+p)}return t}!function(){if(!Rr){Rr={},Mr={};for(var a=0;65>a;a++)Rr[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),Mr[Rr[a]]=a,62<=a&&(Mr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=a)}}();for(var e=0;;){var n=t(-1),r=t(0),g=t(64),o=t(64);if(64===o&&-1===n)break;b(n<<2|r>>4),64!=g&&(b(r<<4&240|g>>2),64!=o&&b(g<<6&192|o))}}(a,(function(t){b+=String.fromCharCode(t)})),b}function Vr(a){this.f=a.sub,x(),this.a=a.provider_id||a.firebase&&a.firebase.sign_in_provider||null,this.c=a.firebase&&a.firebase.tenant||null,this.b=!!a.is_anonymous||"anonymous"==this.a}function Br(a){return(a=Fr(a))&&a.sub&&a.iss&&a.aud&&a.exp?new Vr(a):null}function Fr(a){if(!a)return null;if(3!=(a=a.split(".")).length)return null;for(var b=(4-(a=a[1]).length%4)%4,t=0;t<b;t++)a+=".";try{return JSON.parse(Lr(a))}catch(t){}return null}Vr.prototype.R=function(){return this.c},Vr.prototype.g=function(){return this.b};var jr,Ur={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function qr(a){for(var b in Ur)if(Ur[b].id===a)return{firebaseEndpoint:(a=Ur[b]).cb,secureTokenEndpoint:a.ib};return null}jr=qr("__EID__")?"__EID__":void 0;var zr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),$r=["client_id","response_type","scope","redirect_uri","state"],Hr={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:$r},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:$r},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:$r},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:zr},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function Wr(a){for(var b in Hr)if(Hr[b].Fa==a)return Hr[b];return null}function Kr(a){var b={};b["facebook.com"]=Jr,b["google.com"]=to,b["github.com"]=Zr,b["twitter.com"]=eo;var t=a&&a[Qr];try{if(t)return b[t]?new b[t](a):new Xr(a);if(void 0!==a[Gr])return new Yr(a)}catch(t){}return null}var Gr="idToken",Qr="providerId";function Yr(a){var b=a[Qr];if(!b&&a[Gr]){var t=Br(a[Gr]);t&&t.a&&(b=t.a)}if(!b)throw Error("Invalid additional user info!");"anonymous"!=b&&"custom"!=b||(b=null),t=!1,void 0!==a.isNewUser?t=!!a.isNewUser:"identitytoolkit#SignupNewUserResponse"===a.kind&&(t=!0),Gi(this,"providerId",b),Gi(this,"isNewUser",t)}function Xr(a){Yr.call(this,a),Gi(this,"profile",Xi((a=Li(a.rawUserInfo||"{}"))||{}))}function Jr(a){if(Xr.call(this,a),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Zr(a){if(Xr.call(this,a),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Gi(this,"username",this.profile&&this.profile.login||null)}function to(a){if(Xr.call(this,a),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(a){if(Xr.call(this,a),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Gi(this,"username",a.screenName||null)}function no(a){var b=xn(a),t=On(b,"link"),e=On(xn(t),"link");return b=On(b,"deep_link_id"),On(xn(b),"link")||b||e||t||a}function io(){}function ro(a,b){return a.then((function(t){if(t[Ha]){var e=Br(t[Ha]);if(!e||b!=e.f)throw new ur("user-mismatch");return t}throw new ur("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==lr+"user-not-found"?new ur("user-mismatch"):t}))}function oo(a,b){if(!b)throw new ur("internal-error","failed to construct a credential");this.a=b,Gi(this,"providerId",a),Gi(this,"signInMethod",a)}function ao(a){return{pendingToken:a.a,requestUri:"http://localhost"}}function so(a){if(a&&a.providerId&&a.signInMethod&&0==a.providerId.indexOf("saml.")&&a.pendingToken)try{return new oo(a.providerId,a.pendingToken)}catch(t){}return null}function uo(a,b,t){if(this.a=null,b.idToken||b.accessToken)b.idToken&&Gi(this,"idToken",b.idToken),b.accessToken&&Gi(this,"accessToken",b.accessToken),b.nonce&&!b.pendingToken&&Gi(this,"nonce",b.nonce),b.pendingToken&&(this.a=b.pendingToken);else{if(!b.oauthToken||!b.oauthTokenSecret)throw new ur("internal-error","failed to construct a credential");Gi(this,"accessToken",b.oauthToken),Gi(this,"secret",b.oauthTokenSecret)}Gi(this,"providerId",a),Gi(this,"signInMethod",t)}function co(a){var b={};return a.idToken&&(b.id_token=a.idToken),a.accessToken&&(b.access_token=a.accessToken),a.secret&&(b.oauth_token_secret=a.secret),b.providerId=a.providerId,a.nonce&&!a.a&&(b.nonce=a.nonce),b={postBody:$n(b).toString(),requestUri:"http://localhost"},a.a&&(delete b.postBody,b.pendingToken=a.a),b}function lo(a){if(a&&a.providerId&&a.signInMethod){var b={idToken:a.oauthIdToken,accessToken:a.oauthTokenSecret?null:a.oauthAccessToken,oauthTokenSecret:a.oauthTokenSecret,oauthToken:a.oauthTokenSecret&&a.oauthAccessToken,nonce:a.nonce,pendingToken:a.pendingToken};try{return new uo(a.providerId,b,a.signInMethod)}catch(t){}}return null}function ho(a,b){this.Fc=b||[],Qi(this,{providerId:a,isOAuthProvider:!0}),this.zb={},this.eb=(Wr(a)||{}).Ea||null,this.bb=null}function fo(a){if("string"!=typeof a||0!=a.indexOf("saml."))throw new ur("argument-error",'SAML provider IDs must be prefixed with "saml."');ho.call(this,a,[])}function po(a){ho.call(this,a,$r),this.a=[]}function mo(){po.call(this,"facebook.com")}function vo(a){if(!a)throw new ur("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return I(a)&&(b=a.accessToken),(new mo).credential({accessToken:b})}function go(){po.call(this,"github.com")}function yo(a){if(!a)throw new ur("argument-error","credential failed: expected 1 argument (the OAuth access token).");var b=a;return I(a)&&(b=a.accessToken),(new go).credential({accessToken:b})}function bo(){po.call(this,"google.com"),this.ya("profile")}function wo(a,b){var t=a;return I(a)&&(t=a.idToken,b=a.accessToken),(new bo).credential({idToken:t,accessToken:b})}function So(){ho.call(this,"twitter.com",zr)}function To(a,b){var t=a;if(I(t)||(t={oauthToken:a,oauthTokenSecret:b}),!t.oauthToken||!t.oauthTokenSecret)throw new ur("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new uo("twitter.com",t,"twitter.com")}function _o(a,b,t){this.a=a,this.c=b,Gi(this,"providerId","password"),Gi(this,"signInMethod",t===Io.EMAIL_LINK_SIGN_IN_METHOD?Io.EMAIL_LINK_SIGN_IN_METHOD:Io.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Co(a){return a&&a.email&&a.password?new _o(a.email,a.password,a.signInMethod):null}function Io(){Qi(this,{providerId:"password",isOAuthProvider:!1})}function Eo(a,b){if(!(b=ko(b)))throw new ur("argument-error","Invalid email link!");return new _o(a,b.code,Io.EMAIL_LINK_SIGN_IN_METHOD)}function ko(a){return(a=Tr(a=no(a)))&&a.operation===Zi?a:null}function Do(a){if(!(a.Va&&a.Ua||a.Ha&&a.ba))throw new ur("internal-error");this.a=a,Gi(this,"providerId","phone"),Gi(this,"signInMethod","phone")}function Ao(a){if(a&&"phone"===a.providerId&&(a.verificationId&&a.verificationCode||a.temporaryProof&&a.phoneNumber)){var b={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(t){a[t]&&(b[t]=a[t])})),new Do(b)}return null}function No(a){return a.a.Ha&&a.a.ba?{temporaryProof:a.a.Ha,phoneNumber:a.a.ba}:{sessionInfo:a.a.Va,code:a.a.Ua}}function Oo(a){try{this.a=a||r.a.auth()}catch(t){throw new ur("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Qi(this,{providerId:"phone",isOAuthProvider:!1})}function xo(a,b){if(!a)throw new ur("missing-verification-id");if(!b)throw new ur("missing-verification-code");return new Do({Va:a,Ua:b})}function Po(a){if(a.temporaryProof&&a.phoneNumber)return new Do({Ha:a.temporaryProof,ba:a.phoneNumber});var b=a&&a.providerId;if(!b||"password"===b)return null;var t=a&&a.oauthAccessToken,e=a&&a.oauthTokenSecret,n=a&&a.nonce,r=a&&a.oauthIdToken,g=a&&a.pendingToken;try{switch(b){case"google.com":return wo(r,t);case"facebook.com":return vo(t);case"github.com":return yo(t);case"twitter.com":return To(t,e);default:return t||e||r||g?g?0==b.indexOf("saml.")?new oo(b,g):new uo(b,{pendingToken:g,idToken:a.oauthIdToken,accessToken:a.oauthAccessToken},b):new po(b).credential({idToken:r,accessToken:t,rawNonce:n}):null}}catch(t){return null}}function Ro(a){if(!a.isOAuthProvider)throw new ur("invalid-oauth-provider")}function Mo(a,b,t,e,n,r,g){if(this.c=a,this.b=b||null,this.g=t||null,this.f=e||null,this.i=r||null,this.h=g||null,this.a=n||null,!this.g&&!this.a)throw new ur("invalid-auth-event");if(this.g&&this.a)throw new ur("invalid-auth-event");if(this.g&&!this.f)throw new ur("invalid-auth-event")}function Lo(a){return(a=a||{}).type?new Mo(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&cr(a.error),a.postBody,a.tenantId):null}function Vo(){this.b=null,this.a=[]}P(Xr,Yr),P(Jr,Xr),P(Zr,Xr),P(to,Xr),P(eo,Xr),oo.prototype.na=function(a){return cs(a,ao(this))},oo.prototype.b=function(a,b){var t=ao(this);return t.idToken=b,ls(a,t)},oo.prototype.f=function(a,b){return ro(hs(a,ao(this)),b)},oo.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},uo.prototype.na=function(a){return cs(a,co(this))},uo.prototype.b=function(a,b){var t=co(this);return t.idToken=b,ls(a,t)},uo.prototype.f=function(a,b){return ro(hs(a,co(this)),b)},uo.prototype.A=function(){var a={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(a.oauthIdToken=this.idToken),this.accessToken&&(a.oauthAccessToken=this.accessToken),this.secret&&(a.oauthTokenSecret=this.secret),this.nonce&&(a.nonce=this.nonce),this.a&&(a.pendingToken=this.a),a},ho.prototype.Ga=function(a){return this.zb=it(a),this},P(fo,ho),P(po,ho),po.prototype.ya=function(a){return Y(this.a,a)||this.a.push(a),this},po.prototype.Hb=function(){return tt(this.a)},po.prototype.credential=function(a,b){var t;if(!(t=I(a)?{idToken:a.idToken||null,accessToken:a.accessToken||null,nonce:a.rawNonce||null}:{idToken:a||null,accessToken:b||null}).idToken&&!t.accessToken)throw new ur("argument-error","credential failed: must provide the ID token and/or the access token.");return new uo(this.providerId,t,this.providerId)},P(mo,po),Gi(mo,"PROVIDER_ID","facebook.com"),Gi(mo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),P(go,po),Gi(go,"PROVIDER_ID","github.com"),Gi(go,"GITHUB_SIGN_IN_METHOD","github.com"),P(bo,po),Gi(bo,"PROVIDER_ID","google.com"),Gi(bo,"GOOGLE_SIGN_IN_METHOD","google.com"),P(So,ho),Gi(So,"PROVIDER_ID","twitter.com"),Gi(So,"TWITTER_SIGN_IN_METHOD","twitter.com"),_o.prototype.na=function(a){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?js(a,bs,{email:this.a,oobCode:this.c}):js(a,Ls,{email:this.a,password:this.c})},_o.prototype.b=function(a,b){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?js(a,ws,{idToken:b,email:this.a,oobCode:this.c}):js(a,Ns,{idToken:b,email:this.a,password:this.c})},_o.prototype.f=function(a,b){return ro(this.na(a),b)},_o.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Qi(Io,{PROVIDER_ID:"password"}),Qi(Io,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Qi(Io,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Do.prototype.na=function(a){return a.Wa(No(this))},Do.prototype.b=function(a,b){var t=No(this);return t.idToken=b,js(a,Bs,t)},Do.prototype.f=function(a,b){var t=No(this);return t.operation="REAUTH",ro(a=js(a,Fs,t),b)},Do.prototype.A=function(){var a={providerId:"phone"};return this.a.Va&&(a.verificationId=this.a.Va),this.a.Ua&&(a.verificationCode=this.a.Ua),this.a.Ha&&(a.temporaryProof=this.a.Ha),this.a.ba&&(a.phoneNumber=this.a.ba),a},Oo.prototype.Wa=function(a,b){var t=this.a.b;return ue(b.verify()).then((function(e){if(!f(e))throw new ur("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(b.type){case"recaptcha":return function(a,b){return js(a,Ds,b)}(t,{phoneNumber:a,recaptchaToken:e}).then((function(t){return"function"==typeof b.reset&&b.reset(),t}),(function(t){throw"function"==typeof b.reset&&b.reset(),t}));default:throw new ur("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Qi(Oo,{PROVIDER_ID:"phone"}),Qi(Oo,{PHONE_SIGN_IN_METHOD:"phone"}),Mo.prototype.getUid=function(){var a=[];return a.push(this.c),this.b&&a.push(this.b),this.f&&a.push(this.f),this.h&&a.push(this.h),a.join("-")},Mo.prototype.R=function(){return this.h},Mo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Bo,Fo=null;function jo(a){var b="unauthorized-domain",t=void 0,e=xn(a);a=e.b,"chrome-extension"==(e=e.f)?t=Kt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):"http"==e||"https"==e?t=Kt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):b="operation-not-supported-in-this-environment",ur.call(this,b,t)}function Uo(a,b,t){ur.call(this,a,t),(a=b||{}).Ab&&Gi(this,"email",a.Ab),a.ba&&Gi(this,"phoneNumber",a.ba),a.credential&&Gi(this,"credential",a.credential),a.Qb&&Gi(this,"tenantId",a.Qb)}function qo(a){if(a.code){var b=a.code||"";0==b.indexOf(lr)&&(b=b.substring(lr.length));var t={credential:Po(a),Qb:a.tenantId};if(a.email)t.Ab=a.email;else if(a.phoneNumber)t.ba=a.phoneNumber;else if(!t.credential)return new ur(b,a.message||void 0);return new Uo(b,t,a.message)}return null}function zo(){}function $o(a){return a.c||(a.c=a.b())}function Ho(){}function Wo(a){if(!a.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t=0;t<b.length;t++){var e=b[t];try{return new ActiveXObject(e),a.f=e}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return a.f}function Ko(){}function Go(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=N(this.fc,this),this.a.onerror=N(this.Ib,this),this.a.onprogress=N(this.gc,this),this.a.ontimeout=N(this.kc,this)}function Qo(a,b){a.readyState=b,a.onreadystatechange&&a.onreadystatechange()}function Yo(a,b,t){this.reset(a,b,t,void 0,void 0)}P(jo,ur),P(Uo,ur),Uo.prototype.A=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email),this.phoneNumber&&(a.phoneNumber=this.phoneNumber),this.tenantId&&(a.tenantId=this.tenantId);var b=this.credential&&this.credential.A();return b&&at(a,b),a},Uo.prototype.toJSON=function(){return this.A()},zo.prototype.c=null,P(Ho,zo),Ho.prototype.a=function(){var a=Wo(this);return a?new ActiveXObject(a):new XMLHttpRequest},Ho.prototype.b=function(){var a={};return Wo(this)&&(a[0]=!0,a[1]=!0),a},Bo=new Ho,P(Ko,zo),Ko.prototype.a=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if("undefined"!=typeof XDomainRequest)return new Go;throw Error("Unsupported browser")},Ko.prototype.b=function(){return{}},(e=Go.prototype).open=function(a,b,t){if(null!=t&&!t)throw Error("Only async requests are supported.");this.a.open(a,b)},e.send=function(a){if(a){if("string"!=typeof a)throw Error("Only string data is supported");this.a.send(a)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(a){return"content-type"==a.toLowerCase()?this.a.contentType:""},e.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Qo(this,4)},e.Ib=function(){this.status=500,this.response=this.responseText="",Qo(this,4)},e.kc=function(){this.Ib()},e.gc=function(){this.status=200,Qo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Yo.prototype.a=null;function Xo(a){this.f=a,this.b=this.c=this.a=null}function Jo(a,b){this.name=a,this.value=b}Yo.prototype.reset=function(a,b,t,e,n){"number"==typeof n||0,e||x(),delete this.a},Jo.prototype.toString=function(){return this.name};var Zo=new Jo("SEVERE",1e3),ta=new Jo("WARNING",900),th=new Jo("CONFIG",700),ea=new Jo("FINE",500);Xo.prototype.log=function(a,b,t){if(a.value>=function t(a){return a.c?a.c:a.a?t(a.a):(V("Root logger has no level set."),null)}(this).value)for(q(b)&&(b=b()),a=new Yo(a,String(b),this.f),t&&(a.a=t),t=this;t;)t=t.a};var na={},ia=null;function ra(a){var b;if(ia||(ia=new Xo(""),na[""]=ia,ia.c=th),!(b=na[a])){b=new Xo(a);var t=a.lastIndexOf("."),e=a.substr(t+1);(t=ra(a.substr(0,t))).b||(t.b={}),t.b[e]=b,b.a=t,na[a]=b}return b}function oa(a,b){a&&a.log(ea,b,void 0)}function aa(a){this.f=a}function sa(a){mn.call(this),this.o=a,this.readyState=ua,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ra("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}P(aa,zo),aa.prototype.a=function(){return new sa(this.f)},aa.prototype.b=function(a){return function(){return a}}({}),P(sa,mn);var ua=0;function ca(a){a.c.read().then(a.ec.bind(a)).catch(a.Oa.bind(a))}function la(a,b){b&&a.f&&(a.status=a.f.status,a.statusText=a.f.statusText),a.readyState=4,a.f=null,a.c=null,a.l=null,ha(a)}function ha(a){a.onreadystatechange&&a.onreadystatechange.call(a)}function da(a){mn.call(this),this.headers=new _n,this.B=a||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=fa,this.v=this.P=!1}(e=sa.prototype).open=function(a,b){if(this.readyState!=ua)throw this.abort(),Error("Error reopening a connection");this.m=a,this.g=b,this.readyState=1,ha(this)},e.send=function(a){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var b={headers:this.i,method:this.m,credentials:void 0,cache:void 0};a&&(b.body=a),this.o.fetch(new Request(this.g,b)).then(this.jc.bind(this),this.Oa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,la(this,!1)),this.readyState=ua},e.jc=function(a){this.a&&(this.f=a,this.b||(this.b=a.headers,this.readyState=2,ha(this)),this.a&&(this.readyState=3,ha(this),this.a&&("arraybuffer"===this.responseType?a.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==d.ReadableStream&&"body"in a?(this.response=this.responseText="",this.c=a.body.getReader(),this.l=new TextDecoder,ca(this)):a.text().then(this.ic.bind(this),this.Oa.bind(this)))))},e.ec=function(a){if(this.a){var b=this.l.decode(a.value?a.value:new Uint8Array(0),{stream:!a.done});b&&(this.response=this.responseText+=b),a.done?la(this,!0):ha(this),3==this.readyState&&ca(this)}},e.ic=function(a){this.a&&(this.response=this.responseText=a,la(this,!0))},e.hc=function(a){this.a&&(this.response=a,la(this,!0))},e.Oa=function(a){var b=this.h;b&&b.log(ta,"Failed to fetch url "+this.g,a instanceof Error?a:Error(a)),this.a&&la(this,!0)},e.setRequestHeader=function(a,b){this.i.append(a,b)},e.getResponseHeader=function(a){return this.b?this.b.get(a.toLowerCase())||"":((a=this.h)&&a.log(ta,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var a=this.h;return a&&a.log(ta,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}a=[];for(var b=this.b.entries(),t=b.next();!t.done;)t=t.value,a.push(t[0]+": "+t[1]),t=b.next();return a.join("\r\n")},P(da,mn);var fa="";da.prototype.b=ra("goog.net.XhrIo");var pa=/^https?$/i,ma=["POST","PUT"];function va(a,b,t,e,n){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.l+"; newUri="+b);t=t?t.toUpperCase():"GET",a.l=b,a.h="",a.O=t,a.I=!1,a.c=!0,a.a=a.B?a.B.a():Bo.a(),a.w=a.B?$o(a.B):$o(Bo),a.a.onreadystatechange=N(a.Lb,a);try{oa(a.b,Ia(a,"Opening Xhr")),a.J=!0,a.a.open(t,String(b),!0),a.J=!1}catch(t){return oa(a.b,Ia(a,"Error opening Xhr: "+t.message)),void ya(a,t)}b=e||"";var r=new _n(a.headers);n&&function(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(C(a)||f(a))K(a,b,void 0);else for(var t=Tn(a),e=Sn(a),n=e.length,r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}(n,(function(g,t){r.set(t,g)})),n=function(a){t:{for(var b=ga,t=a.length,e=f(a)?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:f(a)?a.charAt(b):a[b]}(r.X()),e=d.FormData&&b instanceof d.FormData,!Y(ma,t)||n||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(g,t){this.a.setRequestHeader(t,g)}),a),a.m&&(a.a.responseType=a.m),"withCredentials"in a.a&&a.a.withCredentials!==a.P&&(a.a.withCredentials=a.P);try{Ta(a),0<a.g&&(a.v=function(a){return Ae&&je(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}(a.a),oa(a.b,Ia(a,"Will abort after "+a.g+"ms if incomplete, xhr2 "+a.v)),a.v?(a.a.timeout=a.g,a.a.ontimeout=N(a.Ia,a)):a.o=bn(a.Ia,a.g,a)),oa(a.b,Ia(a,"Sending request")),a.i=!0,a.a.send(b),a.i=!1}catch(t){oa(a.b,Ia(a,"Send error: "+t.message)),ya(a,t)}}function ga(a){return"content-type"==a.toLowerCase()}function ya(a,b){a.c=!1,a.a&&(a.f=!0,a.a.abort(),a.f=!1),a.h=b,ba(a),Sa(a)}function ba(a){a.I||(a.I=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function wa(a){if(a.c&&void 0!==h)if(a.w[1]&&4==_a(a)&&2==Ca(a))oa(a.b,Ia(a,"Local request error detected and ignored"));else if(a.i&&4==_a(a))bn(a.Lb,0,a);else if(a.dispatchEvent("readystatechange"),4==_a(a)){oa(a.b,Ia(a,"Request complete")),a.c=!1;try{var t,b=Ca(a);t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.l).match(In)[1]||null;if(!r&&d.self&&d.self.location){var g=d.self.location.protocol;r=g.substr(0,g.length-1)}n=!pa.test(r?r.toLowerCase():"")}t=n}if(t)a.dispatchEvent("complete"),a.dispatchEvent("success");else{try{var o=2<_a(a)?a.a.statusText:""}catch(t){oa(a.b,"Can not get status: "+t.message),o=""}a.h=o+" ["+Ca(a)+"]",ba(a)}}finally{Sa(a)}}}function Sa(a,b){if(a.a){Ta(a);var t=a.a,e=a.w[0]?w:null;a.a=null,a.w=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){(a=a.b)&&a.log(Zo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Ta(a){a.a&&a.v&&(a.a.ontimeout=null),a.o&&(d.clearTimeout(a.o),a.o=null)}function _a(a){return a.a?a.a.readyState:0}function Ca(a){try{return 2<_a(a)?a.a.status:-1}catch(t){return-1}}function Ia(a,b){return b+" ["+a.O+" "+a.l+" "+Ca(a)+"]"}function Ea(a){var b=Va;this.g=[],this.v=b,this.o=a||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function ka(a,b,t){a.a=!0,a.c=t,a.f=!b,Oa(a)}function Da(a){if(a.a){if(!a.u)throw new xa(a);a.u=!1}}function Aa(a,b,t,e){a.g.push([b,t,e]),a.a&&Oa(a)}function Na(a){return Q(a.g,(function(b){return q(b[1])}))}function Oa(a){if(a.h&&a.a&&Na(a)){var b=a.h,t=Ma[b];t&&(d.clearTimeout(t.a),delete Ma[b]),a.h=0}a.b&&(a.b.l--,delete a.b),b=a.c;for(var e=t=!1;a.g.length&&!a.i;){var n=a.g.shift(),r=n[0],g=n[1];if(n=n[2],r=a.f?g:r)try{var o=r.call(n||a.o,b);void 0!==o&&(a.f=a.f&&(o==b||o instanceof Error),a.c=b=o),(R(b)||"function"==typeof d.Promise&&b instanceof d.Promise)&&(e=!0,a.i=!0)}catch(e){b=e,a.f=!0,Na(a)||(t=!0)}}a.c=b,e&&(o=N(a.m,a,!0),e=N(a.m,a,!1),b instanceof Ea?(Aa(b,o,e),b.w=!0):b.then(o,e)),t&&(b=new Ra(b),Ma[b.a]=b,a.h=b.a)}function xa(){M.call(this)}function Pa(){M.call(this)}function Ra(a){this.a=d.setTimeout(N(this.c,this),0),this.b=a}(e=da.prototype).Ia=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",oa(this.b,Ia(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(oa(this.b,Ia(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Sa(this))},e.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Sa(this,!0)),da.qb.za.call(this)},e.Lb=function(){this.va||(this.J||this.i||this.f?wa(this):this.yc())},e.yc=function(){wa(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case fa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var a=this.b;return a&&a.log(Zo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return oa(this.b,"Can not get response: "+t.message),null}},Ea.prototype.cancel=function(a){if(this.a)this.c instanceof Ea&&this.c.cancel();else{if(this.b){var b=this.b;delete this.b,a?b.cancel(a):(b.l--,0>=b.l&&b.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(a=new Pa(this),Da(this),ka(this,!1,a))}},Ea.prototype.m=function(a,b){this.i=!1,ka(this,a,b)},Ea.prototype.then=function(a,b,t){var e,n,r=new ee((function(g,t){e=g,n=t}));return Aa(this,e,(function(g){g instanceof Pa?r.cancel():n(g)})),r.then(a,b,t)},Ea.prototype.$goog_Thenable=!0,P(xa,M),xa.prototype.message="Deferred has already fired",xa.prototype.name="AlreadyCalledError",P(Pa,M),Pa.prototype.message="Deferred was canceled",Pa.prototype.name="CanceledError",Ra.prototype.c=function(){throw delete Ma[this.a],this.b};var Ma={};function La(a){var b={},t=b.document||document,e=pt(a).toString(),n=document.createElement("SCRIPT"),r={Nb:n,Ia:void 0},g=new Ea(r),o=null,c=null!=b.timeout?b.timeout:5e3;return 0<c&&(o=window.setTimeout((function(){Ba(n,!0);var p=new Ua(ja,"Timeout reached for loading script "+e);Da(g),ka(g,!1,p)}),c),r.Ia=o),n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(Ba(n,b.hd||!1,o),Da(g),ka(g,!0,null))},n.onerror=function(){Ba(n,!0,o);var p=new Ua(Fa,"Error while loading script "+e);Da(g),ka(g,!1,p)},at(r=b.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Jn(n,r),function(a,b){H(a,"HTMLScriptElement"),a.src=pt(b),null===y&&(y=(b=(b=d.document).querySelector&&b.querySelector("script[nonce]"))&&(b=b.nonce||b.getAttribute("nonce"))&&v.test(b)?b:""),(b=y)&&a.setAttribute("nonce",b)}(n,a),function(a){var b;return(b=(a||document).getElementsByTagName("HEAD"))&&0!=b.length?b[0]:a.documentElement}(t).appendChild(n),g}function Va(){if(this&&this.Nb){var a=this.Nb;a&&"SCRIPT"==a.tagName&&Ba(a,!0,this.Ia)}}function Ba(a,b,t){null!=t&&d.clearTimeout(t),a.onload=w,a.onerror=w,a.onreadystatechange=w,b&&window.setTimeout((function(){a&&a.parentNode&&a.parentNode.removeChild(a)}),0)}var Fa=0,ja=1;function Ua(a,b){var t="Jsloader error (code #"+a+")";b&&(t+=": "+b),M.call(this,t),this.code=a}function qa(a){this.f=a}function za(a,b,t){if(this.c=a,a=b||{},this.l=a.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=a.secureTokenTimeout||Wa,this.g=it(a.secureTokenHeaders||Ka),this.h=a.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=a.firebaseTimeout||Ga,this.a=it(a.firebaseHeaders||Qa),t&&(this.a["X-Client-Version"]=t,this.g["X-Client-Version"]=t),t="Node"==wi(),!(t=d.XMLHttpRequest||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!bi())throw new ur("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,bi()?this.f=new aa(self):Si()?this.f=new qa(t):this.f=new Ko,this.b=null}P(Ua,M),P(qa,zo),qa.prototype.a=function(){return new this.f},qa.prototype.b=function(){return{}};var $a,Ha="idToken",Wa=new ji(3e4,6e4),Ka={"Content-Type":"application/x-www-form-urlencoded"},Ga=new ji(3e4,6e4),Qa={"Content-Type":"application/json"};function Ya(a,b){b?a.a["X-Firebase-Locale"]=b:delete a.a["X-Firebase-Locale"]}function Xa(a,b){b?(a.a["X-Client-Version"]=b,a.g["X-Client-Version"]=b):(delete a.a["X-Client-Version"],delete a.g["X-Client-Version"])}function Ja(a,b,t,e,n,r,g){(function(){var a=ki();return!((a=Ci(a)!=_i?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&30>a)&&(!Ae||!Be||9<Be)})()||bi()?a=N(a.o,a):($a||($a=new ee((function(t,e){!function(a,b){if(((window.gapi||{}).client||{}).request)a();else{d[ts]=function(){((window.gapi||{}).client||{}).request?a():b(Error("CORS_UNSUPPORTED"))},function(a,b){Aa(a,null,b,void 0)}(La(mt(Za,{onload:ts})),(function(){b(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),a=N(a.m,a)),a(b,t,e,n,r,g)}za.prototype.R=function(){return this.b},za.prototype.o=function(a,b,t,e,n,r){if(bi()&&(void 0===d.fetch||void 0===d.Headers||void 0===d.Request))throw new ur("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var g=new da(this.f);if(r){g.g=Math.max(0,r);var o=setTimeout((function(){g.dispatchEvent("timeout")}),r)}vn(g,"complete",(function(){o&&clearTimeout(o);var t=null;try{t=JSON.parse(function(a){try{return a.a?a.a.responseText:""}catch(t){return oa(a.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(e){t=null}b&&b(t)})),gn(g,"ready",(function(){o&&clearTimeout(o),Ie(this)})),gn(g,"timeout",(function(){o&&clearTimeout(o),Ie(this),b&&b(null)})),va(g,a,t,e,n)};var Za=new st(lt,"https://apis.google.com/js/client.js?onload=%{onload}"),ts="__fcb"+Math.floor(1e6*Math.random()).toString();function es(a){if(!f(a=a.email)||!mi.test(a))throw new ur("invalid-email")}function ns(a){"email"in a&&es(a)}function is(a){if(!a[Ha])throw new ur("internal-error")}function rs(a){if(a.phoneNumber||a.temporaryProof){if(!a.phoneNumber||!a.temporaryProof)throw new ur("internal-error")}else{if(!a.sessionInfo)throw new ur("missing-verification-id");if(!a.code)throw new ur("missing-verification-code")}}za.prototype.m=function(a,b,t,e,n){var r=this;$a.then((function(){window.gapi.client.setApiKey(r.c);var g=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:a,method:t,body:e,headers:n,authType:"none",callback:function(t){window.gapi.auth.setToken(g),b&&b(t)}})})).s((function(g){b&&b({error:{message:g&&g.message||"CORS_UNSUPPORTED"}})}))},za.prototype.ob=function(){return js(this,Os,{})},za.prototype.rb=function(a,b){return js(this,As,{idToken:a,email:b})},za.prototype.sb=function(a,b){return js(this,Ns,{idToken:a,password:b})};var os={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function as(a){if(!a.requestUri||!a.sessionId&&!a.postBody&&!a.pendingToken)throw new ur("internal-error")}function ss(a,b){return b.oauthIdToken&&b.providerId&&0==b.providerId.indexOf("oidc.")&&!b.pendingToken&&(a.sessionId?b.nonce=a.sessionId:a.postBody&&(Wn(a=new qn(a.postBody),"nonce")&&(b.nonce=a.get("nonce")))),b}function us(a){var b=null;if(a.needConfirmation?(a.code="account-exists-with-different-credential",b=qo(a)):"FEDERATED_USER_ID_ALREADY_LINKED"==a.errorMessage?(a.code="credential-already-in-use",b=qo(a)):"EMAIL_EXISTS"==a.errorMessage?(a.code="email-already-in-use",b=qo(a)):a.errorMessage&&(b=Us(a.errorMessage)),b)throw b;if(!a[Ha])throw new ur("internal-error")}function cs(a,b){return b.returnIdpCredential=!0,js(a,xs,b)}function ls(a,b){return b.returnIdpCredential=!0,js(a,Rs,b)}function hs(a,b){return b.returnIdpCredential=!0,b.autoCreate=!1,js(a,Ps,b)}function ds(a){if(!a.oobCode)throw new ur("invalid-action-code")}(e=za.prototype).tb=function(a,b){var t={idToken:a},e=[];return et(os,(function(n,r){var g=b[r];null===g?e.push(n):r in b&&(t[r]=g)})),e.length&&(t.deleteAttribute=e),js(this,As,t)},e.kb=function(a,b){return at(a={requestType:"PASSWORD_RESET",email:a},b),js(this,Cs,a)},e.lb=function(a,b){return at(a={requestType:"EMAIL_SIGNIN",email:a},b),js(this,Ts,a)},e.jb=function(a,b){return at(a={requestType:"VERIFY_EMAIL",idToken:a},b),js(this,_s,a)},e.Wa=function(a){return js(this,Vs,a)},e.ab=function(a,b){return js(this,ks,{oobCode:a,newPassword:b})},e.Ma=function(a){return js(this,ps,{oobCode:a})},e.Ya=function(a){return js(this,fs,{oobCode:a})};var fs={endpoint:"setAccountInfo",D:ds,fa:"email",F:!0},ps={endpoint:"resetPassword",D:ds,K:function(a){var b=a.requestType;if(!b||!a.email&&"EMAIL_SIGNIN"!=b)throw new ur("internal-error")},F:!0},ms={endpoint:"signupNewUser",D:function(a){if(es(a),!a.password)throw new ur("weak-password")},K:is,T:!0,F:!0},vs={endpoint:"createAuthUri",F:!0},gs={endpoint:"deleteAccount",V:["idToken"]},ys={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(a){if(!_(a.deleteProvider))throw new ur("internal-error")}},bs={endpoint:"emailLinkSignin",V:["email","oobCode"],D:es,K:is,T:!0,F:!0},ws={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:es,K:is,T:!0},Ss={endpoint:"getAccountInfo"},Ts={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(a){if("EMAIL_SIGNIN"!=a.requestType)throw new ur("internal-error");es(a)},fa:"email",F:!0},_s={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(a){if("VERIFY_EMAIL"!=a.requestType)throw new ur("internal-error")},fa:"email",F:!0},Cs={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(a){if("PASSWORD_RESET"!=a.requestType)throw new ur("internal-error");es(a)},fa:"email",F:!0},Is={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},Es={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(a){if(!a.recaptchaSiteKey)throw new ur("internal-error")}},ks={endpoint:"resetPassword",D:ds,fa:"email",F:!0},Ds={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},As={endpoint:"setAccountInfo",V:["idToken"],D:ns,T:!0},Ns={endpoint:"setAccountInfo",V:["idToken"],D:function(a){if(ns(a),!a.password)throw new ur("weak-password")},K:is,T:!0},Os={endpoint:"signupNewUser",K:is,T:!0,F:!0},xs={endpoint:"verifyAssertion",D:as,Ra:ss,K:us,T:!0,F:!0},Ps={endpoint:"verifyAssertion",D:as,Ra:ss,K:function(a){if(a.errorMessage&&"USER_NOT_FOUND"==a.errorMessage)throw new ur("user-not-found");if(a.errorMessage)throw Us(a.errorMessage);if(!a[Ha])throw new ur("internal-error")},T:!0,F:!0},Rs={endpoint:"verifyAssertion",D:function(a){if(as(a),!a.idToken)throw new ur("internal-error")},Ra:ss,K:us,T:!0},Ms={endpoint:"verifyCustomToken",D:function(a){if(!a.token)throw new ur("invalid-custom-token")},K:is,T:!0,F:!0},Ls={endpoint:"verifyPassword",D:function(a){if(es(a),!a.password)throw new ur("wrong-password")},K:is,T:!0,F:!0},Vs={endpoint:"verifyPhoneNumber",D:rs,K:is,F:!0},Bs={endpoint:"verifyPhoneNumber",D:function(a){if(!a.idToken)throw new ur("internal-error");rs(a)},K:function(a){if(a.temporaryProof)throw a.code="credential-already-in-use",qo(a);is(a)}},Fs={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:rs,K:is,F:!0};function js(a,b,t){if(!function(a,b){if(!b||!b.length)return!0;if(!a)return!1;for(var t=0;t<b.length;t++){var e=a[b[t]];if(null==e||""===e)return!1}return!0}(t,b.V))return ce(new ur("internal-error"));var e,n=b.Kb||"POST";return ue(t).then(b.D).then((function(){return b.T&&(t.returnSecureToken=!0),b.F&&a.b&&void 0===t.tenantId&&(t.tenantId=a.b),function(a,b,t,e,n,r){var g=xn(a.h+b);Nn(g,"key",a.c),r&&Nn(g,"cb",x().toString());var o="GET"==t;if(o)for(var c in e)e.hasOwnProperty(c)&&Nn(g,c,e[c]);return new ee((function(p,u){Ja(a,g.toString(),(function(t){t?t.error?u(qs(t,n||{})):p(t):u(new ur("network-request-failed"))}),t,o?void 0:ni(Mi(e)),a.a,a.i.get())}))}(a,b.endpoint,n,t,b.Yb,b.wb||!1)})).then((function(n){return e=n,b.Ra?b.Ra(t,e):e})).then(b.K).then((function(){if(!b.fa)return e;if(!(b.fa in e))throw new ur("internal-error");return e[b.fa]}))}function Us(a){return qs({error:{errors:[{message:a}],code:400,message:a}})}function qs(a,b){var t=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||"",e={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(t=e[t]?new ur(e[t]):null)return t;for(var n in t=a.error&&a.error.message||"",at(e={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},b||{}),b=(b=t.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<b.length?b[1]:void 0,e)if(0===t.indexOf(n))return new ur(e[n],b);return!b&&a&&(b=Ri(a)),new ur("internal-error",b)}function zs(a){this.b=a,this.a=null,this.gb=function(a){return(Ks||(Ks=new ee((function(a,b){function t(){Fi(),Di("gapi.load")("gapi.iframes",{callback:a,ontimeout:function(){Fi(),b(Error("Network Error"))},timeout:Hs.get()})}if(Di("gapi.iframes.Iframe"))a();else if(Di("gapi.load"))t();else{var e="__iframefcb"+Math.floor(1e6*Math.random()).toString();d[e]=function(){Di("gapi.load")?t():b(Error("Network Error"))},ue(La(e=mt($s,{onload:e}))).s((function(){b(Error("Network Error"))}))}})).s((function(a){throw Ks=null,a})))).then((function(){return new ee((function(b,t){Di("gapi.iframes.getContext")().open({where:document.body,url:a.b,messageHandlersFilter:Di("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(e){function n(){clearTimeout(r),b()}a.a=e,a.a.restyle({setHideOnLeave:!1});var r=setTimeout((function(){t(Error("Network Error"))}),Ws.get());e.ping(n).then(n,(function(){t(Error("Network Error"))}))}))}))}))}(this)}var $s=new st(lt,"https://apis.google.com/js/api.js?onload=%{onload}"),Hs=new ji(3e4,6e4),Ws=new ji(5e3,15e3),Ks=null;function Gs(a,b,t){this.i=a,this.g=b,this.h=t,this.f=null,this.a=Pn(this.i,"/__/auth/iframe"),Nn(this.a,"apiKey",this.g),Nn(this.a,"appName",this.h),this.b=null,this.c=[]}function Qs(a,b,t,e,n){this.o=a,this.m=b,this.c=t,this.u=e,this.i=this.g=this.l=null,this.a=n,this.h=this.f=null}function Ys(a){try{return r.a.app(a).auth().Ca()}catch(t){return[]}}function Xs(a,b,t,e,n){this.u=a,this.f=b,this.b=t,this.c=e||null,this.h=n||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Js(a){var b=ui();return function(a){return js(a,Is,{}).then((function(b){return b.authorizedDomains||[]}))}(a).then((function(t){t:{var e=xn(b),n=e.f;e=e.b;for(var r=0;r<t.length;r++){var g=t[r],o=e,c=n;if(0==g.indexOf("chrome-extension://")?o=xn(g).b==o&&"chrome-extension"==c:"http"!=c&&"https"!=c?o=!1:pi.test(g)?o=o==g:(g=g.split(".").join("\\."),o=new RegExp("^(.+\\."+g+"|"+g+")$","i").test(o)),o){t=!0;break t}}t=!1}if(!t)throw new jo(ui())}))}function Zs(a){return a.l?a.l:(a.l=vi().then((function(){if(!a.o){var b=a.c,t=a.h,e=Ys(a.b),n=new Gs(a.u,a.f,a.b);n.f=b,n.b=t,n.c=tt(e||[]),a.o=n.toString()}a.i=new zs(a.o),function(a){if(!a.i)throw Error("IfcHandler must be initialized!");!function(a,b){a.gb.then((function(){a.a.register("authEvent",b,Di("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(a.i,(function(b){var t={};if(b&&b.authEvent){var e=!1;for(b=Lo(b.authEvent),t=0;t<a.g.length;t++)e=a.g[t](b)||e;return(t={}).status=e?"ACK":"ERROR",ue(t)}return t.status="ERROR",ue(t)}))}(a)})),a.l)}function tu(a){return a.m||(a.v=a.c?Ei(a.c,Ys(a.b)):null,a.m=new za(a.f,qr(a.h),a.v)),a.m}function eu(a,b,t,e,n,r,g,o,c,p,u){return(a=new Qs(a,b,t,e,n)).l=r,a.g=g,a.i=o,a.b=it(c||null),a.f=p,a.nb(u).toString()}function nu(a){if(this.a=a||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new ur("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function iu(a){this.b=a,this.a={},this.f=N(this.c,this)}Gs.prototype.toString=function(){return this.f?Nn(this.a,"v",this.f):Hn(this.a.a,"v"),this.b?Nn(this.a,"eid",this.b):Hn(this.a.a,"eid"),this.c.length?Nn(this.a,"fw",this.c.join(",")):Hn(this.a.a,"fw"),this.a.toString()},Qs.prototype.nb=function(a){return this.h=a,this},Qs.prototype.toString=function(){var a=Pn(this.o,"/__/auth/handler");if(Nn(a,"apiKey",this.m),Nn(a,"appName",this.c),Nn(a,"authType",this.u),this.a.isOAuthProvider){var b=this.a;try{var t=r.a.app(this.c).auth().ha()}catch(e){t=null}for(var e in b.bb=t,Nn(a,"providerId",this.a.providerId),t=Mi((b=this.a).zb))t[e]=t[e].toString();e=b.Fc,t=it(t);for(var n=0;n<e.length;n++){var o=e[n];o in t&&delete t[o]}b.eb&&b.bb&&!t[b.eb]&&(t[b.eb]=b.bb),nt(t)||Nn(a,"customParameters",Ri(t))}if("function"==typeof this.a.Hb&&((b=this.a.Hb()).length&&Nn(a,"scopes",b.join(","))),this.l?Nn(a,"redirectUrl",this.l):Hn(a.a,"redirectUrl"),this.g?Nn(a,"eventId",this.g):Hn(a.a,"eventId"),this.i?Nn(a,"v",this.i):Hn(a.a,"v"),this.b)for(var g in this.b)this.b.hasOwnProperty(g)&&!On(a,g)&&Nn(a,g,this.b[g]);return this.h?Nn(a,"tid",this.h):Hn(a.a,"tid"),this.f?Nn(a,"eid",this.f):Hn(a.a,"eid"),(g=Ys(this.c)).length&&Nn(a,"fw",g.join(",")),a.toString()},(e=Xs.prototype).Fb=function(a,b,t){var e=new ur("popup-closed-by-user"),n=new ur("web-storage-unsupported"),r=this,g=!1;return this.ia().then((function(){(function(a){var b={type:"webStorageSupport"};return Zs(a).then((function(){return function(a,b){return a.gb.then((function(){return new ee((function(t){a.a.send(b.type,b,t,Di("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(a.i,b)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(r).then((function(t){t||(a&&di(a),b(n),g=!0)}))})).s((function(){})).then((function(){if(!g)return function(a){return new ee((function(b){return function t(){wn(2e3).then((function(){if(a&&!a.closed)return t();b()}))}()}))}(a)})).then((function(){if(!g)return wn(t).then((function(){b(e)}))}))},e.Ob=function(){var a=ki();return!Pi(a)&&!Bi(a)},e.Jb=function(){return!1},e.Db=function(a,b,t,e,n,r,g,o){if(!a)return ce(new ur("popup-blocked"));if(g&&!Pi())return this.ia().s((function(p){di(a),n(p)})),e(),ue();this.a||(this.a=Js(tu(this)));var c=this;return this.a.then((function(){var p=c.ia().s((function(u){throw di(a),n(u),u}));return e(),p})).then((function(){(Ro(t),g)||ci(eu(c.u,c.f,c.b,b,t,null,r,c.c,void 0,c.h,o),a)})).s((function(p){throw"auth/network-request-failed"==p.code&&(c.a=null),p}))},e.Eb=function(a,b,t,e){this.a||(this.a=Js(tu(this)));var n=this;return this.a.then((function(){Ro(b),ci(eu(n.u,n.f,n.b,a,b,ui(),t,n.c,void 0,n.h,e))})).s((function(t){throw"auth/network-request-failed"==t.code&&(n.a=null),t}))},e.ia=function(){var a=this;return Zs(this).then((function(){return a.i.gb})).s((function(){throw a.a=null,new ur("network-request-failed")}))},e.Rb=function(){return!0},e.Aa=function(a){this.g.push(a)},e.Na=function(a){J(this.g,(function(b){return b==a}))},(e=nu.prototype).get=function(a){return ue(this.a.getItem(a)).then((function(b){return b&&Li(b)}))},e.set=function(a,b){return ue(this.a.setItem(a,Ri(b)))},e.S=function(a){return ue(this.a.removeItem(a))},e.$=function(){},e.ea=function(){};var ru,ou=[];function au(a,b,t){nt(a.a)&&a.b.addEventListener("message",a.f),void 0===a.a[b]&&(a.a[b]=[]),a.a[b].push(t)}function su(a){this.a=a}function uu(a){this.c=a,this.b=!1,this.a=[]}function cu(a,b,t,e){var n,g,r,o,c=t||{},p=null;if(a.b)return ce(Error("connection_unavailable"));var u=e?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ee((function(t,e){l?(n=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),r=setTimeout((function(){e(Error("unsupported_event"))}),u),p={messageChannel:l,onMessage:g=function(c){c.data.eventId===n&&("ack"===c.data.status?(clearTimeout(r),o=setTimeout((function(){e(Error("timeout"))}),3e3)):"done"===c.data.status?(clearTimeout(o),void 0!==c.data.response?t(c.data.response):e(Error("unknown_error"))):(clearTimeout(r),clearTimeout(o),e(Error("invalid_response"))))}},a.a.push(p),l.port1.addEventListener("message",g),a.c.postMessage({eventType:b,eventId:n,data:c},[l.port2])):e(Error("connection_unavailable"))})).then((function(t){return lu(a,p),t})).s((function(t){throw lu(a,p),t}))}function lu(a,b){if(b){var t=b.messageChannel,e=b.onMessage;t&&(t.port1.removeEventListener("message",e),t.port1.close()),J(a.a,(function(t){return t==b}))}}function hu(){if(!pu())throw new ur("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=d.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var a=this;bi()&&self?(this.l=function(){var a=bi()?self:null;if(K(ou,(function(t){t.b==a&&(b=t)})),!b){var b=new iu(a);ou.push(b)}return b}(),au(this.l,"keyChanged",(function(b,t){return bu(a).then((function(e){return 0<e.length&&K(a.a,(function(t){t(e)})),{keyProcessed:Y(e,t.key)}}))})),au(this.l,"ping",(function(){return ue(["keyChanged"])}))):function(){var a=d.navigator;return a&&a.serviceWorker?ue().then((function(){return a.serviceWorker.ready})).then((function(b){return b.active||null})).s((function(){return null})):ue(null)}().then((function(b){(a.h=b)&&(a.g=new uu(new su(b)),cu(a.g,"ping",null,!0).then((function(t){t[0].fulfilled&&Y(t[0].value,"keyChanged")&&(a.o=!0)})).s((function(){})))}))}function du(a){return new ee((function(b,t){var e=a.u.open("firebaseLocalStorageDb",1);e.onerror=function(e){try{e.preventDefault()}catch(t){}t(Error(e.target.error))},e.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){t(e)}},e.onsuccess=function(e){(e=e.target.result).objectStoreNames.contains("firebaseLocalStorage")?b(e):function(a){return new ee((function(b,t){var e=a.u.deleteDatabase("firebaseLocalStorageDb");e.onsuccess=function(){b()},e.onerror=function(e){t(Error(e.target.error))}}))}(a).then((function(){return du(a)})).then((function(t){b(t)})).s((function(e){t(e)}))}}))}function fu(a){return a.m||(a.m=du(a)),a.m}function pu(){try{return!!d.indexedDB}catch(t){return!1}}function mu(a){return a.objectStore("firebaseLocalStorage")}function vu(a,b){return a.transaction(["firebaseLocalStorage"],b?"readwrite":"readonly")}function gu(a){return new ee((function(b,t){a.onsuccess=function(t){t&&t.target?b(t.target.result):b()},a.onerror=function(e){t(e.target.error)}}))}function yu(a,b){return a.g&&a.h&&function(){var a=d.navigator;return a&&a.serviceWorker&&a.serviceWorker.controller||null}()===a.h?cu(a.g,"keyChanged",{key:b},a.o).then((function(){})).s((function(){})):ue()}function bu(a){return fu(a).then((function(b){var t=mu(vu(b,!1));return t.getAll?gu(t.getAll()):new ee((function(e,n){var r=[],g=t.openCursor();g.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},g.onerror=function(t){n(t.target.error)}}))})).then((function(b){var t={},e=[];if(0==a.b){for(e=0;e<b.length;e++)t[b[e].fbase_key]=b[e].value;e=function t(a,b){var e,n=[];for(e in a)e in b?typeof a[e]!=typeof b[e]?n.push(e):"object"==typeof a[e]&&null!=a[e]&&null!=b[e]?0<t(a[e],b[e]).length&&n.push(e):a[e]!==b[e]&&n.push(e):n.push(e);for(e in b)e in a||n.push(e);return n}(a.c,t),a.c=t}return e}))}function wu(a){a.i&&a.i.cancel("STOP_EVENT"),a.f&&(clearTimeout(a.f),a.f=null)}function Su(a){var b=this,t=null;this.a=[],this.type="indexedDB",this.c=a,this.b=ue().then((function(){if(pu()){var e=Vi(),n="__sak"+e;return ru||(ru=new hu),(t=ru).set(n,e).then((function(){return t.get(n)})).then((function(r){if(r!==e)throw Error("indexedDB not supported!");return t.S(n)})).then((function(){return t})).s((function(){return b.c}))}return b.c})).then((function(t){return b.type=t.type,t.$((function(t){K(b.a,(function(e){e(t)}))})),t}))}function Tu(){this.a={},this.type="inMemory"}function _u(){if(!function(){var a="Node"==wi();if(!(a=Cu()||a&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wi())throw new ur("internal-error","The LocalStorage compatibility library was not found.");throw new ur("web-storage-unsupported")}this.a=Cu()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Cu(){try{var a=d.localStorage,b=Vi();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function Iu(){this.type="nullStorage"}function Eu(){if(!function(){var a="Node"==wi();if(!(a=ku()||a&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wi())throw new ur("internal-error","The SessionStorage compatibility library was not found.");throw new ur("web-storage-unsupported")}this.a=ku()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ku(){try{var a=d.sessionStorage,b=Vi();return a&&(a.setItem(b,"1"),a.removeItem(b)),a}catch(t){return null}}function Du(){var a={};a.Browser=Ou,a.Node=xu,a.ReactNative=Pu,a.Worker=Ru,this.a=a[wi()]}iu.prototype.c=function(a){var b=a.data.eventType,t=a.data.eventId,e=this.a[b];if(e&&0<e.length){a.ports[0].postMessage({status:"ack",eventId:t,eventType:b,response:null});var n=[];K(e,(function(t){n.push(ue().then((function(){return t(a.origin,a.data.data)})))})),he(n).then((function(e){var g=[];K(e,(function(t){g.push({fulfilled:t.Gb,value:t.value,reason:t.reason?t.reason.message:void 0})})),K(g,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),a.ports[0].postMessage({status:"done",eventId:t,eventType:b,response:g})}))}},su.prototype.postMessage=function(a,b){this.a.postMessage(a,b)},uu.prototype.close=function(){for(;0<this.a.length;)lu(this,this.a[0]);this.b=!0},(e=hu.prototype).set=function(a,b){var t,e=!1,n=this;return fu(this).then((function(e){return gu((e=mu(vu(t=e,!0))).get(a))})).then((function(r){var g=mu(vu(t,!0));return r?(r.value=b,gu(g.put(r))):(n.b++,e=!0,(r={}).fbase_key=a,r.value=b,gu(g.add(r)))})).then((function(){return n.c[a]=b,yu(n,a)})).ka((function(){e&&n.b--}))},e.get=function(a){return fu(this).then((function(b){return gu(mu(vu(b,!1)).get(a))})).then((function(b){return b&&b.value}))},e.S=function(a){var b=!1,t=this;return fu(this).then((function(e){return b=!0,t.b++,gu(mu(vu(e,!0)).delete(a))})).then((function(){return delete t.c[a],yu(t,a)})).ka((function(){b&&t.b--}))},e.$=function(a){0==this.a.length&&function(a){wu(a),function b(){a.f=setTimeout((function(){a.i=bu(a).then((function(t){0<t.length&&K(a.a,(function(e){e(t)}))})).then((function(){b()})).s((function(t){"STOP_EVENT"!=t.message&&b()}))}),800)}()}(this),this.a.push(a)},e.ea=function(a){J(this.a,(function(b){return b==a})),0==this.a.length&&wu(this)},(e=Su.prototype).get=function(a){return this.b.then((function(b){return b.get(a)}))},e.set=function(a,b){return this.b.then((function(t){return t.set(a,b)}))},e.S=function(a){return this.b.then((function(b){return b.S(a)}))},e.$=function(a){this.a.push(a)},e.ea=function(a){J(this.a,(function(b){return b==a}))},(e=Tu.prototype).get=function(a){return ue(this.a[a])},e.set=function(a,b){return this.a[a]=b,ue()},e.S=function(a){return delete this.a[a],ue()},e.$=function(){},e.ea=function(){},(e=_u.prototype).get=function(a){var b=this;return ue().then((function(){return Li(b.a.getItem(a))}))},e.set=function(a,b){var t=this;return ue().then((function(){var e=Ri(b);null===e?t.S(a):t.a.setItem(a,e)}))},e.S=function(a){var b=this;return ue().then((function(){b.a.removeItem(a)}))},e.$=function(a){d.window&&rn(d.window,"storage",a)},e.ea=function(a){d.window&&sn(d.window,"storage",a)},(e=Iu.prototype).get=function(){return ue(null)},e.set=function(){return ue()},e.S=function(){return ue()},e.$=function(){},e.ea=function(){},(e=Eu.prototype).get=function(a){var b=this;return ue().then((function(){return Li(b.a.getItem(a))}))},e.set=function(a,b){var t=this;return ue().then((function(){var e=Ri(b);null===e?t.S(a):t.a.setItem(a,e)}))},e.S=function(a){var b=this;return ue().then((function(){b.a.removeItem(a)}))},e.$=function(){},e.ea=function(){};var Au,Nu,Ou={C:_u,Ta:Eu},xu={C:_u,Ta:Eu},Pu={C:nu,Ta:Iu},Ru={C:_u,Ta:Iu},Mu={ad:"local",NONE:"none",cd:"session"};function Lu(){var a=!(Bi(ki())||!yi()),b=Pi(),t=Ai();this.m=a,this.h=b,this.l=t,this.a={},Au||(Au=new Du),a=Au;try{this.g=!si()&&zi()||!d.indexedDB?new a.a.C:new Su(bi()?new Tu:new a.a.C)}catch(t){this.g=new Tu,this.h=!0}try{this.i=new a.a.Ta}catch(t){this.i=new Tu}this.u=new Tu,this.f=N(this.Pb,this),this.b={}}function Vu(){return Nu||(Nu=new Lu),Nu}function Bu(a,b){switch(b){case"session":return a.i;case"none":return a.u;default:return a.g}}function Fu(a,b){return"firebase:"+a.name+(b?":"+b:"")}function ju(a,b,t){return t=Fu(b,t),"local"==b.C&&(a.b[t]=null),Bu(a,b.C).S(t)}function Uu(a){a.c&&(clearInterval(a.c),a.c=null)}function qu(a){this.a=a,this.b=Vu()}(e=Lu.prototype).get=function(a,b){return Bu(this,a.C).get(Fu(a,b))},e.set=function(a,b,t){var e=Fu(a,t),n=this,r=Bu(this,a.C);return r.set(e,b).then((function(){return r.get(e)})).then((function(g){"local"==a.C&&(n.b[e]=g)}))},e.addListener=function(a,b,t){a=Fu(a,b),this.l&&(this.b[a]=d.localStorage.getItem(a)),nt(this.a)&&(Bu(this,"local").$(this.f),this.h||(si()||!zi())&&d.indexedDB||!this.l||function(a){Uu(a),a.c=setInterval((function(){for(var b in a.a){var t=d.localStorage.getItem(b),e=a.b[b];t!=e&&(a.b[b]=t,t=new We({type:"storage",key:b,target:window,oldValue:e,newValue:t,a:!0}),a.Pb(t))}}),1e3)}(this)),this.a[a]||(this.a[a]=[]),this.a[a].push(t)},e.removeListener=function(a,b,t){a=Fu(a,b),this.a[a]&&(J(this.a[a],(function(e){return e==t})),0==this.a[a].length&&delete this.a[a]),nt(this.a)&&(Bu(this,"local").ea(this.f),Uu(this))},e.Pb=function(a){if(a&&a.f){var b=a.a.key;if(null==b)for(var t in this.a){var e=this.b[t];void 0===e&&(e=null);var n=d.localStorage.getItem(t);n!==e&&(this.b[t]=n,this.$a(t))}else if(0==b.indexOf("firebase:")&&this.a[b]){if(void 0!==a.a.a?Bu(this,"local").ea(this.f):Uu(this),this.m)if(t=d.localStorage.getItem(b),(e=a.a.newValue)!==t)null!==e?d.localStorage.setItem(b,e):d.localStorage.removeItem(b);else if(this.b[b]===e&&void 0===a.a.a)return;var r=this;t=function(){void 0===a.a.a&&r.b[b]===d.localStorage.getItem(b)||(r.b[b]=d.localStorage.getItem(b),r.$a(b))},Ae&&Be&&10==Be&&d.localStorage.getItem(b)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(t,10):t()}}else K(a,N(this.$a,this))},e.$a=function(a){this.a[a]&&K(this.a[a],(function(b){b()}))};var zu,$u={name:"authEvent",C:"local"};function Hu(){this.a=Vu()}function Wu(a,b){this.b=Ku,this.f=d.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=a,this.h=b,this.l=d.Int32Array?new Int32Array(64):Array(64),void 0!==zu||(zu=d.Int32Array?new Int32Array(tc):tc),this.reset()}P(Wu,(function(){this.b=-1}));for(var Ku=64,Gu=Ku-1,Qu=[],Yu=0;Yu<Gu;Yu++)Qu[Yu]=0;var Xu=Z(128,Qu);function Ju(a){for(var b=a.f,t=a.l,e=0,n=0;n<b.length;)t[e++]=b[n]<<24|b[n+1]<<16|b[n+2]<<8|b[n+3],n=4*e;for(b=16;64>b;b++){n=0|t[b-15],e=0|t[b-2];var r=(0|t[b-16])+((n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3)|0,g=(0|t[b-7])+((e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)|0;t[b]=r+g|0}e=0|a.a[0],n=0|a.a[1];var o=0|a.a[2],c=0|a.a[3],p=0|a.a[4],u=0|a.a[5],l=0|a.a[6];for(r=0|a.a[7],b=0;64>b;b++){var h=((e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10))+(e&n^e&o^n&o)|0;g=(r=r+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))|0)+((g=(g=p&u^~p&l)+(0|zu[b])|0)+(0|t[b])|0)|0,r=l,l=u,u=p,p=c+g|0,c=o,o=n,n=e,e=g+h|0}a.a[0]=a.a[0]+e|0,a.a[1]=a.a[1]+n|0,a.a[2]=a.a[2]+o|0,a.a[3]=a.a[3]+c|0,a.a[4]=a.a[4]+p|0,a.a[5]=a.a[5]+u|0,a.a[6]=a.a[6]+l|0,a.a[7]=a.a[7]+r|0}function Zu(a,b,t){void 0===t&&(t=b.length);var e=0,n=a.c;if(f(b))for(;e<t;)a.f[n++]=b.charCodeAt(e++),n==a.b&&(Ju(a),n=0);else{if(!C(b))throw Error("message must be string or array");for(;e<t;){var r=b[e++];if(!("number"==typeof r&&0<=r&&255>=r&&r==(0|r)))throw Error("message must be a byte array");a.f[n++]=r,n==a.b&&(Ju(a),n=0)}}a.c=n,a.g+=t}Wu.prototype.reset=function(){this.g=this.c=0,this.a=d.Int32Array?new Int32Array(this.h):tt(this.h)};var tc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ec(){Wu.call(this,8,nc)}P(ec,Wu);var nc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ic(a,b,t,e,n){this.u=a,this.i=b,this.l=t,this.m=e||null,this.o=n||null,this.h=b+":"+t,this.v=new Hu,this.g=new qu(this.h),this.f=null,this.b=[],this.a=this.c=null}function rc(a){return new ur("invalid-cordova-configuration",a)}function oc(a){var b=new ec;Zu(b,a),a=[];var t=8*b.g;56>b.c?Zu(b,Xu,56-b.c):Zu(b,Xu,b.b-(b.c-56));for(var e=63;56<=e;e--)b.f[e]=255&t,t/=256;for(Ju(b),e=t=0;e<b.i;e++)for(var n=24;0<=n;n-=8)a[t++]=b.a[e]>>n&255;return function(a){return G(a,(function(b){return 1<(b=b.toString(16)).length?b:"0"+b})).join("")}(a)}function ac(a,b){for(var t=0;t<a.b.length;t++)try{a.b[t](b)}catch(t){}}function sc(a){return a.f||(a.f=a.ia().then((function(){return new ee((function(b){a.Aa((function t(e){return b(e),a.Na(t),!1})),function(a){function b(g){e=!0,n&&n.cancel(),uc(a).then((function(e){var n=t;if(e&&g&&g.url){var p=null;-1!=(n=no(g.url)).indexOf("/__/auth/callback")&&(p=(p="object"==typeof(p=Li(On(p=xn(n),"firebaseError")||null))?cr(p):null)?new Mo(e.c,e.b,null,null,p,null,e.R()):new Mo(e.c,e.b,n,e.f,null,null,e.R())),n=p||t}ac(a,n)}))}var t=new Mo("unknown",null,null,null,new ur("no-auth-event")),e=!1,n=wn(500).then((function(){return uc(a).then((function(){e||ac(a,t)}))})),r=d.handleOpenURL;d.handleOpenURL=function(g){if(0==g.toLowerCase().indexOf(Di("BuildInfo.packageName",d).toLowerCase()+"://")&&b({url:g}),"function"==typeof r)try{r(g)}catch(t){console.error(t)}},Fo||(Fo=new Vo),function(a){var b=Fo;b.a.push(a),b.b||(b.b=function(t){for(var e=0;e<b.a.length;e++)b.a[e](t)},"function"==typeof(a=Di("universalLinks.subscribe",d))&&a(null,b.b))}(b)}(a)}))}))),a.f}function uc(a){var b=null;return function(a){return a.b.get($u,a.a).then((function(b){return Lo(b)}))}(a.g).then((function(t){return b=t,ju((t=a.g).b,$u,t.a)})).then((function(){return b}))}function cc(a){this.a=a,this.b=Vu()}(e=ic.prototype).ia=function(){return this.Da?this.Da:this.Da=(gi(void 0)?vi().then((function(){return new ee((function(a,b){var t=d.document,e=setTimeout((function(){b(Error("Cordova framework is not ready."))}),1e3);t.addEventListener("deviceready",(function(){clearTimeout(e),a()}),!1)}))})):ce(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Di("universalLinks.subscribe",d))throw rc("cordova-universal-links-plugin-fix is not installed");if(void 0===Di("BuildInfo.packageName",d))throw rc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Di("cordova.plugins.browsertab.openUrl",d))throw rc("cordova-plugin-browsertab is not installed");if("function"!=typeof Di("cordova.InAppBrowser.open",d))throw rc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new ur("cordova-not-ready")}))},e.Fb=function(a,b){return b(new ur("operation-not-supported-in-this-environment")),ue()},e.Db=function(){return ce(new ur("operation-not-supported-in-this-environment"))},e.Rb=function(){return!1},e.Ob=function(){return!0},e.Jb=function(){return!0},e.Eb=function(a,b,t,e){if(this.c)return ce(new ur("redirect-operation-pending"));var n=this,r=d.document,g=null,o=null,c=null,p=null;return this.c=ue().then((function(){return Ro(b),sc(n)})).then((function(){return function(a,b,t,e,n){var r=function(){for(var a=20,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}(),g=new Mo(b,e,null,r,new ur("no-auth-event"),null,n),o=Di("BuildInfo.packageName",d);if("string"!=typeof o)throw new ur("invalid-cordova-configuration");var c=Di("BuildInfo.displayName",d),p={};if(ki().toLowerCase().match(/iphone|ipad|ipod/))p.ibi=o;else{if(!ki().toLowerCase().match(/android/))return ce(new ur("operation-not-supported-in-this-environment"));p.apn=o}c&&(p.appDisplayName=c),r=oc(r),p.sessionId=r;var u=eu(a.u,a.i,a.l,b,t,null,e,a.m,p,a.o,n);return a.ia().then((function(){var t=a.h;return a.v.a.set($u,g.A(),t)})).then((function(){var t=Di("cordova.plugins.browsertab.isAvailable",d);if("function"!=typeof t)throw new ur("invalid-cordova-configuration");var e=null;t((function(t){if(t){if("function"!=typeof(e=Di("cordova.plugins.browsertab.openUrl",d)))throw new ur("invalid-cordova-configuration");e(u)}else{if("function"!=typeof(e=Di("cordova.InAppBrowser.open",d)))throw new ur("invalid-cordova-configuration");t=ki(),a.a=e(u,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(n,a,b,t,e)})).then((function(){return new ee((function(u,t){o=function(){var t=Di("cordova.plugins.browsertab.close",d);return u(),"function"==typeof t&&t(),n.a&&"function"==typeof n.a.close&&(n.a.close(),n.a=null),!1},n.Aa(o),c=function(){g||(g=wn(2e3).then((function(){t(new ur("redirect-cancelled-by-user"))})))},p=function(){Ui()&&c()},r.addEventListener("resume",c,!1),ki().toLowerCase().match(/android/)||r.addEventListener("visibilitychange",p,!1)})).s((function(u){return uc(n).then((function(){throw u}))}))})).ka((function(){c&&r.removeEventListener("resume",c,!1),p&&r.removeEventListener("visibilitychange",p,!1),g&&g.cancel(),o&&n.Na(o),n.c=null}))},e.Aa=function(a){this.b.push(a),sc(this).s((function(b){"auth/invalid-cordova-configuration"===b.code&&(b=new Mo("unknown",null,null,null,new ur("no-auth-event")),a(b))}))},e.Na=function(a){J(this.b,(function(b){return b==a}))};var lc={name:"pendingRedirect",C:"session"};function hc(a){return ju(a.b,lc,a.a)}function dc(a,b,t){this.i={},this.v=0,this.B=a,this.u=b,this.m=t,this.h=[],this.f=!1,this.l=N(this.o,this),this.b=new dl,this.w=new Ac,this.g=new cc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=fc(this.B,this.u,this.m,jr)}function fc(a,b,t,e){var n=r.a.SDK_VERSION||null;return gi()?new ic(a,b,t,n,e):new Xs(a,b,t,n,e)}function pc(a){a.f||(a.f=!0,a.a.Aa(a.l));var b=a.a;return a.a.ia().s((function(t){throw a.a==b&&a.reset(),t}))}function mc(a){a.a.Ob()&&pc(a).s((function(b){var t=new Mo("unknown",null,null,null,new ur("operation-not-supported-in-this-environment"));wc(b)&&a.o(t)})),a.a.Jb()||Ic(a.b)}function vc(a,b){Y(a.h,b)||a.h.push(b),a.f||function(a){return a.b.get(lc,a.a).then((function(b){return"pending"==b}))}(a.g).then((function(t){t?hc(a.g).then((function(){pc(a).s((function(t){var e=new Mo("unknown",null,null,null,new ur("operation-not-supported-in-this-environment"));wc(t)&&a.o(e)}))})):mc(a)})).s((function(){mc(a)}))}function gc(a,b){J(a.h,(function(t){return t==b}))}dc.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=fc(this.B,this.u,this.m),this.i={}},dc.prototype.o=function(a){if(!a)throw new ur("invalid-auth-event");if(6e5<=x()-this.v&&(this.i={},this.v=0),a&&a.getUid()&&this.i.hasOwnProperty(a.getUid()))return!1;for(var b=!1,t=0;t<this.h.length;t++){var e=this.h[t];if(e.xb(a.c,a.b)){(b=this.c[a.c])&&(b.h(a,e),a&&(a.f||a.b)&&(this.i[a.getUid()]=!0,this.v=x())),b=!0;break}}return Ic(this.b),b};var yc=new ji(2e3,1e4),bc=new ji(3e4,6e4);function ol(a,b,t,e,n,r,g){return a.a.Db(b,t,e,(function(){a.f||(a.f=!0,a.a.Aa(a.l))}),(function(){a.reset()}),n,r,g)}function wc(a){return!(!a||"auth/cordova-not-ready"!=a.code)}function Sc(a,b,t,e,n){var r;return function(a){return a.b.set(lc,"pending",a.a)}(a.g).then((function(){return a.a.Eb(b,t,e,n).s((function(g){if(wc(g))throw new ur("operation-not-supported-in-this-environment");return r=g,hc(a.g).then((function(){throw r}))})).then((function(){return a.a.Rb()?new ee((function(){})):hc(a.g).then((function(){return a.oa()})).then((function(){})).s((function(){}))}))}))}function Tc(a,b,t,e,n){return a.a.Fb(e,(function(e){b.ja(t,null,e,n)}),yc.get())}dc.prototype.oa=function(){return this.b.oa()};var _c={};function Cc(a,b,t){var e=b+":"+t;return _c[e]||(_c[e]=new dc(a,b,t)),_c[e]}function dl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Ic(a){a.g||(a.g=!0,Dc(a,!1,null,null))}function Ec(a){a.g&&!a.i&&Dc(a,!1,null,null)}function kc(a,b){if(a.b=function(){return ue(b)},a.f.length)for(var t=0;t<a.f.length;t++)a.f[t](b)}function Dc(a,b,t,e){b?e?function(a,b){if(a.b=function(){return ce(b)},a.c.length)for(var t=0;t<a.c.length;t++)a.c[t](b)}(a,e):kc(a,t):kc(a,{user:null}),a.f=[],a.c=[]}function Ac(){}function Nc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(a){this.vb=a},enumerable:!1})}function Oc(a,b){this.a=b,Gi(this,"verificationId",a)}function xc(a,b,t,e){return new Oo(a).Wa(b,t).then((function(t){return new Oc(t,e)}))}function Pc(a){var b=Fr(a);if(!(b&&b.exp&&b.auth_time&&b.iat))throw new ur("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Qi(this,{token:a,expirationTime:qi(1e3*b.exp),authTime:qi(1e3*b.auth_time),issuedAtTime:qi(1e3*b.iat),signInProvider:b.firebase&&b.firebase.sign_in_provider?b.firebase.sign_in_provider:null,claims:b})}function Rc(a,b,t){if(this.h=a,this.i=b,this.g=t,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Mc(a){this.f=a,this.b=this.a=null,this.c=0}function Lc(a,b){var t=b[Ha],e=b.refreshToken;b=Vc(b.expiresIn),a.b=t,a.c=b,a.a=e}function Vc(a){return x()+1e3*parseInt(a,10)}function Bc(a,b){return function(a,b){return new ee((function(t,e){"refresh_token"==b.grant_type&&b.refresh_token||"authorization_code"==b.grant_type&&b.code?Ja(a,a.l+"?key="+encodeURIComponent(a.c),(function(n){n?n.error?e(qs(n)):n.access_token&&n.refresh_token?t(n):e(new ur("internal-error")):e(new ur("network-request-failed"))}),"POST",$n(b).toString(),a.g,a.u.get()):e(new ur("internal-error"))}))}(a.f,b).then((function(t){return a.b=t.access_token,a.c=Vc(t.expires_in),a.a=t.refresh_token,{accessToken:a.b,expirationTime:a.c,refreshToken:a.a}})).s((function(t){throw"auth/user-token-expired"==t.code&&(a.a=null),t}))}function Fc(a,b){this.a=a||null,this.b=b||null,Qi(this,{lastSignInTime:qi(b||null),creationTime:qi(a||null)})}function jc(a,b,t,e,n,r){Qi(this,{uid:a,displayName:e||null,photoURL:n||null,email:t||null,phoneNumber:r||null,providerId:b})}function Uc(a,b){for(var t in He.call(this,a),b)this[t]=b[t]}function qc(a,b,t){this.I=[],this.l=a.apiKey,this.m=a.appName,this.o=a.authDomain||null,a=r.a.SDK_VERSION?Ei(r.a.SDK_VERSION):null,this.a=new za(this.l,qr(jr),a),this.b=new Mc(this.a),Qc(this,b[Ha]),Lc(this.b,b),Gi(this,"refreshToken",this.b.a),Jc(this,t||{}),mn.call(this),this.J=!1,this.o&&Ni()&&(this.i=Cc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(a){return new Rc((function(){return a.G(!0)}),(function(b){return!(!b||"auth/network-request-failed"!=b.code)}),(function(){var b=a.b.c-x()-3e5;return 0<b?b:0}))}(this),this.W=N(this.Ja,this);var e=this;this.ga=null,this.xa=function(t){e.ua(t.g)},this.Z=null,this.P=[],this.wa=function(t){$c(e,t.c)},this.Y=null}function zc(a,b){a.Z&&sn(a.Z,"languageCodeChanged",a.xa),(a.Z=b)&&rn(b,"languageCodeChanged",a.xa)}function $c(a,b){a.P=b,Xa(a.a,r.a.SDK_VERSION?Ei(r.a.SDK_VERSION,a.P):null)}function Hc(a,b){a.Y&&sn(a.Y,"frameworkChanged",a.wa),(a.Y=b)&&rn(b,"frameworkChanged",a.wa)}function Wc(a){try{return r.a.app(a.m).auth()}catch(t){throw new ur("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+a.m+"'!")}}function Kc(a){a.B||a.w.b||(a.w.start(),sn(a,"tokenChanged",a.W),rn(a,"tokenChanged",a.W))}function Gc(a){sn(a,"tokenChanged",a.W),a.w.stop()}function Qc(a,b){a.ma=b,Gi(a,"_lat",b)}function Yc(a){for(var b=[],t=0;t<a.O.length;t++)b.push(a.O[t](a));return he(b).then((function(){return a}))}function Xc(a){a.i&&!a.J&&(a.J=!0,vc(a.i,a))}function Jc(a,b){Qi(a,{uid:b.uid,displayName:b.displayName||null,photoURL:b.photoURL||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,isAnonymous:b.isAnonymous||!1,tenantId:b.tenantId||null,metadata:new Fc(b.createdAt,b.lastLoginAt),providerData:[]}),a.a.b=a.tenantId}function Zc(){}function tl(a){return ue().then((function(){if(a.B)throw new ur("app-deleted")}))}function el(a){return G(a.providerData,(function(b){return b.providerId}))}function em(a,b){b&&(nl(a,b.providerId),a.providerData.push(b))}function nl(a,b){J(a.providerData,(function(t){return t.providerId==b}))}function il(a,b,t){("uid"!=b||t)&&a.hasOwnProperty(b)&&Gi(a,b,t)}function rl(a,b){a!=b&&(Qi(a,{uid:b.uid,displayName:b.displayName,photoURL:b.photoURL,email:b.email,emailVerified:b.emailVerified,phoneNumber:b.phoneNumber,isAnonymous:b.isAnonymous,tenantId:b.tenantId,providerData:[]}),b.metadata?Gi(a,"metadata",function(a){return new Fc(a.a,a.b)}(b.metadata)):Gi(a,"metadata",new Fc),K(b.providerData,(function(t){em(a,t)})),function(a,b){a.b=b.b,a.a=b.a,a.c=b.c}(a.b,b.b),Gi(a,"refreshToken",a.b.a))}function al(a){return a.G().then((function(b){var t=a.isAnonymous;return function(a,b){return js(a.a,Ss,{idToken:b}).then(N(a.zc,a))}(a,b).then((function(){return t||il(a,"isAnonymous",!1),b}))}))}function sl(a,b){b[Ha]&&a.ma!=b[Ha]&&(Lc(a.b,b),a.dispatchEvent(new Uc("tokenChanged")),Qc(a,b[Ha]),il(a,"refreshToken",a.b.a))}function cl(a,b){return al(a).then((function(){if(Y(el(a),b))return Yc(a).then((function(){throw new ur("provider-already-linked")}))}))}function ll(a,b,t){return Yi({user:a,credential:Po(b),additionalUserInfo:b=Kr(b),operationType:t})}function hl(a,b){return sl(a,b),a.reload().then((function(){return a}))}function fl(a,b,t,e,n){if(!Ni())return ce(new ur("operation-not-supported-in-this-environment"));if(a.h&&!n)return ce(a.h);var o=Wr(t.providerId),g=Vi(a.uid+":::"),c=null;(!Pi()||yi())&&a.o&&t.isOAuthProvider&&(c=eu(a.o,a.l,a.m,b,t,null,g,r.a.SDK_VERSION||null,null,null,a.tenantId));var l=fi(c,o&&o.sa,o&&o.ra);return e=e().then((function(){if(ml(a),!n)return a.G().then((function(){}))})).then((function(){return ol(a.i,l,b,t,g,!!c,a.tenantId)})).then((function(){return new ee((function(p,u){a.ja(b,null,new ur("cancelled-popup-request"),a.g||null),a.f=p,a.v=u,a.g=g,a.c=Tc(a.i,a,b,l,g)}))})).then((function(p){return l&&di(l),p?Yi(p):null})).s((function(p){throw l&&di(l),p})),vl(a,e,n)}function pl(a,b,t,e,n){if(!Ni())return ce(new ur("operation-not-supported-in-this-environment"));if(a.h&&!n)return ce(a.h);var r=null,g=Vi(a.uid+":::");return e=e().then((function(){if(ml(a),!n)return a.G().then((function(){}))})).then((function(){return a.ca=g,Yc(a)})).then((function(t){return a.da&&(t=(t=a.da).b.set(bl,a.A(),t.a)),t})).then((function(){return Sc(a.i,b,t,g,a.tenantId)})).s((function(t){if(r=t,a.da)return wl(a.da);throw r})).then((function(){if(r)throw r})),vl(a,e,n)}function ml(a){if(!a.i||!a.J){if(a.i&&!a.J)throw new ur("internal-error");throw new ur("auth-domain-config-required")}}function vl(a,b,t){var e=function(a,b,t){return a.h&&!t?(b.cancel(),ce(a.h)):b.s((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(a.h||a.dispatchEvent(new Uc("userInvalidated")),a.h=t),t}))}(a,b,t);return a.I.push(e),e.ka((function(){X(a.I,e)})),e}function gl(a){if(!a.apiKey)return null;var b={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName},t={};if(!(a.stsTokenManager&&a.stsTokenManager.accessToken&&a.stsTokenManager.expirationTime))return null;t[Ha]=a.stsTokenManager.accessToken,t.refreshToken=a.stsTokenManager.refreshToken||null,t.expiresIn=(a.stsTokenManager.expirationTime-x())/1e3;var e=new qc(b,t,a);return a.providerData&&K(a.providerData,(function(t){t&&em(e,Yi(t))})),a.redirectEventId&&(e.ca=a.redirectEventId),e}function yl(a){this.a=a,this.b=Vu()}dl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},dl.prototype.h=function(a,b){if(a){this.reset(),this.g=!0;var t=a.c,e=a.b,n=a.a&&"auth/web-storage-unsupported"==a.a.code,r=a.a&&"auth/operation-not-supported-in-this-environment"==a.a.code;this.i=!(!n&&!r),"unknown"!=t||n||r?a.a?(Dc(this,!0,null,a.a),ue()):b.Ba(t,e)?function(a,b,t){t=t.Ba(b.c,b.b);var e=b.g,n=b.f,r=b.i,g=b.R(),o=!!b.c.match(/Redirect$/);t(e,n,g,r).then((function(t){Dc(a,o,t,null)})).s((function(t){Dc(a,o,null,t)}))}(this,a,b):ce(new ur("invalid-auth-event")):(Dc(this,!1,null,null),ue())}else ce(new ur("invalid-auth-event"))},dl.prototype.oa=function(){var a=this;return new ee((function(b,t){a.b?a.b().then(b,t):(a.f.push(b),a.c.push(t),function(a){var b=new ur("timeout");a.a&&a.a.cancel(),a.a=wn(bc.get()).then((function(){a.b||(a.g=!0,Dc(a,!0,null,b))}))}(a))}))},Ac.prototype.h=function(a,b){if(a){var t=a.c,e=a.b;a.a?(b.ja(a.c,null,a.a,a.b),ue()):b.Ba(t,e)?function(a,b){var t=a.b,e=a.c;b.Ba(e,t)(a.g,a.f,a.R(),a.i).then((function(n){b.ja(e,n,null,t)})).s((function(n){b.ja(e,null,n,t)}))}(a,b):ce(new ur("invalid-auth-event"))}else ce(new ur("invalid-auth-event"))},Oc.prototype.confirm=function(a){return a=xo(this.verificationId,a),this.a(a)},Rc.prototype.start=function(){this.a=this.c,function t(a,b){a.stop(),a.b=wn(function(a,b){return b?(a.a=a.c,a.g()):(b=a.a,a.a*=2,a.a>a.f&&(a.a=a.f),b)}(a,b)).then((function(){return function(){var a=d.document,b=null;return Ui()||!a?ue():new ee((function(t){b=function(){Ui()&&(a.removeEventListener("visibilitychange",b,!1),t())},a.addEventListener("visibilitychange",b,!1)})).s((function(t){throw a.removeEventListener("visibilitychange",b,!1),t}))}()})).then((function(){return a.h()})).then((function(){t(a,!0)})).s((function(e){a.i(e)&&t(a,!1)}))}(this,!0)},Rc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Mc.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Mc.prototype.getToken=function(a){return a=!!a,this.b&&!this.a?ce(new ur("user-token-expired")):a||!this.b||x()>this.c-3e4?this.a?Bc(this,{grant_type:"refresh_token",refresh_token:this.a}):ue(null):ue({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Fc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},P(Uc,He),P(qc,mn),qc.prototype.ua=function(a){this.ga=a,Ya(this.a,a)},qc.prototype.ha=function(){return this.ga},qc.prototype.Ca=function(){return tt(this.P)},qc.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Gi(qc.prototype,"providerId","firebase"),(e=qc.prototype).reload=function(){var a=this;return vl(this,tl(this).then((function(){return al(a).then((function(){return Yc(a)})).then(Zc)})))},e.dc=function(a){return this.G(a).then((function(b){return new Pc(b)}))},e.G=function(a){var b=this;return vl(this,tl(this).then((function(){return b.b.getToken(a)})).then((function(t){if(!t)throw new ur("internal-error");return t.accessToken!=b.ma&&(Qc(b,t.accessToken),b.dispatchEvent(new Uc("tokenChanged"))),il(b,"refreshToken",t.refreshToken),t.accessToken})))},e.zc=function(a){if(!(a=a.users)||!a.length)throw new ur("internal-error");Jc(this,{uid:(a=a[0]).localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt,tenantId:a.tenantId});for(var b=function(a){return(a=a.providerUserInfo)&&a.length?G(a,(function(b){return new jc(b.rawId,b.providerId,b.email,b.displayName,b.photoUrl,b.phoneNumber)})):[]}(a),t=0;t<b.length;t++)em(this,b[t]);il(this,"isAnonymous",!(this.email&&a.passwordHash||this.providerData&&this.providerData.length))},e.Ac=function(a){return Wi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(a)},e.hb=function(a){var b=this,t=null;return vl(this,a.f(this.a,this.uid).then((function(e){return sl(b,e),t=ll(b,e,"reauthenticate"),b.h=null,b.reload()})).then((function(){return t})),!0)},e.rc=function(a){return Wi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(a)},e.fb=function(a){var b=this,t=null;return vl(this,cl(this,a.providerId).then((function(){return b.G()})).then((function(t){return a.b(b.a,t)})).then((function(e){return t=ll(b,e,"link"),hl(b,e)})).then((function(){return t})))},e.sc=function(a,b){var t=this;return vl(this,cl(this,"phone").then((function(){return xc(Wc(t),a,b,N(t.fb,t))})))},e.Bc=function(a,b){var t=this;return vl(this,ue().then((function(){return xc(Wc(t),a,b,N(t.hb,t))})),!0)},e.rb=function(a){var b=this;return vl(this,this.G().then((function(t){return b.a.rb(t,a)})).then((function(t){return sl(b,t),b.reload()})))},e.Sc=function(a){var b=this;return vl(this,this.G().then((function(t){return a.b(b.a,t)})).then((function(t){return sl(b,t),b.reload()})))},e.sb=function(a){var b=this;return vl(this,this.G().then((function(t){return b.a.sb(t,a)})).then((function(t){return sl(b,t),b.reload()})))},e.tb=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return tl(this);var b=this;return vl(this,this.G().then((function(t){return b.a.tb(t,{displayName:a.displayName,photoUrl:a.photoURL})})).then((function(t){return sl(b,t),il(b,"displayName",t.displayName||null),il(b,"photoURL",t.photoUrl||null),K(b.providerData,(function(t){"password"===t.providerId&&(Gi(t,"displayName",b.displayName),Gi(t,"photoURL",b.photoURL))})),Yc(b)})).then(Zc))},e.Qc=function(a){var b=this;return vl(this,al(this).then((function(t){return Y(el(b),a)?function(a,b,t){return js(a,ys,{idToken:b,deleteProvider:t})}(b.a,t,[a]).then((function(t){var e={};return K(t.providerUserInfo||[],(function(t){e[t.providerId]=!0})),K(el(b),(function(t){e[t]||nl(b,t)})),e[Oo.PROVIDER_ID]||Gi(b,"phoneNumber",null),Yc(b)})):Yc(b).then((function(){throw new ur("no-such-provider")}))})))},e.delete=function(){var a=this;return vl(this,this.G().then((function(b){return js(a.a,gs,{idToken:b})})).then((function(){a.dispatchEvent(new Uc("userDeleted"))}))).then((function(){for(var b=0;b<a.I.length;b++)a.I[b].cancel("app-deleted");zc(a,null),Hc(a,null),a.I=[],a.B=!0,Gc(a),Gi(a,"refreshToken",null),a.i&&gc(a.i,a)}))},e.xb=function(a,b){return!!("linkViaPopup"==a&&(this.g||null)==b&&this.f||"reauthViaPopup"==a&&(this.g||null)==b&&this.f||"linkViaRedirect"==a&&(this.ca||null)==b||"reauthViaRedirect"==a&&(this.ca||null)==b)},e.ja=function(a,b,t,e){"linkViaPopup"!=a&&"reauthViaPopup"!=a||e!=(this.g||null)||(t&&this.v?this.v(t):b&&!t&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.Ba=function(a,b){return"linkViaPopup"==a&&b==(this.g||null)?N(this.Bb,this):"reauthViaPopup"==a&&b==(this.g||null)?N(this.Cb,this):"linkViaRedirect"==a&&(this.ca||null)==b?N(this.Bb,this):"reauthViaRedirect"==a&&(this.ca||null)==b?N(this.Cb,this):null},e.tc=function(a){var b=this;return fl(this,"linkViaPopup",a,(function(){return cl(b,a.providerId).then((function(){return Yc(b)}))}),!1)},e.Cc=function(a){return fl(this,"reauthViaPopup",a,(function(){return ue()}),!0)},e.uc=function(a){var b=this;return pl(this,"linkViaRedirect",a,(function(){return cl(b,a.providerId)}),!1)},e.Dc=function(a){return pl(this,"reauthViaRedirect",a,(function(){return ue()}),!0)},e.Bb=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return vl(this,this.G().then((function(g){return ls(n.a,{requestUri:a,postBody:e,sessionId:b,idToken:g})})).then((function(g){return r=ll(n,g,"link"),hl(n,g)})).then((function(){return r})))},e.Cb=function(a,b,t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return vl(this,ue().then((function(){return ro(hs(n.a,{requestUri:a,sessionId:b,postBody:e,tenantId:t}),n.uid)})).then((function(t){return r=ll(n,t,"reauthenticate"),sl(n,t),n.h=null,n.reload()})).then((function(){return r})),!0)},e.jb=function(a){var b=this,t=null;return vl(this,this.G().then((function(e){return t=e,void 0===a||nt(a)?{}:Pr(new _r(a))})).then((function(e){return b.a.jb(t,e)})).then((function(t){if(b.email!=t)return b.reload()})).then((function(){})))},e.toJSON=function(){return this.A()},e.A=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&at(a,this.metadata.A()),K(this.providerData,(function(b){a.providerData.push(function(a){var t,b={};for(t in a)a.hasOwnProperty(t)&&(b[t]=a[t]);return b}(b))})),a};var bl={name:"redirectUser",C:"session"};function wl(a){return ju(a.b,bl,a.a)}function Sl(a){this.a=a,this.b=Vu(),this.c=null,this.f=function(a){var b=Cl("local"),t=Cl("session"),e=Cl("none");return function(a,b,t){var e=Fu(b,t),n=Bu(a,b.C);return a.get(b,t).then((function(r){var g=null;try{g=Li(d.localStorage.getItem(e))}catch(t){}if(g&&!r)return d.localStorage.removeItem(e),a.set(b,g,t);g&&r&&"localStorage"!=n.type&&d.localStorage.removeItem(e)}))}(a.b,b,a.a).then((function(){return a.b.get(t,a.a)})).then((function(n){return n?t:a.b.get(e,a.a).then((function(t){return t?e:a.b.get(b,a.a).then((function(g){return g?b:a.b.get(_l,a.a).then((function(t){return t?Cl(t):b}))}))}))})).then((function(t){return a.c=t,Tl(a,t.C)})).s((function(){a.c||(a.c=b)}))}(this),this.b.addListener(Cl("local"),this.a,N(this.g,this))}function Tl(a,b){var t,e=[];for(t in Mu)Mu[t]!==b&&e.push(ju(a.b,Cl(Mu[t]),a.a));return e.push(ju(a.b,_l,a.a)),function(a){return new ee((function(b,t){var e=a.length,n=[];if(e)for(var r=function(p,u){e--,n[p]=u,0==e&&b(n)},g=function(p){t(p)},o=0;o<a.length;o++)le(a[o],O(r,o),g);else b(n)}))}(e)}Sl.prototype.g=function(){var a=this,b=Cl("local");Dl(this,(function(){return ue().then((function(){return a.c&&"local"!=a.c.C?a.b.get(b,a.a):null})).then((function(t){if(t)return Tl(a,"local").then((function(){a.c=b}))}))}))};var _l={name:"persistence",C:"session"};function Cl(a){return{name:"authUser",C:a}}function Il(a,b){return Dl(a,(function(){return a.b.set(a.c,b.A(),a.a)}))}function El(a){return Dl(a,(function(){return ju(a.b,a.c,a.a)}))}function kl(a,b){return Dl(a,(function(){return a.b.get(a.c,a.a).then((function(t){return t&&b&&(t.authDomain=b),gl(t||{})}))}))}function Dl(a,b){return a.f=a.f.then(b,b),a.f}function Al(a){if(this.l=!1,Gi(this,"settings",new Nc),Gi(this,"app",a),!Vl(this).options||!Vl(this).options.apiKey)throw new ur("invalid-api-key");a=r.a.SDK_VERSION?Ei(r.a.SDK_VERSION):null,this.b=new za(Vl(this).options&&Vl(this).options.apiKey,qr(jr),a),this.O=[],this.m=[],this.J=[],this.Ub=r.a.INTERNAL.createSubscribe(N(this.oc,this)),this.W=void 0,this.Vb=r.a.INTERNAL.createSubscribe(N(this.pc,this)),Ml(this,null),this.h=new Sl(Vl(this).options.apiKey+":"+Vl(this).name),this.w=new yl(Vl(this).options.apiKey+":"+Vl(this).name),this.Y=Ul(this,function(a){var b=Vl(a).options.authDomain,t=function(a){var b=function(a,b){return a.b.get(bl,a.a).then((function(t){return t&&b&&(t.authDomain=b),gl(t||{})}))}(a.w,Vl(a).options.authDomain).then((function(t){return(a.B=t)&&(t.da=a.w),wl(a.w)}));return Ul(a,b)}(a).then((function(){return kl(a.h,b)})).then((function(t){return t?(t.da=a.w,a.B&&(a.B.ca||null)==(t.ca||null)?t:t.reload().then((function(){return Il(a.h,t).then((function(){return t}))})).s((function(e){return"auth/network-request-failed"==e.code?t:El(a.h)}))):null})).then((function(t){Ml(a,t||null)}));return Ul(a,t)}(this)),this.i=Ul(this,function(a){return a.Y.then((function(){return Pl(a)})).s((function(){})).then((function(){if(!a.l)return a.ma()})).s((function(){})).then((function(){if(!a.l){a.ga=!0;var b=a.h;b.b.addListener(Cl("local"),b.a,a.ma)}}))}(this)),this.ga=!1,this.ma=N(this.Nc,this),this.ub=N(this.aa,this),this.wa=N(this.bc,this),this.xa=N(this.mc,this),this.Ja=N(this.nc,this),this.a=null,function(a){var b=Vl(a).options.authDomain,t=Vl(a).options.apiKey;b&&Ni()&&(a.Tb=a.Y.then((function(){if(!a.l){if(a.a=Cc(b,t,Vl(a).name),vc(a.a,a),Bl(a)&&Xc(Bl(a)),a.B){Xc(a.B);var e=a.B;e.ua(a.ha()),zc(e,a),$c(e=a.B,a.I),Hc(e,a),a.B=null}return a.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=N(this.delete,this),this.INTERNAL.logFramework=N(this.vc,this),this.o=0,mn.call(this),function(a){Object.defineProperty(a,"lc",{get:function(){return this.ha()},set:function(b){this.ua(b)},enumerable:!1}),a.Z=null,Object.defineProperty(a,"ti",{get:function(){return this.R()},set:function(b){this.nb(b)},enumerable:!1}),a.P=null}(this),this.I=[]}function Nl(a){He.call(this,"languageCodeChanged"),this.g=a}function Ol(a){He.call(this,"frameworkChanged"),this.c=a}function xl(a){return a.Tb||ce(new ur("auth-domain-config-required"))}function Pl(a){if(!Ni())return ce(new ur("operation-not-supported-in-this-environment"));var b=xl(a).then((function(){return a.a.oa()})).then((function(t){return t?Yi(t):null}));return Ul(a,b)}function Rl(a,b){var t={};return t.apiKey=Vl(a).options.apiKey,t.authDomain=Vl(a).options.authDomain,t.appName=Vl(a).name,a.Y.then((function(){return function(a,b,t,e){var n=new qc(a,b);return t&&(n.da=t),e&&$c(n,e),n.reload().then((function(){return n}))}(t,b,a.w,a.Ca())})).then((function(t){return Bl(a)&&t.uid==Bl(a).uid?(rl(Bl(a),t),a.aa(t)):(Ml(a,t),Xc(t),a.aa(t))})).then((function(){jl(a)}))}function Ml(a,b){Bl(a)&&(function(a,b){J(a.O,(function(t){return t==b}))}(Bl(a),a.ub),sn(Bl(a),"tokenChanged",a.wa),sn(Bl(a),"userDeleted",a.xa),sn(Bl(a),"userInvalidated",a.Ja),Gc(Bl(a))),b&&(b.O.push(a.ub),rn(b,"tokenChanged",a.wa),rn(b,"userDeleted",a.xa),rn(b,"userInvalidated",a.Ja),0<a.o&&Kc(b)),Gi(a,"currentUser",b),b&&(b.ua(a.ha()),zc(b,a),$c(b,a.I),Hc(b,a))}function Ll(a,b){var t=null,e=null;return Ul(a,b.then((function(n){return t=Po(n),e=Kr(n),Rl(a,n)})).then((function(){return Yi({user:Bl(a),credential:t,additionalUserInfo:e,operationType:"signIn"})})))}function Vl(a){return a.app}function Bl(a){return a.currentUser}function Fl(a){return Bl(a)&&Bl(a)._lat||null}function jl(a){if(a.ga){for(var b=0;b<a.m.length;b++)a.m[b]&&a.m[b](Fl(a));if(a.W!==a.getUid()&&a.J.length)for(a.W=a.getUid(),b=0;b<a.J.length;b++)a.J[b]&&a.J[b](Fl(a))}}function Ul(a,b){return a.O.push(b),b.ka((function(){X(a.O,b)})),b}function ql(){}function zl(){this.a={},this.b=1e12}Sl.prototype.mb=function(a){var b=null,t=this;return function(a){var b=new ur("invalid-persistence-type"),t=new ur("unsupported-persistence-type");t:{for(e in Mu)if(Mu[e]==a){var e=!0;break t}e=!1}if(!e||"string"!=typeof a)throw b;switch(wi()){case"ReactNative":if("session"===a)throw t;break;case"Node":if("none"!==a)throw t;break;default:if(!Ai()&&"none"!==a)throw t}}(a),Dl(this,(function(){return a!=t.c.C?t.b.get(t.c,t.a).then((function(e){return b=e,Tl(t,a)})).then((function(){if(t.c=Cl(a),b)return t.b.set(t.c,b,t.a)})):ue()}))},P(Al,mn),P(Nl,He),P(Ol,He),(e=Al.prototype).mb=function(a){return Ul(this,a=this.h.mb(a))},e.ua=function(a){this.Z===a||this.l||(this.Z=a,Ya(this.b,this.Z),this.dispatchEvent(new Nl(this.ha())))},e.ha=function(){return this.Z},e.Tc=function(){var a=d.navigator;this.ua(a&&(a.languages&&a.languages[0]||a.language||a.userLanguage)||null)},e.vc=function(a){this.I.push(a),Xa(this.b,r.a.SDK_VERSION?Ei(r.a.SDK_VERSION,this.I):null),this.dispatchEvent(new Ol(this.I))},e.Ca=function(){return tt(this.I)},e.nb=function(a){this.P===a||this.l||(this.P=a,this.b.b=this.P)},e.R=function(){return this.P},e.toJSON=function(){return{apiKey:Vl(this).options.apiKey,authDomain:Vl(this).options.authDomain,appName:Vl(this).name,currentUser:Bl(this)&&Bl(this).A()}},e.xb=function(a,b){switch(a){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==b&&!!this.f;default:return!1}},e.ja=function(a,b,t,e){"signInViaPopup"==a&&this.g==e&&(t&&this.v?this.v(t):b&&!t&&this.f&&this.f(b),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.Ba=function(a,b){return"signInViaRedirect"==a||"signInViaPopup"==a&&this.g==b&&this.f?N(this.ac,this):null},e.ac=function(a,b,t,e){var n=this;a={requestUri:a,postBody:e,sessionId:b,tenantId:t},this.c&&(this.c.cancel(),this.c=null);var r=null,g=null,o=cs(n.b,a).then((function(t){return r=Po(t),g=Kr(t),t}));return Ul(this,a=n.Y.then((function(){return o})).then((function(t){return Rl(n,t)})).then((function(){return Yi({user:Bl(n),credential:r,additionalUserInfo:g,operationType:"signIn"})})))},e.Lc=function(a){if(!Ni())return ce(new ur("operation-not-supported-in-this-environment"));var b=this,t=Wr(a.providerId),e=Vi(),n=null;(!Pi()||yi())&&Vl(this).options.authDomain&&a.isOAuthProvider&&(n=eu(Vl(this).options.authDomain,Vl(this).options.apiKey,Vl(this).name,"signInViaPopup",a,null,e,r.a.SDK_VERSION||null,null,null,this.R()));var o=fi(n,t&&t.sa,t&&t.ra);return Ul(this,t=xl(this).then((function(g){return ol(g,o,"signInViaPopup",a,e,!!n,b.R())})).then((function(){return new ee((function(g,t){b.ja("signInViaPopup",null,new ur("cancelled-popup-request"),b.g),b.f=g,b.v=t,b.g=e,b.c=Tc(b.a,b,"signInViaPopup",o,e)}))})).then((function(g){return o&&di(o),g?Yi(g):null})).s((function(g){throw o&&di(o),g})))},e.Mc=function(a){if(!Ni())return ce(new ur("operation-not-supported-in-this-environment"));var b=this;return Ul(this,xl(this).then((function(){return function(a){return Dl(a,(function(){return a.b.set(_l,a.c.C,a.a)}))}(b.h)})).then((function(){return Sc(b.a,"signInViaRedirect",a,void 0,b.R())})))},e.oa=function(){var a=this;return Pl(this).then((function(b){return a.a&&Ec(a.a.b),b})).s((function(b){throw a.a&&Ec(a.a.b),b}))},e.Rc=function(a){if(!a)return ce(new ur("null-user"));if(this.P!=a.tenantId)return ce(new ur("tenant-id-mismatch"));var b=this,t={};t.apiKey=Vl(this).options.apiKey,t.authDomain=Vl(this).options.authDomain,t.appName=Vl(this).name;var e=function(a,b,t,e){b=b||{apiKey:a.l,authDomain:a.o,appName:a.m};var n=a.b,r={};return r[Ha]=n.b,r.refreshToken=n.a,r.expiresIn=(n.c-x())/1e3,b=new qc(b,r),t&&(b.da=t),e&&$c(b,e),rl(b,a),b}(a,t,b.w,b.Ca());return Ul(this,this.i.then((function(){if(Vl(b).options.apiKey!=a.l)return e.reload()})).then((function(){return Bl(b)&&a.uid==Bl(b).uid?(rl(Bl(b),a),b.aa(a)):(Ml(b,e),Xc(e),b.aa(e))})).then((function(){jl(b)})))},e.pb=function(){var a=this;return Ul(this,this.i.then((function(){return a.a&&Ec(a.a.b),Bl(a)?(Ml(a,null),El(a.h).then((function(){jl(a)}))):ue()})))},e.Nc=function(){var a=this;return kl(this.h,Vl(this).options.authDomain).then((function(b){if(!a.l){var t;if(t=Bl(a)&&b){t=Bl(a).uid;var e=b.uid;t=null!=t&&""!==t&&null!=e&&""!==e&&t==e}if(t)return rl(Bl(a),b),Bl(a).G();(Bl(a)||b)&&(Ml(a,b),b&&(Xc(b),b.da=a.w),a.a&&vc(a.a,a),jl(a))}}))},e.aa=function(a){return Il(this.h,a)},e.bc=function(){jl(this),this.aa(Bl(this))},e.mc=function(){this.pb()},e.nc=function(){this.pb()},e.oc=function(a){var b=this;this.addAuthTokenListener((function(){a.next(Bl(b))}))},e.pc=function(a){var b=this;!function(a,b){a.J.push(b),Ul(a,a.i.then((function(){!a.l&&Y(a.J,b)&&a.W!==a.getUid()&&(a.W=a.getUid(),b(Fl(a)))})))}(this,(function(){a.next(Bl(b))}))},e.xc=function(a,b,t){var e=this;return this.ga&&Promise.resolve().then((function(){q(a)?a(Bl(e)):q(a.next)&&a.next(Bl(e))})),this.Ub(a,b,t)},e.wc=function(a,b,t){var e=this;return this.ga&&Promise.resolve().then((function(){e.W=e.getUid(),q(a)?a(Bl(e)):q(a.next)&&a.next(Bl(e))})),this.Vb(a,b,t)},e.cc=function(a){var b=this;return Ul(this,this.i.then((function(){return Bl(b)?Bl(b).G(a).then((function(t){return{accessToken:t}})):null})))},e.Hc=function(a){var b=this;return this.i.then((function(){return Ll(b,js(b.b,Ms,{token:a}))})).then((function(t){var e=t.user;return il(e,"isAnonymous",!1),b.aa(e),t}))},e.Ic=function(a,b){var t=this;return this.i.then((function(){return Ll(t,js(t.b,Ls,{email:a,password:b}))}))},e.Xb=function(a,b){var t=this;return this.i.then((function(){return Ll(t,js(t.b,ms,{email:a,password:b}))}))},e.Sa=function(a){var b=this;return this.i.then((function(){return Ll(b,a.na(b.b))}))},e.Gc=function(a){return Wi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(a)},e.ob=function(){var a=this;return this.i.then((function(){var b=Bl(a);if(b&&b.isAnonymous){var t=Yi({providerId:null,isNewUser:!1});return Yi({user:b,credential:null,additionalUserInfo:t,operationType:"signIn"})}return Ll(a,a.b.ob()).then((function(t){var e=t.user;return il(e,"isAnonymous",!0),a.aa(e),t}))}))},e.getUid=function(){return Bl(this)&&Bl(this).uid||null},e.Wb=function(a){this.addAuthTokenListener(a),this.o++,0<this.o&&Bl(this)&&Kc(Bl(this))},e.Ec=function(a){var b=this;K(this.m,(function(t){t==a&&b.o--})),0>this.o&&(this.o=0),0==this.o&&Bl(this)&&Gc(Bl(this)),this.removeAuthTokenListener(a)},e.addAuthTokenListener=function(a){var b=this;this.m.push(a),Ul(this,this.i.then((function(){b.l||Y(b.m,a)&&a(Fl(b))})))},e.removeAuthTokenListener=function(a){J(this.m,(function(b){return b==a}))},e.delete=function(){this.l=!0;for(var a=0;a<this.O.length;a++)this.O[a].cancel("app-deleted");return this.O=[],this.h&&(a=this.h).b.removeListener(Cl("local"),a.a,this.ma),this.a&&(gc(this.a,this),Ec(this.a.b)),Promise.resolve()},e.$b=function(a){return Ul(this,function(a,b){return js(a,vs,{identifier:b,continueUri:Oi()?ui():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,a))},e.qc=function(a){return!!ko(a)},e.lb=function(a,b){var t=this;return Ul(this,ue().then((function(){var t=new _r(b);if(!t.c)throw new ur("argument-error",Er+" must be true when sending sign in link to email");return Pr(t)})).then((function(e){return t.b.lb(a,e)})).then((function(){})))},e.Uc=function(a){return this.Ma(a).then((function(b){return b.data.email}))},e.ab=function(a,b){return Ul(this,this.b.ab(a,b).then((function(){})))},e.Ma=function(a){return Ul(this,this.b.Ma(a).then((function(b){return new Ji(b)})))},e.Ya=function(a){return Ul(this,this.b.Ya(a).then((function(){})))},e.kb=function(a,b){var t=this;return Ul(this,ue().then((function(){return void 0===b||nt(b)?{}:Pr(new _r(b))})).then((function(e){return t.b.kb(a,e)})).then((function(){})))},e.Kc=function(a,b){return Ul(this,xc(this,a,b,N(this.Sa,this)))},e.Jc=function(a,b){var t=this;return Ul(this,ue().then((function(){var e=b||ui(),n=Eo(a,e);if(!(e=ko(e)))throw new ur("argument-error","Invalid email link!");if(e.tenantId!==t.R())throw new ur("tenant-id-mismatch");return t.Sa(n)})))},ql.prototype.render=function(){},ql.prototype.reset=function(){},ql.prototype.getResponse=function(){},ql.prototype.execute=function(){};var $l=null;function Hl(a,b){return(b=Wl(b))&&a.a[b]||null}function Wl(a){return(a=void 0===a?1e12:a)?a.toString():null}function Kl(a,b){this.g=!1,this.c=b,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Xn(a);var t=this;this.i=function(){t.execute()},this.h?this.execute():rn(this.f,"click",this.i)}function Gl(a){if(a.g)throw Error("reCAPTCHA mock was already deleted!")}function Ql(){}zl.prototype.render=function(a,b){return this.a[this.b.toString()]=new Kl(a,b),this.b++},zl.prototype.reset=function(a){var b=Hl(this,a);a=Wl(a),b&&a&&(b.delete(),delete this.a[a])},zl.prototype.getResponse=function(a){return(a=Hl(this,a))?a.getResponse():null},zl.prototype.execute=function(a){(a=Hl(this,a))&&a.execute()},Kl.prototype.getResponse=function(){return Gl(this),this.b},Kl.prototype.execute=function(){Gl(this);var a=this;this.a||(this.a=setTimeout((function(){a.b=function(){for(var a=50,b=[];0<a;)b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return b.join("")}();var b=a.c.callback,t=a.c["expired-callback"];if(b)try{b(a.b)}catch(t){}a.a=setTimeout((function(){if(a.a=null,a.b=null,t)try{t()}catch(t){}a.h&&a.execute()}),6e4)}),500))},Kl.prototype.delete=function(){Gl(this),this.g=!0,clearTimeout(this.a),this.a=null,sn(this.f,"click",this.i)},Ql.prototype.g=function(){return $l||($l=new zl),ue($l)},Ql.prototype.c=function(){};var Yl=null;function Xl(){this.b=d.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Jl=new st(lt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Zl=new ji(3e4,6e4);Xl.prototype.g=function(a){var b=this;return new ee((function(t,e){var n=setTimeout((function(){e(new ur("network-request-failed"))}),Zl.get());!d.grecaptcha||a!==b.f&&!b.b?(d[b.a]=function(){if(d.grecaptcha){b.f=a;var g=d.grecaptcha.render;d.grecaptcha.render=function(t,e){return t=g(t,e),b.b++,t},clearTimeout(n),t(d.grecaptcha)}else clearTimeout(n),e(new ur("internal-error"));delete d[b.a]},ue(La(mt(Jl,{onload:b.a,hl:a||""}))).s((function(){clearTimeout(n),e(new ur("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(n),t(d.grecaptcha))}))},Xl.prototype.c=function(){this.b--};var eh=null;function nh(a,b,t,e,n,r,g){if(Gi(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=b,this.g=null,g?(Yl||(Yl=new Ql),g=Yl):(eh||(eh=new Xl),g=eh),this.m=g,this.a=t||{theme:"light",type:"image"},this.h=[],this.a[oh])throw new ur("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[ah],!d.document)throw new ur("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Xn(b)||!this.i&&Xn(b).hasChildNodes())throw new ur("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new za(a,r||null,n||null),this.v=e||function(){return null};var o=this;this.l=[];var c=this.a[ih];this.a[ih]=function(u){if(sh(o,u),"function"==typeof c)c(u);else if("string"==typeof c){var t=Di(c,d);"function"==typeof t&&t(u)}};var p=this.a[rh];this.a[rh]=function(){if(sh(o,null),"function"==typeof p)p();else if("string"==typeof p){var u=Di(p,d);"function"==typeof u&&u()}}}var ih="callback",rh="expired-callback",oh="sitekey",ah="size";function sh(a,b){for(var t=0;t<a.l.length;t++)try{a.l[t](b)}catch(t){}}function uh(a,b){return a.h.push(b),b.ka((function(){X(a.h,b)})),b}function ch(a){if(a.B)throw new ur("internal-error","RecaptchaVerifier instance has been destroyed.")}function lh(a,b,t){var e=!1;try{this.b=t||r.a.app()}catch(t){throw new ur("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new ur("invalid-api-key");t=this.b.options.apiKey;var n=this,o=null;try{o=this.b.auth().Ca()}catch(t){}try{e=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=r.a.SDK_VERSION?Ei(r.a.SDK_VERSION,o):null,nh.call(this,t,a,b,(function(){try{var g=n.b.auth().ha()}catch(t){g=null}return g}),o,qr(jr),e)}function hh(a,b,t,e){t:{t=Array.prototype.slice.call(t);for(var n=0,r=!1,g=0;g<b.length;g++)if(b[g].optional)r=!0;else{if(r)throw new ur("internal-error","Argument validator encountered a required argument after an optional argument.");n++}if(r=b.length,t.length<n||r<t.length)e="Expected "+(n==r?1==n?"1 argument":n+" arguments":n+"-"+r+" arguments")+" but got "+t.length+".";else{for(n=0;n<t.length;n++)if(r=b[n].optional&&void 0===t[n],!b[n].N(t[n])&&!r){if(b=b[n],0>n||n>=dh.length)throw new ur("internal-error","Argument validator received an unsupported number of arguments.");t=dh[n],e=(e?"":t+" argument ")+(b.name?'"'+b.name+'" ':"")+"must be "+b.M+".";break t}e=null}}if(e)throw new ur("argument-error",a+" failed: "+e)}(e=nh.prototype).Da=function(){var a=this;return this.f?this.f:this.f=uh(this,ue().then((function(){if(Oi()&&!bi())return vi();throw new ur("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return a.m.g(a.v())})).then((function(b){return a.g=b,js(a.o,Es,{})})).then((function(b){a.a[oh]=b.recaptchaSiteKey})).s((function(b){throw a.f=null,b})))},e.render=function(){ch(this);var a=this;return uh(this,this.Da().then((function(){if(null===a.c){var b=a.u;if(!a.i){var t=Xn(b);b=ti("DIV"),t.appendChild(b)}a.c=a.g.render(b,a.a)}return a.c})))},e.verify=function(){ch(this);var a=this;return uh(this,this.render().then((function(b){return new ee((function(t){var e=a.g.getResponse(b);if(e)t(e);else{var n=function(e){e&&(function(a,b){J(a.l,(function(t){return t==b}))}(a,n),t(e))};a.l.push(n),a.i&&a.g.execute(a.c)}}))})))},e.reset=function(){ch(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){ch(this),this.B=!0,this.m.c();for(var a=0;a<this.h.length;a++)this.h[a].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){a=Xn(this.u);for(var b;b=a.firstChild;)a.removeChild(b)}},P(lh,nh);var dh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function fh(a,b){return{name:a||"",M:"a valid string",optional:!!b,N:f}}function ph(a,b){return{name:a||"",M:"a boolean",optional:!!b,N:m}}function mh(a,b){return{name:a||"",M:"a valid object",optional:!!b,N:I}}function vh(a,b){return{name:a||"",M:"a function",optional:!!b,N:q}}function gh(a,b){return{name:a||"",M:"null",optional:!!b,N:T}}function yh(a){return{name:a?a+"Credential":"credential",M:a?"a valid "+a+" credential":"a valid credential",optional:!1,N:function(b){if(!b)return!1;var t=!a||b.providerId===a;return!(!b.na||!t)}}}function bh(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(a){return!!(a&&f(a.type)&&q(a.verify))}}}function wh(a,b,t,e){return{name:t||"",M:a.M+" or "+b.M,optional:!!e,N:function(t){return a.N(t)||b.N(t)}}}function Sh(a,b){for(var t in b){var e=b[t].name;a[e]=Ch(e,a[t],b[t].j)}}function Th(a,b){for(var t in b){var e=b[t].name;e!==t&&Object.defineProperty(a,e,{get:O((function(t){return this[t]}),t),set:O((function(t,e,g,n){hh(t,[g],[n],!0),this[e]=n}),e,t,b[t].Za),enumerable:!0})}}function _h(a,b,t,e){a[b]=Ch(b,t,e)}function Ch(a,b,t){function e(){var g=Array.prototype.slice.call(arguments);return hh(r,t,g),b.apply(this,g)}if(!t)return b;var n,r=function(a){return(a=a.split("."))[a.length-1]}(a);for(n in b)e[n]=b[n];for(n in b.prototype)e.prototype[n]=b.prototype[n];return e}Sh(Al.prototype,{Ya:{name:"applyActionCode",j:[fh("code")]},Ma:{name:"checkActionCode",j:[fh("code")]},ab:{name:"confirmPasswordReset",j:[fh("code"),fh("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[fh("email"),fh("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[fh("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[fh("emailLink")]},wc:{name:"onAuthStateChanged",j:[wh(mh(),vh(),"nextOrObserver"),vh("opt_error",!0),vh("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[wh(mh(),vh(),"nextOrObserver"),vh("opt_error",!0),vh("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[fh("email"),wh(mh("opt_actionCodeSettings",!0),gh(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[fh("email"),mh("actionCodeSettings")]},mb:{name:"setPersistence",j:[fh("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[yh()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[yh()]},Hc:{name:"signInWithCustomToken",j:[fh("token")]},Ic:{name:"signInWithEmailAndPassword",j:[fh("email"),fh("password")]},Jc:{name:"signInWithEmailLink",j:[fh("email"),fh("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[fh("phoneNumber"),bh()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[wh({name:"user",M:"an instance of Firebase User",optional:!1,N:function(b){return!!(b&&b instanceof qc)}},gh(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[fh(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[fh("code")]}}),Th(Al.prototype,{lc:{name:"languageCode",Za:wh(fh(),gh(),"languageCode")},ti:{name:"tenantId",Za:wh(fh(),gh(),"tenantId")}}),Al.Persistence=Mu,Al.Persistence.LOCAL="local",Al.Persistence.SESSION="session",Al.Persistence.NONE="none",Sh(qc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[ph("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[ph("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[yh()]},fb:{name:"linkWithCredential",j:[yh()]},sc:{name:"linkWithPhoneNumber",j:[fh("phoneNumber"),bh()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[yh()]},hb:{name:"reauthenticateWithCredential",j:[yh()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[fh("phoneNumber"),bh()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[wh(mh("opt_actionCodeSettings",!0),gh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[fh(null,!0)]},Qc:{name:"unlink",j:[fh("provider")]},rb:{name:"updateEmail",j:[fh("email")]},sb:{name:"updatePassword",j:[fh("password")]},Sc:{name:"updatePhoneNumber",j:[yh("phone")]},tb:{name:"updateProfile",j:[mh("profile")]}}),Sh(zl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Sh(ql.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Sh(ee.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Th(Nc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:ph("appVerificationDisabledForTesting")}}),Sh(Oc.prototype,{confirm:{name:"confirm",j:[fh("verificationCode")]}}),_h(io,"fromJSON",(function(a){a=f(a)?JSON.parse(a):a;for(var b,t=[lo,Co,Ao,so],e=0;e<t.length;e++)if(b=t[e](a))return b;return null}),[wh(fh(),mh(),"json")]),_h(Io,"credential",(function(a,b){return new _o(a,b)}),[fh("email"),fh("password")]),Sh(_o.prototype,{A:{name:"toJSON",j:[fh(null,!0)]}}),Sh(mo.prototype,{ya:{name:"addScope",j:[fh("scope")]},Ga:{name:"setCustomParameters",j:[mh("customOAuthParameters")]}}),_h(mo,"credential",vo,[wh(fh(),mh(),"token")]),_h(Io,"credentialWithLink",Eo,[fh("email"),fh("emailLink")]),Sh(go.prototype,{ya:{name:"addScope",j:[fh("scope")]},Ga:{name:"setCustomParameters",j:[mh("customOAuthParameters")]}}),_h(go,"credential",yo,[wh(fh(),mh(),"token")]),Sh(bo.prototype,{ya:{name:"addScope",j:[fh("scope")]},Ga:{name:"setCustomParameters",j:[mh("customOAuthParameters")]}}),_h(bo,"credential",wo,[wh(fh(),wh(mh(),gh()),"idToken"),wh(fh(),gh(),"accessToken",!0)]),Sh(So.prototype,{Ga:{name:"setCustomParameters",j:[mh("customOAuthParameters")]}}),_h(So,"credential",To,[wh(fh(),mh(),"token"),fh("secret",!0)]),Sh(po.prototype,{ya:{name:"addScope",j:[fh("scope")]},credential:{name:"credential",j:[wh(fh(),wh(mh(),gh()),"optionsOrIdToken"),wh(fh(),gh(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[mh("customOAuthParameters")]}}),Sh(uo.prototype,{A:{name:"toJSON",j:[fh(null,!0)]}}),Sh(oo.prototype,{A:{name:"toJSON",j:[fh(null,!0)]}}),_h(Oo,"credential",xo,[fh("verificationId"),fh("verificationCode")]),Sh(Oo.prototype,{Wa:{name:"verifyPhoneNumber",j:[fh("phoneNumber"),bh()]}}),Sh(Do.prototype,{A:{name:"toJSON",j:[fh(null,!0)]}}),Sh(ur.prototype,{toJSON:{name:"toJSON",j:[fh(null,!0)]}}),Sh(Uo.prototype,{toJSON:{name:"toJSON",j:[fh(null,!0)]}}),Sh(jo.prototype,{toJSON:{name:"toJSON",j:[fh(null,!0)]}}),Sh(lh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),_h(fr,"parseLink",Tr,[fh("link")]),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var a={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Al,AuthCredential:io,Error:ur};_h(a,"EmailAuthProvider",Io,[]),_h(a,"FacebookAuthProvider",mo,[]),_h(a,"GithubAuthProvider",go,[]),_h(a,"GoogleAuthProvider",bo,[]),_h(a,"TwitterAuthProvider",So,[]),_h(a,"OAuthProvider",po,[fh("providerId")]),_h(a,"SAMLAuthProvider",fo,[fh("providerId")]),_h(a,"PhoneAuthProvider",Oo,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(a){return!!(a&&a instanceof Al)}}]),_h(a,"RecaptchaVerifier",lh,[wh(fh(),{name:"",M:"an HTML element",optional:!1,N:function(a){return!!(a&&a instanceof Element)}},"recaptchaContainer"),mh("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(a){return!!(a&&a instanceof r.a.app.App)}}]),_h(a,"ActionCodeURL",fr,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(b){return new Al(b=b.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:a,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(b){return{getUid:N((b=b.getProvider("auth").getImmediate()).getUid,b),getToken:N(b.cc,b),addAuthTokenListener:N(b.Wb,b),removeAuthTokenListener:N(b.Ec,b)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.13.4"),r.a.INTERNAL.extendNamespace({User:qc})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(19))},183:function(t,e,n){"use strict";n(184)},184:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r,o,c=(r=n(6))&&"object"==typeof r&&"default"in r?r.default:r,l=n(38),h=n(118),d=n(119),component=n(185),f=n(186),m=c.SDK_VERSION,v=new h.Logger("@firebase/firestore");function y(){return v.logLevel===h.LogLevel.DEBUG?o.DEBUG:v.logLevel===h.LogLevel.SILENT?o.SILENT:o.ERROR}function w(t){switch(t){case o.DEBUG:v.logLevel=h.LogLevel.DEBUG;break;case o.ERROR:v.logLevel=h.LogLevel.ERROR;break;case o.SILENT:v.logLevel=h.LogLevel.SILENT;break;default:v.error("Firestore ("+m+"): Invalid value passed to `setLogLevel`")}}function S(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(v.logLevel<=h.LogLevel.DEBUG){var o=n.map(_);v.debug.apply(v,l.__spreadArrays(["Firestore ("+m+") ["+t+"]: "+e],o))}}function T(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(v.logLevel<=h.LogLevel.ERROR){var r=e.map(_);v.error.apply(v,l.__spreadArrays(["Firestore ("+m+"): "+t],r))}}function _(t){if("string"==typeof t)return t;var e=E.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function C(t){var e="FIRESTORE ("+m+") INTERNAL ASSERTION FAILED: "+t;throw T(e),new Error(e)}function I(t,e){t||C(e)}!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT"}(o||(o={}));var E=function(){function t(){}return t.setPlatform=function(e){t.platform&&C("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||C("Platform not set"),t.platform},t}();function k(){return E.getPlatform().emptyByteString}var D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=function(t){function e(code,e){var n=t.call(this,e)||this;return n.code=code,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}return l.__extends(e,t),e}(Error);function N(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new A(D.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function x(t,e){return void 0!==t?t:e}function P(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function R(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function M(t){for(var e in I(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function L(t,e){if(0!==e.length)throw new A(D.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+nt(e.length,"argument")+".")}function V(t,e,n){if(e.length!==n)throw new A(D.INVALID_ARGUMENT,"Function "+t+"() requires "+nt(n,"argument")+", but was called with "+nt(e.length,"argument")+".")}function B(t,e,n){if(e.length<n)throw new A(D.INVALID_ARGUMENT,"Function "+t+"() requires at least "+nt(n,"argument")+", but was called with "+nt(e.length,"argument")+".")}function F(t,e,n,r){if(e.length<n||e.length>r)throw new A(D.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+nt(e.length,"argument")+".")}function j(t,e,n,r){G(t,e,et(n)+" argument",r)}function U(t,e,n,r){void 0!==r&&j(t,e,n,r)}function z(t,e,n,r){G(t,e,n+" option",r)}function $(t,e,n,r){void 0!==r&&z(t,e,n,r)}function H(t,e,n,r,o){void 0!==r&&function(t,e,n,r,o){if(!(r instanceof Array))throw new A(D.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Y(r));for(var i=0;i<r.length;++i)if(!o(r[i]))throw new A(D.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+i+" was: "+Y(r[i]))}(t,e,n,r,o)}function W(t,e,n,input,r){void 0!==input&&function(t,e,n,input,r){for(var o=[],c=0,l=r;c<l.length;c++){var h=l[c];if(h===input)return;o.push(Y(h))}var d=Y(input);throw new A(D.INVALID_ARGUMENT,"Invalid value "+d+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,input,r)}function K(t,e,n,r){if(!e.some((function(element){return element===r})))throw new A(D.INVALID_ARGUMENT,"Invalid value "+Y(r)+" provided to function "+t+"() for its "+et(n)+" argument. Acceptable values: "+e.join(", "))}function G(t,e,n,input){if(!("object"===e?Q(input):"non-empty string"===e?"string"==typeof input&&""!==input:typeof input===e)){var r=Y(input);throw new A(D.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+r)}}function Q(input){return"object"==typeof input&&null!==input&&(Object.getPrototypeOf(input)===Object.prototype||null===Object.getPrototypeOf(input))}function Y(input){if(void 0===input)return"undefined";if(null===input)return"null";if("string"==typeof input)return input.length>20&&(input=input.substring(0,20)+"..."),JSON.stringify(input);if("number"==typeof input||"boolean"==typeof input)return""+input;if("object"==typeof input){if(input instanceof Array)return"an array";var t=function(input){if(input.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(input.constructor.toString());if(t&&t.length>1)return t[1]}return null}(input);return t?"a custom "+t+" object":"an object"}return"function"==typeof input?"a function":C("Unknown wrong type: "+typeof input)}function X(t,e,n){if(void 0===n)throw new A(D.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+et(e)+" argument, but it was undefined.")}function J(t,e,n){R(e,(function(e,r){if(n.indexOf(e)<0)throw new A(D.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Z(t,e,n,r){var o=Y(r);return new A(D.INVALID_ARGUMENT,"Function "+t+"() requires its "+et(n)+" argument to be a "+e+", but it was: "+o)}function tt(t,e,n){if(n<=0)throw new A(D.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+et(e)+" argument to be a positive number, but it was: "+n+".")}function et(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function nt(t,e){return t+" "+e+(1===t?"":"s")}var it=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",i=0;i<20;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return I(20===e.length,"Invalid auto ID: "+e),e},t}();function ot(t,e){return t<e?-1:t>e?1:0}function at(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].isEqual(e[i]))return!1;return!0}function st(s){return s+"\0"}function ut(){if("undefined"==typeof Uint8Array)throw new A(D.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ct(){if(!E.getPlatform().base64Available)throw new A(D.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var lt,ht=function(){function t(t){ct(),this._binaryString=t}return t.fromBase64String=function(e){V("Blob.fromBase64String",arguments,1),j("Blob.fromBase64String","string",1,e),ct();try{var n=E.getPlatform().atob(e);return new t(n)}catch(t){throw new A(D.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(V("Blob.fromUint8Array",arguments,1),ut(),!(e instanceof Uint8Array))throw Z("Blob.fromUint8Array","Uint8Array",1,e);var n=Array.prototype.map.call(e,(function(t){return String.fromCharCode(t)})).join("");return new t(n)},t.prototype.toBase64=function(){return V("Blob.toBase64",arguments,0),ct(),E.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){V("Blob.toUint8Array",arguments,0),ut();for(var t=new Uint8Array(this._binaryString.length),i=0;i<this._binaryString.length;i++)t[i]=this._binaryString.charCodeAt(i);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._approximateByteSize=function(){return 2*this._binaryString.length},t.prototype._compareTo=function(t){return ot(this._binaryString,t._binaryString)},t}(),ft=N(ht,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),pt=function(t,e,n,r,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=o},mt="(default)",vt=function(){function t(t,e){this.projectId=t,this.database=e||mt}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===mt},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return ot(this.projectId,t.projectId)||ot(this.database,t.database)},t}(),gt=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),yt=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&C("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&C("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,I(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return I(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return I(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return I(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0},t.prototype.forEach=function(t){for(var i=this.offset,e=this.limit();i<e;i++)t(this.segments[i])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=t.get(i),o=e.get(i);if(r<o)return-1;if(r>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(path){if(path.indexOf("//")>=0)throw new A(D.INVALID_ARGUMENT,"Invalid path ("+path+"). Paths must not contain // in them.");return new e(path.split("/").filter((function(t){return t.length>0})))},e.EMPTY_PATH=new e([]),e}(yt),wt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return wt.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(path){for(var t=[],n="",i=0,r=function(){if(0===n.length)throw new A(D.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;i<path.length;){var c=path[i];if("\\"===c){if(i+1===path.length)throw new A(D.INVALID_ARGUMENT,"Path has trailing escape character: "+path);var l=path[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new A(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+path);n+=l,i+=2}else"`"===c?(o=!o,i++):"."!==c||o?(n+=c,i++):(r(),i++)}if(r(),o)throw new A(D.INVALID_ARGUMENT,"Unterminated ` in path: "+path);return new e(t)},e.EMPTY_PATH=new e([]),e}(yt),Tt=function(){function t(path){this.path=path,I(t.isDocumentKey(path),"Invalid DocumentKey with an odd number of segments: "+path.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===bt.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return bt.comparator(t.path,e.path)},t.isDocumentKey=function(path){return path.length%2==0},t.fromSegments=function(e){return new t(new bt(e.slice()))},t.fromPathString=function(path){return new t(bt.fromString(path))},t.EMPTY=new t(new bt([])),t}(),_t=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection",t.RetryTransaction="retry_transaction"}(lt||(lt={}));var Ct=function(){function t(t,e,n,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new _t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,o,c){var l=new t(e,n,Date.now()+r,o,c);return l.start(r),l},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new A(D.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),It=function(){function t(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueAndInitiateShutdown=function(t){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(t){})):this.enqueueInternal(t)},t.prototype.enqueueInternal=function(t){var e=this,n=this.tail.then((function(){return e.operationInProgress=!0,t().catch((function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw T("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.operationInProgress=!1,t}))}));return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),I(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.timerIdsToSkip.indexOf(t)>-1&&(e=0);var o=Ct.createAndSchedule(this,t,e,n,(function(t){return r.removeDelayedOperation(t)}));return this.delayedOperations.push(o),o},t.prototype.verifyNotFailed=function(){this.failure&&C("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){I(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++){if(n[e].timerId===t)return!0}return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then((function(){I(t===lt.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort((function(a,b){return a.targetTimeMs-b.targetTimeMs}));for(var n=0,r=e.delayedOperations;n<r.length;n++){var o=r[n];if(o.skipDelay(),t!==lt.All&&o.timerId===t)break}return e.drain()}))},t.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);I(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),Et="",kt="",Dt="",At="";function Nt(path){for(var t="",i=0;i<path.length;i++)t.length>0&&(t=xt(t)),t=Ot(path.get(i),t);return xt(t)}function Ot(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=Et+Dt;break;case Et:n+=Et+At;break;default:n+=o}}return n}function xt(t){return t+Et+kt}function Pt(path){var t=path.length;if(I(t>=2,"Invalid path "+path),2===t)return I(path.charAt(0)===Et&&path.charAt(1)===kt,"Non-empty path "+path+" had length 2"),bt.EMPTY_PATH;for(var e=t-2,n=[],r="",o=0;o<t;){var c=path.indexOf(Et,o);switch((c<0||c>e)&&C('Invalid encoded resource path: "'+path+'"'),path.charAt(c+1)){case kt:var l=path.substring(o,c),h=void 0;0===r.length?h=l:(h=r+=l,r=""),n.push(h);break;case Dt:r+=path.substring(o,c),r+="\0";break;case At:r+=path.substring(o,c+1);break;default:C('Invalid encoded resource path: "'+path+'"')}o=c+2}return new bt(n)}var Rt=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new A(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new A(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new A(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new A(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?ot(this.nanoseconds,t.nanoseconds):ot(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),Mt=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new Rt(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new Rt(0,0)),t}(),Lt=function(){function t(t,e){this.comparator=t,this.root=e||Bt.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Vt(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Vt(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Vt(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Vt(this.root,t,this.comparator,!0)},t}(),Vt=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){I(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Bt=function(){function t(e,n,r,o,c){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=o?o:t.EMPTY,this.right=null!=c?c:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,o,c){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,o=n(t,r.key);return(r=o<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===o?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===n(e,o.key)){if(o.right.isEmpty())return t.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw C("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw C("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw C("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),Ft=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw C("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw C("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw C("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw C("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw C("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,o){return this},t.prototype.insert=function(t,e,n){return new Bt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();Bt.EMPTY=new Ft;var jt=function(){function t(t){this.comparator=t,this.data=new Lt(this.comparator)}return t.fromMapKeys=function(map){var e=new t(map.comparator);return map.forEach((function(t){e=e.add(t)})),e},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();){if(!t(n.getNext().key))return}},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ut(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ut(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var o=n.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(data){var e=new t(this.comparator);return e.data=data,e},t}(),Ut=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),qt=new Lt(Tt.comparator);function zt(){return qt}function $t(){return zt()}var Ht=new Lt(Tt.comparator);function Wt(){return Ht}var Kt=new Lt(Tt.comparator);function Gt(){return Kt}var Qt=new jt(Tt.comparator);function Yt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Qt,r=0,o=t;r<o.length;r++){var c=o[r];n=n.add(c)}return n}var Xt=new jt(ot);function Jt(){return Xt}var Zt=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,I(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&I(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;I(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var c=r[i];e=o.applyToRemoteDocument(e,c)}}return e},t.prototype.applyToLocalView=function(t,e){e&&I(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(h=r[n]).key.isEqual(t)&&(e=h.applyToLocalView(e,e,this.localWriteTime))}for(var o=e,c=0,l=this.mutations;c<l.length;c++){var h;(h=l[c]).key.isEqual(t)&&(e=h.applyToLocalView(e,o,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var o=e.applyToLocalView(r.key,t.get(r.key));o&&(n=n.insert(r.key,o))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Yt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&at(this.mutations,t.mutations)&&at(this.baseMutations,t.baseMutations)},t}(),te=function(){function t(t,e,n,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=o}return t.from=function(e,n,r,o){I(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var c=Gt(),l=e.mutations,i=0;i<l.length;i++)c=c.insert(l[i].key,r[i].version);return new t(e,n,r,o,c)},t}(),ee=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&C("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,o){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,o)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,o)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,o=0,c=!1;e.forEach((function(element){++r,element.next((function(){++o,c&&o===r&&t()}),(function(t){return n(t)}))})),c=!0,o===r&&t()}))},t.or=function(e){for(var p=t.resolve(!1),n=function(e){p=p.next((function(n){return n?t.resolve(n):e()}))},r=0,o=e;r<o.length;r++){n(o[r])}return p},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,s){r.push(e.call(n,t,s))})),this.waitFor(r)},t}(),ne="SimpleDb",ie=function(){function e(t){this.db=t,12.2===e.getIOSVersion(d.getUA())&&T("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.openOrCreate=function(t,n,r){return I(e.isAvailable(),"IndexedDB not supported in current environment."),S(ne,"Opening database:",t),new ee((function(o,c){var l=window.indexedDB.open(t,n);l.onsuccess=function(t){var n=t.target.result;o(new e(n))},l.onblocked=function(){c(new A(D.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=function(t){var e=t.target.error;"VersionError"===e.name?c(new A(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c(e)},l.onupgradeneeded=function(e){S(ne,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result;r.createOrUpgrade(n,l.transaction,e.oldVersion,pn).next((function(){S(ne,"Database upgrade to version "+pn+" complete")}))}})).toPromise()},e.delete=function(t){return S(ne,"Removing database:",t),se(window.indexedDB.deleteDatabase(t)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(e.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var t=d.getUA(),n=e.getIOSVersion(t),r=0<n&&n<10,o=e.getAndroidVersion(t),c=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||c)},e.isMockPersistence=function(){var e;return void 0!==t&&"YES"===(null===(e=t.env)||void 0===e?void 0:e.USE_MOCK_PERSISTENCE)},e.getStore=function(t,e){return t.store(e)},e.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},e.prototype.runTransaction=function(t,e,n){return l.__awaiter(this,void 0,void 0,(function(){var r,o,c,h,d,f;return l.__generator(this,(function(m){switch(m.label){case 0:r=t.startsWith("readonly"),o=t.endsWith("idempotent"),c=0,h=function(){var t,h,f,m;return l.__generator(this,(function(l){switch(l.label){case 0:++c,t=oe.open(d.db,r?"readonly":"readwrite",e),l.label=1;case 1:return l.trys.push([1,3,,4]),(h=n(t).catch((function(e){return t.abort(e),ee.reject(e)})).toPromise()).catch((function(){})),[4,t.completionPromise];case 2:return l.sent(),[2,{value:h}];case 3:return f=l.sent(),m=o&&"FirebaseError"!==f.name&&c<3,S(ne,"Transaction failed with error: %s. Retrying: %s.",f.message,m),m?[3,4]:[2,{value:Promise.reject(f)}];case 4:return[2]}}))},d=this,m.label=1;case 1:return[5,h()];case 2:return"object"==typeof(f=m.sent())?[2,f.value]:[3,1];case 3:return[2]}}))}))},e.prototype.close=function(){this.db.close()},e}(),re=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return se(this.dbCursor.delete())},t}(),oe=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new _t,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=ce(t.target.error);e.completionDeferred.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(S(ne,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return I(!!e,"Object store not part of transaction: "+t),new ae(e)},t}(),ae=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(S(ne,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(S(ne,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),se(n)},t.prototype.add=function(t){return S(ne,"ADD",this.store.name,t,t),se(this.store.add(t))},t.prototype.get=function(t){var e=this;return se(this.store.get(t)).next((function(n){return void 0===n&&(n=null),S(ne,"GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return S(ne,"DELETE",this.store.name,t),se(this.store.delete(t))},t.prototype.count=function(){return S(ne,"COUNT",this.store.name),se(this.store.count())},t.prototype.loadAll=function(t,e){var cursor=this.cursor(this.options(t,e)),n=[];return this.iterateCursor(cursor,(function(t,e){n.push(e)})).next((function(){return n}))},t.prototype.deleteAll=function(t,e){S(ne,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var cursor=this.cursor(n);return this.iterateCursor(cursor,(function(t,e,n){return n.delete()}))},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var cursor=this.cursor(n);return this.iterateCursor(cursor,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new ee((function(n,r){e.onerror=function(t){var e=ce(t.target.error);r(e)},e.onsuccess=function(e){var cursor=e.target.result;cursor?t(cursor.primaryKey,cursor.value).next((function(t){t?cursor.continue():n()})):n()}}))},t.prototype.iterateCursor=function(t,e){var n=[];return new ee((function(r,o){t.onerror=function(t){o(t.target.error)},t.onsuccess=function(t){var cursor=t.target.result;if(cursor){var o=new re(cursor),c=e(cursor.primaryKey,cursor.value,o);if(c instanceof ee){var l=c.catch((function(t){return o.done(),ee.reject(t)}));n.push(l)}o.isDone?r():null===o.skipToKey?cursor.continue():cursor.continue(o.skipToKey)}else r()}})).next((function(){return ee.waitFor(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(I(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function se(t){return new ee((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=ce(t.target.error);n(e)}}))}var ue=!1;function ce(t){var e=ie.getIOSVersion(d.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new A("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ue||(ue=!0,setTimeout((function(){throw r}),0)),r}}return t}var le=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,o){return I(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r,o)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pe(t).iterate({index:bn.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next((function(e){return e.lastStreamToken=fe(n),ve(t).put(e)}))},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next((function(t){return t.lastStreamToken}))},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next((function(n){return n.lastStreamToken=fe(e),ve(t).put(n)}))},t.prototype.addMutationBatch=function(t,e,n,r){var o=this,c=me(t),l=pe(t);return l.add({}).next((function(h){I("number"==typeof h,"Auto-generated key is not a number");for(var d=new Zt(h,e,n,r),f=o.serializer.toDbMutationBatch(o.userId,d),m=[],v=new jt((function(t,e){return ot(t.canonicalString(),e.canonicalString())})),y=0,w=r;y<w.length;y++){var S=w[y],T=wn.key(o.userId,S.key.path,h);v=v.add(S.key.path.popLast()),m.push(l.put(f)),m.push(c.put(T,wn.PLACEHOLDER))}return v.forEach((function(e){m.push(o.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){o.documentKeysByBatchId[h]=d.keys()})),ee.waitFor(m).next((function(){return d}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return pe(t).get(e).next((function(t){return t?(I(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null}))},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?ee.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]),c=null;return pe(t).iterate({index:bn.userMutationsIndex,range:o},(function(t,e,o){e.userId===n.userId&&(I(e.batchId>=r,"Should have found mutation after "+r),c=n.serializer.fromDbMutationBatch(e)),o.done()})).next((function(){return c}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return pe(t).iterate({index:bn.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pe(t).loadAll(bn.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.fromDbMutationBatch(t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=wn.prefixForPath(this.userId,e.path),o=IDBKeyRange.lowerBound(r),c=[];return me(t).iterate({range:o},(function(r,o,l){var h=r[0],d=r[1],f=r[2],path=Pt(d);if(h===n.userId&&e.path.isEqual(path))return pe(t).get(f).next((function(t){if(!t)throw C("Dangling document-mutation reference found: "+r+" which points to "+f);I(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+f),c.push(n.serializer.fromDbMutationBatch(t))}));l.done()})).next((function(){return c}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new jt(ot),o=[];return e.forEach((function(e){var c=wn.prefixForPath(n.userId,e.path),l=IDBKeyRange.lowerBound(c),h=me(t).iterate({range:l},(function(t,o,c){var l=t[0],h=t[1],d=t[2],path=Pt(h);l===n.userId&&e.path.isEqual(path)?r=r.add(d):c.done()}));o.push(h)})),ee.waitFor(o).next((function(){return n.lookupMutationBatches(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;I(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),I(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,o=r.length+1,c=wn.prefixForPath(this.userId,r),l=IDBKeyRange.lowerBound(c),h=new jt(ot);return me(t).iterate({range:l},(function(t,e,c){var l=t[0],d=t[1],f=t[2],path=Pt(d);l===n.userId&&r.isPrefixOf(path)?path.length===o&&(h=h.add(f)):c.done()})).next((function(){return n.lookupMutationBatches(t,h)}))},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],o=[];return e.forEach((function(e){o.push(pe(t).get(e).next((function(t){if(null===t)throw C("Dangling document-mutation reference found, which points to "+e);I(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))})))})),ee.waitFor(o).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return de(t.simpleDbTransaction,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.removeCachedMutationKeys(e.batchId)})),ee.forEach(r,(function(e){return n.referenceDelegate.removeMutationReference(t,e)}))}))},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return ee.resolve();var r=IDBKeyRange.lowerBound(wn.prefixForUser(e.userId)),o=[];return me(t).iterate({range:r},(function(t,n,r){if(t[0]===e.userId){var path=Pt(t[1]);o.push(path)}else r.done()})).next((function(){I(0===o.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+o.map((function(p){return p.canonicalString()})))}))}))},t.prototype.containsKey=function(t,e){return he(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return ve(t).get(this.userId).next((function(t){return t||new yn(e.userId,-1,"")}))},t}();function he(t,e,n){var r=wn.prefixForPath(e,n.path),o=r[1],c=IDBKeyRange.lowerBound(r),l=!1;return me(t).iterate({range:c,keysOnly:!0},(function(t,n,r){var c=t[0],h=t[1];t[2];c===e&&h===o&&(l=!0),r.done()})).next((function(){return l}))}function de(t,e,n){var r=t.store(bn.store),o=t.store(wn.store),c=[],l=IDBKeyRange.only(n.batchId),h=0,d=r.iterate({range:l},(function(t,e,n){return h++,n.delete()}));c.push(d.next((function(){I(1===h,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var f=[],m=0,v=n.mutations;m<v.length;m++){var y=v[m],w=wn.key(e,y.key.path,n.batchId);c.push(o.delete(w)),f.push(y.key)}return ee.waitFor(c).next((function(){return f}))}function fe(t){return t instanceof Uint8Array?(I(ie.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function pe(t){return ii.getStore(t,bn.store)}function me(t){return ii.getStore(t,wn.store)}function ve(t){return ii.getStore(t,yn.store)}var ge,ye=1;!function(t){t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine"}(ge||(ge={}));var be=function(){function t(t,e){this.generatorId=t,I((t&ye)===t,"Generator ID "+t+" contains more than "+ye+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<ye,t},t.prototype.after=function(t){return this.seek(t+(1<<ye)),this.next()},t.prototype.seek=function(t){I((t&ye)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forTargetCache=function(){return new t(ge.QueryCache,2)},t.forSyncEngine=function(){return new t(ge.SyncEngine)},t}(),we=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=be.forTargetCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next((function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next((function(t){return Mt.fromTimestamp(new Rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return _e(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next((function(o){return o.highestListenSequenceNumber=e,n&&(o.lastRemoteSnapshotVersion=n.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),r.saveMetadata(t,o)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.saveTargetData(t,e).next((function(){return n.retrieveMetadata(t).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(e,r),n.saveMetadata(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.saveTargetData(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Se(t).delete(e.targetId)})).next((function(){return n.retrieveMetadata(t)})).next((function(e){return I(e.targetCount>0,"Removing from an empty target cache"),e.targetCount-=1,n.saveMetadata(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,o=0,c=[];return Se(t).iterate((function(l,h){var d=r.serializer.fromDbTarget(h);d.sequenceNumber<=e&&null===n.get(d.targetId)&&(o++,c.push(r.removeTargetData(t,d)))})).next((function(){return ee.waitFor(c)})).next((function(){return o}))},t.prototype.forEachTarget=function(t,e){var n=this;return Se(t).iterate((function(t,r){var o=n.serializer.fromDbTarget(r);e(o)}))},t.prototype.retrieveMetadata=function(t){return Te(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,ii.getStore(n,kn.store)).put(kn.key,e);var n},t.prototype.saveTargetData=function(t,e){return Se(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromTargetData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.retrieveMetadata(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=this,r=e.canonicalId(),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),c=null;return Se(t).iterate({range:o,index:In.queryTargetsIndexName},(function(t,r,o){var l=n.serializer.fromDbTarget(r);e.isEqual(l.target)&&(c=l,o.done())})).next((function(){return c}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,o=[],c=Ce(t);return e.forEach((function(e){var path=Nt(e.path);o.push(c.put(new En(n,path))),o.push(r.referenceDelegate.addReference(t,e))})),ee.waitFor(o)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,o=Ce(t);return ee.forEach(e,(function(e){var path=Nt(e.path);return ee.waitFor([o.delete([n,path]),r.referenceDelegate.removeReference(t,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ce(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ce(t),o=Yt();return r.iterate({range:n,keysOnly:!0},(function(t,e,n){var path=Pt(t[1]),r=new Tt(path);o=o.add(r)})).next((function(){return o}))},t.prototype.containsKey=function(t,e){var path=Nt(e.path),n=IDBKeyRange.bound([path],[st(path)],!1,!0),r=0;return Ce(t).iterate({index:En.documentTargetsIndex,keysOnly:!0,range:n},(function(t,e,n){var o=t[0];t[1];0!==o&&(r++,n.done())})).next((function(){return r>0}))},t.prototype.getTargetDataForTarget=function(t,e){var n=this;return Se(t).get(e).next((function(t){return t?n.serializer.fromDbTarget(t):null}))},t}();function Se(t){return ii.getStore(t,In.store)}function Te(t){return ie.getStore(t,kn.store).get(kn.key).next((function(t){return I(null!==t,"Missing metadata row."),t}))}function _e(t){return Te(t).next((function(t){return t.highestListenSequenceNumber}))}function Ce(t){return ii.getStore(t,En.store)}var Ie,Ee=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new jt(St.comparator);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach((function(n){n.isPrefixOf(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),ke=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),De=function(t,e){this.version=t,this.transformResults=e};!function(t){t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t[t.Verify=4]="Verify"}(Ie||(Ie={}));var Ae,Ne,Oe=function(){function t(t,e){this.updateTime=t,this.exists=e,I(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof en&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof en:(I(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!=e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),xe=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&I(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof en?t.version:Mt.MIN},t}(),Pe=function(t){function e(e,n,r){var o=t.call(this)||this;return o.key=e,o.value=n,o.precondition=r,o.type=Ie.Set,o}return l.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),I(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new en(this.key,n,{hasCommittedMutations:!0},this.value)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=xe.getPostMutationVersion(t);return new en(this.key,r,{hasLocalMutations:!0},this.value)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(xe),Re=function(t){function e(e,data,n,r){var o=t.call(this)||this;return o.key=e,o.data=data,o.fieldMask=n,o.precondition=r,o.type=Ie.Patch,o}return l.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),I(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new rn(this.key,e.version);var n=this.patchDocument(t);return new en(this.key,e.version,{hasCommittedMutations:!0},n)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=xe.getPostMutationVersion(t),o=this.patchDocument(t);return new en(this.key,r,{hasLocalMutations:!0},o)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var data;return data=t instanceof en?t.data():Je.EMPTY,this.patchObject(data)},e.prototype.patchObject=function(data){var t=this;return this.fieldMask.fields.forEach((function(e){if(!e.isEmpty()){var n=t.data.field(e);data=null!==n?data.set(e,n):data.delete(e)}})),data},e}(xe),Me=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=Ie.Transform,r.precondition=Oe.exists(!0),r}return l.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),I(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new rn(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),o=e.version,c=this.transformObject(n.data(),r);return new en(this.key,o,{hasCommittedMutations:!0},c)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),o=this.localTransformResults(n,t,e),c=this.transformObject(r.data(),o);return new en(this.key,r.version,{hasLocalMutations:!0},c)},e.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var o=r[n],c=t instanceof en?t.field(o.field):void 0,l=o.transform.computeBaseValue(c||null);null!=l&&(e=null==e?Je.EMPTY.set(o.field,l):e.set(o.field,l))}return e},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&at(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){return I(t instanceof en,"Unknown MaybeDocument type "+t),I(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},e.prototype.serverTransformResults=function(t,e){var n=[];I(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var i=0;i<e.length;i++){var r=this.fieldTransforms[i],o=r.transform,c=null;t instanceof en&&(c=t.field(r.field)),n.push(o.applyToRemoteDocument(c,e[i]))}return n},e.prototype.localTransformResults=function(t,e,n){for(var r=[],o=0,c=this.fieldTransforms;o<c.length;o++){var l=c[o],h=l.transform,d=null;e instanceof en&&(d=e.field(l.field)),null===d&&n instanceof en&&(d=n.field(l.field)),r.push(h.applyToLocalView(d,t))}return r},e.prototype.transformObject=function(data,t){I(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var i=0;i<this.fieldTransforms.length;i++){var e=this.fieldTransforms[i].field;data=data.set(e,t[i])}return data},e}(xe),Le=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=Ie.Delete,r}return l.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),I(null==e.transformResults,"Transform results received by DeleteMutation."),new nn(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&I(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new nn(this.key,Mt.forDeletedDoc())):t},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(xe),Ve=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=Ie.Verify,r}return l.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){C("VerifyMutation should only be used in Transactions.")},e.prototype.applyToLocalView=function(t,e,n){C("VerifyMutation should only be used in Transactions.")},e.prototype.extractBaseValue=function(t){C("VerifyMutation should only be used in Transactions.")},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(xe);!function(t){t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue"}(Ae||(Ae={})),function(t){t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous"}(Ne||(Ne={}));var Be=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(Ne.Estimate,n);case"previous":return new t(Ne.Previous,n);case"none":case void 0:return new t(Ne.Default,n);default:return C("fromSnapshotOptions() called with invalid options.")}},t}(),Fe=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return I(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),ot(this.typeOrder,t.typeOrder)},t}(),je=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=Ae.NullValue,e.internalValue=null,e}return l.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 4},e.INSTANCE=new e,e}(Fe),Ue=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Ae.BooleanValue,n}return l.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?ot(this,t):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 4},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(Fe),qe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Ae.NumberValue,n}return l.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue,r=t.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(t);var n,r},e.prototype.approximateByteSize=function(){return 8},e}(Fe);function ze(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var $e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&ze(this.internalValue,t.internalValue)},e}(qe),He=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&ze(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(qe),We=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Ae.StringValue,n}return l.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?ot(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 2*this.internalValue.length},e}(Fe),Ke=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Ae.TimestampValue,n}return l.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof Ge?-1:this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 16},e}(Fe),Ge=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=Ae.TimestampValue,r}return l.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===Ne.Estimate?new Ke(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===Ne.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof Ke?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e.prototype.approximateByteSize=function(){return 16+(this.previousValue?this.previousValue.approximateByteSize():0)},e}(Fe),Qe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Ae.BlobValue,n}return l.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return this.internalValue._approximateByteSize()},e}(Fe),Ye=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=Ae.RefValue,r}return l.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:Tt.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return this.databaseId.projectId.length+this.databaseId.database.length+this.key.toString().length},e}(Fe),Xe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Ae.GeoPointValue,n}return l.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return 16},e}(Fe),Je=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Ae.ObjectValue,n}return l.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal((function(n,r){e[n]=r.value(t)})),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var o=n.getNext(),c=r.getNext();if(o.key!==c.key||!o.value.isEqual(c.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var o=n.getNext(),c=r.getNext(),l=ot(o.key,c.key)||o.value.compareTo(c.value);if(l)return l}return ot(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(path,t){if(I(!path.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===path.length)return this.setChild(path.firstSegment(),t);var n=this.child(path.firstSegment());n instanceof e||(n=e.EMPTY);var r=n.set(path.popFirst(),t);return this.setChild(path.firstSegment(),r)},e.prototype.delete=function(path){if(I(!path.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===path.length)return new e(this.internalValue.remove(path.firstSegment()));var t=this.child(path.firstSegment());if(t instanceof e){var n=t.delete(path.popFirst());return new e(this.internalValue.insert(path.firstSegment(),n))}return this},e.prototype.contains=function(path){return null!==this.field(path)},e.prototype.field=function(path){I(!path.isEmpty(),"Can't get field of empty path");var t=this;return path.forEach((function(n){t=t instanceof e?t.internalValue.get(n):null})),t},e.prototype.fieldMask=function(){var t=new jt(St.comparator);return this.internalValue.forEach((function(n,r){var o=new St([n]);if(r instanceof e){var c=r.fieldMask().fields;c.isEmpty()?t=t.add(o):c.forEach((function(e){t=t.add(o.child(e))}))}else t=t.add(o)})),Ee.fromSet(t)},e.prototype.approximateByteSize=function(){var t=0;return this.internalValue.inorderTraversal((function(e,n){t+=e.length+n.approximateByteSize()})),t},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new Lt(ot)),e}(Fe),Ze=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Ae.ArrayValue,n}return l.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map((function(e){return e.value(t)}))},e.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++){if(n[e].isEqual(t))return!0}return!1},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var i=0;i<this.internalValue.length;i++)if(!this.internalValue[i].isEqual(t.internalValue[i]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),i=0;i<n;i++){var r=this.internalValue[i].compareTo(t.internalValue[i]);if(r)return r}return ot(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.approximateByteSize=function(){return this.internalValue.reduce((function(t,e){return t+e.approximateByteSize()}),0)},e.prototype.toString=function(){return"["+this.internalValue.map((function(t){return t.toString()})).join(",")+"]"},e}(Fe),tn=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return Tt.comparator(t.key,e.key)},t}(),en=function(t){function e(e,n,r,o,c,l){var h=t.call(this,e,n)||this;return h.objectValue=o,h.proto=c,h.converter=l,I(void 0!==h.objectValue||void 0!==h.proto&&void 0!==h.converter,"If objectValue is not defined, proto and converter need to be set."),h.hasLocalMutations=!!r.hasLocalMutations,h.hasCommittedMutations=!!r.hasCommittedMutations,h}return l.__extends(e,t),e.prototype.field=function(path){if(this.objectValue)return this.objectValue.field(path);this.fieldValueCache||(this.fieldValueCache=new Map);var t=path.canonicalString(),e=this.fieldValueCache.get(t);if(void 0===e){var n=this.getProtoField(path);e=void 0===n?null:this.converter(n),this.fieldValueCache.set(t,e)}return e},e.prototype.data=function(){var t=this;if(!this.objectValue){var e=Je.EMPTY;R(this.proto.fields||{},(function(n,r){e=e.set(new St([n]),t.converter(r))})),this.objectValue=e,this.fieldValueCache=void 0}return this.objectValue},e.prototype.value=function(){return this.data().value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.getProtoField=function(path){I(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[path.firstSegment()]:void 0,i=1;i<path.length;++i){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[path.get(i)]}return t},e.compareByField=function(t,e,n){var r=e.field(t),o=n.field(t);return null!==r&&null!==o?r.compareTo(o):C("Trying to compare documents on fields that don't exist")},e}(tn),nn=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.hasCommittedMutations=!(!r||!r.hasCommittedMutations),o}return l.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(tn),rn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(tn),on=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,o=n;r<o.length;r++){var c=o[r],l=c[0],h=c[1];if(l.isEqual(t))return h}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(n[i][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(i,1),!0;return!1},t.prototype.forEach=function(t){R(this.inner,(function(e,n){for(var r=0,o=n;r<o.length;r++){var c=o[r],l=c[0],h=c[1];t(l,h)}}))},t.prototype.isEmpty=function(){return M(this.inner)},t}(),an=function(){function t(){this.changes=new on((function(t){return t.toString()})),this.changesApplied=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return I(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(t){I(void 0===this._readTime||this._readTime.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=t},enumerable:!0,configurable:!0}),t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.readTime=e,this.changes.set(t.key,t)},t.prototype.removeEntry=function(t,e){this.assertNotApplied(),e&&(this.readTime=e),this.changes.set(t,null)},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?ee.resolve(n):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){I(!this.changesApplied,"Changes have already been applied.")},t}(),sn=function(){function t(t,e){this.serializer=t,this.indexManager=e}return t.prototype.addEntry=function(t,e,n){return cn(t).put(ln(e),n)},t.prototype.removeEntry=function(t,e){var n=cn(t),r=ln(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.setMetadata(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return cn(t).get(ln(e)).next((function(t){return n.maybeDecodeDocument(t)}))},t.prototype.getSizedEntry=function(t,e){var n=this;return cn(t).get(ln(e)).next((function(t){var e=n.maybeDecodeDocument(t);return e?{maybeDocument:e,size:hn(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=$t();return this.forEachDbEntry(t,e,(function(t,e){var o=n.maybeDecodeDocument(e);r=r.insert(t,o)})).next((function(){return r}))},t.prototype.getSizedEntries=function(t,e){var n=this,r=$t(),o=new Lt(Tt.comparator);return this.forEachDbEntry(t,e,(function(t,e){var c=n.maybeDecodeDocument(e);c?(r=r.insert(t,c),o=o.insert(t,hn(e))):(r=r.insert(t,null),o=o.insert(t,0))})).next((function(){return{maybeDocuments:r,sizeMap:o}}))},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return ee.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),o=e.getIterator(),c=o.getNext();return cn(t).iterate({range:r},(function(t,e,r){for(var l=Tt.fromSegments(t);c&&Tt.comparator(c,l)<0;)n(c,null),c=o.getNext();c&&c.isEqual(l)&&(n(c,e),c=o.hasNext()?o.getNext():null),c?r.skip(c.path.toArray()):r.done()})).next((function(){for(;c;)n(c,null),c=o.hasNext()?o.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this;I(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var o=Wt(),c=e.path.length+1,l={};if(n.isEqual(Mt.MIN)){var h=e.path.toArray();l.range=IDBKeyRange.lowerBound(h)}else{var d=e.path.toArray(),f=this.serializer.toDbTimestampKey(n);l.range=IDBKeyRange.lowerBound([d,f],!0),l.index=_n.collectionReadTimeIndex}return cn(t).iterate(l,(function(t,n,l){if(t.length===c){var h=r.serializer.fromDbRemoteDocument(n);e.path.isPrefixOf(h.key.path)?h instanceof en&&e.matches(h)&&(o=o.insert(h.key,h)):l.done()}})).next((function(){return o}))},t.prototype.getNewDocumentChanges=function(t,e){var n=this,r=zt(),o=this.serializer.toDbTimestampKey(e),c=cn(t),l=IDBKeyRange.lowerBound(o,!0);return c.iterate({index:_n.readTimeIndex,range:l},(function(t,e){var c=n.serializer.fromDbRemoteDocument(e);r=r.insert(c.key,c),o=e.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(o)}}))},t.prototype.getLastReadTime=function(t){var e=this,n=cn(t),r=Mt.MIN;return n.iterate({index:_n.readTimeIndex,reverse:!0},(function(t,n,o){n.readTime&&(r=e.serializer.fromDbTimestampKey(n.readTime)),o.done()})).next((function(){return r}))},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return un(t).get(Cn.key).next((function(t){return I(!!t,"Missing document cache metadata"),t}))},t.prototype.setMetadata=function(t,e){return un(t).put(Cn.key,e)},t.prototype.maybeDecodeDocument=function(t){if(t){var e=this.serializer.fromDbRemoteDocument(t);return e instanceof nn&&e.version.isEqual(Mt.forDeletedDoc())?null:e}return null},t.RemoteDocumentChangeBuffer=function(t){function e(e,n){var r=t.call(this)||this;return r.documentCache=e,r.trackRemovals=n,r.documentSizes=new on((function(t){return t.toString()})),r}return l.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,o=new jt((function(t,e){return ot(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(c,l){var h=e.documentSizes.get(c);if(I(void 0!==h,"Cannot modify a document that wasn't read (for "+c+")"),l){I(!e.readTime.isEqual(Mt.MIN),"Cannot add a document with a read time of zero");var d=e.documentCache.serializer.toDbRemoteDocument(l,e.readTime);o=o.add(c.path.popLast());var f=hn(d);r+=f-h,n.push(e.documentCache.addEntry(t,c,d))}else if(r-=h,e.trackRemovals){var m=e.documentCache.serializer.toDbRemoteDocument(new nn(c,Mt.forDeletedDoc()),e.readTime);n.push(e.documentCache.addEntry(t,c,m))}else n.push(e.documentCache.removeEntry(t,c))})),o.forEach((function(r){n.push(e.documentCache.indexManager.addToCollectionParentIndex(t,r))})),n.push(this.documentCache.updateMetadata(t,r)),ee.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next((function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next((function(t){var e=t.maybeDocuments;return t.sizeMap.forEach((function(t,e){n.documentSizes.set(t,e)})),e}))},e}(an),t}();function un(t){return ii.getStore(t,Cn.store)}function cn(t){return ii.getStore(t,_n.store)}function ln(t){return t.path.toArray()}function hn(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw C("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var dn=function(){function t(){this.collectionParentIndex=new fn}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),ee.resolve()},t.prototype.getCollectionParents=function(t,e){return ee.resolve(this.collectionParentIndex.getEntries(e))},t}(),fn=function(){function t(){this.index={}}return t.prototype.add=function(t){I(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new jt(bt.comparator),o=!r.has(n);return this.index[e]=r.add(n),o},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new jt(bt.comparator)).toArray()},t}(),pn=9,mn=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var o=this;I(n<r&&n>=0&&r<=pn,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var c=new oe(e);n<1&&r>=1&&(function(t){t.createObjectStore(gn.store)}(t),function(t){t.createObjectStore(yn.store,{keyPath:yn.keyPath}),t.createObjectStore(bn.store,{keyPath:bn.keyPath,autoIncrement:!0}).createIndex(bn.userMutationsIndex,bn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(wn.store)}(t),An(t),function(t){t.createObjectStore(_n.store)}(t));var p=ee.resolve();return n<3&&r>=3&&(0!==n&&(!function(t){t.deleteObjectStore(En.store),t.deleteObjectStore(In.store),t.deleteObjectStore(kn.store)}(t),An(t)),p=p.next((function(){return function(t){var e=t.store(kn.store),n=new kn(0,0,Mt.MIN.toTimestamp(),0);return e.put(kn.key,n)}(c)}))),n<4&&r>=4&&(0!==n&&(p=p.next((function(){return function(t,e){return e.store(bn.store).loadAll().next((function(n){t.deleteObjectStore(bn.store),t.createObjectStore(bn.store,{keyPath:bn.keyPath,autoIncrement:!0}).createIndex(bn.userMutationsIndex,bn.userMutationsKeyPath,{unique:!0});var r=e.store(bn.store),o=n.map((function(t){return r.put(t)}));return ee.waitFor(o)}))}(t,c)}))),p=p.next((function(){!function(t){t.createObjectStore(Nn.store,{keyPath:Nn.keyPath})}(t)}))),n<5&&r>=5&&(p=p.next((function(){return o.removeAcknowledgedMutations(c)}))),n<6&&r>=6&&(p=p.next((function(){return function(t){t.createObjectStore(Cn.store)}(t),o.addDocumentGlobal(c)}))),n<7&&r>=7&&(p=p.next((function(){return o.ensureSequenceNumbers(c)}))),n<8&&r>=8&&(p=p.next((function(){return o.createCollectionParentIndex(t,c)}))),n<9&&r>=9&&(p=p.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(_n.store);e.createIndex(_n.readTimeIndex,_n.readTimeIndexPath,{unique:!1}),e.createIndex(_n.collectionReadTimeIndex,_n.collectionReadTimeIndexPath,{unique:!1})}(e)}))),p},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(_n.store).iterate((function(t,n){e+=hn(n)})).next((function(){var n=new Cn(e);return t.store(Cn.store).put(Cn.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(yn.store),r=t.store(bn.store);return n.loadAll().next((function(n){return ee.forEach(n,(function(n){var o=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(bn.userMutationsIndex,o).next((function(r){return ee.forEach(r,(function(r){I(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var o=e.serializer.fromDbMutationBatch(r);return de(t,n.userId,o).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(En.store),n=t.store(_n.store);return _e(t).next((function(t){var r=[];return n.iterate((function(n,o){var path=new bt(n),c=function(path){return[0,Nt(path)]}(path);r.push(e.get(c).next((function(n){return n?ee.resolve():function(path){return e.put(new En(0,Nt(path),t))}(path)})))})).next((function(){return ee.waitFor(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Dn.store,{keyPath:Dn.keyPath});var n=e.store(Dn.store),r=new fn,o=function(t){if(r.add(t)){var e=t.lastSegment(),o=t.popLast();return n.put({collectionId:e,parent:Nt(o)})}};return e.store(_n.store).iterate({keysOnly:!0},(function(t,e){var path=new bt(t);return o(path.popLast())})).next((function(){return e.store(wn.store).iterate({keysOnly:!0},(function(t,e){t[0];var n=t[1],path=(t[2],Pt(n));return o(path.popLast())}))}))},t}();var vn=function(t,e){this.seconds=t,this.nanoseconds=e},gn=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}();var yn=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),bn=function(){function t(t,e,n,r,o){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=o}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}();var wn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,path){return[t,Nt(path)]},t.key=function(t,path,e){return[t,Nt(path),e]},t.store="documentMutations",t.PLACEHOLDER=new t,t}();var Sn=function(path,t){this.path=path,this.readTime=t},Tn=function(path,t){this.path=path,this.version=t},_n=function(){function t(t,e,n,r,o,c){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=o,this.parentPath=c}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),Cn=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}();var In=function(){function t(t,e,n,r,o,c,l){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=c,this.query=l}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),En=function(){function t(t,path,e){this.targetId=t,this.path=path,this.sequenceNumber=e,I(0===t==(void 0!==e),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),kn=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),Dn=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function An(t){t.createObjectStore(En.store,{keyPath:En.keyPath}).createIndex(En.documentTargetsIndex,En.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(In.store,{keyPath:In.keyPath}).createIndex(In.queryTargetsIndexName,In.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(kn.store)}var Nn=function(){function t(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}return t.store="clientMetadata",t.keyPath="clientId",t}();var On,xn=[yn.store,bn.store,wn.store,_n.store,In.store,gn.store,kn.store,En.store],Pn=l.__spreadArrays(xn,[Nn.store]),Rn=l.__spreadArrays(Pn,[Cn.store]),Mn=l.__spreadArrays(Rn,[Dn.store]),Ln=function(){function t(){this.collectionParentsCache=new fn}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(I(e.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(e)){var r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener((function(){n.collectionParentsCache.add(e)}));var c={collectionId:r,parent:Nt(o)};return Vn(t).put(c)}return ee.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[st(e),""],!1,!0);return Vn(t).loadAll(r).next((function(t){for(var r=0,o=t;r<o.length;r++){var c=o[r];if(c.collectionId!==e)break;n.push(Pt(c.parent))}return n}))},t}();function Vn(t){return ii.getStore(t,Dn.store)}!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(On||(On={}));var Bn=function(){function t(t,e,n,r,o,c,l){void 0===o&&(o=Mt.MIN),void 0===c&&(c=Mt.MIN),void 0===l&&(l=k()),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=l}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken===t.resumeToken&&this.target.isEqual(t.target)},t}(),Fn=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Tt.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new nn(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){e=Tt.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version);return new rn(e,n)}return C("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t,e){var n=this.toDbTimestampKey(e),r=t.key.path.popLast().toArray();if(t instanceof en){var o=t.proto?t.proto:this.remoteSerializer.toDocument(t),c=t.hasCommittedMutations;return new _n(null,null,o,c,n,r)}if(t instanceof nn){var path=t.key.path.toArray(),l=this.toDbTimestamp(t.version);c=t.hasCommittedMutations;return new _n(null,new Sn(path,l),null,c,n,r)}if(t instanceof rn){path=t.key.path.toArray();var h=this.toDbTimestamp(t.version);return new _n(new Tn(path,h),null,null,!0,n,r)}return C("Unexpected MaybeDocument")},t.prototype.toDbTimestampKey=function(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]},t.prototype.fromDbTimestampKey=function(t){var e=new Rt(t[0],t[1]);return Mt.fromTimestamp(e)},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new vn(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new Rt(t.seconds,t.nanoseconds);return Mt.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.remoteSerializer.toMutation(t)})),o=e.mutations.map((function(t){return n.remoteSerializer.toMutation(t)}));return new bn(t,e.batchId,e.localWriteTime.toMillis(),r,o)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.remoteSerializer.fromMutation(t)})),r=t.mutations.map((function(t){return e.remoteSerializer.fromMutation(t)})),o=Rt.fromMillis(t.localWriteTimeMs);return new Zt(t.batchId,o,n,r)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach((function(t){e.push(Nt(t.path))})),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Yt(),n=0,r=t;n<r.length;n++){var o=r[n];e=e.add(new Tt(Pt(o)))}return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(t.lastLimboFreeSnapshotVersion):Mt.MIN,o=t.resumeToken;return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Bn(e,t.targetId,On.Listen,t.lastListenSequenceNumber,n,r,o)},t.prototype.toDbTarget=function(t){I(On.Listen===t.purpose,"Only queries with purpose "+On.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion),o=this.toDbTimestamp(t.lastLimboFreeSnapshotVersion);return e=t.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.target):this.remoteSerializer.toQueryTarget(t.target),t.resumeToken instanceof Uint8Array?(I(ie.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new In(t.targetId,t.target.canonicalId(),r,n,t.sequenceNumber,o,e)},t}();var jn=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.getDocumentInternal(t,e,r)}))},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next((function(t){for(var r=0,o=n;r<o.length;r++){t=o[r].applyToLocalView(e,t)}return t}))},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=$t();return e.forEach((function(t,e){for(var o=0,c=n;o<c.length;o++){e=c[o].applyToLocalView(t,e)}r=r.insert(t,e)})),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.getLocalViewOfDocuments(t,e)}))},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(r){var o=n.applyLocalMutationsToDocuments(t,e,r),c=zt();return o.forEach((function(t,e){e||(e=new nn(t,Mt.forDeletedDoc())),c=c.insert(t,e)})),c}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new Tt(e)).next((function(t){var e=Wt();return t instanceof en&&(e=e.insert(t.key,t)),e}))},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e,n){var r=this;I(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var o=e.collectionGroup,c=Wt();return this.indexManager.getCollectionParents(t,o).next((function(l){return ee.forEach(l,(function(l){var h=e.asCollectionQueryAtPath(l.child(o));return r.getDocumentsMatchingCollectionQuery(t,h,n).next((function(t){t.forEach((function(t,e){c=c.insert(t,e)}))}))})).next((function(){return c}))}))},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e,n){var r,o,c=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,c.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return o=e,c.addMissingBaseDocuments(t,o,r).next((function(t){r=t;for(var e=0,n=o;e<n.length;e++)for(var c=n[e],l=0,h=c.mutations;l<h.length;l++){var d=h[l],f=d.key,m=r.get(f),v=d.applyToLocalView(m,m,c.localWriteTime);r=v instanceof en?r.insert(f,v):r.remove(f)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=Yt(),o=0,c=e;o<c.length;o++)for(var l=0,h=c[o].mutations;l<h.length;l++){var d=h[l];d instanceof Re&&null===n.get(d.key)&&(r=r.add(d.key))}var f=n;return this.remoteDocumentCache.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof en&&(f=f.insert(t,e))})),f}))},t}(),Un="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qn=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),zn=function(){function t(){this.refsByKey=new jt($n.compareByKey),this.refsByTarget=new jt($n.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new $n(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.removeRef(new $n(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.removeReferencesForId=function(t){var e=this,n=Tt.EMPTY,r=new $n(n,t),o=new $n(n,t+1),c=[];return this.refsByTarget.forEachInRange([r,o],(function(t){e.removeRef(t),c.push(t.key)})),c},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach((function(e){return t.removeRef(e)}))},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=Tt.EMPTY,n=new $n(e,t),r=new $n(e,t+1),o=Yt();return this.refsByTarget.forEachInRange([n,r],(function(t){o=o.add(t.key)})),o},t.prototype.containsKey=function(t){var e=new $n(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),$n=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return Tt.comparator(t.key,e.key)||ot(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return ot(t.targetOrBatchId,e.targetOrBatchId)||Tt.comparator(t.key,e.key)},t}(),Hn="LocalStore",Wn=function(){function t(t,e,n){this.persistence=t,this.queryEngine=e,this.localViewReferences=new zn,this.targetDataByTarget=new Lt(ot),this.targetIdByTarget=new on((function(t){return t.canonicalId()})),this.lastDocumentChangeReadTime=Mt.MIN,I(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(n),this.remoteDocuments=t.getRemoteDocumentCache(),this.targetCache=t.getTargetCache(),this.localDocuments=new jn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return t.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},t.prototype.handleUserChange=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n,r,o=this;return l.__generator(this,(function(c){switch(c.label){case 0:return e=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var c;return o.mutationQueue.getAllMutationBatches(r).next((function(l){return c=l,e=o.persistence.getMutationQueue(t),n=new jn(o.remoteDocuments,e,o.persistence.getIndexManager()),e.getAllMutationBatches(r)})).next((function(t){for(var e=[],o=[],l=Yt(),h=0,d=c;h<d.length;h++){var f=d[h];e.push(f.batchId);for(var m=0,v=f.mutations;m<v.length;m++){var y=v[m];l=l.add(y.key)}}for(var w=0,S=t;w<S.length;w++){f=S[w];o.push(f.batchId);for(var T=0,_=f.mutations;T<_.length;T++){y=_[T];l=l.add(y.key)}}return n.getDocuments(r,l).next((function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:o}}))}))}))];case 1:return r=c.sent(),this.mutationQueue=e,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},t.prototype.localWrite=function(t){var e,n=this,r=Rt.now(),o=t.reduce((function(t,e){return t.add(e.key)}),Yt());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(c){return n.localDocuments.getDocuments(c,o).next((function(o){e=o;for(var l=[],h=0,d=t;h<d.length;h++){var f=d[h],m=f.extractBaseValue(e.get(f.key));null!=m&&l.push(new Re(f.key,m,m.fieldMask(),Oe.exists(!0)))}return n.mutationQueue.addMutationBatch(c,r,l,t)}))})).then((function(t){var n=t.applyToLocalDocumentSet(e);return{batchId:t.batchId,changes:n}}))},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return e.mutationQueue.lookupMutationKeys(n,t).next((function(t){return t?e.localDocuments.getDocuments(n,t):ee.resolve(null)}))}))},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=t.batch.keys(),o=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next((function(){return e.applyWriteToRemoteDocuments(n,t,o)})).next((function(){return o.apply(n)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next((function(t){return I(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},t.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(e){return t.mutationQueue.getLastStreamToken(e)}))},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return e.mutationQueue.setLastStreamToken(n,t)}))},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(e){return t.targetCache.getLastRemoteSnapshotVersion(e)}))},t.prototype.applyRemoteEvent=function(e){var n=this,r=e.snapshotVersion,o=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(c){var l=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});o=n.targetDataByTarget;var h=[];P(e.targetChanges,(function(e,l){var d=o.get(e);if(d){h.push(n.targetCache.removeMatchingKeys(c,l.removedDocuments,e).next((function(){return n.targetCache.addMatchingKeys(c,l.addedDocuments,e)})));var f=l.resumeToken;if(f.length>0){var m=d.withResumeToken(f,r).withSequenceNumber(c.currentSequenceNumber);o=o.insert(e,m),t.shouldPersistTargetData(d,m,l)&&h.push(n.targetCache.updateTargetData(c,m))}}}));var d=zt(),f=Yt();if(e.documentUpdates.forEach((function(t,e){f=f.add(t)})),h.push(l.getEntries(c,f).next((function(t){e.documentUpdates.forEach((function(o,f){var m=t.get(o);f instanceof nn&&f.version.isEqual(Mt.MIN)?(l.removeEntry(o,r),d=d.insert(o,f)):null==m||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(I(!Mt.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),l.addEntry(f,r),d=d.insert(o,f)):S(Hn,"Ignoring outdated watch update for ",o,". Current version:",m.version," Watch version:",f.version),e.resolvedLimboDocuments.has(o)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(c,o))}))}))),!r.isEqual(Mt.MIN)){var m=n.targetCache.getLastRemoteSnapshotVersion(c).next((function(t){return I(r.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+t),n.targetCache.setTargetsMetadata(c,c.currentSequenceNumber,r)}));h.push(m)}return ee.waitFor(h).next((function(){return l.apply(c)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(c,d)}))})).then((function(t){return n.targetDataByTarget=o,t}))},t.shouldPersistTargetData=function(t,e,n){return I(e.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===t.resumeToken.length||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},t.prototype.notifyLocalViewChanges=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var o=r[n],c=o.targetId;if(this.localViewReferences.addReferences(o.addedKeys,c),this.localViewReferences.removeReferences(o.removedKeys,c),!o.fromCache){var l=this.targetDataByTarget.get(c);I(null!==l,"Can't set limbo-free snapshot version for unknown target: "+c);var h=l.snapshotVersion,d=l.withLastLimboFreeSnapshotVersion(h);this.targetDataByTarget=this.targetDataByTarget.insert(c,d)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return ee.forEach(t,(function(t){return ee.forEach(t.removedKeys,(function(t){return e.persistence.referenceDelegate.removeReference(n,t)}))}))}))},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)}))},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return e.localDocuments.getDocument(n,t)}))},t.prototype.allocateTarget=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return e.targetCache.getTargetData(n,t).next((function(o){return o?(r=o,ee.resolve(r)):e.targetCache.allocateTargetId(n).next((function(o){return r=new Bn(t,o,On.Listen,n.currentSequenceNumber),e.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.targetDataByTarget.get(n.targetId)&&(e.targetDataByTarget=e.targetDataByTarget.insert(n.targetId,n),e.targetIdByTarget.set(t,n.targetId)),n}))},t.prototype.getTargetData=function(t,e){var n=this.targetIdByTarget.get(e);return void 0!==n?ee.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(t,e)},t.prototype.releaseTarget=function(t,e){var n=this,r=this.targetDataByTarget.get(t);I(null!==r,"Tried to release nonexistent target: "+t);var o=e?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",o,(function(o){var c=n.localViewReferences.removeReferencesForId(t);return e?ee.resolve():ee.forEach(c,(function(t){return n.persistence.referenceDelegate.removeReference(o,t)})).next((function(){n.persistence.referenceDelegate.removeTarget(o,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(r.target)}))},t.prototype.executeQuery=function(t,e){var n=this,r=Mt.MIN,o=Yt();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(c){return n.getTargetData(c,t.toTarget()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(c,t.targetId).next((function(t){o=t}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(c,t,e?r:Mt.MIN,e?o:Yt())})).next((function(t){return{documents:t,remoteKeys:o}}))}))},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return e.targetCache.getMatchingKeysForTargetId(n,t)}))},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,o=e.batch,c=o.keys(),l=ee.resolve();return c.forEach((function(r){l=l.next((function(){return n.getEntry(t,r)})).next((function(t){var c=t,l=e.docVersions.get(r);I(null!==l,"ackVersions should contain every doc in the write."),(!c||c.version.compareTo(l)<0)&&((c=o.applyToRemoteDocument(r,c,e))?n.addEntry(c,e.commitVersion):I(!t,"Mutation batch "+o+" applied to document "+t+" resulted in null"))}))})),l.next((function(){return r.mutationQueue.removeMutationBatch(t,o)}))},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return t.collect(n,e.targetDataByTarget)}))},t.prototype.getTarget=function(t){var e=this,n=this.targetDataByTarget.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return e.targetCache.getTargetDataForTarget(n,t).next((function(t){return t?t.target:null}))}))},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(e){return t.remoteDocuments.getNewDocumentChanges(e,t.lastDocumentChangeReadTime)})).then((function(e){var n=e.changedDocs,r=e.readTime;return t.lastDocumentChangeReadTime=r,n}))},t.prototype.synchronizeLastDocumentChangeReadTime=function(){return l.__awaiter(this,void 0,void 0,(function(){var t,e=this;return l.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.remoteDocuments.getLastReadTime(t)}))];case 1:return t.lastDocumentChangeReadTime=n.sent(),[2]}}))}))},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}();function Kn(t){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){if(t.code!==D.FAILED_PRECONDITION||t.message!==Un)throw t;return S(Hn,"Unexpectedly lost primary lease"),[2]}))}))}function Gn(t,e){var n=t[0],r=t[1],o=e[0],c=e[1],l=ot(n,o);return 0===l?ot(r,c):l}var Qn=function(){function t(t){this.maxElements=t,this.buffer=new jt(Gn),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Gn(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Yn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xn=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),Jn=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}return t.prototype.start=function(){I(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Xn.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;I(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;S("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(lt.LruGarbageCollection,e,(function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then((function(){return t.scheduleGC()})).catch(Kn)}))},t}(),Zn=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return ee.resolve(gt.INVALID);var r=new Qn(e);return this.delegate.forEachTarget(t,(function(t){return r.addElement(t.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,(function(t){return r.addElement(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===Xn.COLLECTION_DISABLED?(S("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(Yn)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(S("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Yn):n.runGarbageCollection(t,e)}))},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,c,l,h,d,f,m=this,v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>m.params.maximumSequenceNumbersToCollect?(S("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+m.params.maximumSequenceNumbersToCollect+" from "+e),r=m.params.maximumSequenceNumbersToCollect):r=e,l=Date.now(),m.nthSequenceNumber(t,r)})).next((function(r){return n=r,h=Date.now(),m.removeTargets(t,n,e)})).next((function(e){return c=e,d=Date.now(),m.removeOrphanedDocuments(t,n)})).next((function(t){(f=Date.now(),y()<=o.DEBUG)&&S("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(l-v)+"ms\n\tDetermined least recently used "+r+" in "+(h-l)+"ms\n\tRemoved "+c+" targets in "+(d-h)+"ms\n\tRemoved "+t+" documents in "+(f-d)+"ms\nTotal Duration: "+(f-v)+"ms");return ee.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:c,documentsRemoved:t})}))},t}(),ti="IndexedDbPersistence",ei="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",ni=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return l.__extends(e,t),e}(qn),ii=function(){function t(e,n,r,o,c,l,h,d){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.queue=l,this.sequenceNumberSyncer=d,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},this.referenceDelegate=new ai(this,c),this.dbName=n+t.MAIN_DATABASE,this.serializer=new Fn(h),this.document=o.document,this.targetCache=new we(this.referenceDelegate,this.serializer),this.indexManager=new Ln,this.remoteDocumentCache=new sn(this.serializer,this.indexManager),!o.window||!o.window.localStorage)throw new A(D.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=o.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof ni)return ie.getStore(t.simpleDbTransaction,e);throw C("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e){return l.__awaiter(this,void 0,void 0,(function(){var n;return l.__generator(this,(function(r){switch(r.label){case 0:if(!t.isAvailable())throw new A(D.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},t.prototype.start=function(){var t=this;return I(!this.started,"IndexedDbPersistence double-started!"),I(null!==this.window,"Expected 'window' to be defined"),ie.openOrCreate(this.dbName,pn,new mn(this.serializer)).then((function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()})).then((function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.simpleDb.runTransaction("readonly-idempotent",[kn.store],(function(t){return _e(t)}))})).then((function(e){t.listenSequence=new gt(e,t.sequenceNumberSyncer)})).then((function(){t._started=!0})).catch((function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)}))},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return l.__awaiter(e,void 0,void 0,(function(){return l.__generator(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener((function(n){return l.__awaiter(e,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget((function(){return l.__awaiter(e,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite-idempotent",Mn,(function(e){return oi(e).put(new Nn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next((function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget((function(){return t.primaryStateListener(!1)})))}))})).next((function(){return t.canActAsPrimary(e)})).next((function(n){return t.isPrimary&&!n?t.releasePrimaryLeaseIfHeld(e).next((function(){return!1})):!!n&&t.acquireOrExtendPrimaryLease(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return S(ti,"Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.queue.enqueueAndForget((function(){return t.primaryStateListener(e)})),t.isPrimary=e}))},t.prototype.verifyPrimaryLease=function(t){var e=this;return ri(t).get(gn.key).next((function(t){return ee.resolve(e.isLocalClient(t))}))},t.prototype.removeClientMetadata=function(t){return oi(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return l.__awaiter(this,void 0,void 0,(function(){var e=this;return l.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=t.getStore(n,Nn.store);return r.loadAll().next((function(t){var n=e.filterActiveClients(t,18e5),o=t.filter((function(t){return-1===n.indexOf(t)}));return ee.forEach(o,(function(t){return r.delete(t.clientId)})).next((function(){return o}))}))}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.zombiedClientLocalStorageKey(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(lt.ClientMetadataRefresh,4e3,(function(){return t.updateClientMetadataAndTryBecomePrimary().then((function(){return t.maybeGarbageCollectMultiClientState()})).then((function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return ri(t).get(gn.key).next((function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new A(D.FAILED_PRECONDITION,ei);return!1}}return!(!e.networkEnabled||!e.inForeground)||oi(t).loadAll().next((function(t){return void 0===e.filterActiveClients(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,o=e.networkEnabled===t.networkEnabled;if(n||r&&o)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&S(ti,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return l.__awaiter(this,void 0,void 0,(function(){var t=this;return l.__generator(this,(function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[gn.store,Nn.store],(function(e){return t.releasePrimaryLeaseIfHeld(e).next((function(){return t.removeClientMetadata(e)}))}))];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter((function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)}))},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly-idempotent",[Nn.store],(function(e){return oi(e).loadAll().next((function(e){return t.filterActiveClients(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return l.__awaiter(this,void 0,void 0,(function(){var n;return l.__generator(this,(function(r){switch(r.label){case 0:return t.isAvailable()?(n=e+t.MAIN_DATABASE,[4,ie.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return I(this.started,"Cannot initialize MutationQueue before persistence is started."),le.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getTargetCache=function(){return I(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},t.prototype.getRemoteDocumentCache=function(){return I(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return I(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;S(ti,"Starting transaction:",t);var o,c=e.endsWith("idempotent"),l=e.startsWith("readonly")?c?"readonly-idempotent":"readonly":c?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(l,Mn,(function(c){return o=new ni(c,r.listenSequence.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?r.verifyPrimaryLease(c).next((function(t){return!!t||r.canActAsPrimary(c)})).next((function(e){if(!e)throw T("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new A(D.FAILED_PRECONDITION,Un);return n(o)})).next((function(t){return r.acquireOrExtendPrimaryLease(c).next((function(){return t}))})):r.verifyAllowTabSynchronization(c).next((function(){return n(o)}))})).then((function(t){return o.raiseOnCommittedEvent(),t}))},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return ri(t).get(gn.key).next((function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new A(D.FAILED_PRECONDITION,ei)}))},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new gn(this.clientId,this.allowTabSynchronization,Date.now());return ri(t).put(gn.key,e)},t.isAvailable=function(){return ie.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=ri(t);return n.get(gn.key).next((function(t){return e.isLocalClient(t)?(S(ti,"Releasing primary lease."),n.delete(gn.key)):ee.resolve()}))},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e)&&(!(t>n)||(T("Detected an update time that is in the future: "+t+" > "+n),!1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(I(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(I("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return S(ti,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return T(ti,"Failed to get zombied client id.",t),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){T("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function ri(t){return t.store(gn.store)}function oi(t){return t.store(Nn.store)}var ai=function(){function t(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new Zn(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,(function(t,n){return e(n)}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return si(t,e)},t.prototype.removeReference=function(t,e){return si(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return si(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?ee.resolve(!0):function(t,e){var n=!1;return ve(t).iterateSerial((function(r){return he(t,r,e).next((function(t){return t&&(n=!0),ee.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[],c=0;return this.forEachOrphanedDocument(t,(function(l,h){if(h<=e){var p=n.isPinned(t,l).next((function(e){if(!e)return c++,r.getEntry(t,l).next((function(){return r.removeEntry(l),Ce(t).delete([0,Nt(l.path)])}))}));o.push(p)}})).next((function(){return ee.waitFor(o)})).next((function(){return r.apply(t)})).next((function(){return c}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return si(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=Ce(t),o=gt.INVALID;return r.iterate({index:En.documentTargetsIndex},(function(t,r){var c=t[0],path=(t[1],r.path),l=r.sequenceNumber;0===c?(o!==gt.INVALID&&e(new Tt(Pt(n)),o),o=l,n=path):o=gt.INVALID})).next((function(){o!==gt.INVALID&&e(new Tt(Pt(n)),o)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function si(t,e){return Ce(t).put(function(t,e){return new En(0,Nt(t.path),e)}(e,t.currentSequenceNumber))}var ui=Number,ci=ui.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),hi=ui.MAX_SAFE_INTEGER||Math.pow(2,53)-1,di=ui.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function fi(t){return null==t}function pi(t){return di(t)&&t<=hi&&t>=ci}var mi,vi=function(){function t(path,t,e,n,r,o,c){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===c&&(c=null),this.path=path,this.collectionGroup=t,this.orderBy=e,this.filters=n,this.limit=r,this.startAt=o,this.endAt=c,this.memoizedCanonicalId=null}return t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){t+=n[e].canonicalId(),t+=","}t+="|ob:";for(var r=0,o=this.orderBy;r<o.length;r++){t+=o[r].canonicalId(),t+=","}fi(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t=this.path.canonicalString();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),fi(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var i=0;i<this.orderBy.length;i++)if(!this.orderBy[i].isEqual(t.orderBy[i]))return!1;if(this.filters.length!==t.filters.length)return!1;for(i=0;i<this.filters.length;i++)if(!this.filters[i].isEqual(t.filters[i]))return!1;return this.collectionGroup===t.collectionGroup&&(!!this.path.isEqual(t.path)&&(!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)))},t.prototype.isDocumentQuery=function(){return Tt.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}();!function(t){t.First="F",t.Last="L"}(mi||(mi={}));var gi=function(){function t(path,t,e,n,r,o,c,l){void 0===t&&(t=null),void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===o&&(o=mi.First),void 0===c&&(c=null),void 0===l&&(l=null),this.path=path,this.collectionGroup=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.limitType=o,this.startAt=c,this.endAt=l,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(path){return new t(path)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[Ai]:this.memoizedOrderBy=[new Di(t),Ai];else{I(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,o=this.explicitOrderBy;r<o.length;r++){var c=o[r];this.memoizedOrderBy.push(c),c.field.isKeyField()&&(n=!0)}if(!n){var l=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Ei.ASCENDING;this.memoizedOrderBy.push(l===Ei.ASCENDING?Ai:Ni)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(filter){I(null==this.getInequalityFilterField()||!(filter instanceof wi)||!filter.isInequality()||filter.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),I(!this.isDocumentQuery(),"No filtering allowed for document query");var e=this.filters.concat([filter]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),e,this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){I(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.withLimitToFirst=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,mi.First,this.startAt,this.endAt)},t.prototype.withLimitToLast=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,mi.Last,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(path){return new t(path,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},t.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},t.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},t.prototype.isEqual=function(t){return this.toTarget().isEqual(t.toTarget())&&this.limitType===t.limitType},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,o=this.orderBy;r<o.length;r++){var c=o[r],l=c.compare(t,e);if(0!==l)return l;n=n||c.field.isKeyField()}return I(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimitToFirst=function(){return!fi(this.limit)&&this.limitType===mi.First},t.prototype.hasLimitToLast=function(){return!fi(this.limit)&&this.limitType===mi.Last},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var filter=e[t];if(filter instanceof wi&&filter.isInequality())return filter.field}return null},t.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var filter=n[e];if(filter instanceof wi&&t.indexOf(filter.op)>=0)return filter.op}return null},t.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===mi.First)this.memoizedTarget=new vi(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],o=r.dir===Ei.DESCENDING?Ei.ASCENDING:Ei.DESCENDING;t.push(new Di(r.field,o))}var c=this.endAt?new ki(this.endAt.position,!this.endAt.before):null,l=this.startAt?new ki(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new vi(this.path,this.collectionGroup,t,this.filters,this.limit,c,l)}return this.memoizedTarget},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):Tt.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){if(!n[e].matches(t))return!1}return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){I(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),yi=function(){},bi=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return C("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),wi=function(t){function e(e,n,r){var o=t.call(this)||this;return o.field=e,o.op=n,o.value=r,o}return l.__extends(e,t),e.create=function(t,n,r){if(t.isKeyField())return n===bi.IN?(I(r instanceof Ze,"Comparing on key with IN, but filter value not an ArrayValue"),I(r.internalValue.every((function(t){return t instanceof Ye})),"Comparing on key with IN, but an array value was not a RefValue"),new Ti(t,r)):(I(r instanceof Ye,"Comparing on key, but filter value not a RefValue"),I(n!==bi.ARRAY_CONTAINS&&n!==bi.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new Si(t,n,r));if(r.isEqual(je.INSTANCE)){if(n!==bi.EQUAL)throw new A(D.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(r.isEqual(He.NAN)){if(n!==bi.EQUAL)throw new A(D.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===bi.ARRAY_CONTAINS?new _i(t,r):n===bi.IN?(I(r instanceof Ze,"IN filter has invalid value: "+r.toString()),new Ci(t,r)):n===bi.ARRAY_CONTAINS_ANY?(I(r instanceof Ze,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Ii(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case bi.LESS_THAN:return t<0;case bi.LESS_THAN_OR_EQUAL:return t<=0;case bi.EQUAL:return 0===t;case bi.GREATER_THAN:return t>0;case bi.GREATER_THAN_OR_EQUAL:return t>=0;default:return C("Unknown FieldFilter operator: "+this.op)}},e.prototype.isInequality=function(){return[bi.LESS_THAN,bi.LESS_THAN_OR_EQUAL,bi.GREATER_THAN,bi.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&(this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value))},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(yi),Si=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=Tt.comparator(t.key,e.key);return this.matchesComparison(n)},e}(wi),Ti=function(t){function e(e,n){var r=t.call(this,e,bi.IN,n)||this;return r.value=n,r}return l.__extends(e,t),e.prototype.matches=function(t){return this.value.internalValue.some((function(e){return t.key.isEqual(e.key)}))},e}(wi),_i=function(t){function e(e,n){return t.call(this,e,bi.ARRAY_CONTAINS,n)||this}return l.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Ze&&e.contains(this.value)},e}(wi),Ci=function(t){function e(e,n){var r=t.call(this,e,bi.IN,n)||this;return r.value=n,r}return l.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}(wi),Ii=function(t){function e(e,n){var r=t.call(this,e,bi.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return l.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Ze&&n.internalValue.some((function(t){return e.value.contains(t)}))},e}(wi),Ei=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),ki=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){t+=n[e].toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){I(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,i=0;i<this.position.length;i++){var r=t[i],component=this.position[i];if(r.field.isKeyField())I(component instanceof Ye,"Bound has a non-key value where the key path is being used."),n=Tt.comparator(component.key,e.key);else{var o=e.field(r.field);I(null!==o,"Field should exist since document matched the orderBy already."),n=component.compareTo(o)}if(r.dir===Ei.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var i=0;i<this.position.length;i++){var e=this.position[i],n=t.position[i];if(!e.isEqual(n))return!1}return!0},t}(),Di=function(){function t(t,e){this.field=t,void 0===e&&(e=Ei.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?en.compareByKey(t,e):en.compareByField(this.field,t,e);switch(this.dir){case Ei.ASCENDING:return n;case Ei.DESCENDING:return-1*n;default:return C("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Ai=new Di(St.keyField(),Ei.ASCENDING),Ni=new Di(St.keyField(),Ei.DESCENDING),Oi=function(){function t(){}return t.prototype.setLocalDocumentsView=function(t){this.localDocumentsView=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var c=this;return I(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),e.matchesAllDocuments()?this.executeFullCollectionScan(t,e):n.isEqual(Mt.MIN)?this.executeFullCollectionScan(t,e):this.localDocumentsView.getDocuments(t,r).next((function(l){var h=c.applyQuery(e,l);return(e.hasLimitToFirst()||e.hasLimitToLast())&&c.needsRefill(e.limitType,h,r,n)?c.executeFullCollectionScan(t,e):(y()<=o.DEBUG&&S("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),c.localDocumentsView.getDocumentsMatchingQuery(t,e,n).next((function(t){return h.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.applyQuery=function(t,e){var n=new jt((function(e,n){return t.docComparator(e,n)}));return e.forEach((function(e,r){r instanceof en&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.needsRefill=function(t,e,n,r){if(n.size!==e.size)return!0;var o=t===mi.First?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)},t.prototype.executeFullCollectionScan=function(t,e){return y()<=o.DEBUG&&S("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.localDocumentsView.getDocumentsMatchingQuery(t,e,Mt.MIN)},t}(),xi=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=k(),this.batchesByDocumentKey=new jt($n.compareByKey)}return t.prototype.checkEmpty=function(t){return ee.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,o=this.indexOfExistingBatchId(r,"acknowledged");I(0===o,"Can only acknowledge the first batch in the mutation queue");var c=this.mutationQueue[o];return I(r===c.batchId,"Queue ordering failure: expected batch "+r+", got batch "+c.batchId),this.lastStreamToken=n,ee.resolve()},t.prototype.getLastStreamToken=function(t){return ee.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,ee.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){I(0!==r.length,"Mutation batches should not be empty");var o=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&I(this.mutationQueue[this.mutationQueue.length-1].batchId<o,"Mutation batchIDs must be monotonically increasing order");var c=new Zt(o,e,n,r);this.mutationQueue.push(c);for(var l=0,h=r;l<h.length;l++){var d=h[l];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new $n(d.key,o)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast())}return ee.resolve(c)},t.prototype.lookupMutationBatch=function(t,e){return ee.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return I(null!=n,"Failed to find local mutation batch."),ee.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.indexOfBatchId(n),o=r<0?0:r;return ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ee.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},t.prototype.getAllMutationBatches=function(t){return ee.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new $n(e,0),o=new $n(e,Number.POSITIVE_INFINITY),c=[];return this.batchesByDocumentKey.forEachInRange([r,o],(function(t){I(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);I(null!==r,"Batches in the index must exist in the main table"),c.push(r)})),ee.resolve(c)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new jt(ot);return e.forEach((function(t){var e=new $n(t,0),o=new $n(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,o],(function(e){I(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)}))})),ee.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){I(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,o=n;Tt.isDocumentKey(o)||(o=o.child(""));var c=new $n(new Tt(o),0),l=new jt(ot);return this.batchesByDocumentKey.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(l=l.add(t.targetOrBatchId)),!0)}),c),ee.resolve(this.findMutationBatches(l))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;I(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return ee.forEach(e.mutations,(function(o){var c=new $n(o.key,e.batchId);return r=r.delete(c),n.referenceDelegate.removeMutationReference(t,o.key)})).next((function(){n.batchesByDocumentKey=r}))},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new $n(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return ee.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&I(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),ee.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return I(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return I(n.batchId===t,"If found batch must match"),n},t}();var Pi,Ri=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new Lt(Tt.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){I(!n.isEqual(Mt.MIN),"Cannot add a document with a read time of zero");var r=e.key,o=this.docs.get(r),c=o?o.size:0,l=this.sizer(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:l,readTime:n}),this.size+=l-c,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return ee.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=$t();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)})),ee.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){I(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Wt(),o=new Tt(e.path.child("")),c=this.docs.getIteratorFrom(o);c.hasNext();){var l=c.getNext(),h=l.key,d=l.value,f=d.maybeDocument,m=d.readTime;if(!e.path.isPrefixOf(h.path))break;m.compareTo(n)<=0||f instanceof en&&e.matches(f)&&(r=r.insert(f.key,f))}return ee.resolve(r)},t.prototype.forEachDocumentKey=function(t,e){return ee.forEach(this.docs,(function(t){return e(t)}))},t.prototype.getNewDocumentChanges=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.getLastReadTime=function(t){return ee.resolve(Mt.MIN)},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return ee.resolve(this.size)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return l.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,o){o?n.push(e.documentCache.addEntry(t,o,e.readTime)):e.documentCache.removeEntry(r)})),ee.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},e}(an),t}(),Mi=function(){function t(t){this.persistence=t,this.targets=new on((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=Mt.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new zn,this.targetCount=0,this.targetIdGenerator=be.forTargetCache()}return t.prototype.forEachTarget=function(t,e){return this.targets.forEach((function(t,n){return e(n)})),ee.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return ee.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return ee.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,ee.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),ee.resolve()},t.prototype.saveTargetData=function(t){this.targets.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return I(!this.targets.has(e.target),"Adding a target that already exists"),this.saveTargetData(e),this.targetCount+=1,ee.resolve()},t.prototype.updateTargetData=function(t,e){return I(this.targets.has(e.target),"Updating a non-existent target"),this.saveTargetData(e),ee.resolve()},t.prototype.removeTargetData=function(t,e){return I(this.targetCount>0,"Removing a target from an empty cache"),I(this.targets.has(e.target),"Removing a non-existent target from the cache"),this.targets.delete(e.target),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,ee.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,o=0,c=[];return this.targets.forEach((function(l,h){h.sequenceNumber<=e&&null===n.get(h.targetId)&&(r.targets.delete(l),c.push(r.removeMatchingKeysForTargetId(t,h.targetId)),o++)})),ee.waitFor(c).next((function(){return o}))},t.prototype.getTargetCount=function(t){return ee.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.targets.get(e)||null;return ee.resolve(n)},t.prototype.getTargetDataForTarget=function(t,e){return C("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,o=[];return r&&e.forEach((function(e){o.push(r.addReference(t,e))})),ee.waitFor(o)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,o=[];return r&&e.forEach((function(e){o.push(r.removeReference(t,e))})),ee.waitFor(o)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),ee.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return ee.resolve(n)},t.prototype.containsKey=function(t,e){return ee.resolve(this.references.containsKey(e))},t}(),Li=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new gt(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.targetCache=new Mi(this);this.indexManager=new dn,this.remoteDocumentCache=new Ri(this.indexManager,(function(t){return n.referenceDelegate.documentSize(t)}))}return t.createLruPersistence=function(e,n){return new t(e,(function(p){return new Fi(p,n)}))},t.createEagerPersistence=function(e){return new t(e,(function(p){return new Bi(p)}))},t.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new xi(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.targetCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;S("MemoryPersistence","Starting transaction:",t);var o=new Vi(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(o).next((function(t){return r.referenceDelegate.onTransactionCommitted(o).next((function(){return t}))})).toPromise().then((function(t){return o.raiseOnCommittedEvent(),t}))},t.prototype.mutationQueuesContainKey=function(t,e){return ee.or((n=this.mutationQueues,r=[],R(n,(function(t,e){return r.push(e)})),r).map((function(n){return function(){return n.containsKey(t,e)}})));var n,r},t}(),Vi=function(t){function e(e){var n=t.call(this)||this;return n.currentSequenceNumber=e,n}return l.__extends(e,t),e}(qn),Bi=function(){function t(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(t.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw C("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),ee.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),ee.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),ee.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.orphanedDocuments.add(t)}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.orphanedDocuments,(function(r){return e.isReferenced(t,r).next((function(t){t||n.removeEntry(r)}))})).next((function(){return e._orphanedDocuments=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next((function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)}))},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return ee.or([function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return ee.resolve(n.inMemoryPins.containsKey(e))}])},t}(),Fi=function(){function t(t,e){this.persistence=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new on((function(t){return Nt(t.path)})),this.garbageCollector=new Zn(this,e)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return ee.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return ee.forEach(this.orphanedSequenceNumbers,(function(r,o){return n.isPinned(t,r,o).next((function(t){return t?ee.resolve():e(o)}))}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.forEachDocumentKey(t,(function(o){return n.isPinned(t,o,e).next((function(t){t||(r++,c.removeEntry(o))}))})).next((function(){return c.apply(t)})).next((function(){return r}))},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),ee.resolve()},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),ee.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),ee.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),ee.resolve()},t.prototype.documentSize=function(t){var e=t.key.toString().length;return t instanceof en&&(e+=t.data().approximateByteSize()),e},t.prototype.isPinned=function(t,e,n){var r=this;return ee.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return ee.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getTargetCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return ee.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),ji=1e3,Ui=1.5,qi=6e4,zi=function(){function t(t,e,n,r,o){void 0===n&&(n=ji),void 0===r&&(r=Ui),void 0===o&&(o=qi),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=o,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),o=Math.max(0,n-r);this.currentBaseMs>0&&S("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,o,(function(){return e.lastAttemptTime=Date.now(),t()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();!function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff"}(Pi||(Pi={}));var $i,Hi,Wi=function(){function t(t,e,n,r,o,c){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=o,this.listener=c,this.state=Pi.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new zi(t,e)}return t.prototype.isStarted=function(){return this.state===Pi.Starting||this.state===Pi.Open||this.state===Pi.Backoff},t.prototype.isOpen=function(){return this.state===Pi.Open},t.prototype.start=function(){this.state!==Pi.Error?(I(this.state===Pi.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(Pi.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.inhibitBackoff=function(){I(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Pi.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return t.handleIdleCloseTimer()})))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){return this.isOpen()?[2,this.close(Pi.Initial)]:[2]}))}))},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(n){switch(n.label){case 0:return I(this.isStarted(),"Only started streams should be closed."),I(t===Pi.Error||fi(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==Pi.Error?this.backoff.reset():e&&e.code===D.RESOURCE_EXHAUSTED?(T(e.toString()),T("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===D.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;I(this.state===Pi.Initial,"Must be in initial state to auth"),this.state=Pi.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(e){t.closeCount===n&&t.startStream(e)}),(function(n){e((function(){var e=new A(D.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)}))}))},t.prototype.startStream=function(t){var e=this;I(this.state===Pi.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen((function(){n((function(){return I(e.state===Pi.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=Pi.Open,e.listener.onOpen()}))})),this.stream.onClose((function(t){n((function(){return e.handleStreamClose(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.performBackoff=function(){var t=this;I(this.state===Pi.Error,"Should only perform backoff when in Error state"),this.state=Pi.Backoff,this.backoff.backoffAndRun((function(){return l.__awaiter(t,void 0,void 0,(function(){return l.__generator(this,(function(t){return I(this.state===Pi.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Pi.Initial,this.start(),I(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.handleStreamClose=function(t){return I(this.isStarted(),"Can't handle server close on non-started stream"),S("PersistentStream","close with error: "+t),this.stream=null,this.close(Pi.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget((function(){return e.closeCount===t?n():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ki=function(t){function e(e,n,r,o,c){var l=t.call(this,e,lt.ListenStreamConnectionBackoff,lt.ListenStreamIdle,n,r,c)||this;return l.serializer=o,l}return l.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(Wi),Gi=function(t){function e(e,n,r,o,c){var l=t.call(this,e,lt.WriteStreamConnectionBackoff,lt.WriteStreamIdle,n,r,c)||this;return l.serializer=o,l.handshakeComplete_=!1,l.lastStreamToken=k(),l}return l.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(I(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return I(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){I(this.isOpen(),"Writing handshake requires an opened stream"),I(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;I(this.isOpen(),"Writing mutations requires an opened stream"),I(this.handshakeComplete_,"Handshake must be complete before writing mutations"),I(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map((function(t){return e.serializer.toMutation(t)}))};this.sendRequest(n)},e}(Wi),Qi=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new Gi(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new Ki(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map((function(t){return e.serializer.toMutation(t)}))};return this.invokeRPC("Commit",n).then((function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map((function(t){return e.serializer.toName(t)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=zt();n.forEach((function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)}));var o=[];return t.forEach((function(t){var e=r.get(t);I(!!e,"Missing entity in write response for "+t),o.push(e)})),o}))},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(t,e,r)})).catch((function(t){throw t.code===D.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(t,e,r)})).catch((function(t){throw t.code===D.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t}(),Yi=function(){function t(t){this.datastore=t,this.readVersions=Gt(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n=this;return l.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new A(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof nn||t instanceof en?n.recordVersion(t):C("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,data){this.write(data.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},t.prototype.update=function(t,data){try{this.write(data.toMutations(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t)},t.prototype.delete=function(t){this.write([new Le(t,this.precondition(t))]),this.writtenDocs.add(t)},t.prototype.commit=function(){return l.__awaiter(this,void 0,void 0,(function(){var t,e=this;return l.__generator(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new Ve(t,e.precondition(t)))})),[4,this.datastore.commit(this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t instanceof en)e=t.version;else{if(!(t instanceof nn))throw C("Document in a transaction was a "+t.constructor.name);e=Mt.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new A(D.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?Oe.updateTime(e):Oe.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(!this.writtenDocs.has(t)&&e){if(e.isEqual(Mt.forDeletedDoc()))throw new A(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oe.updateTime(e)}return Oe.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},t.prototype.ensureCommitNotCalled=function(){I(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}($i||($i={})),function(t){t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState"}(Hi||(Hi={}));var Xi,Ji=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=$i.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast($i.Unknown),I(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(lt.OnlineStateTimeout,1e4,(function(){return t.onlineStateTimer=null,I(t.state===$i.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast($i.Offline),Promise.resolve()})))},t.prototype.handleWatchStreamFailure=function(t){this.state===$i.Online?(this.setAndBroadcast($i.Unknown),I(0===this.watchStreamFailures,"watchStreamFailures must be 0"),I(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast($i.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===$i.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(details){var t="Could not reach Cloud Firestore backend. "+details+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(T(t),this.shouldWarnClientIsOffline=!1):S("OnlineStateTracker",t)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}();function Zi(code){switch(code){case D.OK:return C("Treated status OK as error");case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return C("Unknown status code: "+code)}}function er(code){if(void 0===code)return T("GRPC error has no .code"),D.UNKNOWN;switch(code){case Xi.OK:return D.OK;case Xi.CANCELLED:return D.CANCELLED;case Xi.UNKNOWN:return D.UNKNOWN;case Xi.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Xi.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Xi.INTERNAL:return D.INTERNAL;case Xi.UNAVAILABLE:return D.UNAVAILABLE;case Xi.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Xi.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Xi.NOT_FOUND:return D.NOT_FOUND;case Xi.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Xi.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Xi.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Xi.ABORTED:return D.ABORTED;case Xi.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Xi.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Xi.DATA_LOSS:return D.DATA_LOSS;default:return C("Unknown status code: "+code)}}function nr(code){if(void 0===code)return Xi.OK;switch(code){case D.OK:return Xi.OK;case D.CANCELLED:return Xi.CANCELLED;case D.UNKNOWN:return Xi.UNKNOWN;case D.DEADLINE_EXCEEDED:return Xi.DEADLINE_EXCEEDED;case D.RESOURCE_EXHAUSTED:return Xi.RESOURCE_EXHAUSTED;case D.INTERNAL:return Xi.INTERNAL;case D.UNAVAILABLE:return Xi.UNAVAILABLE;case D.UNAUTHENTICATED:return Xi.UNAUTHENTICATED;case D.INVALID_ARGUMENT:return Xi.INVALID_ARGUMENT;case D.NOT_FOUND:return Xi.NOT_FOUND;case D.ALREADY_EXISTS:return Xi.ALREADY_EXISTS;case D.PERMISSION_DENIED:return Xi.PERMISSION_DENIED;case D.FAILED_PRECONDITION:return Xi.FAILED_PRECONDITION;case D.ABORTED:return Xi.ABORTED;case D.OUT_OF_RANGE:return Xi.OUT_OF_RANGE;case D.UNIMPLEMENTED:return Xi.UNIMPLEMENTED;case D.DATA_LOSS:return Xi.DATA_LOSS;default:return C("Unknown status code: "+code)}}!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(Xi||(Xi={}));var ir,rr,or=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Tt.comparator(e.key,n.key)}:function(t,e){return Tt.comparator(t.key,e.key)},this.keyedMap=Wt(),this.sortedSet=new Lt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}();!function(t){t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata"}(ir||(ir={})),function(t){t[t.Local=0]="Local",t[t.Synced=1]="Synced"}(rr||(rr={}));var ar,sr=function(){function t(){this.changeMap=new Lt(Tt.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==ir.Added&&n.type===ir.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===ir.Metadata&&n.type!==ir.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===ir.Modified&&n.type===ir.Modified?this.changeMap=this.changeMap.insert(e,{type:ir.Modified,doc:t.doc}):t.type===ir.Modified&&n.type===ir.Added?this.changeMap=this.changeMap.insert(e,{type:ir.Added,doc:t.doc}):t.type===ir.Removed&&n.type===ir.Added?this.changeMap=this.changeMap.remove(e):t.type===ir.Removed&&n.type===ir.Modified?this.changeMap=this.changeMap.insert(e,{type:ir.Removed,doc:n.doc}):t.type===ir.Added&&n.type===ir.Removed?this.changeMap=this.changeMap.insert(e,{type:ir.Modified,doc:t.doc}):C("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal((function(e,n){t.push(n)})),t},t}(),ur=function(){function t(t,e,n,r,o,c,l,h){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=l,this.excludesMetadataChanges=h}return t.fromInitialDocuments=function(e,n,r,o){var c=[];return n.forEach((function(t){c.push({type:ir.Added,doc:t})})),new t(e,n,or.emptySet(n),c,r,o,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0},t}(),cr=function(){function t(t,e,n,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,o=((r={})[e]=lr.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(Mt.MIN,o,Jt(),zt(),Yt())},t}(),lr=function(){function t(t,e,n,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(k(),n,Yt(),Yt(),Yt())},t}(),dr=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},fr=function(t,e){this.targetId=t,this.existenceFilter=e};!function(t){t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset"}(ar||(ar={}));var pr=function(t,e,n,r){void 0===n&&(n=k()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},mr=function(){function t(){this.pendingResponses=0,this.documentChanges=yr(),this._resumeToken=k(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=Yt(),e=Yt(),n=Yt();return this.documentChanges.forEach((function(r,o){switch(o){case ir.Added:t=t.add(r);break;case ir.Modified:e=e.add(r);break;case ir.Removed:n=n.add(r);break;default:C("Encountered invalid change type: "+o)}})),new lr(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=yr()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),vr=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=zt(),this.pendingDocumentTargetMapping=gr(),this.pendingTargetResets=new jt(ot)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof en?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof nn&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var o=0,c=t.removedTargetIds;o<c.length;o++){r=c[o];this.removeDocumentFromTarget(r,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.ensureTargetState(n);switch(t.state){case ar.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case ar.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case ar.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),I(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case ar.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case ar.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:C("Unknown target watch change state: "+t.state)}}))},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):P(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.targetDataForActiveTarget(e);if(r){var o=r.target;if(o.isDocumentQuery())if(0===n){var c=new Tt(o.path);this.removeDocumentFromTarget(e,c,new nn(c,Mt.forDeletedDoc()))}else I(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};P(this.targetStates,(function(r,o){var c=e.targetDataForActiveTarget(r);if(c){if(o.current&&c.target.isDocumentQuery()){var l=new Tt(c.target.path);null!==e.pendingDocumentUpdates.get(l)||e.targetContainsDocument(r,l)||e.removeDocumentFromTarget(r,l,new nn(l,t))}o.hasPendingChanges&&(n[r]=o.toTargetChange(),o.clearPendingChanges())}}));var r=Yt();this.pendingDocumentTargetMapping.forEach((function(t,n){var o=!0;n.forEachWhile((function(t){var n=e.targetDataForActiveTarget(t);return!n||n.purpose===On.LimboResolution||(o=!1,!1)})),o&&(r=r.add(t))}));var o=new cr(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=zt(),this.pendingDocumentTargetMapping=gr(),this.pendingTargetResets=new jt(ot),o},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?ir.Modified:ir.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,ir.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new mr),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new jt(ot),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){var e=null!==this.targetDataForActiveTarget(t);return e||S("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.targetDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getTargetDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;I(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new mr,this.metadataProvider.getRemoteKeysForTarget(t).forEach((function(n){e.removeDocumentFromTarget(t,n,null)}))},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function gr(){return new Lt(Tt.comparator)}function yr(){return new Lt(Tt.comparator)}var wr="RemoteStore",Sr=function(){function t(t,e,n,r,o){var c=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=o,this.connectivityMonitor.addCallback((function(t){n.enqueueAndForget((function(){return l.__awaiter(c,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(S(wr,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Ji(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return l.__awaiter(this,void 0,void 0,(function(){var t;return l.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set($i.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set($i.Offline),[2]}}))}))},t.prototype.disableNetworkInternal=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(S(wr,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},t.prototype.shutdown=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return S(wr,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set($i.Unknown),[2]}}))}))},t.prototype.listen=function(t){O(this.listenTargets,t.targetId)||(this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t))},t.prototype.unlisten=function(t){I(O(this.listenTargets,t),"unlisten called on target no currently watched: "+t),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),M(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set($i.Unknown))},t.prototype.getTargetDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){I(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new vr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!M(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return l.__awaiter(this,void 0,void 0,(function(){var t=this;return l.__generator(this,(function(e){return P(this.listenTargets,(function(e,n){t.sendWatchRequest(n)})),[2]}))}))},t.prototype.onWatchStreamClose=function(t){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){return void 0===t&&I(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set($i.Unknown),[2]}))}))},t.prototype.onWatchStreamChange=function(t,e){return l.__awaiter(this,void 0,void 0,(function(){var n;return l.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set($i.Online),t instanceof pr&&t.state===ar.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof dr?this.watchChangeAggregator.handleDocumentChange(t):t instanceof fr?this.watchChangeAggregator.handleExistenceFilter(t):(I(t instanceof pr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(Mt.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.raiseWatchSnapshot=function(t){var e=this;I(!t.isEqual(Mt.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return P(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var o=e.listenTargets[n];o&&(e.listenTargets[n]=o.withResumeToken(r.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.withResumeToken(k(),n.snapshotVersion),e.sendUnwatchRequest(t);var r=new Bn(n.target,t,On.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;I(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return l.__awaiter(e,void 0,void 0,(function(){return l.__generator(this,(function(e){return O(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]}))}))}))})),r},t.prototype.fillWritePipeline=function(){return l.__awaiter(this,void 0,void 0,(function(){var t,e;return l.__generator(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(t=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){I(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){I(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){return this.writeStream.writeHandshake(),[2]}))}))},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var e=0,n=t.writePipeline;e<n.length;e++){var r=n[e];t.writeStream.writeMutations(r.mutations)}})).catch(Kn)},t.prototype.onMutationResult=function(t,e){var n=this;I(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),o=te.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(o).then((function(){return n.fillWritePipeline()}))},t.prototype.onWriteStreamClose=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e=this;return l.__generator(this,(function(n){return void 0===t&&I(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then((function(){e.shouldStartWriteStream()&&e.startWriteStream()}))]):[2]}))}))},t.prototype.handleHandshakeError=function(t){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){return Zi(t.code)?(S(wr,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=k(),[2,this.localStore.setLastStreamToken(k()).catch(Kn)]):[2]}))}))},t.prototype.handleWriteError=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n=this;return l.__generator(this,(function(r){return Zi(code=t.code)&&code!==D.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then((function(){return n.fillWritePipeline()}))]):[2];var code}))}))},t.prototype.createTransaction=function(){return new Yi(this.datastore)},t.prototype.restartNetwork=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set($i.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.handleCredentialChange=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(S(wr,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.applyPrimaryState=function(t){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set($i.Unknown),e.label=4;case 4:return[2]}}))}))},t}(),Tr=function(){function t(t,e){if(V("GeoPoint",arguments,2),j("GeoPoint","number",1,t),j("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new A(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new A(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return ot(this._lat,t._lat)||ot(this._long,t._long)},t}(),_r=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new Ge(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),Cr=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=kr(t),n=function(t){e.find((function(element){return element.isEqual(t)}))||e.push(t)},r=0,o=this.elements;r<o.length;r++){n(o[r])}return new Ze(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&at(e.elements,this.elements)},t}(),Ir=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=kr(t),n=function(t){e=e.filter((function(element){return!element.isEqual(t)}))},r=0,o=this.elements;r<o.length;r++){n(o[r])}return new Ze(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&at(e.elements,this.elements)},t}(),Er=function(){function t(t){this.operand=t}return t.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);if(n instanceof $e&&this.operand instanceof $e){var r=n.internalValue+this.operand.internalValue;return new $e(r)}r=n.internalValue+this.operand.internalValue;return new He(r)},t.prototype.applyToRemoteDocument=function(t,e){return I(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.computeBaseValue=function(t){return t instanceof qe?t:new $e(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function kr(t){return t instanceof Ze?t.internalValue.slice():[]}var Dr,Ar,Nr=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),Or=((Dr={})[Ei.ASCENDING.name]="ASCENDING",Dr[Ei.DESCENDING.name]="DESCENDING",Dr),xr=((Ar={})[bi.LESS_THAN.name]="LESS_THAN",Ar[bi.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Ar[bi.GREATER_THAN.name]="GREATER_THAN",Ar[bi.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Ar[bi.EQUAL.name]="EQUAL",Ar[bi.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Ar[bi.IN.name]="IN",Ar[bi.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",Ar),Pr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(t,e){I(!fi(t),e+" is missing")}function Mr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):C("can't parse "+t)}var Lr=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var code=void 0===t.code?D.UNKNOWN:er(t.code);return new A(code,t.message||"")},t.prototype.toInt32Value=function(t){return this.options.useProto3Json||fi(t)?t:{value:t}},t.prototype.fromInt32Value=function(t){var e;return fi(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return this.options.useProto3Json?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);I(!!t,"Cannot deserialize null or undefined timestamp.");var e=Mr(t.seconds||"0"),n=t.nanos||0;return new Rt(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=Pr.exec(t);if(I(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var o=new Date(t),c=Math.floor(o.getTime()/1e3);return new Rt(c,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(I(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ht.fromBase64String(t)):(I(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ht.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return I(!!t,"Trying to deserialize version that isn't set"),Mt.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,path){return this.fullyQualifiedPrefixPath(t).child("documents").child(path).canonicalString()},t.prototype.fromResourceName=function(t){var e=bt.fromString(t);return I(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return I(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),I(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new Tt(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(path){return this.toResourceName(this.databaseId,path)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?bt.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new bt(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new bt(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return I(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(path){return path.length>=4&&"projects"===path.get(0)&&"databases"===path.get(2)},t.prototype.toValue=function(t){if(t instanceof je)return{nullValue:"NULL_VALUE"};if(t instanceof Ue)return{booleanValue:t.value()};if(t instanceof $e)return{integerValue:""+t.value()};if(t instanceof He){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof We?{stringValue:t.value()}:t instanceof Je?{mapValue:this.toMapValue(t)}:t instanceof Ze?{arrayValue:this.toArrayValue(t)}:t instanceof Ke?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Xe?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Qe?{bytesValue:this.toBytes(t.value())}:t instanceof Ye?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:C("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return je.INSTANCE;if("booleanValue"in t)return Ue.of(t.booleanValue);if("integerValue"in t)return new $e(Mr(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return He.NAN;if("Infinity"===t.doubleValue)return He.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return He.NEGATIVE_INFINITY}return new He(t.doubleValue)}if("stringValue"in t)return new We(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t){Rr(t.arrayValue,"arrayValue");var n=t.arrayValue.values||[];return new Ze(n.map((function(t){return e.fromValue(t)})))}if("timestampValue"in t)return Rr(t.timestampValue,"timestampValue"),new Ke(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t){Rr(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,o=t.geoPointValue.longitude||0;return new Xe(new Tr(r,o))}if("bytesValue"in t){Rr(t.bytesValue,"bytesValue");var c=this.fromBlob(t.bytesValue);return new Qe(c)}if("referenceValue"in t){Rr(t.referenceValue,"referenceValue");var l=this.fromResourceName(t.referenceValue),h=new vt(l.get(1),l.get(3)),d=new Tt(this.extractLocalPathFromResourceName(l));return new Ye(h,d)}return C("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return I(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){var n=this,r=this.fromName(t.name),o=this.fromVersion(t.updateTime);return new en(r,o,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.fromValue(t)}))},t.prototype.toFields=function(t){var e=this,n={};return t.forEach((function(t,r){n[t]=e.toValue(r)})),n},t.prototype.fromFields=function(object){var t=this,map=object,e=Je.EMPTY;return R(map,(function(n,r){e=e.set(new St([n]),t.fromValue(r))})),e},t.prototype.toMapValue=function(map){return{fields:this.toFields(map)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.toValue(t))})),{values:n}},t.prototype.fromFound=function(t){var e=this;I(!!t.found,"Tried to deserialize a found document from a missing document."),Rr(t.found.name,"doc.found.name"),Rr(t.found.updateTime,"doc.found.updateTime");var n=this.fromName(t.found.name),r=this.fromVersion(t.found.updateTime);return new en(n,r,{},void 0,t.found,(function(t){return e.fromValue(t)}))},t.prototype.fromMissing=function(t){I(!!t.missing,"Tried to deserialize a missing document from a found document."),I(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new nn(e,n)},t.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):C("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case ar.Added:return"ADD";case ar.Current:return"CURRENT";case ar.NoChange:return"NO_CHANGE";case ar.Removed:return"REMOVE";case ar.Reset:return"RESET";default:return C("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof fr)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof dr){if(t.newDoc instanceof en){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof nn){e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof pr){var n=void 0;return t.cause&&(n={code:nr(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return C("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=this;if("targetChange"in t){Rr(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],c=t.targetChange.resumeToken||this.emptyByteString(),l=t.targetChange.cause,h=l&&this.fromRpcStatus(l);e=new pr(r,o,c,h||null)}else if("documentChange"in t){Rr(t.documentChange,"documentChange");var d=t.documentChange;Rr(d.document,"documentChange.name"),Rr(d.document.name,"documentChange.document.name"),Rr(d.document.updateTime,"documentChange.document.updateTime");var f=this.fromName(d.document.name),m=this.fromVersion(d.document.updateTime),v=new en(f,m,{},void 0,d.document,(function(t){return n.fromValue(t)})),y=d.targetIds||[],w=d.removedTargetIds||[];e=new dr(y,w,v.key,v)}else if("documentDelete"in t){Rr(t.documentDelete,"documentDelete");var S=t.documentDelete;Rr(S.document,"documentDelete.document");f=this.fromName(S.document),m=S.readTime?this.fromVersion(S.readTime):Mt.forDeletedDoc(),v=new nn(f,m),w=S.removedTargetIds||[];e=new dr([],w,v.key,v)}else if("documentRemove"in t){Rr(t.documentRemove,"documentRemove");var T=t.documentRemove;Rr(T.document,"documentRemove");f=this.fromName(T.document),w=T.removedTargetIds||[];e=new dr([],w,f,null)}else{if(!("filter"in t))return C("Unknown change type "+JSON.stringify(t));Rr(t.filter,"filter");var filter=t.filter;Rr(filter.targetId,"filter.targetId");var _=filter.count||0,I=new Nr(_),E=filter.targetId;e=new fr(E,I)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?ar.NoChange:"ADD"===t?ar.Added:"REMOVE"===t?ar.Removed:"CURRENT"===t?ar.Current:"RESET"===t?ar.Reset:C("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return Mt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Mt.MIN:e.readTime?this.fromVersion(e.readTime):Mt.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof Pe)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof Le)e={delete:this.toName(t.key)};else if(t instanceof Re)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else if(t instanceof Me)e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.toFieldTransform(t)}))}};else{if(!(t instanceof Ve))return C("Unknown mutation type "+t.type);e={verify:this.toName(t.key)}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):Oe.NONE;if(t.update){Rr(t.update.name,"name");var r=this.fromName(t.update.name),o=this.fromFields(t.update.fields||{});if(t.updateMask){var c=this.fromDocumentMask(t.updateMask);return new Re(r,o,c,n)}return new Pe(r,o,n)}if(t.delete){r=this.fromName(t.delete);return new Le(r,n)}if(t.transform){r=this.fromName(t.transform.document);var l=t.transform.fieldTransforms.map((function(t){return e.fromFieldTransform(t)}));return I(!0===n.exists,'Transforms only support precondition "exists == true"'),new Me(r,l)}if(t.verify){r=this.fromName(t.verify);return new Ve(r,n)}return C("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return I(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:C("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?Oe.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Oe.exists(t.exists):Oe.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);r.isEqual(Mt.MIN)&&(r=this.fromVersion(e));var o=null;return t.transformResults&&t.transformResults.length>0&&(o=t.transformResults.map((function(t){return n.fromValue(t)}))),new De(r,o)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(I(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.fromWriteResult(t,e)}))):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof _r)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Cr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof Ir)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof Er)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw C("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)I("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=_r.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Cr(r.map((function(t){return e.fromValue(t)})))}else if("removeAllFromArray"in t){r=t.removeAllFromArray.values||[];n=new Ir(r.map((function(t){return e.fromValue(t)})))}else if("increment"in t){var o=this.fromValue(t.increment);I(o instanceof qe,"NUMERIC_ADD transform requires a NumberValue"),n=new Er(o)}else C("Unknown transform proto: "+JSON.stringify(t));var c=St.fromServerFormat(t.fieldPath);return new ke(c,n)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;I(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return gi.atPath(this.fromQueryPath(n)).toTarget()},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},path=t.path;null!==t.collectionGroup?(I(path.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(path),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(I(path.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(path.popLast()),e.structuredQuery.from=[{collectionId:path.lastSegment()}]);var n=this.toFilter(t.filters);n&&(e.structuredQuery.where=n);var r=this.toOrder(t.orderBy);r&&(e.structuredQuery.orderBy=r);var o=this.toInt32Value(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var path=this.fromQueryPath(t.parent),e=t.structuredQuery,n=e.from?e.from.length:0,r=null;if(n>0){I(1===n,"StructuredQuery.from with more than one collection is not supported.");var o=e.from[0];o.allDescendants?r=o.collectionId:path=path.child(o.collectionId)}var c=[];e.where&&(c=this.fromFilter(e.where));var l=[];e.orderBy&&(l=this.fromOrder(e.orderBy));var h=null;e.limit&&(h=this.fromInt32Value(e.limit));var d=null;e.startAt&&(d=this.fromCursor(e.startAt));var f=null;return e.endAt&&(f=this.fromCursor(e.endAt)),new gi(path,r,l,c,h,mi.First,d,f).toTarget()},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case On.Listen:return null;case On.ExistenceFilterMismatch:return"existence-filter-mismatch";case On.LimboResolution:return"limbo-document";default:return C("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.target;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map((function(filter){return filter instanceof wi?e.toUnaryOrFieldFilter(filter):C("Unrecognized filter: "+JSON.stringify(filter))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(filter){var t=this;return filter?void 0!==filter.unaryFilter?[this.fromUnaryFilter(filter)]:void 0!==filter.fieldFilter?[this.fromFieldFilter(filter)]:void 0!==filter.compositeFilter?filter.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(t,e){return t.concat(e)})):C("Unknown filter: "+JSON.stringify(filter)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.toPropertyOrder(t)}))},t.prototype.fromOrder=function(t){var e=this;return t.map((function(t){return e.fromPropertyOrder(t)}))},t.prototype.toCursor=function(cursor){var t=this;return{before:cursor.before,values:cursor.position.map((function(component){return t.toValue(component)}))}},t.prototype.fromCursor=function(cursor){var t=this,e=!!cursor.before,n=cursor.values.map((function(component){return t.fromValue(component)}));return new ki(n,e)},t.prototype.toDirection=function(t){return Or[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Ei.ASCENDING;case"DESCENDING":return Ei.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return xr[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return bi.EQUAL;case"GREATER_THAN":return bi.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return bi.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return bi.LESS_THAN;case"LESS_THAN_OR_EQUAL":return bi.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return bi.ARRAY_CONTAINS;case"IN":return bi.IN;case"ARRAY_CONTAINS_ANY":return bi.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return C("Unspecified operator");default:return C("Unknown operator")}},t.prototype.toFieldPathReference=function(path){return{fieldPath:path.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return St.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Di(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.fromFieldFilter=function(filter){return wi.create(this.fromFieldPathReference(filter.fieldFilter.field),this.fromOperatorName(filter.fieldFilter.op),this.fromValue(filter.fieldFilter.value))},t.prototype.toUnaryOrFieldFilter=function(filter){if(filter.op===bi.EQUAL){if(filter.value.isEqual(He.NAN))return{unaryFilter:{field:this.toFieldPathReference(filter.field),op:"IS_NAN"}};if(filter.value.isEqual(je.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(filter.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(filter.field),op:this.toOperatorName(filter.op),value:this.toValue(filter.value)}}},t.prototype.fromUnaryFilter=function(filter){switch(filter.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(filter.unaryFilter.field);return wi.create(t,bi.EQUAL,He.NAN);case"IS_NULL":var e=this.fromFieldPathReference(filter.unaryFilter.field);return wi.create(e,bi.EQUAL,je.INSTANCE);case"OPERATOR_UNSPECIFIED":return C("Unspecified filter");default:return C("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map((function(path){return St.fromServerFormat(path)}));return Ee.fromArray(e)},t}(),Vr=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},Br=function(){function t(t){this.syncEngine=t,this.queries=new on((function(q){return q.canonicalId()})),this.onlineState=$i.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);(r||(n=!0,r=new Vr,this.queries.set(e,r)),r.listeners.push(t),I(!t.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap)&&(t.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent());return n?this.syncEngine.listen(e).then((function(t){return r.targetId=t,t})):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return l.__generator(this,(function(o){return e=t.query,n=!1,(r=this.queries.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]}))}))},t.prototype.onWatchChange=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var o=r[n],c=o.query,l=this.queries.get(c);if(l){for(var h=0,d=l.listeners;h<d.length;h++){d[h].onViewSnapshot(o)&&(e=!0)}l.viewSnap=o}}e&&this.raiseSnapshotsInSyncEvent()},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,o=n.listeners;r<o.length;r++){o[r].onError(e)}this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t;var e=!1;this.queries.forEach((function(n,r){for(var o=0,c=r.listeners;o<c.length;o++){c[o].applyOnlineStateChange(t)&&(e=!0)}})),e&&this.raiseSnapshotsInSyncEvent()},t.prototype.addSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.add(t),t.next()},t.prototype.removeSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.delete(t)},t.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(t){t.next()}))},t}(),Fr=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=$i.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(I(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var o=r[n];o.type!==ir.Metadata&&e.push(o)}t=new ur(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var c=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),c=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),c=!0),this.snap=t,c},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t;var e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e},t.prototype.shouldRaiseInitialEvent=function(t,e){if(I(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==$i.Offline;return this.options.waitForSyncWhenOnline&&n?(I(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===$i.Offline},t.prototype.shouldRaiseEvent=function(t){if(t.docChanges.length>0)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){I(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=ur.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),jr=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.addedKeys=n,this.removedKeys=r}return t.fromSnapshot=function(e,n){for(var r=Yt(),o=Yt(),c=0,l=n.docChanges;c<l.length;c++){var h=l[c];switch(h.type){case ir.Added:r=r.add(h.doc.key);break;case ir.Removed:o=o.add(h.doc.key)}}return new t(e,n.fromCache,r,o)},t}(),Ur=function(t){this.key=t},qr=function(t){this.key=t},zr=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Yt(),this.mutatedKeys=Yt(),this.documentSet=new or(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new sr,o=e?e.documentSet:this.documentSet,c=e?e.mutatedKeys:this.mutatedKeys,l=o,h=!1,d=this.query.hasLimitToFirst()&&o.size===this.query.limit?o.last():null,f=this.query.hasLimitToLast()&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((function(t,e){var m=o.get(t),v=e instanceof en?e:null;v&&(I(t.isEqual(v.key),"Mismatching keys found in document changes: "+t+" != "+v.key),v=n.query.matches(v)?v:null);var y=!!m&&n.mutatedKeys.has(m.key),w=!!v&&(v.hasLocalMutations||n.mutatedKeys.has(v.key)&&v.hasCommittedMutations),S=!1;m&&v?m.data().isEqual(v.data())?y!==w&&(r.track({type:ir.Metadata,doc:v}),S=!0):n.shouldWaitForSyncedDocument(m,v)||(r.track({type:ir.Modified,doc:v}),S=!0,(d&&n.query.docComparator(v,d)>0||f&&n.query.docComparator(v,f)<0)&&(h=!0)):!m&&v?(r.track({type:ir.Added,doc:v}),S=!0):m&&!v&&(r.track({type:ir.Removed,doc:m}),S=!0,(d||f)&&(h=!0));S&&(v?(l=l.add(v),c=w?c.add(t):c.delete(t)):(l=l.delete(t),c=c.delete(t)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;l.size>this.query.limit;){var m=this.query.hasLimitToFirst()?l.last():l.first();l=l.delete(m.key),c=c.delete(m.key),r.track({type:ir.Removed,doc:m})}return I(!h||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:l,changeSet:r,needsRefill:h,mutatedKeys:c}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;I(!t.needsRefill,"Cannot apply changes that need a refill");var o=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var c=t.changeSet.getChanges();c.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case ir.Added:return 1;case ir.Modified:case ir.Metadata:return 2;case ir.Removed:return 0;default:return C("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)})),this.applyTargetChange(n);var l=e?this.updateLimboDocuments():[],h=0===this.limboDocuments.size&&this.current?rr.Synced:rr.Local,d=h!==this.syncState;return this.syncState=h,0!==c.length||d?{snapshot:new ur(this.query,t.documentSet,o,c,t.mutatedKeys,h===rr.Local,d,!1),limboChanges:l}:{limboChanges:l}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===$i.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new sr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.add(t)})),t.modifiedDocuments.forEach((function(t){return I(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")})),t.removedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)})),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Yt(),this.documentSet.forEach((function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))}));var n=[];return e.forEach((function(e){t.limboDocuments.has(e)||n.push(new qr(e))})),this.limboDocuments.forEach((function(t){e.has(t)||n.push(new Ur(t))})),n},t.prototype.synchronizeWithPersistedState=function(t){this._syncedDocuments=t.remoteKeys,this.limboDocuments=Yt();var e=this.computeDocChanges(t.documents);return this.applyChanges(e,!0)},t.prototype.computeInitialSnapshot=function(){return ur.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===rr.Local)},t}();var $r=5,Hr=function(){function t(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=$r,this.backoff=new zi(this.asyncQueue,lt.RetryTransaction)}return t.prototype.run=function(){this.runWithBackOff()},t.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun((function(){return l.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return l.__generator(this,(function(r){return t=this.remoteStore.createTransaction(),(e=this.tryRunUpdateFunction(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.handleTransactionError(t)}))}))})).catch((function(t){n.handleTransactionError(t)})),[2]}))}))}))},t.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!fi(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.handleTransactionError=function(t){var e=this;this.retries>0&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return e.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.isRetryableTransactionError=function(t){if("FirebaseError"===t.name){var code=t.code;return"aborted"===code||"failed-precondition"===code||!Zi(code)}return!1},t}(),Wr=function(t,e,view){this.query=t,this.targetId=e,this.view=view},Kr=function(t){this.key=t,this.receivedDocument=!1},Gr=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new on((function(q){return q.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new Lt(Tt.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new zn,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=be.forSyncEngine(),this.isPrimary=void 0,this.onlineState=$i.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){I(null!==t,"SyncEngine listener cannot be null"),I(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,c;return l.__generator(this,(function(l){switch(l.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(t.toTarget())];case 2:return o=l.sent(),c=this.sharedClientState.addLocalQueryTarget(o.targetId),e=o.targetId,[4,this.initializeViewAndComputeSnapshot(t,e,"current"===c)];case 3:n=l.sent(),this.isPrimary&&this.remoteStore.listen(o),l.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}}))}))},t.prototype.initializeViewAndComputeSnapshot=function(t,e,n){return l.__awaiter(this,void 0,void 0,(function(){var r,view,o,c,h,data;return l.__generator(this,(function(l){switch(l.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return r=l.sent(),view=new zr(t,r.remoteKeys),o=view.computeDocChanges(r.documents),c=lr.createSynthesizedTargetChangeForCurrentChange(e,n&&this.onlineState!==$i.Offline),I(0===(h=view.applyChanges(o,!0===this.isPrimary,c)).limboChanges.length,"View returned limbo docs before target ack from the server."),I(!!h.snapshot,"applyChanges for new view should always return a snapshot"),data=new Wr(t,e,view),this.queryViewsByQuery.set(t,data),this.queriesByTarget[e]||(this.queriesByTarget[e]=[]),this.queriesByTarget[e].push(t),[2,h.snapshot]}}))}))},t.prototype.synchronizeViewAndComputeSnapshot=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n;return l.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(t.query,!0)];case 1:return e=r.sent(),n=t.view.synchronizeWithPersistedState(e),this.isPrimary&&this.updateTrackedLimbos(t.targetId,n.limboChanges),[2,n]}}))}))},t.prototype.unlisten=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return l.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("unlisten()"),I(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),(n=this.queriesByTarget[e.targetId]).length>1?(this.queriesByTarget[e.targetId]=n.filter((function(q){return!q.isEqual(t)})),this.queryViewsByQuery.delete(t),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseTarget(e.targetId,!1).then((function(){r.sharedClientState.clearQueryState(e.targetId),r.remoteStore.unlisten(e.targetId),r.removeAndCleanupTarget(e.targetId)})).catch(Kn)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(e.targetId),[4,this.localStore.releaseTarget(e.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return l.__awaiter(this,void 0,void 0,(function(){var n;return l.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(t)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,e),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new Hr(t,this.remoteStore,e,n).run()},t.prototype.applyRemoteEvent=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n=this;return l.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(t)];case 2:return e=r.sent(),R(t.targetChanges,(function(t,e){var r=n.limboResolutionsByTarget[Number(t)];r&&(I(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),e.addedDocuments.size>0?r.receivedDocument=!0:e.modifiedDocuments.size>0?I(r.receivedDocument,"Received change for limbo target document without add."):e.removedDocuments.size>0&&(I(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Kn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.applyOnlineStateChange=function(t,source){if(this.isPrimary&&source===Hi.RemoteStore||!this.isPrimary&&source===Hi.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var e=[];this.queryViewsByQuery.forEach((function(n,r){var o=r.view.applyOnlineStateChange(t);I(0===o.limboChanges.length,"OnlineState should not affect limbo documents."),o.snapshot&&e.push(o.snapshot)})),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(e),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return l.__awaiter(this,void 0,void 0,(function(){var n,r,o,c,h,d=this;return l.__generator(this,(function(l){switch(l.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),n=this.limboResolutionsByTarget[t],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],o=(o=new Lt(Tt.comparator)).insert(r,new nn(r,Mt.forDeletedDoc())),c=Yt().add(r),h=new cr(Mt.MIN,{},new jt(ot),o,c),[2,this.applyRemoteEvent(h)]):[3,1];case 1:return[4,this.localStore.releaseTarget(t,!1).then((function(){return d.removeAndCleanupTarget(t,e)})).catch(Kn)];case 2:l.sent(),l.label=3;case 3:return[2]}}))}))},t.prototype.applyBatchState=function(t,e,n){return l.__awaiter(this,void 0,void 0,(function(){var r;return l.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=o.sent())?(S("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return o.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):C("Unknown batchState: "+e),o.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return o.sent(),[2]}}))}))},t.prototype.applySuccessfulWrite=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n;return l.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),e=t.batch.batchId,this.processUserCallback(e,null),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Kn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.rejectFailedWrite=function(t,e){return l.__awaiter(this,void 0,void 0,(function(){var n;return l.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"rejected",e),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Kn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.registerPendingWritesCallback=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n;return l.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||S("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=r.sent())?(t.resolve(),[2]):((n=this.pendingWritesCallbacks.get(e)||[]).push(t),this.pendingWritesCallbacks.set(e,n),[2])}}))}))},t.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach((function(t){t.resolve()})),this.pendingWritesCallbacks.delete(t)},t.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach((function(e){e.forEach((function(e){e.reject(new A(D.CANCELLED,t))}))})),this.pendingWritesCallbacks.clear()},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Lt(ot)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(I(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupTarget=function(t,e){var n=this;void 0===e&&(e=null),this.sharedClientState.removeLocalQueryTarget(t),I(this.queriesByTarget[t]&&0!==this.queriesByTarget[t].length,"There are no queries mapped to target id "+t);for(var r=0,o=this.queriesByTarget[t];r<o.length;r++){var c=o[r];this.queryViewsByQuery.delete(c),e&&this.syncEngineListener.onWatchError(c,e)}if(delete this.queriesByTarget[t],this.isPrimary){var l=this.limboDocumentRefs.referencesForId(t);this.limboDocumentRefs.removeReferencesForId(t),l.forEach((function(t){n.limboDocumentRefs.containsKey(t)||n.removeLimboTarget(t)}))}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o instanceof Ur)this.limboDocumentRefs.addReference(o.key,t),this.trackLimboChange(o);else if(o instanceof qr){S("SyncEngine","Document no longer in limbo: "+o.key),this.limboDocumentRefs.removeReference(o.key,t),this.limboDocumentRefs.containsKey(o.key)||this.removeLimboTarget(o.key)}else C("Unknown limbo change: "+JSON.stringify(o))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){S("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=gi.atPath(e.path);this.limboResolutionsByTarget[n]=new Kr(e),this.remoteStore.listen(new Bn(r.toTarget(),n,On.LimboResolution,gt.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return l.__awaiter(this,void 0,void 0,(function(){var n,r,o,c=this;return l.__generator(this,(function(l){switch(l.label){case 0:return n=[],r=[],o=[],this.queryViewsByQuery.forEach((function(l,h){o.push(Promise.resolve().then((function(){var e=h.view.computeDocChanges(t);return e.needsRefill?c.localStore.executeQuery(h.query,!1).then((function(t){var n=t.documents;return h.view.computeDocChanges(n,e)})):e})).then((function(t){var o=e&&e.targetChanges[h.targetId],l=h.view.applyChanges(t,!0===c.isPrimary,o);if(c.updateTrackedLimbos(h.targetId,l.limboChanges),l.snapshot){c.isPrimary&&c.sharedClientState.updateQueryState(h.targetId,l.snapshot.fromCache?"not-current":"current"),n.push(l.snapshot);var d=jr.fromSnapshot(h.targetId,l.snapshot);r.push(d)}})))})),[4,Promise.all(o)];case 1:return l.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return l.sent(),[2]}}))}))},t.prototype.assertSubscribed=function(t){I(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n;return l.__generator(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(t)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},t.prototype.applyPrimaryState=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,c,h,d,f=this;return l.__generator(this,(function(l){switch(l.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return l.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=l.sent(),r=0,o=n;r<o.length;r++)c=o[r],this.remoteStore.listen(c);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,h=[],d=Promise.resolve(),P(this.queriesByTarget,(function(t,e){f.sharedClientState.isLocalQueryTarget(t)?h.push(t):d=d.then((function(){return f.removeAndCleanupTarget(t),f.localStore.releaseTarget(t,!0)})),f.remoteStore.unlisten(t)})),[4,d]);case 4:return l.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(h)];case 5:return l.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))},t.prototype.resetLimboDocuments=function(){var t=this;P(this.limboResolutionsByTarget,(function(e){t.remoteStore.unlisten(e)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Lt(Tt.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){return l.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,c,h,d,f,m,v,y,w,S;return l.__generator(this,(function(l){switch(l.label){case 0:e=[],n=[],r=0,o=t,l.label=1;case 1:return r<o.length?(c=o[r],h=void 0,(d=this.queriesByTarget[c])&&0!==d.length?[4,this.localStore.releaseTarget(c,!0)]:[3,8]):[3,14];case 2:return l.sent(),[4,this.localStore.allocateTarget(d[0].toTarget())];case 3:h=l.sent(),f=0,m=d,l.label=4;case 4:return f<m.length?(v=m[f],I(!!(y=this.queryViewsByQuery.get(v)),"No query view found for "+v),[4,this.synchronizeViewAndComputeSnapshot(y)]):[3,7];case 5:(w=l.sent()).snapshot&&n.push(w.snapshot),l.label=6;case 6:return f++,[3,4];case 7:return[3,12];case 8:return I(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(c)];case 9:return I(!!(S=l.sent()),"Target for id "+c+" not found"),[4,this.localStore.allocateTarget(S)];case 10:return h=l.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(S),c,!1)];case 11:l.sent(),l.label=12;case 12:e.push(h),l.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,e]}}))}))},t.prototype.synthesizeTargetToQuery=function(t){return new gi(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,mi.First,t.startAt,t.endAt)},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return l.__awaiter(this,void 0,void 0,(function(){var r,o;return l.__generator(this,(function(c){switch(c.label){case 0:if(this.isPrimary)return S("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=c.sent(),o=cr.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(r,o)];case 3:return c.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(t,!0)];case 5:return c.sent(),this.removeAndCleanupTarget(t,n),[3,7];case 6:C("Unexpected target state: "+e),c.label=7;case 7:return[2]}}))}))},t.prototype.applyActiveTargetsChange=function(t,e){return l.__awaiter(this,void 0,void 0,(function(){var n,r,o,c,h,d,f,m,v,y=this;return l.__generator(this,(function(w){switch(w.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,w.label=1;case 1:return n<r.length?(v=r[n],I(!this.queriesByTarget[v],"Trying to add an already active target"),[4,this.localStore.getTarget(v)]):[3,6];case 2:return I(!!(o=w.sent()),"Query data for active target "+v+" not found"),[4,this.localStore.allocateTarget(o)];case 3:return c=w.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(o),c.targetId,!1)];case 4:w.sent(),this.remoteStore.listen(c),w.label=5;case 5:return n++,[3,1];case 6:h=function(t){return l.__generator(this,(function(e){switch(e.label){case 0:return d.queriesByTarget[t]?[4,d.localStore.releaseTarget(t,!1).then((function(){y.remoteStore.unlisten(t),y.removeAndCleanupTarget(t)})).catch(Kn)]:[2,"continue"];case 1:return e.sent(),[2]}}))},d=this,f=0,m=e,w.label=7;case 7:return f<m.length?(v=m[f],[5,h(v)]):[3,10];case 8:w.sent(),w.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];if(e&&e.receivedDocument)return Yt().add(e.key);var n=Yt(),r=this.queriesByTarget[t];if(!r)return n;for(var o=0,c=r;o<c.length;o++){var l=c[o],h=this.queryViewsByQuery.get(l);I(!!h,"No query view found for "+l),n=n.unionWith(h.view.syncedDocuments)}return n},t}(),Qr=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Yr="firestore_clients";function Xr(t,e){return I(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),Yr+"_"+t+"_"+e}var Jr="firestore_mutations";function Zr(t,e,n){var r=Jr+"_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}var to="firestore_targets";function eo(t,e){return to+"_"+t+"_"+e}var no="firestore_online_state";var io="firestore_sequence_number";var ro="SharedClientState",oo=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,I(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var o=JSON.parse(r),c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error),l=void 0;return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(l=new A(o.error.code,o.error.message)),c?new t(e,n,o.state,l):(T(ro,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ao=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,I(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),c=void 0;return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(c=new A(r.error.code,r.error.message)),o?new t(e,r.state,c):(T(ro,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),so=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),o="object"==typeof r&&r.activeTargetIds instanceof Array,c=Jt(),i=0;o&&i<r.activeTargetIds.length;++i)o=pi(r.activeTargetIds[i]),c=c.add(r.activeTargetIds[i]);return o?new t(e,c):(T(ro,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),uo=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&n.onlineState in $i&&"string"==typeof n.clientId?new t(n.clientId,$i[n.onlineState]):(T(ro,"Failed to parse online state: "+e),null)},t}(),co=function(){function t(){this.activeTargetIds=Jt()}return t.prototype.addQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var data={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(data)},t}(),lo=function(){function t(e,n,r,o,c){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new A(D.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=c,this.localClientStorageKey=Xr(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(t){return io+"_"+t}(this.persistenceKey),this.activeClients[this.localClientId]=new co,this.clientStateKeyRe=new RegExp("^"+Yr+"_"+l+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Jr+"_"+l+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+to+"_"+l+"_(\\d+)$"),this.onlineStateKey=function(t){return no+"_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return l.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,o,c,h,d,f,m,v,y=this;return l.__generator(this,(function(l){switch(l.label){case 0:return I(!this.started,"WebStorageSharedClientState already started"),I(null!==this.syncEngine,"syncEngine property must be set before calling start()"),I(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(o=this.getItem(Xr(this.persistenceKey,r)))&&(c=so.fromWebStorageEntry(r,o))&&(this.activeClients[c.clientId]=c);for(this.persistClientState(),(h=this.storage.getItem(this.onlineStateKey))&&(d=this.fromWebStorageOnlineState(h))&&this.handleOnlineStateEvent(d),f=0,m=this.earlyEvents;f<m.length;f++)v=m[f],this.handleWebStorageEvent(v);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return y.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Jt();return R(this.activeClients,(function(e,n){t=t.unionWith(n.activeTargetIds)})),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(eo(this.persistenceKey,t));if(n){var r=ao.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(eo(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.removeMutationState(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return S(ro,"READ",t,e),e},t.prototype.setItem=function(t,e){S(ro,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){S(ro,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(S(ro,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void T("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return l.__awaiter(e,void 0,void 0,(function(){var e,n,r,o,c,h;return l.__generator(this,(function(l){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(o=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(o)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(c=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(c)]}else t.key===this.sequenceNumberKey&&(I(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(h=function(t){var e=gt.INVALID;if(null!=t)try{var n=JSON.parse(t);I("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){T(ro,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==gt.INVALID&&this.sequenceNumberHandler(h));return[2]}))}))}))}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new oo(this.currentUser,t,e,n),o=Zr(this.persistenceKey,this.currentUser,t);this.setItem(o,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=Zr(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:$i[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},t.prototype.persistQueryTargetState=function(t,e,n){var r=eo(this.persistenceKey,t),o=new ao(t,e,n);this.setItem(r,o.toWebStorageJSON())},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return I(null!==n,"Cannot parse client state key '"+t+"'"),so.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);I(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),o=void 0!==n[2]?n[2]:null;return oo.fromWebStorageEntry(new Qr(o),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);I(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return ao.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return uo.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(S(ro,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]}))}))},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var o=this.getAllActiveQueryTargets(),c=[],h=[];return o.forEach((function(t){return l.__awaiter(n,void 0,void 0,(function(){return l.__generator(this,(function(e){return r.has(t)||c.push(t),[2]}))}))})),r.forEach((function(t){return l.__awaiter(n,void 0,void 0,(function(){return l.__generator(this,(function(e){return o.has(t)||h.push(t),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(c,h)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}();var ho=function(){function t(){this.localState=new co,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new co,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),fo=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.lruParams=function(){return Xn.withCacheSize(this.cacheSizeBytes)},t}(),po=function(){},mo=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=it.newId()}return t.prototype.start=function(t){var e=this;this.verifyNotTerminated();var n=new _t,r=new _t,o=!1;return this.credentials.setChangeListener((function(c){o?e.asyncQueue.enqueueAndForget((function(){return e.handleCredentialChange(c)})):(o=!0,e.initializePersistence(t,r,c).then((function(t){return e.initializeRest(c,t)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.enableNetwork()}))},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof fo?this.startIndexedDbPersistence(n,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()})):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof A?t.code===D.FAILED_PRECONDITION||t.code===D.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code||11===t.code)},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new A(D.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=ii.buildStoragePrefix(this.databaseInfo),o=new Lr(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return l.__awaiter(n,void 0,void 0,(function(){var n,c;return l.__generator(this,(function(l){switch(l.label){case 0:if(e.synchronizeTabs&&!lo.isAvailable(this.platform))throw new A(D.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.lruParams(),this.sharedClientState=e.synchronizeTabs?new lo(this.asyncQueue,this.platform,r,this.clientId,t):new ho,[4,ii.createIndexedDbPersistence({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:o,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return c=l.sent(),this.persistence=c,[2,c.referenceDelegate.garbageCollector]}}))}))}))},t.prototype.startMemoryPersistence=function(){return this.persistence=Li.createEagerPersistence(this.clientId),this.sharedClientState=new ho,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return S("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return l.__awaiter(n,void 0,void 0,(function(){var n,o,c,h,d,f,m=this;return l.__generator(this,(function(v){switch(v.label){case 0:return n=new Oi,this.localStore=new Wn(this.persistence,n,t),[4,this.localStore.start()];case 1:return v.sent(),e&&(this.lruScheduler=new Jn(e,this.asyncQueue,this.localStore)),o=this.platform.newConnectivityMonitor(),c=this.platform.newSerializer(this.databaseInfo.databaseId),h=new Qi(this.asyncQueue,r,this.credentials,c),d=function(t){return m.syncEngine.applyOnlineStateChange(t,Hi.RemoteStore)},f=function(t){return m.syncEngine.applyOnlineStateChange(t,Hi.SharedClientState)},this.remoteStore=new Sr(this.localStore,h,this.asyncQueue,d,o),this.syncEngine=new Gr(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=f,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Br(this.syncEngine),[4,this.sharedClientState.start()];case 2:return v.sent(),[4,this.remoteStore.start()];case 3:return v.sent(),[4,this.persistence.setPrimaryStateListener((function(t){return l.__awaiter(m,void 0,void 0,(function(){return l.__generator(this,(function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return v.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return l.__awaiter(m,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return v.sent(),[2]}}))}))}))},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return l.__awaiter(t,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotTerminated();var e=new _t;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.registerPendingWritesCallback(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.verifyNotTerminated();var o=new Fr(t,e,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(o)})),o},t.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.unlisten(t)}))},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.localStore.readDocument(t)})).then((function(t){if(t instanceof en)return t;if(t instanceof nn)return null;throw new A(D.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return l.__awaiter(e,void 0,void 0,(function(){var e,view,n;return l.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return e=r.sent(),view=new zr(t,e.remoteKeys),n=view.computeDocChanges(e.documents),[2,view.applyChanges(n,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.verifyNotTerminated();var n=new _t;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.write(t,n)})),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.addSnapshotsInSyncListener=function(t){var e=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.addSnapshotsInSyncListener(t),Promise.resolve()}))},t.prototype.removeSnapshotsInSyncListener=function(t){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(t)},Object.defineProperty(t.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.verifyNotTerminated();var n=new _t;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()})),n.promise},t}(),vo=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),go=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new A(D.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+nt(r,"element")+".")}("FieldPath",t,"fieldNames",1);for(var i=0;i<t.length;++i)if(j("FieldPath","string",i,t[i]),0===t[i].length)throw new A(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Z("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(St.keyField().canonicalString()),t}(),yo=new RegExp("[~\\*/\\[\\]]");var bo=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},wo=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){I(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(Qr.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){I(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),So=function(){function t(t){var e=this;this.tokenListener=null,this.currentUser=Qr.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),t.get().then((function(t){e.auth=t,e.tokenListener&&e.auth.addAuthTokenListener(e.tokenListener)}),(function(){})))}return t.prototype.getToken=function(){var t=this;I(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.tokenCounter!==e)throw new A(D.ABORTED,"getToken aborted due to token change.");return n?(I("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new bo(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){I(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){I(null!=this.tokenListener,"removeChangeListener() called twice"),I(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.auth&&this.auth.getUid();return I(null===t||"string"==typeof t,"Received invalid UID: "+t),new Qr(t)},t}(),To=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=Qr.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),_o=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new To(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(Qr.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Co(t){if(!t)return new wo;switch(t.type){case"gapi":var e=t.client;return I(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new _o(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new A(D.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function Io(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var object=t,n=0,r=e;n<r.length;n++){var o=r[n];if(o in object&&"function"==typeof object[o])return!0}return!1}(t,["next","error","complete"])}var Eo,ko=function(){function t(t){this._methodName=t}return t.delete=function(){return L("FieldValue.delete",arguments),Do.instance},t.serverTimestamp=function(){return L("FieldValue.serverTimestamp",arguments),Ao.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return B("FieldValue.arrayUnion",arguments,1),new No(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return B("FieldValue.arrayRemove",arguments,1),new Oo(t)},t.increment=function(t){return j("FieldValue.increment","number",1,t),V("FieldValue.increment",arguments,1),new xo(t)},t.prototype.isEqual=function(t){return this===t},t}(),Do=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return l.__extends(e,t),e.instance=new e,e}(ko),Ao=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return l.__extends(e,t),e.instance=new e,e}(ko),No=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return l.__extends(e,t),e}(ko),Oo=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return l.__extends(e,t),e}(ko),xo=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return l.__extends(e,t),e}(ko),Po=N(ko,"Use FieldValue.<field>() instead."),Ro=/^__.*__$/,Mo=function(){function t(data,t,e){this.data=data,this.fieldMask=t,this.fieldTransforms=e}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new Re(t,this.data,this.fieldMask,e)):n.push(new Pe(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Me(t,this.fieldTransforms)),n},t}(),Lo=function(){function t(data,t,e){this.data=data,this.fieldMask=t,this.fieldTransforms=e}return t.prototype.toMutations=function(t,e){var n=[new Re(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new Me(t,this.fieldTransforms)),n},t}();function Vo(t){switch(t){case Eo.Set:case Eo.MergeSet:case Eo.Update:return!0;case Eo.Argument:case Eo.ArrayArgument:return!1;default:throw C("Unexpected case for UserDataSource: "+t)}}!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument",t[t.ArrayArgument=4]="ArrayArgument"}(Eo||(Eo={}));var Bo=function(){function t(t,e,path,n,r,o){this.dataSource=t,this.methodName=e,this.path=path,this.arrayElement=n,void 0===r&&this.validatePath(),this.arrayElement=void 0!==n&&n,this.fieldTransforms=r||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new A(D.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.validatePath=function(){if(null!==this.path)for(var i=0;i<this.path.length;i++)this.validatePathSegment(this.path.get(i))},t.prototype.validatePathSegment=function(t){if(0===t.length)throw this.createError("Document fields must not be empty");if(Vo(this.dataSource)&&Ro.test(t))throw this.createError('Document fields cannot begin and end with "__"')},t}(),Fo=function(t,e){this.databaseId=t,this.key=e},jo=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,input){var e=new Bo(Eo.Set,t,St.EMPTY_PATH);qo("Data must be an object, but it was:",e,input);var n=this.parseData(input,e);return new Mo(n,null,e.fieldTransforms)},t.prototype.parseMergeData=function(t,input,e){var n=new Bo(Eo.MergeSet,t,St.EMPTY_PATH);qo("Data must be an object, but it was:",n,input);var r,o,c=this.parseData(input,n);if(e){for(var l=new jt(St.comparator),h=0,d=e;h<d.length;h++){var f=d[h],m=void 0;if(f instanceof go)m=f._internalPath;else{if("string"!=typeof f)throw C("Expected stringOrFieldPath to be a string or a FieldPath");m=$o(t,f)}if(!n.contains(m))throw new A(D.INVALID_ARGUMENT,"Field '"+m+"' is specified in your field mask but missing from your input data.");l=l.add(m)}r=Ee.fromSet(l),o=n.fieldTransforms.filter((function(t){return r.covers(t.field)}))}else r=Ee.fromArray(n.fieldMask),o=n.fieldTransforms;return new Mo(c,r,o)},t.prototype.parseUpdateData=function(t,input){var e=this,n=new Bo(Eo.Update,t,St.EMPTY_PATH);qo("Data must be an object, but it was:",n,input);var r=new jt(St.comparator),o=Je.EMPTY;R(input,(function(c,l){var path=$o(t,c),h=n.childContextForFieldPath(path);if((l=e.runPreConverter(l,h))instanceof Do)r=r.add(path);else{var d=e.parseData(l,h);null!=d&&(r=r.add(path),o=o.set(path,d))}}));var mask=Ee.fromSet(r);return new Lo(o,mask,n.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var o=new Bo(Eo.Update,t,St.EMPTY_PATH),c=[zo(t,e)],l=[n];if(r.length%2!=0)throw new A(D.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var i=0;i<r.length;i+=2)c.push(zo(t,r[i])),l.push(r[i+1]);var h=new jt(St.comparator),d=Je.EMPTY;for(i=0;i<c.length;++i){var path=c[i],f=o.childContextForFieldPath(path),m=this.runPreConverter(l[i],f);if(m instanceof Do)h=h.add(path);else{var v=this.parseData(m,f);null!=v&&(h=h.add(path),d=d.set(path,v))}}var mask=Ee.fromSet(h);return new Lo(d,mask,o.fieldTransforms)},t.prototype.parseQueryValue=function(t,input,e){void 0===e&&(e=!1);var n=new Bo(e?Eo.ArrayArgument:Eo.Argument,t,St.EMPTY_PATH),r=this.parseData(input,n);return I(null!=r,"Parsed data should not be null."),I(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(input,t){try{return this.preConverter(input)}catch(n){var e=Ho(n);throw t.createError(e)}},t.prototype.parseData=function(input,t){if(Uo(input=this.runPreConverter(input,t)))return qo("Unsupported field value:",t,input),this.parseObject(input,t);if(input instanceof ko)return this.parseSentinelFieldValue(input,t),null;if(t.path&&t.fieldMask.push(t.path),input instanceof Array){if(t.arrayElement&&t.dataSource!==Eo.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(input,t)}return this.parseScalarValue(input,t)},t.prototype.parseObject=function(t,e){var n=this,r=new Lt(ot);return M(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):R(t,(function(t,o){var c=n.parseData(o,e.childContextForField(t));null!=c&&(r=r.insert(t,c))})),new Je(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,o=0,c=t;o<c.length;o++){var l=c[o],h=this.parseData(l,e.childContextForArray(r));null==h&&(h=je.INSTANCE),n.push(h),r++}return new Ze(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!Vo(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof Do){if(e.dataSource!==Eo.MergeSet)throw e.dataSource===Eo.Update?(I(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof Ao)e.fieldTransforms.push(new ke(e.path,_r.instance));else if(t instanceof No){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new Cr(n);e.fieldTransforms.push(new ke(e.path,r))}else if(t instanceof Oo){n=this.parseArrayTransformElements(t._methodName,t._elements);var o=new Ir(n);e.fieldTransforms.push(new ke(e.path,o))}else if(t instanceof xo){var c=this.parseQueryValue("FieldValue.increment",t._operand),l=new Er(c);e.fieldTransforms.push(new ke(e.path,l))}else C("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return je.INSTANCE;if("number"==typeof t)return pi(t)?new $e(t):new He(t);if("boolean"==typeof t)return Ue.of(t);if("string"==typeof t)return new We(t);if(t instanceof Date)return new Ke(Rt.fromDate(t));if(t instanceof Rt)return new Ke(new Rt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Tr)return new Xe(t);if(t instanceof ht)return new Qe(t);if(t instanceof Fo)return new Ye(t.databaseId,t.key);throw e.createError("Unsupported field value: "+Y(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map((function(element,i){var e=new Bo(Eo.Argument,t,St.EMPTY_PATH);return n.parseData(element,e.childContextForArray(i))}))},t}();function Uo(input){return!("object"!=typeof input||null===input||input instanceof Array||input instanceof Date||input instanceof Rt||input instanceof Tr||input instanceof ht||input instanceof Fo||input instanceof ko)}function qo(t,e,input){if(!Uo(input)||!Q(input)){var n=Y(input);throw"an object"===n?e.createError(t+" a custom object"):e.createError(t+" "+n)}}function zo(t,path){if(path instanceof go)return path._internalPath;if("string"==typeof path)return $o(t,path);throw new A(D.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function $o(t,path){try{return function(path){if(path.search(yo)>=0)throw new A(D.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(go.bind.apply(go,l.__spreadArrays([void 0],path.split("."))))}catch(t){throw new A(D.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(path)._internalPath}catch(n){var e=Ho(n);throw new A(D.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+e)}}function Ho(t){return t instanceof Error?t.message:t.toString()}var Wo="firestore.googleapis.com",Ko=!0,Go=!0,Qo=!1,Yo=Xn.COLLECTION_DISABLED,Xo=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new A(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wo,this.ssl=Ko}else z("settings","non-empty string","host",t.host),this.host=t.host,$("settings","boolean","ssl",t.ssl),this.ssl=x(t.ssl,Ko);if(J("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),$("settings","object","credentials",t.credentials),this.credentials=t.credentials,$("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?T("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&T("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=x(t.timestampsInSnapshots,Go),$("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Xn.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==Yo&&t.cacheSizeBytes<Xn.MINIMUM_CACHE_SIZE_BYTES)throw new A(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Xn.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}$("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0===t.experimentalForceLongPolling?Qo:t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),Jo=function(){function t(e,n){var r=this;if(this._firebaseApp=null,this._queue=new It,this.INTERNAL={delete:function(){return l.__awaiter(r,void 0,void 0,(function(){return l.__generator(this,(function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this._firebaseApp=o,this._databaseId=t.databaseIdFromApp(o),this._persistenceKey=o.name,this._credentials=new So(n)}else{var c=e;if(!c.projectId)throw new A(D.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new vt(c.projectId,c.database),this._persistenceKey="[DEFAULT]",this._credentials=new wo}this._settings=new Xo({}),this._dataConverter=this.createDataConverter(this._databaseId)}return t.prototype.settings=function(t){if(V("Firestore.settings",arguments,1),j("Firestore.settings","object",1,t),O(t,"persistence"))throw new A(D.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Xo(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new A(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=e,void 0!==e.credentials&&(this._credentials=Co(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new A(D.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&T("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=x(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new fo(this._settings.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=ii.buildStoragePrefix(this.makeDatabaseInfo()),n=new _t;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return l.__awaiter(t,void 0,void 0,(function(){var t;return l.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new A(D.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,ii.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.ensureClientConfigured(),Io(t))return this.onSnapshotsInSyncInternal(t);j("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.onSnapshotsInSyncInternal(e)},t.prototype.onSnapshotsInSyncInternal=function(t){var e=this,n=new vo({next:function(){t.next&&t.next()},error:function(t){throw C("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),e._firestoreClient.removeSnapshotsInSyncListener(n)}},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new po),this._firestoreClient},t.prototype.makeDatabaseInfo=function(){return new pt(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},t.prototype.configureClient=function(t){I(!!this._settings.host,"FirestoreSettings.host is not set"),I(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new mo(E.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},t.prototype.createDataConverter=function(t){return new jo((function(e){if(e instanceof ea){var n=t,r=e.firestore._databaseId;if(!r.isEqual(n))throw new A(D.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Fo(t,e._key)}return e}))},t.databaseIdFromApp=function(t){var e=t.options;if(!O(e,"projectId"))throw new A(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new A(D.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new vt(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._firebaseApp)throw new A(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return V("Firestore.collection",arguments,1),j("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new sa(bt.fromString(t),this)},t.prototype.doc=function(t){return V("Firestore.doc",arguments,1),j("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),ea.forPath(bt.fromString(t),this)},t.prototype.collectionGroup=function(t){if(V("Firestore.collectionGroup",arguments,1),j("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new A(D.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new oa(new gi(bt.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return V("Firestore.runTransaction",arguments,1),j("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction((function(n){return t(new Zo(e,n))}))},t.prototype.batch=function(){return this.ensureClientConfigured(),new ta(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(y()){case o.DEBUG:return"debug";case o.ERROR:return"error";case o.SILENT:return"silent";default:return C("Unknown log level: "+y())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(V("Firestore.setLogLevel",arguments,1),j("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":w(o.DEBUG);break;case"error":w(o.ERROR);break;case"silent":w(o.SILENT);break;default:throw new A(D.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},t}(),Zo=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;V("Transaction.get",arguments,1);var n=ha("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return C("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof nn)return new ia(e._firestore,n._key,null,!1,!1,n._converter);if(r instanceof en)return new ia(e._firestore,n._key,r,!1,!1,n._converter);throw C("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},t.prototype.set=function(t,e,n){F("Transaction.set",arguments,2,3);var r=ha("Transaction.set",t,this._firestore);n=ua("Transaction.set",n);var o=fa(r._converter,e,"Transaction.set"),c=o[0],l=o[1],h=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(l,c,n.mergeFields):this._firestore._dataConverter.parseSetData(l,c);return this._transaction.set(r._key,h),this},t.prototype.update=function(t,e,n){for(var r,o,c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return"string"==typeof e||e instanceof go?(B("Transaction.update",arguments,3),r=ha("Transaction.update",t,this._firestore),o=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,c)):(V("Transaction.update",arguments,2),r=ha("Transaction.update",t,this._firestore),o=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,o),this},t.prototype.delete=function(t){V("Transaction.delete",arguments,1);var e=ha("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),ta=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){F("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=ha("WriteBatch.set",t,this._firestore);n=ua("WriteBatch.set",n);var o=fa(r._converter,e,"WriteBatch.set"),c=o[0],l=o[1],h=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(l,c,n.mergeFields):this._firestore._dataConverter.parseSetData(l,c);return this._mutations=this._mutations.concat(h.toMutations(r._key,Oe.NONE)),this},t.prototype.update=function(t,e,n){for(var r,o,c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return this.verifyNotCommitted(),"string"==typeof e||e instanceof go?(B("WriteBatch.update",arguments,3),r=ha("WriteBatch.update",t,this._firestore),o=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,c)):(V("WriteBatch.update",arguments,2),r=ha("WriteBatch.update",t,this._firestore),o=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(o.toMutations(r._key,Oe.exists(!0))),this},t.prototype.delete=function(t){V("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=ha("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new Le(e._key,Oe.NONE)),this},t.prototype.commit=function(){return l.__awaiter(this,void 0,void 0,(function(){return l.__generator(this,(function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new A(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),ea=function(){function t(t,e,n){this._key=t,this.firestore=e,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(path,e,n){if(path.length%2!=0)throw new A(D.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+path.canonicalString()+" has "+path.length);return new t(new Tt(path),e,n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new sa(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(V("DocumentReference.collection",arguments,1),j("DocumentReference.collection","non-empty string",1,t),!t)throw new A(D.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var path=bt.fromString(t);return new sa(this._key.path.child(path),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Z("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)&&this._converter===e._converter},t.prototype.set=function(t,e){F("DocumentReference.set",arguments,1,2),e=ua("DocumentReference.set",e);var n=fa(this._converter,t,"DocumentReference.set"),r=n[0],o=n[1],c=e.merge||e.mergeFields?this.firestore._dataConverter.parseMergeData(o,r,e.mergeFields):this.firestore._dataConverter.parseSetData(o,r);return this._firestoreClient.write(c.toMutations(this._key,Oe.NONE))},t.prototype.update=function(t,e){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return"string"==typeof t||t instanceof go?(B("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(V("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,Oe.exists(!0)))},t.prototype.delete=function(){return V("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Le(this._key,Oe.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];F("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Io(t[o])||(J("DocumentReference.onSnapshot",r=t[o],["includeMetadataChanges"]),$("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),o++);var c={includeMetadataChanges:r.includeMetadataChanges};return Io(t[o])?n=t[o]:(j("DocumentReference.onSnapshot","function",o,t[o]),U("DocumentReference.onSnapshot","function",o+1,t[o+1]),U("DocumentReference.onSnapshot","function",o+2,t[o+2]),n={next:t[o],error:t[o+1],complete:t[o+2]}),this.onSnapshotInternal(c,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var o=new vo({next:function(t){if(e.next){I(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new ia(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites,n._converter))}},error:r}),c=this._firestoreClient.listen(gi.atPath(this._key.path),o,t);return function(){o.mute(),n._firestoreClient.unlisten(c)}},t.prototype.get=function(t){var e=this;return F("DocumentReference.get",arguments,0,1),la("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then((function(t){n(new ia(e.firestore,e._key,t,!0,t instanceof en&&t.hasLocalMutations,e._converter))}),r):e.getViaSnapshotListener(n,r,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(o){r(),!o.exists&&o.metadata.fromCache?e(new A(D.UNAVAILABLE,"Failed to get document because the client is offline.")):o.exists&&o.metadata.fromCache&&n&&"server"===n.source?e(new A(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(o)},error:e})},t.prototype.withConverter=function(e){return new t(this._key,this.firestore,e)},t}(),na=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ia=function(){function t(t,e,n,r,o,c){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=o,this._converter=c}return t.prototype.data=function(t){if(F("DocumentSnapshot.data",arguments,0,1),t=ca("DocumentSnapshot.data",t),this._document){if(this._converter){var e=new ra(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(e,t)}return this.toJSObject(this._document.data(),Be.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},t.prototype.get=function(t,e){if(F("DocumentSnapshot.get",arguments,1,2),e=ca("DocumentSnapshot.get",e),this._document){var n=this._document.data().field(zo("DocumentSnapshot.get",t));if(null!==n)return this.toJSValue(n,Be.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ea(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new na(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Z("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))&&this._converter===e._converter},t.prototype.toJSObject=function(data,t){var e=this,n={};return data.forEach((function(r,o){n[r]=e.toJSValue(o,t)})),n},t.prototype.toJSValue=function(t,e){if(t instanceof Je)return this.toJSObject(t,e);if(t instanceof Ze)return this.toJSArray(t,e);if(t instanceof Ye){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||T("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new ea(n,this._firestore,this._converter)}return t.value(e)},t.prototype.toJSArray=function(data,t){var e=this;return data.internalValue.map((function(n){return e.toJSValue(n,t)}))},t}(),ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l.__extends(e,t),e.prototype.data=function(e){var data=t.prototype.data.call(this,e);return I(void 0!==data,"Document in a QueryDocumentSnapshot should exist"),data},e}(ia),oa=function(){function t(t,e,n){this._query=t,this.firestore=e,this._converter=n}return t.prototype.where=function(e,n,r){V("Query.where",arguments,3),X("Query.where",3,r);var o,c=["<","<=","==",">=",">","array-contains","in","array-contains-any"];K("Query.where",c,2,n);var l=zo("Query.where",e),h=bi.fromString(n);if(l.isKeyField()){if(h===bi.ARRAY_CONTAINS||h===bi.ARRAY_CONTAINS_ANY)throw new A(D.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+h.toString()+"' queries on FieldPath.documentId().");if(h===bi.IN){this.validateDisjunctiveFilterElements(r,h);for(var d=[],f=0,m=r;f<m.length;f++){var v=m[f];d.push(this.parseDocumentIdValue(v))}o=new Ze(d)}else o=this.parseDocumentIdValue(r)}else h!==bi.IN&&h!==bi.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,h),o=this.firestore._dataConverter.parseQueryValue("Query.where",r,h===bi.IN);var filter=wi.create(l,h,o);return this.validateNewFilter(filter),new t(this._query.addFilter(filter),this.firestore,this._converter)},t.prototype.orderBy=function(e,n){var r;if(F("Query.orderBy",arguments,1,2),U("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Ei.ASCENDING;else{if("desc"!==n)throw new A(D.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Ei.DESCENDING}if(null!==this._query.startAt)throw new A(D.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new A(D.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var o=zo("Query.orderBy",e),c=new Di(o,r);return this.validateNewOrderBy(c),new t(this._query.addOrderBy(c),this.firestore,this._converter)},t.prototype.limit=function(e){return V("Query.limit",arguments,1),j("Query.limit","number",1,e),tt("Query.limit",1,e),new t(this._query.withLimitToFirst(e),this.firestore,this._converter)},t.prototype.limitToLast=function(e){return V("Query.limitToLast",arguments,1),j("Query.limitToLast","number",1,e),tt("Query.limitToLast",1,e),new t(this._query.withLimitToLast(e),this.firestore,this._converter)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];B("Query.startAt",arguments,1);var o=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(o),this.firestore,this._converter)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];B("Query.startAfter",arguments,1);var o=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(o),this.firestore,this._converter)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];B("Query.endBefore",arguments,1);var o=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(o),this.firestore,this._converter)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];B("Query.endAt",arguments,1);var o=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(o),this.firestore,this._converter)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Z("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.withConverter=function(e){return new t(this._query,this.firestore,e)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(X(t,1,e),e instanceof ia){if(n.length>0)throw new A(D.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var o=e;if(!o.exists)throw new A(D.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,o._document,r)}var c=[e].concat(n);return this.boundFromFields(t,c,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],o=0,c=this._query.orderBy;o<c.length;o++){var l=c[o];if(l.field.isKeyField())r.push(new Ye(this.firestore._databaseId,e.key));else{var h=e.field(l.field);if(h instanceof Ge)throw new A(D.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var d=l.field.canonicalString();throw new A(D.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+d+"' (used as the orderBy) does not exist.")}r.push(h)}}return new ki(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new A(D.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var o=[],i=0;i<e.length;i++){var c=e[i];if(r[i].field.isKeyField()){if("string"!=typeof c)throw new A(D.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof c);if(!this._query.isCollectionGroupQuery()&&-1!==c.indexOf("/"))throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+c+"' contains a slash.");var path=this._query.path.child(bt.fromString(c));if(!Tt.isDocumentKey(path))throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+path+"' is not because it contains an odd number of segments.");var l=new Tt(path);o.push(new Ye(this.firestore._databaseId,l))}else{var h=this.firestore._dataConverter.parseQueryValue(t,c);o.push(h)}}return new ki(o,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];F("Query.onSnapshot",arguments,1,4);var n,r={},o=0;return"object"!=typeof t[o]||Io(t[o])||(J("Query.onSnapshot",r=t[o],["includeMetadataChanges"]),$("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),o++),Io(t[o])?n=t[o]:(j("Query.onSnapshot","function",o,t[o]),U("Query.onSnapshot","function",o+1,t[o+1]),U("Query.onSnapshot","function",o+2,t[o+2]),n={next:t[o],error:t[o+1],complete:t[o+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var o=new vo({next:function(t){e.next&&e.next(new aa(n.firestore,n._query,t,n._converter))},error:r}),c=this.firestore.ensureClientConfigured(),l=c.listen(this._query,o,t);return function(){o.mute(),c.unlisten(l)}},t.prototype.validateHasExplicitOrderByForLimitToLast=function(t){if(t.hasLimitToLast()&&0===t.explicitOrderBy.length)throw new A(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return F("Query.get",arguments,0,1),la("Query.get",t),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then((function(t){n(new aa(e.firestore,e._query,t,e._converter))}),r):e.getViaSnapshotListener(n,r,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(o){r(),o.metadata.fromCache&&n&&"server"===n.source?e(new A(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(o)},error:e})},t.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var path=this._query.path.child(bt.fromString(t));if(!Tt.isDocumentKey(path))throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+path+"' is not because it has an odd number of segments ("+path.length+").");return new Ye(this.firestore._databaseId,new Tt(path))}if(t instanceof ea){var e=t;return new Ye(this.firestore._databaseId,e._key)}throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Y(t)+".")},t.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new A(D.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new A(D.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new A(D.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(element){return Number.isNaN(element)})).length>0)throw new A(D.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.validateNewFilter=function(filter){if(filter instanceof wi){var t=[bi.ARRAY_CONTAINS,bi.ARRAY_CONTAINS_ANY],e=[bi.IN,bi.ARRAY_CONTAINS_ANY],n=t.indexOf(filter.op)>=0,r=e.indexOf(filter.op)>=0;if(filter.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(filter.field))throw new A(D.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+filter.field.toString()+"'");var c=this._query.getFirstOrderByField();null!==c&&this.validateOrderByAndInequalityMatch(filter.field,c)}else if(r||n){var l=null;if(r&&(l=this._query.findFilterOperator(e)),null===l&&n&&(l=this._query.findFilterOperator(t)),null!=l)throw l===filter.op?new A(D.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+filter.op.toString()+"' filter."):new A(D.INVALID_ARGUMENT,"Invalid query. You cannot use '"+filter.op.toString()+"' filters with '"+l.toString()+"' filters.")}}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new A(D.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),aa=function(){function t(t,e,n,r){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new na(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;F("QuerySnapshot.forEach",arguments,1,2),j("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach((function(r){t.call(e,n.convertToDocumentImpl(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new oa(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(J("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),$("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new A(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n,r){if(n.oldDocs.isEmpty()){var o,c=0;return n.docChanges.map((function(e){var l=new ra(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key),r);return I(e.type===ir.Added,"Invalid event type for first snapshot"),I(!o||n.query.docComparator(o,e.doc)<0,"Got added events in wrong order"),o=e.doc,{type:"added",doc:l,oldIndex:-1,newIndex:c++}}))}var l=n.oldDocs;return n.docChanges.filter((function(t){return e||t.type!==ir.Metadata})).map((function(e){var o=new ra(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key),r),c=-1,h=-1;return e.type!==ir.Added&&(I((c=l.indexOf(e.doc.key))>=0,"Index for document not found"),l=l.delete(e.doc.key)),e.type!==ir.Removed&&(h=(l=l.add(e.doc)).indexOf(e.doc.key)),{type:da(e.type),doc:o,oldIndex:c,newIndex:h}}))}(this._firestore,e,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Z("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)&&this._converter===e._converter},t.prototype.convertToDocumentImpl=function(t){return new ra(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key),this._converter)},t}();l.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(aa.prototype.docChanges,t,{get:function(){return function(){throw new A(D.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var sa=function(t){function e(e,n,r){var o=t.call(this,gi.atPath(e),n,r)||this;if(o._path=e,e.length%2!=1)throw new A(D.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return o}return l.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new ea(new Tt(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(F("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=it.newId()),j("CollectionReference.doc","non-empty string",1,t),""===t)throw new A(D.INVALID_ARGUMENT,"Document path must be a non-empty string");var path=bt.fromString(t);return ea.forPath(this._query.path.child(path),this.firestore,this._converter)},e.prototype.add=function(t){V("CollectionReference.add",arguments,1),j("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this._path,this.firestore,t)},e}(oa);function ua(t,e){if(void 0===e)return{merge:!1};if(J(t,e,["merge","mergeFields"]),$(t,"boolean","merge",e.merge),H(t,"mergeFields","a string or a FieldPath",e.mergeFields,(function(element){return"string"==typeof element||element instanceof go})),void 0!==e.mergeFields&&void 0!==e.merge)throw new A(D.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ca(t,e){return void 0===e?{}:(J(t,e,["serverTimestamps"]),W(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function la(t,e){U(t,"object",1,e),e&&(J(t,e,["source"]),W(t,0,"source",e.source,["default","server","cache"]))}function ha(t,e,n){if(e instanceof ea){if(e.firestore!==n)throw new A(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Z(t,"DocumentReference",1,e)}function da(t){switch(t){case ir.Added:return"added";case ir.Modified:case ir.Metadata:return"modified";case ir.Removed:return"removed";default:return C("Unknown change type: "+t)}}function fa(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var pa=N(Jo,"Use firebase.firestore() instead."),ma=N(Zo,"Use firebase.firestore().runTransaction() instead."),va=N(ta,"Use firebase.firestore().batch() instead."),ga=N(ea,"Use firebase.firestore().doc() instead."),ya=N(ia),ba=N(ra),wa=N(oa),Sa=N(aa),Ta=N(sa,"Use firebase.firestore().collection() instead."),_a={Firestore:pa,GeoPoint:Tr,Timestamp:Rt,Blob:ft,Transaction:ma,WriteBatch:va,DocumentReference:ga,DocumentSnapshot:ya,Query:wa,QueryDocumentSnapshot:ba,QuerySnapshot:Sa,CollectionReference:Ta,FieldPath:go,FieldValue:Po,setLogLevel:Jo.setLogLevel,CACHE_SIZE_UNLIMITED:Yo};function Ca(t){t.INTERNAL.registerComponent(new component.Component("firestore",(function(t){var e=t.getProvider("app").getImmediate();return new Jo(e,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(t){I(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(_a)))}var Ia=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.shutdown=function(){},t}(),Ea=function(){function t(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return t.prototype.addCallback=function(t){this.callbacks.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},t.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},t.prototype.onNetworkAvailable=function(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++){(0,e[t])(0)}},t.prototype.onNetworkUnavailable=function(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++){(0,e[t])(1)}},t.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ka=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){I(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){I(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){I(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){I(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){I(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){I(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),Da="Connection",Aa={BatchGetDocuments:"batchGet",Commit:"commit"},Na="gl-js/ fire/"+m,Oa=function(){function t(t){this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var header in e.authHeaders)e.authHeaders.hasOwnProperty(header)&&(t[header]=e.authHeaders[header]);t["X-Goog-Api-Client"]=Na},t.prototype.invokeRPC=function(t,e,n){var r=this,o=this.makeUrl(t);return new Promise((function(c,h){var d=new f.XhrIo;d.listenOnce(f.EventType.COMPLETE,(function(){try{switch(d.getLastErrorCode()){case f.ErrorCode.NO_ERROR:var e=d.getResponseJson();S(Da,"XHR received:",JSON.stringify(e)),c(e);break;case f.ErrorCode.TIMEOUT:S(Da,'RPC "'+t+'" timed out'),h(new A(D.DEADLINE_EXCEEDED,"Request time out"));break;case f.ErrorCode.HTTP_ERROR:var n=d.getStatus();if(S(Da,'RPC "'+t+'" failed with status:',n,"response text:",d.getResponseText()),n>0){var r=d.getResponseJson().error;if(r&&r.status&&r.message){var o=(l=r.status,m=l.toLowerCase().replace("_","-"),Object.values(D).indexOf(m)>=0?m:D.UNKNOWN);h(new A(o,r.message))}else h(new A(D.UNKNOWN,"Server responded with status "+d.getStatus()))}else S(Da,'RPC "'+t+'" failed'),h(new A(D.UNAVAILABLE,"Connection failed."));break;default:C('RPC "'+t+'" failed with unanticipated webchannel error '+d.getLastErrorCode()+": "+d.getLastError()+", giving up.")}}finally{S(Da,'RPC "'+t+'" completed.')}var l,m}));var m=l.__assign({},e);delete m.database;var v=JSON.stringify(m);S(Da,"XHR sending: ",o+" "+v);var y={"Content-Type":"text/plain"};r.modifyHeadersForRequest(y,n),d.send(o,"POST",v,y,15)}))},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=f.createWebChannelTransport(),o={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(o.initMessageHeaders,e),d.isReactNative()||d.isElectron()||d.isIE()||d.isUWP()||d.isBrowserExtension()||(o.httpHeadersOverwriteParam="$httpHeaders");var c=n.join("");S(Da,"Creating WebChannel: "+c+" "+o);var l=r.createWebChannel(c,o),h=!1,m=!1,v=new ka({sendFn:function(t){m?S(Da,"Not sending because WebChannel is closed:",t):(h||(S(Da,"Opening WebChannel transport."),l.open(),h=!0),S(Da,"WebChannel sending:",t),l.send(t))},closeFn:function(){return l.close()}}),y=function(t,e){l.listen(t,(function(param){try{e(param)}catch(t){setTimeout((function(){throw t}),0)}}))};return y(f.WebChannel.EventType.OPEN,(function(){m||S(Da,"WebChannel transport opened.")})),y(f.WebChannel.EventType.CLOSE,(function(){m||(m=!0,S(Da,"WebChannel transport closed"),v.callOnClose())})),y(f.WebChannel.EventType.ERROR,(function(t){m||(m=!0,S(Da,"WebChannel transport errored:",t),v.callOnClose(new A(D.UNAVAILABLE,"The operation could not be completed")))})),y(f.WebChannel.EventType.MESSAGE,(function(t){var e;if(!m){var n=t.data[0];I(!!n,"Got a webchannel message without data.");var r=n,o=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(o){S(Da,"WebChannel received error:",o);var c=o.status,code=function(t){var code=Xi[t];if(void 0!==code)return er(code)}(c),h=o.message;void 0===code&&(code=D.INTERNAL,h="Unknown error status: "+c+" with message "+o.message),m=!0,v.callOnClose(new A(code,h)),l.close()}else S(Da,"WebChannel received:",n),v.callOnMessage(n)}})),setTimeout((function(){v.callOnOpen()}),0),v},t.prototype.makeUrl=function(t){var e=Aa[t];return I(void 0!==e,"Unknown REST mapping for: "+t),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+e},t}(),xa=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new Oa(t))},t.prototype.newConnectivityMonitor=function(){return Ea.isAvailable()?new Ea:new Ia},t.prototype.newSerializer=function(t){return new Lr(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();E.setPlatform(new xa);var Pa="@firebase/firestore",Ra="1.10.0";function Ma(t){Ca(t),t.registerVersion(Pa,Ra)}Ma(c),e.registerFirestore=Ma}).call(this,n(116))},185:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(38),o=n(119),c=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),l="[DEFAULT]",h=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=l);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new o.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:l,optional:!1},t),n=e.identifier,o=e.optional,c=this.normalizeInstanceIdentifier(n);try{var h=this.getOrInitializeService(c);if(!h){if(o)return null;throw Error("Service "+this.name+" is not available")}return h}catch(t){if(o)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(component){var t,e;if(component.name!==this.name)throw Error("Mismatching Component "+component.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=component,function(component){return"EAGER"===component.instantiationMode}(component))try{this.getOrInitializeService(l)}catch(t){}try{for(var n=r.__values(this.instancesDeferred.entries()),o=n.next();!o.done;o=n.next()){var c=r.__read(o.value,2),h=c[0],d=c[1],f=this.normalizeInstanceIdentifier(h);try{var m=this.getOrInitializeService(f);d.resolve(m)}catch(t){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=l),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===l?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:l:t},t}();var d=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(component){var t=this.getProvider(component.name);if(t.isComponentSet())throw new Error("Component "+component.name+" has already been registered with "+this.name);t.setComponent(component)},t.prototype.addOrOverwriteComponent=function(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new h(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=c,e.ComponentContainer=d,e.Provider=h},186:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"ErrorCode",(function(){return fi})),n.d(e,"EventType",(function(){return pi})),n.d(e,"WebChannel",(function(){return mi})),n.d(e,"XhrIo",(function(){return vi})),n.d(e,"createWebChannelTransport",(function(){return di}));var g,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},o=o||{},c=r;function l(a){return"string"==typeof a}function h(a){return"number"==typeof a}function d(a,b){a=a.split("."),b=b||c;for(var t=0;t<a.length;t++)if(null==(b=b[a[t]]))return null;return b}function f(){}function p(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var t=Object.prototype.toString.call(a);if("[object Window]"==t)return"object";if("[object Array]"==t||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==t||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&void 0===a.call)return"object";return b}function q(a){return"array"==p(a)}function m(a){var b=p(a);return"array"==b||"object"==b&&"number"==typeof a.length}function v(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var y="closure_uid_"+(1e9*Math.random()>>>0),w=0;function S(a,b,t){return a.call.apply(a.bind,arguments)}function T(a,b,t){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,e),a.apply(b,t)}}return function(){return a.apply(b,arguments)}}function u(a,b,t){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?S:T).apply(null,arguments)}function _(a,b){var t=Array.prototype.slice.call(arguments,1);return function(){var e=t.slice();return e.push.apply(e,arguments),a.apply(this,e)}}var C=Date.now||function(){return+new Date};function I(a,b){function t(){}t.prototype=b.prototype,a.N=b.prototype,a.prototype=new t,a.prototype.constructor=a,a.xb=function(t,e,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return b.prototype[e].apply(t,r)}}function E(){this.j=this.j,this.i=this.i}E.prototype.j=!1,E.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[y]||(this[y]=++w)},E.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var k=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(l(a))return l(b)&&1==b.length?a.indexOf(b,0):-1;for(var t=0;t<a.length;t++)if(t in a&&a[t]===b)return t;return-1},D=Array.prototype.forEach?function(a,b,t){Array.prototype.forEach.call(a,b,t)}:function(a,b,t){for(var e=a.length,n=l(a)?a.split(""):a,r=0;r<e;r++)r in n&&b.call(t,n[r],r,a)};function A(a){return Array.prototype.concat.apply([],arguments)}function N(a){var b=a.length;if(0<b){for(var t=Array(b),e=0;e<b;e++)t[e]=a[e];return t}return[]}function O(a){return/^[\s\xa0]*$/.test(a)}var x,P=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function R(a,b){return-1!=a.indexOf(b)}function M(a,b){return a<b?-1:a>b?1:0}t:{var L=c.navigator;if(L){var V=L.userAgent;if(V){x=V;break t}}x=""}function B(a,b,t){for(var e in a)b.call(t,a[e],e,a)}function F(a){var t,b={};for(t in a)b[t]=a[t];return b}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(a,b){for(var t,e,n=1;n<arguments.length;n++){for(t in e=arguments[n])a[t]=e[t];for(var r=0;r<j.length;r++)t=j[r],Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}}function z(a){return z[" "](a),a}z[" "]=f;var $,a,H=R(x,"Opera"),W=R(x,"Trident")||R(x,"MSIE"),K=R(x,"Edge"),G=K||W,Q=R(x,"Gecko")&&!(R(x.toLowerCase(),"webkit")&&!R(x,"Edge"))&&!(R(x,"Trident")||R(x,"MSIE"))&&!R(x,"Edge"),Y=R(x.toLowerCase(),"webkit")&&!R(x,"Edge");function X(){var a=c.document;return a?a.documentMode:void 0}t:{var J="",Z=(a=x,Q?/rv:([^\);]+)(\)|;)/.exec(a):K?/Edge\/([\d\.]+)/.exec(a):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Y?/WebKit\/(\S+)/.exec(a):H?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Z&&(J=Z?Z[1]:""),W){var tt=X();if(null!=tt&&tt>parseFloat(J)){$=String(tt);break t}}$=J}var et,nt={};function it(a){return function(a,b){var t=nt;return Object.prototype.hasOwnProperty.call(t,a)?t[a]:t[a]=b(a)}(a,(function(){for(var b=0,t=P(String($)).split("."),e=P(String(a)).split("."),n=Math.max(t.length,e.length),r=0;0==b&&r<n;r++){var o=t[r]||"",c=e[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;b=M(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||M(0==o[2].length,0==c[2].length)||M(o[2],c[2]),o=o[3],c=c[3]}while(0==b)}return 0<=b}))}var ot=c.document;et=ot&&W?X()||("CSS1Compat"==ot.compatMode?parseInt($,10):5):void 0;var at=!W||9<=Number(et),st=W&&!it("9"),ut=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{c.addEventListener("test",f,b),c.removeEventListener("test",f,b)}catch(t){}return a}();function ct(a,b){this.type=a,this.a=this.target=b,this.Ia=!0}function lt(a,b){if(ct.call(this,a?a.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,a){var t=this.type=a.type,e=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.a=b,b=a.relatedTarget){if(Q){t:{try{z(b.nodeName);var n=!0;break t}catch(t){}n=!1}n||(b=null)}}else"mouseover"==t?b=a.fromElement:"mouseout"==t&&(b=a.toElement);this.relatedTarget=b,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=l(a.pointerType)?a.pointerType:ht[a.pointerType]||"",this.c=a,a.defaultPrevented&&this.b()}}ct.prototype.b=function(){this.Ia=!1},I(lt,ct);var ht={2:"touch",3:"pen",4:"mouse"};lt.prototype.b=function(){lt.N.b.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,st)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(t){}};var ft="closure_listenable_"+(1e6*Math.random()|0),pt=0;function mt(a,b,t,e,n){this.listener=a,this.proxy=null,this.src=b,this.type=t,this.capture=!!e,this.da=n,this.key=++pt,this.X=this.Z=!1}function vt(a){a.X=!0,a.listener=null,a.proxy=null,a.src=null,a.da=null}function gt(a){this.src=a,this.a={},this.b=0}function yt(a,b){var t=b.type;if(t in a.a){var e,n=a.a[t],r=k(n,b);(e=0<=r)&&Array.prototype.splice.call(n,r,1),e&&(vt(b),0==a.a[t].length&&(delete a.a[t],a.b--))}}function bt(a,b,t,e){for(var n=0;n<a.length;++n){var r=a[n];if(!r.X&&r.listener==b&&r.capture==!!t&&r.da==e)return n}return-1}gt.prototype.add=function(a,b,t,e,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var o=bt(a,b,e,n);return-1<o?(b=a[o],t||(b.Z=!1)):((b=new mt(b,this.src,r,!!e,n)).Z=t,a.push(b)),b};var wt="closure_lm_"+(1e6*Math.random()|0),St={};function Tt(a,b,t,e,n){if(e&&e.once)return function t(a,b,e,n,r){if(q(b)){for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);return null}return e=Nt(e),a&&a[ft]?a.Aa(b,e,v(n)?!!n.capture:!!n,r):_t(a,b,e,!0,n,r)}(a,b,t,e,n);if(q(b)){for(var r=0;r<b.length;r++)Tt(a,b[r],t,e,n);return null}return t=Nt(t),a&&a[ft]?a.za(b,t,v(e)?!!e.capture:!!e,n):_t(a,b,t,!1,e,n)}function _t(a,b,t,e,n,r){if(!b)throw Error("Invalid event type");var o=v(n)?!!n.capture:!!n;if(o&&!at)return null;var c=Dt(a);if(c||(a[wt]=c=new gt(a)),(t=c.add(b,t,e,o,r)).proxy)return t;if(e=function(){var a=kt,b=at?function(t){return a.call(b.src,b.listener,t)}:function(t){if(!(t=a.call(b.src,b.listener,t)))return t};return b}(),t.proxy=e,e.src=a,e.listener=t,a.addEventListener)ut||(n=o),void 0===n&&(n=!1),a.addEventListener(b.toString(),e,n);else if(a.attachEvent)a.attachEvent(It(b.toString()),e);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(e)}return t}function Ct(a){if(!h(a)&&a&&!a.X){var b=a.src;if(b&&b[ft])yt(b.c,a);else{var t=a.type,e=a.proxy;b.removeEventListener?b.removeEventListener(t,e,a.capture):b.detachEvent?b.detachEvent(It(t),e):b.addListener&&b.removeListener&&b.removeListener(e),(t=Dt(b))?(yt(t,a),0==t.b&&(t.src=null,b[wt]=null)):vt(a)}}}function It(a){return a in St?St[a]:St[a]="on"+a}function Et(a,b){var t=a.listener,e=a.da||a.src;return a.Z&&Ct(a),t.call(e,b)}function kt(a,b){return!!a.X||(at?Et(a,new lt(b,this)):Et(a,b=new lt(b||d("window.event"),this)))}function Dt(a){return(a=a[wt])instanceof gt?a:null}var At="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nt(a){return"function"==p(a)?a:(a[At]||(a[At]=function(b){return a.handleEvent(b)}),a[At])}function Ot(){E.call(this),this.c=new gt(this),this.J=this,this.B=null}function xt(a,b,t,e){if(!(b=a.c.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var o=b[r];if(o&&!o.X&&o.capture==t){var c=o.listener,l=o.da||o.src;o.Z&&yt(a.c,o),n=!1!==c.call(l,e)&&n}}return n&&0!=e.Ia}I(Ot,E),Ot.prototype[ft]=!0,(g=Ot.prototype).addEventListener=function(a,b,t,e){Tt(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){!function t(a,b,e,n,r){if(q(b))for(var o=0;o<b.length;o++)t(a,b[o],e,n,r);else n=v(n)?!!n.capture:!!n,e=Nt(e),a&&a[ft]?(a=a.c,(b=String(b).toString())in a.a&&(-1<(e=bt(o=a.a[b],e,n,r))&&(vt(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete a.a[b],a.b--)))):a&&(a=Dt(a))&&(b=a.a[b.toString()],a=-1,b&&(a=bt(b,e,n,r)),(e=-1<a?b[a]:null)&&Ct(e))}(this,a,b,t,e)},g.dispatchEvent=function(a){var b,t=this.B;if(t)for(b=[];t;t=t.B)b.push(t);t=this.J;var e=a.type||a;if(l(a))a=new ct(a,t);else if(a instanceof ct)a.target=a.target||t;else{var n=a;U(a=new ct(e,t),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var o=a.a=b[r];n=xt(o,e,!0,a)&&n}if(n=xt(o=a.a=t,e,!0,a)&&n,n=xt(o,e,!1,a)&&n,b)for(r=0;r<b.length;r++)n=xt(o=a.a=b[r],e,!1,a)&&n;return n},g.G=function(){if(Ot.N.G.call(this),this.c){var t,a=this.c;for(t in a.a){for(var e=a.a[t],n=0;n<e.length;n++)vt(e[n]);delete a.a[t],a.b--}}this.B=null},g.za=function(a,b,t,e){return this.c.add(String(a),b,!1,t,e)},g.Aa=function(a,b,t,e){return this.c.add(String(a),b,!0,t,e)};var Pt=c.JSON.stringify;function Rt(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function Mt(){this.b=this.a=null}Rt.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var Lt,Vt=new Rt((function(){return new Ft}),(function(a){a.reset()}));function Bt(){var a=zt,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function Ft(){this.next=this.b=this.a=null}function jt(a){c.setTimeout((function(){throw a}),0)}function Ut(a,b){Lt||function(){var a=c.Promise.resolve(void 0);Lt=function(){a.then($t)}}(),qt||(Lt(),qt=!0),zt.add(a,b)}Mt.prototype.add=function(a,b){var t=Vt.get();t.set(a,b),this.b?this.b.next=t:this.a=t,this.b=t},Ft.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},Ft.prototype.reset=function(){this.next=this.b=this.a=null};var qt=!1,zt=new Mt;function $t(){for(var a;a=Bt();){try{a.a.call(a.b)}catch(t){jt(t)}var b=Vt;b.f(a),100>b.b&&(b.b++,a.next=b.a,b.a=a)}qt=!1}function Ht(a,b){Ot.call(this),this.b=a||1,this.a=b||c,this.f=u(this.fb,this),this.g=C()}function Wt(a){a.ba=!1,a.L&&(a.a.clearTimeout(a.L),a.L=null)}function Kt(a,b,t){if("function"==p(a))t&&(a=u(a,t));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=u(a.handleEvent,a)}return 2147483647<Number(b)?-1:c.setTimeout(a,b||0)}function Gt(a,b,t){E.call(this),this.f=null!=t?u(a,t):a,this.c=b,this.b=u(this.$a,this),this.a=[]}function Qt(a){a.U=Kt(a.b,a.c),a.f.apply(null,a.a)}function Yt(a){E.call(this),this.b=a,this.a={}}I(Ht,Ot),(g=Ht.prototype).ba=!1,g.L=null,g.fb=function(){if(this.ba){var a=C()-this.g;0<a&&a<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-a):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Wt(this),this.start()))}},g.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=C())},g.G=function(){Ht.N.G.call(this),Wt(this),delete this.a},I(Gt,E),(g=Gt.prototype).ea=!1,g.U=null,g.Ta=function(a){this.a=arguments,this.U?this.ea=!0:Qt(this)},g.G=function(){Gt.N.G.call(this),this.U&&(c.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},g.$a=function(){this.U=null,this.ea&&(this.ea=!1,Qt(this))},I(Yt,E);var Xt=[];function Jt(a,b,t,e){q(t)||(t&&(Xt[0]=t.toString()),t=Xt);for(var n=0;n<t.length;n++){var r=Tt(b,t[n],e||a.handleEvent,!1,a.b||a);if(!r)break;a.a[r.key]=r}}function Zt(a){B(a.a,(function(b,t){this.a.hasOwnProperty(t)&&Ct(b)}),a),a.a={}}function te(){}Yt.prototype.G=function(){Yt.N.G.call(this),Zt(this)},Yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ee=new Ot;function ne(a){ct.call(this,"serverreachability",a)}function ie(a){ee.dispatchEvent(new ne(ee,a))}function re(a){ct.call(this,"statevent",a)}function oe(a){ee.dispatchEvent(new re(ee,a))}function ae(a){ct.call(this,"timingevent",a)}function se(a,b){if("function"!=p(a))throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){a()}),b)}I(ne,ct),I(re,ct),I(ae,ct);var ue={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},ce={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function le(){}function he(a){var b;return(b=a.a)||(b=a.a={}),b}function de(){}le.prototype.a=null;var fe,pe={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function me(){ct.call(this,"d")}function ve(){ct.call(this,"c")}function ge(){}function ye(a,b,t){this.g=a,this.W=b,this.V=t||1,this.I=new Yt(this),this.O=be,a=G?125:void 0,this.P=new Ht(a),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}I(me,ct),I(ve,ct),I(ge,le),fe=new ge;var be=45e3,we={},Se={};function Te(a,b,t){a.F=1,a.f=Ke(je(b)),a.l=t,a.H=!0,Ce(a,null)}function _e(a,b,t,e){a.F=1,a.f=Ke(je(b)),a.l=null,a.H=t,Ce(a,e)}function Ce(a,b){a.v=C(),ke(a),a.D=je(a.f),We(a.D,"t",a.V),a.A=0,a.a=a.g.$(a.g.Y()?b:null),0<a.J&&(a.B=new Gt(u(a.Ja,a,a.a),a.J)),Jt(a.I,a.a,"readystatechange",a.cb),b=a.h?F(a.h):{},a.l?(a.w||(a.w="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.a.ca(a.D,a.w,a.l,b)):(a.w="GET",a.a.ca(a.D,a.w,null,b)),ie(1)}function Ie(a,b,t){for(var e=!0;!a.m&&a.A<t.length;){var n=Ee(a,t);if(n==Se){4==b&&(a.c=4,oe(14),e=!1);break}if(n==we){a.c=4,oe(15),e=!1;break}xe(a,n)}4==b&&0==t.length&&(a.c=1,oe(16),e=!1),a.b=a.b&&e,e||(Oe(a),Ne(a))}function Ee(a,b){var t=a.A,e=b.indexOf("\n",t);return-1==e?Se:(t=Number(b.substring(t,e)),isNaN(t)?we:(e+=1)+t>b.length?Se:(b=b.substr(e,t),a.A=e+t,b))}function ke(a){a.R=C()+a.O,De(a,a.O)}function De(a,b){if(null!=a.i)throw Error("WatchDog timer not null");a.i=se(u(a.ab,a),b)}function Ae(a){a.i&&(c.clearTimeout(a.i),a.i=null)}function Ne(a){a.g.Ca()||a.m||a.g.na(a)}function Oe(a){Ae(a);var b=a.B;b&&"function"==typeof b.la&&b.la(),a.B=null,Wt(a.P),Zt(a.I),a.a&&(b=a.a,a.a=null,b.abort(),b.la())}function xe(a,b){try{a.g.Fa(a,b),ie(4)}catch(t){}}function Pe(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(m(a)||l(a))D(a,b,void 0);else{if(a.K&&"function"==typeof a.K)var t=a.K();else if(a.C&&"function"==typeof a.C)t=void 0;else if(m(a)||l(a)){t=[];for(var e=a.length,n=0;n<e;n++)t.push(n)}else for(n in t=[],e=0,a)t[e++]=n;n=(e=function(a){if(a.C&&"function"==typeof a.C)return a.C();if(l(a))return a.split("");if(m(a)){for(var b=[],t=a.length,e=0;e<t;e++)b.push(a[e]);return b}for(e in b=[],t=0,a)b[t++]=a[e];return b}(a)).length;for(var r=0;r<n;r++)b.call(void 0,e[r],t&&t[r],a)}}function Re(a,b){this.b={},this.a=[],this.c=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var e=0;e<t;e+=2)this.set(arguments[e],arguments[e+1])}else if(a)if(a instanceof Re)for(t=a.K(),e=0;e<t.length;e++)this.set(t[e],a.get(t[e]));else for(e in a)this.set(e,a[e])}function Me(a,b){Ve(a.b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Le(a))}function Le(a){if(a.c!=a.a.length){for(var b=0,t=0;b<a.a.length;){var e=a.a[b];Ve(a.b,e)&&(a.a[t++]=e),b++}a.a.length=t}if(a.c!=a.a.length){var n={};for(t=b=0;b<a.a.length;)Ve(n,e=a.a[b])||(a.a[t++]=e,n[e]=1),b++;a.a.length=t}}function Ve(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(g=ye.prototype).setTimeout=function(a){this.O=a},g.cb=function(a){a=a.target;var b=this.B;b&&3==Bn(a)?b.Ta():this.Ja(a)},g.Ja=function(a){try{if(a==this.a)t:{var b=Bn(this.a),t=this.a.ya(),e=this.a.T();if(!(3>b||3==b&&!G&&!this.a.aa())){this.m||4!=b||7==t||ie(8==t||0>=e?3:2),Ae(this);var n=this.a.T();this.o=n;var r=this.a.aa();if(this.b=200==n){if(this.S&&!this.s){e:{if(this.a){var o=Fn(this.a,"X-HTTP-Initial-Response");if(o&&!O(o)){var c=o;break e}}c=null}if(!c){this.b=!1,this.c=3,oe(12),Oe(this),Ne(this);break t}this.s=!0,xe(this,c)}this.H?(Ie(this,b,r),G&&this.b&&3==b&&(Jt(this.I,this.P,"tick",this.bb),this.P.start())):xe(this,r),4==b&&Oe(this),this.b&&!this.m&&(4==b?this.g.na(this):(this.b=!1,ke(this)))}else 400==n&&0<r.indexOf("Unknown SID")?(this.c=3,oe(12)):(this.c=0,oe(13)),Oe(this),Ne(this)}}}catch(t){}},g.bb=function(){if(this.a){var a=Bn(this.a),b=this.a.aa();this.A<b.length&&(Ae(this),Ie(this,a,b),this.b&&4!=a&&ke(this))}},g.cancel=function(){this.m=!0,Oe(this)},g.ab=function(){this.i=null;var a=C();0<=a-this.R?(2!=this.F&&(ie(3),oe(17)),Oe(this),this.c=2,Ne(this)):De(this,this.R-a)},(g=Re.prototype).C=function(){Le(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},g.K=function(){return Le(this),this.a.concat()},g.get=function(a,b){return Ve(this.b,a)?this.b[a]:b},g.set=function(a,b){Ve(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},g.forEach=function(a,b){for(var t=this.K(),e=0;e<t.length;e++){var n=t[e],r=this.get(n);a.call(b,r,n,this)}};var Be=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(a,b){var t;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,a instanceof Fe?(this.h=void 0!==b?b:a.h,Ue(this,a.f),this.j=a.j,qe(this,a.b),ze(this,a.i),this.a=a.a,$e(this,un(a.c)),this.g=a.g):a&&(t=String(a).match(Be))?(this.h=!!b,Ue(this,t[1]||"",!0),this.j=Ge(t[2]||""),qe(this,t[3]||"",!0),ze(this,t[4]),this.a=Ge(t[5]||"",!0),$e(this,t[6]||"",!0),this.g=Ge(t[7]||"")):(this.h=!!b,this.c=new nn(null,this.h))}function je(a){return new Fe(a)}function Ue(a,b,t){a.f=t?Ge(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function qe(a,b,t){a.b=t?Ge(b,!0):b}function ze(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.i=b}else a.i=null}function $e(a,b,t){b instanceof nn?(a.c=b,function(a,b){b&&!a.f&&(rn(a),a.c=null,a.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(on(this,e),sn(this,n,t))}),a)),a.f=b}(a.c,a.h)):(t||(b=Qe(b,tn)),a.c=new nn(b,a.h))}function He(a,b,t){a.c.set(b,t)}function We(a,b,t){q(t)||(t=[String(t)]),sn(a.c,b,t)}function Ke(a){return He(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^C()).toString(36)),a}function Ge(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Qe(a,b,t){return l(a)?(a=encodeURI(a).replace(b,Ye),t&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ye(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Fe.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Qe(b,Xe,!0),":");var t=this.b;return(t||"file"==b)&&(a.push("//"),(b=this.j)&&a.push(Qe(b,Xe,!0),"@"),a.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.i)&&a.push(":",String(t))),(t=this.a)&&(this.b&&"/"!=t.charAt(0)&&a.push("/"),a.push(Qe(t,"/"==t.charAt(0)?Ze:Je,!0))),(t=this.c.toString())&&a.push("?",t),(t=this.g)&&a.push("#",Qe(t,en)),a.join("")},Fe.prototype.resolve=function(a){var b=je(this),t=!!a.f;t?Ue(b,a.f):t=!!a.j,t?b.j=a.j:t=!!a.b,t?qe(b,a.b):t=null!=a.i;var e=a.a;if(t)ze(b,a.i);else if(t=!!a.a){if("/"!=e.charAt(0))if(this.b&&!this.a)e="/"+e;else{var n=b.a.lastIndexOf("/");-1!=n&&(e=b.a.substr(0,n+1)+e)}if(".."==(n=e)||"."==n)e="";else if(R(n,"./")||R(n,"/.")){e=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],o=0;o<n.length;){var c=n[o++];"."==c?e&&o==n.length&&r.push(""):".."==c?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),e&&o==n.length&&r.push("")):(r.push(c),e=!0)}e=r.join("/")}else e=n}return t?b.a=e:t=""!==a.c.toString(),t?$e(b,un(a.c)):t=!!a.g,t&&(b.g=a.g),b};var Xe=/[#\/\?@]/g,Je=/[#\?:]/g,Ze=/[#\?]/g,tn=/[#\?@]/g,en=/#/g;function nn(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function rn(a){a.a||(a.a=new Re,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var t=0;t<a.length;t++){var e=a[t].indexOf("="),n=null;if(0<=e){var r=a[t].substring(0,e);n=a[t].substring(e+1)}else r=a[t];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,(function(b,t){a.add(decodeURIComponent(b.replace(/\+/g," ")),t)})))}function on(a,b){rn(a),b=cn(a,b),Ve(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Me(a.a,b))}function an(a,b){return rn(a),b=cn(a,b),Ve(a.a.b,b)}function sn(a,b,t){on(a,b),0<t.length&&(a.c=null,a.a.set(cn(a,b),N(t)),a.b+=t.length)}function un(a){var b=new nn;return b.c=a.c,a.a&&(b.a=new Re(a.a),b.b=a.b),b}function cn(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function ln(a){this.a=a,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function hn(a){var b=a.a.F.a;if(null!=b)oe(4),b?(oe(10),Xn(a.a,a,!1)):(oe(11),Xn(a.a,a,!0));else{a.b=new ye(a,void 0,void 0),a.b.h=a.h,b=ni(b=a.a,b.Y()?a.f:null,a.i),oe(4),We(b,"TYPE","xmlhttp");var t=a.a.j,e=a.a.I;t&&e&&He(b,t,e),_e(a.b,b,!1,a.f)}}function dn(){this.a=this.b=null}function fn(){this.a=new Re}function pn(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+(a[y]||(a[y]=++w)):b.charAt(0)+a}function mn(a,b){this.b=a,this.a=b}function vn(a){this.g=a||gn,c.PerformanceNavigationTiming?a=0<(a=c.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(c.ka&&c.ka.Da&&c.ka.Da()&&c.ka.Da().yb),this.f=a?this.g:1,this.a=null,1<this.f&&(this.a=new fn),this.b=null,this.c=[]}(g=nn.prototype).add=function(a,b){rn(this),this.c=null,a=cn(this,a);var t=this.a.get(a);return t||this.a.set(a,t=[]),t.push(b),this.b+=1,this},g.forEach=function(a,b){rn(this),this.a.forEach((function(t,e){D(t,(function(t){a.call(b,t,e,this)}),this)}),this)},g.K=function(){rn(this);for(var a=this.a.C(),b=this.a.K(),t=[],e=0;e<b.length;e++)for(var n=a[e],r=0;r<n.length;r++)t.push(b[e]);return t},g.C=function(a){rn(this);var b=[];if(l(a))an(this,a)&&(b=A(b,this.a.get(cn(this,a))));else{a=this.a.C();for(var t=0;t<a.length;t++)b=A(b,a[t])}return b},g.set=function(a,b){return rn(this),this.c=null,an(this,a=cn(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},g.get=function(a,b){return a&&0<(a=this.C(a)).length?String(a[0]):b},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.K(),t=0;t<b.length;t++){var e=b[t],n=encodeURIComponent(String(e));e=this.C(e);for(var r=0;r<e.length;r++){var o=n;""!==e[r]&&(o+="="+encodeURIComponent(String(e[r]))),a.push(o)}}return this.c=a.join("&")},I((function(){}),(function(){})),(g=ln.prototype).M=null,g.$=function(a){return this.a.$(a)},g.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},g.Ca=function(){return!1},g.Fa=function(a,b){if(this.c=a.o,0==this.M){if(!this.a.o&&(a=a.a)){var t=Fn(a,"X-Client-Wire-Protocol");this.l=t||null,this.a.j&&(a=Fn(a,"X-HTTP-Session-Id"))&&(this.a.I=a)}if(b){try{var e=this.a.ja.a.parse(b)}catch(t){return(b=this.a).m=this.c,void ti(b,2)}this.f=e[0]}else(b=this.a).m=this.c,ti(b,2)}else 1==this.M&&(this.g?oe(6):"11111"==b?(oe(5),this.g=!0,(!W||10<=Number(et))&&(this.c=200,this.b.cancel(),oe(11),Xn(this.a,this,!0))):(oe(7),this.g=!1))},g.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,hn(this)):1==this.M&&(this.g?(oe(11),Xn(this.a,this,!0)):(oe(10),Xn(this.a,this,!1)));else{0==this.M?oe(8):1==this.M&&oe(9);var a=this.a;a.m=this.c,ti(a,2)}},g.Y=function(){return this.a.Y()},g.ma=function(){return this.a.ma()},fn.prototype.add=function(a){this.a.set(pn(a),a)},fn.prototype.C=function(){return this.a.C()};var gn=10;function yn(a,b){!a.a&&(R(b,"spdy")||R(b,"quic")||R(b,"h2"))&&(a.f=a.g,a.a=new fn,a.b&&(dd(a,a.b),a.b=null))}function bn(a){return!!a.b||!!a.a&&a.a.a.c>=a.f}function wn(a){return a.b?1:a.a?a.a.a.c:0}function Sn(a,b){return a.b?a=a.b==b:a.a?(b=pn(b),a=Ve(a.a.a.b,b)):a=!1,a}function dd(a,b){a.a?a.a.add(b):a.b=b}function Tn(a,b){var t;a.b&&a.b==b?a.b=null:((t=a.a)&&(t=pn(b),t=Ve(a.a.a.b,t)),t&&Me(a.a.a,pn(b)))}function _n(a){if(null!=a.b)return a.c.concat(a.b.j);if(null!=a.a&&0!=a.a.a.c){var b=a.c;return D(a.a.C(),(function(t){b=b.concat(t.j)})),b}return N(a.c)}function Cn(){}function In(){this.a=new Cn}function En(a,b,t){var e=t||"";try{Pe(a,(function(t,n){var r=t;v(t)&&(r=Pt(t)),b.push(e+n+"="+encodeURIComponent(r))}))}catch(t){throw b.push(e+"type="+encodeURIComponent("_badmap")),t}}function kn(a,b,t,e,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(e)}catch(t){}}vn.prototype.cancel=function(){this.c=_n(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(D(this.a.C(),(function(a){a.cancel()})),function(a){a.b={},a.a.length=0,a.c=0}(this.a.a))},Cn.prototype.stringify=function(a){return c.JSON.stringify(a,void 0)},Cn.prototype.parse=function(a){return c.JSON.parse(a,void 0)};var Dn=c.JSON.parse;function An(a){Ot.call(this),this.headers=new Re,this.H=a||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Nn,this.D=this.F=!1}I(An,Ot);var Nn="",On=/^https?$/i,xn=["POST","PUT"];function Pn(a){return"content-type"==a.toLowerCase()}function Rn(a,b){a.b=!1,a.a&&(a.g=!0,a.a.abort(),a.g=!1),a.f=b,a.h=5,Mn(a),Vn(a)}function Mn(a){a.v||(a.v=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function Ln(a){if(a.b&&void 0!==o&&(!a.s[1]||4!=Bn(a)||2!=a.T()))if(a.l&&4==Bn(a))Kt(a.Ea,0,a);else if(a.dispatchEvent("readystatechange"),4==Bn(a)){a.b=!1;try{var t,b=a.T();t:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}if(!(t=e)){var n;if(n=0===b){var r=String(a.A).match(Be)[1]||null;if(!r&&c.self&&c.self.location){var l=c.self.location.protocol;r=l.substr(0,l.length-1)}n=!On.test(r?r.toLowerCase():"")}t=n}if(t)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.h=6;try{var h=2<Bn(a)?a.a.statusText:""}catch(t){h=""}a.f=h+" ["+a.T()+"]",Mn(a)}}finally{Vn(a)}}}function Vn(a,b){if(a.a){td(a);var t=a.a,e=a.s[0]?f:null;a.a=null,a.s=null,b||a.dispatchEvent("ready");try{t.onreadystatechange=e}catch(t){}}}function td(a){a.a&&a.D&&(a.a.ontimeout=null),a.m&&(c.clearTimeout(a.m),a.m=null)}function Bn(a){return a.a?a.a.readyState:0}function Fn(a,b){return a.a?a.a.getResponseHeader(b):null}function jn(a,b,t){t:{for(e in t){var e=!1;break t}e=!0}if(e)return a;if(t=function(a){var b="";return B(a,(function(t,e){b+=e,b+=":",b+=t,b+="\r\n"})),b}(t),l(a)){if(b=encodeURIComponent(String(b)),b+=t=null!=t?"="+encodeURIComponent(String(t)):""){if(0>(t=a.indexOf("#"))&&(t=a.length),0>(e=a.indexOf("?"))||e>t){e=t;var n=""}else n=a.substring(e+1,t);t=(a=[a.substr(0,e),n,a.substr(t)])[1],a[1]=b?t?t+"&"+b:b:t,a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a}return He(a,b,t),a}function Un(a){this.f=[],this.F=new dn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!d("internalChannelParams.failFast",a),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=d("internalChannelParams.baseRetryDelayMs",a)||5e3,this.Ra=d("internalChannelParams.retryDelaySeedMs",a)||1e4,this.Pa=d("internalChannelParams.forwardChannelMaxRetries",a)||2,this.qa=d("internalChannelParams.forwardChannelRequestTimeoutMs",a)||2e4,this.Ka=a&&a.zb||void 0,this.D=void 0,this.R=a&&a.supportsCrossDomainXhr||!1,this.H="",this.b=new vn(a&&a.concurrentRequestLimit),this.ja=new In,this.o=!a||void 0===a.backgroundChannelTest||a.backgroundChannelTest,(this.W=a&&a.fastHandshake||!1)&&!this.o&&(this.o=!0),a&&a.forceLongPolling&&(this.oa=!1),this.fa=void 0}function qn(a){if(zn(a),3==a.u){var b=a.P++,t=je(a.B);He(t,"SID",a.H),He(t,"RID",b),He(t,"TYPE","terminate"),Kn(a,t),(b=new ye(a,b,void 0)).F=2,b.f=Ke(je(t)),t=!1,c.navigator&&c.navigator.sendBeacon&&(t=c.navigator.sendBeacon(b.f.toString(),"")),!t&&c.Image&&((new Image).src=b.f,t=!0),t||(b.a=b.g.$(null),b.a.ca(b.f)),b.v=C(),ke(b)}ei(a)}function zn(a){a.w&&(a.w.abort(),a.w=null),a.a&&(a.a.cancel(),a.a=null),a.l&&(c.clearTimeout(a.l),a.l=null),Jn(a),a.b.cancel(),a.h&&(h(a.h)&&c.clearTimeout(a.h),a.h=null)}function $n(a,b){a.f.push(new mn(a.Qa++,b)),3==a.u&&Hn(a)}function Hn(a){bn(a.b)||a.h||(a.h=!0,Ut(a.Ha,a),a.A=0)}function Wn(a,b){var t;t=b?b.W:a.P++;var e=je(a.B);He(e,"SID",a.H),He(e,"RID",t),He(e,"AID",a.O),Kn(a,e),a.g&&a.i&&jn(e,a.g,a.i),t=new ye(a,t,a.A+1),null===a.g&&(t.h=a.i),b&&(a.f=b.j.concat(a.f)),b=Gn(a,t,1e3),t.setTimeout(Math.round(.5*a.qa)+Math.round(.5*a.qa*Math.random())),dd(a.b,t),Te(t,e,b)}function Kn(a,b){a.c&&Pe({},(function(t,e){He(b,e,t)}))}function Gn(a,b,t){t=Math.min(a.f.length,t);var e=a.c?u(a.c.Sa,a.c,a):null;t:for(var n=a.f,r=-1;;){var o=["count="+t];-1==r?0<t?(r=n[0].b,o.push("ofs="+r)):r=0:o.push("ofs="+r);for(var c=!0,l=0;l<t;l++){var h=n[l].b,d=n[l].a;if(0>(h-=r))r=Math.max(0,n[l].b-100),c=!1;else try{En(d,o,"req"+h+"_")}catch(t){e&&e(d)}}if(c){e=o.join("&");break t}}return a=a.f.splice(0,t),b.j=a,e}function Qn(a){a.a||a.l||(a.S=1,Ut(a.Ga,a),a.v=0)}function Yn(a){return!(a.a||a.l||3<=a.v)&&(a.S++,a.l=se(u(a.Ga,a),Zn(a,a.v)),a.v++,!0)}function Xn(a,b,t){var e=b.l;e&&yn(a.b,e),a.ia=a.oa&&t,a.m=b.c,a.B=ni(a,null,a.ha),Hn(a)}function Jn(a){null!=a.s&&(c.clearTimeout(a.s),a.s=null)}function Zn(a,b){var t=a.Na+Math.floor(Math.random()*a.Ra);return a.ma()||(t*=2),t*b}function ti(a,b){if(2==b){var t=null;a.c&&(t=null);var e=u(a.eb,a);t||(t=new Fe("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||Ue(t,"https"),Ke(t)),function(a,b){var t=new te;if(c.Image){var e=new Image;e.onload=_(kn,t,e,"TestLoadImage: loaded",!0,b),e.onerror=_(kn,t,e,"TestLoadImage: error",!1,b),e.onabort=_(kn,t,e,"TestLoadImage: abort",!1,b),e.ontimeout=_(kn,t,e,"TestLoadImage: timeout",!1,b),c.setTimeout((function(){e.ontimeout&&e.ontimeout()}),1e4),e.src=a}else b(!1)}(t.toString(),e)}else oe(2);a.u=0,a.c&&a.c.ta(b),ei(a),zn(a)}function ei(a){a.u=0,a.m=-1,a.c&&(0==_n(a.b).length&&0==a.f.length||(a.b.c.length=0,N(a.f),a.f.length=0),a.c.sa())}function ni(a,b,t){var e=function(a){return a instanceof Fe?je(a):new Fe(a,void 0)}(t);if(""!=e.b)b&&qe(e,b+"."+e.b),ze(e,e.i);else{var n,r=c.location;n=b?b+"."+r.hostname:r.hostname,e=function(a,b,t,e){var n=new Fe(null,void 0);return a&&Ue(n,a),b&&qe(n,b),t&&ze(n,t),e&&(n.a=e),n}(r.protocol,n,+r.port,t)}return a.V&&B(a.V,(function(t,n){He(e,n,t)})),b=a.j,t=a.I,b&&t&&He(e,b,t),He(e,"VER",a.wa),Kn(a,e),e}function ii(){}function ri(){if(W&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function oi(a,b){Ot.call(this),this.a=new Un(b),this.g=a,this.m=b&&b.testUrl?b.testUrl:function(a){for(var b=arguments[0],t=1;t<arguments.length;t++){var e,n=arguments[t];if(0==n.lastIndexOf("/",0))b=n;else(e=""==b)||(e=0<=(e=b.length-1)&&b.indexOf("/",e)==e),b+=e?n:"/"+n}return b}(this.g,"test"),this.b=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.a.i=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.xa&&(a?a["X-WebChannel-Client-Profile"]=b.xa:a={"X-WebChannel-Client-Profile":b.xa}),this.a.J=a,(a=b&&b.httpHeadersOverwriteParam)&&!O(a)&&(this.a.g=a),this.l=b&&b.supportsCrossDomainXhr||!1,this.h=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!O(b)&&(this.a.j=b,null!==(a=this.b)&&b in a&&(b in(a=this.b)&&delete a[b])),this.f=new ui(this)}function ai(a){me.call(this);var b=a.__sm__;if(b){t:{for(var t in b){a=t;break t}a=void 0}(this.c=a)?(a=this.c,this.data=null!==b&&a in b?b[a]:void 0):this.data=b}else this.data=a}function si(){ve.call(this),this.status=1}function ui(a){this.a=a}(g=An.prototype).ca=function(a,b,t,e){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+a);b=b?b.toUpperCase():"GET",this.A=a,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?he(this.H):he(fe),this.a.onreadystatechange=u(this.Ea,this);try{this.w=!0,this.a.open(b,String(a),!0),this.w=!1}catch(t){return void Rn(this,t)}a=t||"";var n=new Re(this.headers);e&&Pe(e,(function(t,e){n.set(e,t)})),e=function(a){t:{for(var b=Pn,t=a.length,e=l(a)?a.split(""):a,n=0;n<t;n++)if(n in e&&b.call(void 0,e[n],n,a)){b=n;break t}b=-1}return 0>b?null:l(a)?a.charAt(b):a[b]}(n.K()),t=c.FormData&&a instanceof c.FormData,!(0<=k(xn,b))||e||t||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{td(this),0<this.o&&((this.D=function(a){return W&&it(9)&&h(a.timeout)&&void 0!==a.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=u(this.Ba,this)):this.m=Kt(this.Ba,this.o,this)),this.l=!0,this.a.send(a),this.l=!1}catch(t){Rn(this,t)}},g.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(a){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Vn(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Vn(this,!0)),An.N.G.call(this)},g.Ea=function(){this.j||(this.w||this.l||this.g?Ln(this):this.Za())},g.Za=function(){Ln(this)},g.T=function(){try{return 2<Bn(this)?this.a.status:-1}catch(t){return-1}},g.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},g.Ua=function(a){if(this.a){var b=this.a.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),Dn(b)}},g.ya=function(){return this.h},g.Xa=function(){return l(this.f)?this.f:String(this.f)},(g=Un.prototype).wa=8,g.u=1,g.Ca=function(){return 0==this.u},g.Ha=function(a){if(this.h)if(this.h=null,1==this.u){if(!a){this.P=Math.floor(1e5*Math.random());var t,b=new ye(this,a=this.P++,void 0),e=this.i;if(this.J&&(e?U(e=F(e),this.J):e=this.J),null===this.g&&(b.h=e),this.W)t:{for(var n=t=0;n<this.f.length;n++){var r=this.f[n];if(void 0===(r="__data__"in r.a&&l(r=r.a.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break t}if(4096===t||n===this.f.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Gn(this,b,t),He(n=je(this.B),"RID",a),He(n,"CVER",22),this.o&&this.j&&He(n,"X-HTTP-Session-Id",this.j),Kn(this,n),this.g&&e&&jn(n,this.g,e),dd(this.b,b),this.W?(He(n,"$req",t),He(n,"SID","null"),b.S=!0,Te(b,n,null)):Te(b,n,t),this.u=2}}else 3==this.u&&(a?Wn(this,a):0==this.f.length||bn(this.b)||Wn(this))},g.Ga=function(){this.l=null,this.a=new ye(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var a=je(this.pa);He(a,"RID","rpc"),He(a,"SID",this.H),He(a,"CI",this.ia?"0":"1"),He(a,"AID",this.O),Kn(this,a),He(a,"TYPE","xmlhttp"),this.g&&this.i&&jn(a,this.g,this.i),this.D&&this.a.setTimeout(this.D),_e(this.a,a,!0,this.ga)},g.Fa=function(a,b){if(0!=this.u&&(this.a==a||Sn(this.b,a)))if(this.m=a.o,!a.s&&Sn(this.b,a)&&3==this.u){try{var t=this.ja.a.parse(b)}catch(e){t=null}if(q(t)&&3==t.length){if(0==(b=t)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<a.v))break t;Jn(this),this.a.cancel(),this.a=null}Yn(this),oe(18)}}else this.ra=b[1],0<this.ra-this.O&&37500>b[2]&&this.ia&&0==this.v&&!this.s&&(this.s=se(u(this.Ya,this),6e3));if(1>=wn(this.b)&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else ti(this,11)}else if((a.s||this.a==a)&&Jn(this),!O(b))for(b=t=this.ja.a.parse(b),t=0;t<b.length;t++){var e=b[t];if(this.O=e[0],e=e[1],2==this.u)if("c"==e[0]){this.H=e[1],this.ga=e[2];var n=e[3];null!=n&&(this.wa=n),null!=(e=e[5])&&h(e)&&0<e&&(this.D=1.5*e),this.o&&(e=a.a)&&((n=Fn(e,"X-Client-Wire-Protocol"))&&yn(this.b,n),this.j&&(e=Fn(e,"X-HTTP-Session-Id")))&&(this.I=e,He(this.B,this.j,e)),this.u=3,this.c&&this.c.va(),e=a,this.pa=ni(this,this.Y()?this.ga:null,this.ha),e.s?(Tn(this.b,e),(n=this.D)&&e.setTimeout(n),e.i&&(Ae(e),ke(e)),this.a=e):Qn(this),0<this.f.length&&Hn(this)}else"stop"!=e[0]&&"close"!=e[0]||ti(this,7);else 3==this.u&&("stop"==e[0]||"close"==e[0]?"stop"==e[0]?ti(this,7):qn(this):"noop"!=e[0]&&this.c&&this.c.ua(e),this.v=0)}},g.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Yn(this),oe(19))},g.na=function(a){var b=null;if(this.a==a){Jn(this),this.a=null;var t=2}else{if(!Sn(this.b,a))return;b=a.j,Tn(this.b,a),t=1}if(this.m=a.o,0!=this.u)if(a.b)1==t?(b=C()-a.v,ee.dispatchEvent(new ae(ee,a.l?a.l.length:0,b,this.A)),Hn(this)):Qn(this);else{var e=a.c;if(3==e||0==e&&0<this.m||!(1==t&&function(a,b){return!(wn(a.b)>=a.b.f-(a.h?1:0))&&(a.h?(a.f=b.j.concat(a.f),!0):!(1==a.u||2==a.u||a.A>=(a.Oa?0:a.Pa))&&(a.h=se(u(a.Ha,a,b),Zn(a,a.A)),a.A++,!0))}(this,a)||2==t&&Yn(this)))switch(b&&0<b.length&&(a=this.b,a.c=a.c.concat(b)),e){case 1:ti(this,5);break;case 4:ti(this,10);break;case 3:ti(this,6);break;default:ti(this,2)}}},g.eb=function(a){oe(a?2:1)},g.$=function(a){if(a&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(a=new An(this.Ka)).F=this.R,a},g.ma=function(){return!!this.c&&!0},g.Y=function(){return this.R},(g=ii.prototype).va=function(){},g.ua=function(){},g.ta=function(){},g.sa=function(){},g.Sa=function(){},ri.prototype.a=function(a,b){return new oi(a,b)},I(oi,Ot),(g=oi.prototype).addEventListener=function(a,b,t,e){oi.N.addEventListener.call(this,a,b,t,e)},g.removeEventListener=function(a,b,t,e){oi.N.removeEventListener.call(this,a,b,t,e)},g.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var a=this.a,b=this.m,t=this.g,e=this.b||void 0;oe(0),a.ha=t,a.V=e||{},a.o&&(a.F.b=[],a.F.a=!1),a.w=new ln(a),null===a.g&&(a.w.h=a.i),t=b,a.g&&a.i&&(t=jn(b,a.g,a.i)),(a=a.w).i=t,b=ni(a.a,null,a.i),oe(3),null!=(t=a.a.F.b)?(a.f=t[0],a.M=1,hn(a)):(We(b,"MODE","init"),!a.a.o&&a.a.j&&We(b,"X-HTTP-Session-Id",a.a.j),a.b=new ye(a,void 0,void 0),a.b.h=a.h,_e(a.b,b,!1,null),a.M=0)},g.close=function(){qn(this.a)},g.Wa=function(a){if(l(a)){var b={};b.__data__=a,$n(this.a,b)}else this.h?((b={}).__data__=Pt(a),$n(this.a,b)):$n(this.a,a)},g.G=function(){this.a.c=null,delete this.f,qn(this.a),delete this.a,oi.N.G.call(this)},I(ai,me),I(si,ve),I(ui,ii),ui.prototype.va=function(){this.a.dispatchEvent("a")},ui.prototype.ua=function(a){this.a.dispatchEvent(new ai(a))},ui.prototype.ta=function(a){this.a.dispatchEvent(new si(a))},ui.prototype.sa=function(){this.a.dispatchEvent("b")};var ci=_((function(a,b){function t(){}t.prototype=a.prototype;var e=new t;return a.apply(e,Array.prototype.slice.call(arguments,1)),e}),ri);ri.prototype.createWebChannel=ri.prototype.a,oi.prototype.send=oi.prototype.Wa,oi.prototype.open=oi.prototype.Va,oi.prototype.close=oi.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",de.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",Ot.prototype.listen=Ot.prototype.za,An.prototype.listenOnce=An.prototype.Aa,An.prototype.getLastError=An.prototype.Xa,An.prototype.getLastErrorCode=An.prototype.ya,An.prototype.getStatus=An.prototype.T,An.prototype.getResponseJson=An.prototype.Ua,An.prototype.getResponseText=An.prototype.aa,An.prototype.send=An.prototype.ca;var hi={createWebChannelTransport:ci,ErrorCode:ue,EventType:ce,WebChannel:de,XhrIo:An},di=hi.createWebChannelTransport,fi=hi.ErrorCode,pi=hi.EventType,mi=hi.WebChannel,vi=hi.XhrIo;e.default=hi}.call(this,n(19))},188:function(t,e,n){"use strict";n.r(e);var r=n(10),o=n(28),c=m("computed",o.e),l=m("computed",o.c),h=m("methods",o.b),d=m("methods",o.d);function f(t,e){function n(e){return function(a,b){if("string"==typeof b){var n=b,r=a;return e(n,{namespace:t})(r,n)}var o=a,c=function(a,b){var t={};return[a,b].forEach((function(e){Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t}(b||{},{namespace:t});return e(o,c)}}return e?(console.warn("[vuex-class] passing the 2nd argument to `namespace` function is deprecated. pass only namespace string instead."),n(e)):{State:n(c),Getter:n(l),Mutation:n(d),Action:n(h)}}function m(t,e){function n(map,n){return Object(r.createDecorator)((function(r,o){r[t]||(r[t]={});var c,l=((c={})[o]=map,c);r[t][o]=void 0!==n?e(n,l)[o]:e(l)[o]}))}return function(a,b){if("string"==typeof b){var t=b,e=a;return n(t,void 0)(e,t)}return n(a,function(t){var e=t&&t.namespace;if("string"!=typeof e)return;if("/"!==e[e.length-1])return e+"/";return e}(b))}}n.d(e,"State",(function(){return c})),n.d(e,"Getter",(function(){return l})),n.d(e,"Action",(function(){return h})),n.d(e,"Mutation",(function(){return d})),n.d(e,"namespace",(function(){return f}))},2:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function h(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return h}))},3:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return o}));var r=n(2);var o=Math.sign||function(t){return t<0?-1:t>0?1:0};function c(t,path){return path.split(".").reduce((function(t,i){return t?t[i]:null}),t)}function l(t,e,n){if(!t)return-1;if(!n||"function"!=typeof n)return t.indexOf(e);for(var i=0;i<t.length;i++)if(n(t[i],e))return i;return-1}var h=function(t){return"object"===Object(r.c)(t)&&!Array.isArray(t)},d=function t(e,source){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n||!Object.assign){var o=function(t){return h(source[t])&&null!==e&&e.hasOwnProperty(t)&&h(e[t])},c=Object.getOwnPropertyNames(source).map((function(c){return Object(r.a)({},c,o(c)?t(e[c],source[c],n):source[c])})).reduce((function(a,b){return Object(r.b)({},a,{},b)}),{});return Object(r.b)({},e,{},c)}return Object.assign(e,source)},f={Android:function(){return"undefined"!=typeof window&&window.navigator.userAgent.match(/Android/i)},BlackBerry:function(){return"undefined"!=typeof window&&window.navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return"undefined"!=typeof window&&window.navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return"undefined"!=typeof window&&window.navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return"undefined"!=typeof window&&window.navigator.userAgent.match(/IEMobile/i)},any:function(){return f.Android()||f.BlackBerry()||f.iOS()||f.Opera()||f.Windows()}};function m(t){void 0!==t.remove?t.remove():void 0!==t.parentNode&&null!==t.parentNode&&t.parentNode.removeChild(t)}},33:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3),o=n(1),c={props:{type:{type:String,default:"is-dark"},message:String,duration:Number,queue:{type:Boolean,default:void 0},position:{type:String,default:"is-top",validator:function(t){return["is-top-right","is-top","is-top-left","is-bottom-right","is-bottom","is-bottom-left"].indexOf(t)>-1}},container:String},data:function(){return{isActive:!1,parentTop:null,parentBottom:null,newContainer:this.container||o.c.defaultContainerElement}},computed:{correctParent:function(){switch(this.position){case"is-top-right":case"is-top":case"is-top-left":return this.parentTop;case"is-bottom-right":case"is-bottom":case"is-bottom-left":return this.parentBottom}},transition:function(){switch(this.position){case"is-top-right":case"is-top":case"is-top-left":return{enter:"fadeInDown",leave:"fadeOut"};case"is-bottom-right":case"is-bottom":case"is-bottom-left":return{enter:"fadeInUp",leave:"fadeOut"}}}},methods:{shouldQueue:function(){return!!(void 0!==this.queue?this.queue:o.c.defaultNoticeQueue)&&(this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0)},close:function(){var t=this;clearTimeout(this.timer),this.isActive=!1,this.$emit("close"),setTimeout((function(){t.$destroy(),Object(r.e)(t.$el)}),150)},showNotice:function(){var t=this;this.shouldQueue()?setTimeout((function(){return t.showNotice()}),250):(this.correctParent.insertAdjacentElement("afterbegin",this.$el),this.isActive=!0,this.indefinite||(this.timer=setTimeout((function(){return t.close()}),this.newDuration)))},setupContainer:function(){if(this.parentTop=document.querySelector((this.newContainer?this.newContainer:"body")+">.notices.is-top"),this.parentBottom=document.querySelector((this.newContainer?this.newContainer:"body")+">.notices.is-bottom"),!this.parentTop||!this.parentBottom){this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="notices is-top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="notices is-bottom");var t=document.querySelector(this.newContainer)||document.body;t.appendChild(this.parentTop),t.appendChild(this.parentBottom),this.newContainer&&(this.parentTop.classList.add("has-custom-container"),this.parentBottom.classList.add("has-custom-container"))}}},beforeMount:function(){this.setupContainer()},mounted:function(){this.showNotice()}}},38:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return c})),n.d(e,"__rest",(function(){return l})),n.d(e,"__decorate",(function(){return h})),n.d(e,"__param",(function(){return d})),n.d(e,"__metadata",(function(){return f})),n.d(e,"__awaiter",(function(){return m})),n.d(e,"__generator",(function(){return v})),n.d(e,"__exportStar",(function(){return y})),n.d(e,"__values",(function(){return w})),n.d(e,"__read",(function(){return S})),n.d(e,"__spread",(function(){return T})),n.d(e,"__spreadArrays",(function(){return _})),n.d(e,"__await",(function(){return C})),n.d(e,"__asyncGenerator",(function(){return I})),n.d(e,"__asyncDelegator",(function(){return E})),n.d(e,"__asyncValues",(function(){return k})),n.d(e,"__makeTemplateObject",(function(){return D})),n.d(e,"__importStar",(function(){return A})),n.d(e,"__importDefault",(function(){return N}));var r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)};function o(t,b){function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var c=function(){return(c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function l(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function h(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function d(t,e){return function(n,r){e(n,r,t)}}function f(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function m(t,e,n,r){return new(n||(n=Promise))((function(o,c){function l(t){try{d(r.next(t))}catch(t){c(t)}}function h(t){try{d(r.throw(t))}catch(t){c(t)}}function d(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(l,h)}d((r=r.apply(t,e||[])).next())}))}function v(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}function y(t,e){for(var p in t)e.hasOwnProperty(p)||(e[p]=t[p])}function w(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function S(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function T(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(S(arguments[i]));return t}function _(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)e[n]=a[r];return e}function C(t){return this instanceof C?(this.v=t,this):new C(t)}function I(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(t,e||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(n=g[t](e)).value instanceof C?Promise.resolve(n.value.v).then(c,l):h(q[0][2],n)}catch(t){h(q[0][3],t)}var n}function c(t){o("next",t)}function l(t){o("throw",t)}function h(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function E(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,n){i[e]=t[e]?function(r){return(p=!p)?{value:C(t[e](r)),done:"return"===e}:n?n(r):r}:n}}function k(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=w(t),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(e){i[e]=t[e]&&function(n){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(n=t[e](n)).done,n.value)}))}}}function D(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function A(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function N(t){return t&&t.__esModule?t:{default:t}}},41:function(t,e,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?t(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return t(!1)})):t(!1))}};t.exports=r},50:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(3),o=n(1),c=n(0);const l={name:"BToast",mixins:[n(33).a],data:function(){return{newDuration:this.duration||o.c.defaultToastDuration}}};var h,d=Object(c.a)({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{"enter-active-class":t.transition.enter,"leave-active-class":t.transition.leave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"toast",class:[t.type,t.position],attrs:{"aria-hidden":!t.isActive,role:"alert"}},[n("div",{domProps:{innerHTML:t._s(t.message)}})])])},staticRenderFns:[]},void 0,l,void 0,!1,void 0,void 0,void 0),f={open:function(t){var e;"string"==typeof t&&(t={message:t});var n={position:o.c.defaultToastPosition||"is-top"};t.parent&&(e=t.parent,delete t.parent);var c=Object(r.d)(n,t);return new(("undefined"!=typeof window&&window.Vue?window.Vue:h||o.a).extend(d))({parent:e,el:document.createElement("div"),propsData:c})}},m={install:function(t){h=t,Object(c.b)(t,"toast",f)}};Object(c.d)(m),e.b=m},6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o,c=n(38),l=n(117),component=n(180),h=n(118),d=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),f=new l.ErrorFactory("app","Firebase",d),m="@firebase/app",v="0.5.3",y="[DEFAULT]",w=((o={})[m]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),S=new h.Logger("@firebase/app"),T=function(){function t(t,e,n){var r,o,h=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=l.deepCopy(t),this.container=new component.ComponentContainer(e.name),this._addComponent(new component.Component("app",(function(){return h}),"PUBLIC"));try{for(var d=c.__values(this.firebase_.INTERNAL.components.values()),f=d.next();!f.done;f=d.next()){var m=f.value;this._addComponent(m)}}catch(t){r={error:t}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=y),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=y),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(component){try{this.container.addComponent(component)}catch(t){S.debug("Component "+component.name+" failed to register with FirebaseApp "+this.name,t)}},t.prototype._addOrOverwriteComponent=function(component){this.container.addOrOverwriteComponent(component)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw f.create("app-deleted",{appName:this.name_})},t}();T.prototype.name&&T.prototype.options||T.prototype.delete||console.log("dc");var _="7.8.0";var C=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,o){void 0===o&&(o={});if("object"!=typeof o||null===o){o={name:o}}var c=o;void 0===c.name&&(c.name=y);var h=c.name;if("string"!=typeof h||!h)throw f.create("bad-app-name",{appName:String(h)});if(l.contains(e,h))throw f.create("duplicate-app",{appName:h});var d=new t(n,c,r);return e[h]=d,d},app:o,registerVersion:function(t,e,n){var r,o=null!==(r=w[t])&&void 0!==r?r:t;n&&(o+="-"+n);var c=o.match(/\s|\//),l=e.match(/\s|\//);if(c||l){var d=['Unable to register library "'+o+'" with version "'+e+'":'];return c&&d.push('library name "'+o+'" contains illegal characters (whitespace or "/")'),c&&l&&d.push("and"),l&&d.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void S.warn(d.join(" "))}h(new component.Component(o+"-version",(function(){return{library:o,version:e}}),"VERSION"))},apps:null,SDK_VERSION:_,INTERNAL:{registerComponent:h,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function o(t){if(t=t||y,!l.contains(e,t))throw f.create("no-app",{appName:t});return e[t]}function h(component){var h,d,m=component.name;if(n.has(m))return S.debug("There were multiple attempts to register component "+m+"."),"PUBLIC"===component.type?r[m]:null;if(n.set(m,component),"PUBLIC"===component.type){var v=function(t){if(void 0===t&&(t=o()),"function"!=typeof t[m])throw f.create("invalid-app-argument",{appName:m});return t[m]()};void 0!==component.serviceProps&&l.deepExtend(v,component.serviceProps),r[m]=v,t.prototype[m]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,m);return n.apply(this,component.multipleInstances?t:[])}}try{for(var y=c.__values(Object.keys(e)),w=y.next();!w.done;w=y.next()){var T=w.value;e[T]._addComponent(component)}}catch(t){h={error:t}}finally{try{w&&!w.done&&(d=y.return)&&d.call(y)}finally{if(h)throw h.error}}return"PUBLIC"===component.type?r[m]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),o.App=t,r)}(T);return e.INTERNAL=c.__assign(c.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){l.deepExtend(e,t)},createSubscribe:l.createSubscribe,ErrorFactory:l.ErrorFactory,deepExtend:l.deepExtend}),e}(),I=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e,component=t.getComponent();return"VERSION"===(null===(e=component)||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(l.isBrowser()&&void 0!==self.firebase){S.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var E=self.firebase.SDK_VERSION;E&&E.indexOf("LITE")>=0&&S.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var k=C.initializeApp;C.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return l.isNode()&&S.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),k.apply(void 0,t)};var D=C;!function(t,e){t.INTERNAL.registerComponent(new component.Component("platform-logger",(function(t){return new I(t)}),"PRIVATE")),t.registerVersion(m,v,e),t.registerVersion("fire-js","")}(D),e.default=D,e.firebase=D},73:function(t,e,n){"use strict";var r,o=(r=n(6))&&"object"==typeof r&&"default"in r?r.default:r;o.registerVersion("firebase","7.8.0","app"),t.exports=o},75:function(t,e,n){!function(t,e,n,r,o){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var c="default"in r?r.default:r;c.registerHooks(["beforeRouteEnter","beforeRouteUpdate","beforeRouteLeave","asyncData","fetch","head","key","layout","loading","middleware","scrollToTop","transition","validate","watchQuery","meta"]);var l=/\B([A-Z])/g,h=function(t){return t.replace(l,"-$1").toLowerCase()};t.Vue=e,Object.defineProperty(t,"Emit",{enumerable:!0,get:function(){return n.Emit}}),Object.defineProperty(t,"Inject",{enumerable:!0,get:function(){return n.Inject}}),Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return n.Model}}),Object.defineProperty(t,"Prop",{enumerable:!0,get:function(){return n.Prop}}),Object.defineProperty(t,"PropSync",{enumerable:!0,get:function(){return n.PropSync}}),Object.defineProperty(t,"Provide",{enumerable:!0,get:function(){return n.Provide}}),Object.defineProperty(t,"Ref",{enumerable:!0,get:function(){return n.Ref}}),Object.defineProperty(t,"Watch",{enumerable:!0,get:function(){return n.Watch}}),t.Component=c,Object.defineProperty(t,"mixins",{enumerable:!0,get:function(){return r.mixins}}),Object.defineProperty(t,"Action",{enumerable:!0,get:function(){return o.Action}}),Object.defineProperty(t,"Getter",{enumerable:!0,get:function(){return o.Getter}}),Object.defineProperty(t,"Mutation",{enumerable:!0,get:function(){return o.Mutation}}),Object.defineProperty(t,"State",{enumerable:!0,get:function(){return o.State}}),Object.defineProperty(t,"namespace",{enumerable:!0,get:function(){return o.namespace}}),t.NextTick=function(t){return function(e,n,r){var o=r.value;r.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!1!==o.apply(this,e)){if("function"!=typeof this[t])throw new TypeError("must be a method name");this.$nextTick(this[t])}}}},t.Off=function(t,e){return function(n,r,o){r=h(r);var c=o.value;o.value=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!1!==c.apply(this,n))if(e){if("function"!=typeof this[e])throw new TypeError("must be a method name");this.$off(t||r,this[e])}else t?this.$off(t||r):this.$off()}}},t.On=function(t){return r.createDecorator((function(e,n){var r=h(n);"function"!=typeof e.created&&(e.created=function(){});var o=e.created;e.created=function(){o(),void 0!==e.methods&&this.$on(t||r,e.methods[n])}}))},t.Once=function(t){return r.createDecorator((function(e,n){var r=h(n);"function"!=typeof e.created&&(e.created=function(){});var o=e.created;e.created=function(){o(),void 0!==e.methods&&this.$once(t||r,e.methods[n])}}))},Object.defineProperty(t,"__esModule",{value:!0})}(e,n(4),n(131),n(10),n(188))},91:function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var content=function(t,e){var content=t[1]||"",n=t[3];if(!n)return content;if(e&&"function"==typeof btoa){var r=(c=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(data," */")),o=n.sources.map((function(source){return"/*# sourceURL=".concat(n.sourceRoot).concat(source," */")}));return[content].concat(o).concat([r]).join("\n")}var c,l,data;return[content].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(content,"}"):content})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i=0;i<t.length;i++){var r=[].concat(t[i]);n&&(r[2]?r[2]="".concat(n," and ").concat(r[2]):r[2]=n),e.push(r)}},e}},92:function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],c=o[0],l={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}n.r(e),n.d(e,"default",(function(){return w}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,h=0,d=!1,f=function(){},m=null,v="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function w(t,e,n,o){d=n,m=o||{};var l=r(t,e);return S(l),function(e){for(var n=[],i=0;i<l.length;i++){var o=l[i];(h=c[o.id]).refs--,n.push(h)}e?S(l=r(t,e)):l=[];for(i=0;i<n.length;i++){var h;if(0===(h=n[i]).refs){for(var d=0;d<h.parts.length;d++)h.parts[d]();delete c[h.id]}}}}function S(t){for(var i=0;i<t.length;i++){var e=t[i],n=c[e.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](e.parts[r]);for(;r<e.parts.length;r++)n.parts.push(_(e.parts[r]));n.parts.length>e.parts.length&&(n.parts.length=e.parts.length)}else{var o=[];for(r=0;r<e.parts.length;r++)o.push(_(e.parts[r]));c[e.id]={id:e.id,refs:1,parts:o}}}}function T(){var t=document.createElement("style");return t.type="text/css",head.appendChild(t),t}function _(t){var e,n,r=document.querySelector("style["+v+'~="'+t.id+'"]');if(r){if(d)return f;r.parentNode.removeChild(r)}if(y){var o=h++;r=l||(l=T()),e=E.bind(null,r,o,!1),n=E.bind(null,r,o,!0)}else r=T(),e=k.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var C,I=(C=[],function(t,e){return C[t]=e,C.filter(Boolean).join("\n")});function E(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=I(e,o);else{var c=document.createTextNode(o),l=t.childNodes;l[e]&&t.removeChild(l[e]),l.length?t.insertBefore(c,l[e]):t.appendChild(c)}}function k(t,e){var n=e.css,r=e.media,o=e.sourceMap;if(r&&t.setAttribute("media",r),m.ssrId&&t.setAttribute(v,e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},95:function(t,e,n){"use strict";var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?t(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return t(!1)})):t(!1))}};t.exports=r}}]);